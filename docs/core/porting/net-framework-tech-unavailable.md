---
title: .NET Framework 技术在 .NET Core 上不可用
description: 了解在 .NET Core 上不可用的 .NET Framework 技术
author: cartermp
ms.date: 04/30/2019
ms.openlocfilehash: d474b694b80b2f0e74dd2916106016802f7e0c68
ms.sourcegitcommit: cbdc0f4fd39172b5191a35200c33d5030774463c
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/09/2020
ms.locfileid: "75777302"
---
# <a name="net-framework-technologies-unavailable-on-net-core"></a><span data-ttu-id="9bfd8-103">.NET Framework 技术在 .NET Core 上不可用</span><span class="sxs-lookup"><span data-stu-id="9bfd8-103">.NET Framework technologies unavailable on .NET Core</span></span>

<span data-ttu-id="9bfd8-104">一些适用于 .NET Framework 库的技术不可用于 .NET Core，例如 AppDomains、远程处理、代码访问安全性 (CAS)、安全透明度和 System.EnterpriseServices。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-104">Several technologies available to .NET Framework libraries aren't available for use with .NET Core, such as AppDomains, Remoting, Code Access Security (CAS), Security Transparency, and System.EnterpriseServices.</span></span> <span data-ttu-id="9bfd8-105">如果库依赖于这些技术中的一个或多个，请考虑使用下面所述的替代方法。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-105">If your libraries rely on one or more of these technologies, consider the alternative approaches outlined below.</span></span> <span data-ttu-id="9bfd8-106">有关 API 兼容性的详细信息，请参阅 [.NET Core 中断性变更](../compatibility/breaking-changes.md)。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-106">For more information on API compatibility, see [.NET Core breaking changes](../compatibility/breaking-changes.md).</span></span>

<span data-ttu-id="9bfd8-107">当前未实现某个 API 或技术并不因此意味着有意不对其提供支持。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-107">Just because an API or technology isn't currently implemented doesn't imply it's intentionally unsupported.</span></span> <span data-ttu-id="9bfd8-108">搜索 .NET Core 的 GitHub 存储库，查看所遇到的特定问题是否是特意设计的。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-108">Search the GitHub repositories for .NET Core to see if a particular issue you encounter is by design.</span></span> <span data-ttu-id="9bfd8-109">如果找不到此类指示器，请在 [dotnet/runtime 存储库](https://github.com/dotnet/runtime/issues)中提出问题，请求提供特定 API 和技术。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-109">If you don't find such an indicator, please file an issue in the [dotnet/runtime repository](https://github.com/dotnet/runtime/issues) to ask for specific APIs and technologies.</span></span> <span data-ttu-id="9bfd8-110">移植请求的问题会标记为[端口到核心](https://github.com/dotnet/runtime/labels/port-to-core)标签。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-110">Issues that are porting requests are marked with the [port-to-core](https://github.com/dotnet/runtime/labels/port-to-core) label.</span></span>

## <a name="appdomains"></a><span data-ttu-id="9bfd8-111">AppDomain</span><span class="sxs-lookup"><span data-stu-id="9bfd8-111">AppDomains</span></span>

<span data-ttu-id="9bfd8-112">应用程序域 (AppDomain) 可将应用相互隔离。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-112">Application domains (AppDomains) isolate apps from one another.</span></span> <span data-ttu-id="9bfd8-113">AppDomain 需要运行时支持并且通常价格昂贵。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-113">AppDomains require runtime support and are generally quite expensive.</span></span> <span data-ttu-id="9bfd8-114">不支持创建其他应用域，也尚未计划在将来添加此功能。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-114">Creating additional app domains is not supported, and there are no plans to add this capability in the future.</span></span> <span data-ttu-id="9bfd8-115">对于代码隔离，将流程或容器用作备用。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-115">For code isolation, use separate processes or containers as an alternative.</span></span> <span data-ttu-id="9bfd8-116">若要动态加载程序集，请使用 <xref:System.Runtime.Loader.AssemblyLoadContext> 类。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-116">To dynamically load assemblies, use the <xref:System.Runtime.Loader.AssemblyLoadContext> class.</span></span>

<span data-ttu-id="9bfd8-117">.NET Core 公开了一些 <xref:System.AppDomain> API 曲面，以便可以更轻松地从 .NET Framework 进行代码迁移。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-117">To make code migration from .NET Framework easier, .NET Core exposes some of the <xref:System.AppDomain> API surface.</span></span> <span data-ttu-id="9bfd8-118">一些 API 可正常工作（例如 <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>），一些成员不会执行任何操作（例如 <xref:System.AppDomain.SetCachePath%2A>），也有一些会引发 <xref:System.PlatformNotSupportedException>（例如 <xref:System.AppDomain.CreateDomain%2A>）。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-118">Some of the APIs function normally (for example, <xref:System.AppDomain.UnhandledException?displayProperty=nameWithType>), some members do nothing (for example, <xref:System.AppDomain.SetCachePath%2A>), and some of them throw <xref:System.PlatformNotSupportedException> (for example, <xref:System.AppDomain.CreateDomain%2A>).</span></span> <span data-ttu-id="9bfd8-119">对照 [dotnet/runtime GitHub 存储库](https://github.com/dotnet/runtime)中的 [`System.AppDomain` 引用源](https://github.com/dotnet/runtime/blob/master/src/libraries/System.Private.CoreLib/src/System/AppDomain.cs)检查所使用的类型。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-119">Check the types you use against the [`System.AppDomain` reference source](https://github.com/dotnet/runtime/blob/master/src/libraries/System.Private.CoreLib/src/System/AppDomain.cs) in the [dotnet/runtime GitHub repository](https://github.com/dotnet/runtime).</span></span> <span data-ttu-id="9bfd8-120">确保选择与已实现的版本相匹配的分支。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-120">Make sure to select the branch that matches your implemented version.</span></span>

## <a name="remoting"></a><span data-ttu-id="9bfd8-121">远程处理</span><span class="sxs-lookup"><span data-stu-id="9bfd8-121">Remoting</span></span>

<span data-ttu-id="9bfd8-122">.NET 远程处理被认为是存在问题的体系结构。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-122">.NET Remoting was identified as a problematic architecture.</span></span> <span data-ttu-id="9bfd8-123">它用于进行跨 AppDomain 的通信，该通信现已不再受支持。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-123">It's used for cross-AppDomain communication, which is no longer supported.</span></span> <span data-ttu-id="9bfd8-124">同样，远程处理也需要运行时支持，进行维护的成本较高。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-124">Also, Remoting requires runtime support, which is expensive to maintain.</span></span> <span data-ttu-id="9bfd8-125">出于这些原因，.NET Core 不支持 .NET 远程处理，并且我们不计划在将来添加对它的支持。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-125">For these reasons, .NET Remoting isn't supported on .NET Core, and we don't plan on adding support for it in the future.</span></span>

<span data-ttu-id="9bfd8-126">对于跨进程通信，可将进程间通信 (IPC) 机制视为远程处理的备用方案，如 <xref:System.IO.Pipes> 类或 <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> 类。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-126">For communication across processes, consider inter-process communication (IPC) mechanisms as an alternative to Remoting, such as the <xref:System.IO.Pipes> class or the <xref:System.IO.MemoryMappedFiles.MemoryMappedFile> class.</span></span>

<span data-ttu-id="9bfd8-127">对于跨计算机的通信，可将基于网络的解决方案用作备用方案。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-127">Across machines, use a network-based solution as an alternative.</span></span> <span data-ttu-id="9bfd8-128">最好使用低开销纯文本协议，例如 HTTP。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-128">Preferably, use a low-overhead plain text protocol, such as HTTP.</span></span> <span data-ttu-id="9bfd8-129">此处，ASP.NET Core 使用的 Web 服务器 [Kestrel Web 服务器](https://docs.microsoft.com/aspnet/core/fundamentals/servers/kestrel)是一个选择。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-129">The [Kestrel web server](https://docs.microsoft.com/aspnet/core/fundamentals/servers/kestrel), the web server used by ASP.NET Core, is an option here.</span></span> <span data-ttu-id="9bfd8-130">也可考虑将 <xref:System.Net.Sockets> 用于基于网络的跨计算机的方案。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-130">Also, consider using <xref:System.Net.Sockets> for network-based, cross-machine scenarios.</span></span> <span data-ttu-id="9bfd8-131">有关更多选项，请参阅 [.NET 开放源代码开发人员项目：消息传送](https://github.com/Microsoft/dotnet/blob/master/dotnet-developer-projects.md#messaging)。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-131">For more options, see [.NET Open Source Developer Projects: Messaging](https://github.com/Microsoft/dotnet/blob/master/dotnet-developer-projects.md#messaging).</span></span>

## <a name="code-access-security-cas"></a><span data-ttu-id="9bfd8-132">代码访问安全性 (CAS)</span><span class="sxs-lookup"><span data-stu-id="9bfd8-132">Code Access Security (CAS)</span></span>

<span data-ttu-id="9bfd8-133">沙盒依赖为托管应用程序或库使用或运行提供资源的运行时或框架进行限制，其[在 .NET Framework 上不受支持](../../framework/misc/code-access-security.md)，因此在 .NET Core 上也不受支持。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-133">Sandboxing, which relies on the runtime or the framework to constrain which resources a managed application or library uses or runs, [isn't supported on .NET Framework](../../framework/misc/code-access-security.md) and therefore is also not supported on .NET Core.</span></span> <span data-ttu-id="9bfd8-134">.NET Framework 和运行时中存在太多发生特权提升以继续将 CAS 视为安全边界的情况。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-134">There are too many cases in the .NET Framework and the runtime where an elevation of privileges occurs to continue treating CAS as a security boundary.</span></span> <span data-ttu-id="9bfd8-135">此外，CAS 使实现更加复杂，通常会对无意使用它的应用程序造成正确性-性能影响。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-135">In addition, CAS makes the implementation more complicated and often has correctness-performance implications for applications that don't intend to use it.</span></span>

<span data-ttu-id="9bfd8-136">可使用操作系统提供的安全边界，例如虚拟化、容器或具有最少特权集的用于运行进程的用户帐户。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-136">Use security boundaries provided by the operating system, such as virtualization, containers, or user accounts, for running processes with the minimum set of privileges.</span></span>

## <a name="security-transparency"></a><span data-ttu-id="9bfd8-137">安全透明度</span><span class="sxs-lookup"><span data-stu-id="9bfd8-137">Security Transparency</span></span>

<span data-ttu-id="9bfd8-138">与 CAS 相似，借助安全透明度可以以声明性方式将沙盒代码与安全关键代码隔离，但是[不再支持将它作为安全边界](../../framework/misc/security-transparent-code.md)。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-138">Similar to CAS, Security Transparency separates sandboxed code from security critical code in a declarative fashion but is [no longer supported as a security boundary](../../framework/misc/security-transparent-code.md).</span></span> <span data-ttu-id="9bfd8-139">Silverlight 大规模使用了此功能。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-139">This feature is heavily used by Silverlight.</span></span>

<span data-ttu-id="9bfd8-140">可使用操作系统提供的安全边界，例如虚拟化、容器或用于运行进程的用户帐户具有最少的一组特权。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-140">Use security boundaries provided by the operating system, such as virtualization, containers, or user accounts, for running processes with the least set of privileges.</span></span>

## <a name="systementerpriseservices"></a><span data-ttu-id="9bfd8-141">System.EnterpriseServices</span><span class="sxs-lookup"><span data-stu-id="9bfd8-141">System.EnterpriseServices</span></span>

<span data-ttu-id="9bfd8-142">.NET Core 不支持 System.EnterpriseServices (COM+)。</span><span class="sxs-lookup"><span data-stu-id="9bfd8-142">System.EnterpriseServices (COM+) is not supported by .NET Core.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9bfd8-143">后续步骤</span><span class="sxs-lookup"><span data-stu-id="9bfd8-143">Next steps</span></span>

>[!div class="nextstepaction"]
>[<span data-ttu-id="9bfd8-144">分析依赖项</span><span class="sxs-lookup"><span data-stu-id="9bfd8-144">Analyze dependencies</span></span>](third-party-deps.md)
