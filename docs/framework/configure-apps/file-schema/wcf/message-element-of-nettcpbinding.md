---
title: <netTcpBinding> 的 <message> 元素
ms.date: 03/30/2017
ms.assetid: 1d71edd9-c085-4c2e-b6d3-980c313366f9
ms.openlocfilehash: 76c4a0a30b637bc168855b091029a959b858401e
ms.sourcegitcommit: 22be09204266253d45ece46f51cc6f080f2b3fd6
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/07/2019
ms.locfileid: "73739007"
---
# <a name="message-element-of-nettcpbinding"></a><span data-ttu-id="31b2d-102">\<netTcpBinding 的 \<message > 元素 ></span><span class="sxs-lookup"><span data-stu-id="31b2d-102">\<message> element of \<netTcpBinding></span></span>
<span data-ttu-id="31b2d-103">定义使用[\<netTcpBinding >](nettcpbinding.md)配置的终结点的消息级安全性要求的类型。</span><span class="sxs-lookup"><span data-stu-id="31b2d-103">Defines the type of message-level security requirements for an endpoint configured with the [\<netTcpBinding>](nettcpbinding.md).</span></span>  
  
<span data-ttu-id="31b2d-104">[ **\<configuration>** ](../configuration-element.md)</span><span class="sxs-lookup"><span data-stu-id="31b2d-104">[**\<configuration>**](../configuration-element.md)</span></span>\
<span data-ttu-id="31b2d-105">\<system &nbsp; &nbsp;[ **>** ](system-servicemodel.md) </span><span class="sxs-lookup"><span data-stu-id="31b2d-105">&nbsp;&nbsp;[**\<system.serviceModel>**](system-servicemodel.md)</span></span>\
<span data-ttu-id="31b2d-106">&nbsp;&nbsp;&nbsp;&nbsp;[ **\<绑定**](bindings.md)</span><span class="sxs-lookup"><span data-stu-id="31b2d-106">&nbsp;&nbsp;&nbsp;&nbsp;[**\<bindings>**](bindings.md)</span></span>\
<span data-ttu-id="31b2d-107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ **\<netTcpBinding >** ](nettcpbinding.md)</span><span class="sxs-lookup"><span data-stu-id="31b2d-107">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[**\<netTcpBinding>**](nettcpbinding.md)</span></span>\
<span data-ttu-id="31b2d-108">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; **\<绑定 >** </span><span class="sxs-lookup"><span data-stu-id="31b2d-108">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**\<binding>**</span></span>\
<span data-ttu-id="31b2d-109">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[ **\<** ](security-of-nettcpbinding.md) ></span><span class="sxs-lookup"><span data-stu-id="31b2d-109">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[**\<security>**](security-of-nettcpbinding.md)</span></span>\
<span data-ttu-id="31b2d-110">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\<**消息 >**</span><span class="sxs-lookup"><span data-stu-id="31b2d-110">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**\<message>**</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="31b2d-111">语法</span><span class="sxs-lookup"><span data-stu-id="31b2d-111">Syntax</span></span>  
  
```xml  
<message algorithmSuite="System.Servicemodel.Security.SecurityAlgorithmsuite"
         clientCredentialType="None/Windows/UserName/Certificate/IssuedToken" />
```  
  
## <a name="attributes-and-elements"></a><span data-ttu-id="31b2d-112">特性和元素</span><span class="sxs-lookup"><span data-stu-id="31b2d-112">Attributes and Elements</span></span>  
 <span data-ttu-id="31b2d-113">下列各节描述了特性、子元素和父元素。</span><span class="sxs-lookup"><span data-stu-id="31b2d-113">The following sections describe attributes, child elements, and parent elements.</span></span>  
  
### <a name="attributes"></a><span data-ttu-id="31b2d-114">特性</span><span class="sxs-lookup"><span data-stu-id="31b2d-114">Attributes</span></span>  
  
|<span data-ttu-id="31b2d-115">特性</span><span class="sxs-lookup"><span data-stu-id="31b2d-115">Attribute</span></span>|<span data-ttu-id="31b2d-116">描述</span><span class="sxs-lookup"><span data-stu-id="31b2d-116">Description</span></span>|  
|---------------|-----------------|  
|`algorithmSuite`|<span data-ttu-id="31b2d-117">设置消息加密和密钥包装算法。</span><span class="sxs-lookup"><span data-stu-id="31b2d-117">Sets the message encryption and key-wrap algorithms.</span></span> <span data-ttu-id="31b2d-118">算法和密钥大小由 <xref:System.ServiceModel.Security.SecurityAlgorithmSuite> 类确定。</span><span class="sxs-lookup"><span data-stu-id="31b2d-118">The algorithms and the key sizes are determined by the <xref:System.ServiceModel.Security.SecurityAlgorithmSuite> class.</span></span> <span data-ttu-id="31b2d-119">这些算法映射到安全策略语言 (WS-SecurityPolicy) 规范中指定的算法。</span><span class="sxs-lookup"><span data-stu-id="31b2d-119">These algorithms map to those specified in the Security Policy Language (WS-SecurityPolicy) specification.</span></span><br /><br /> <span data-ttu-id="31b2d-120">下表中显示了可能的值。</span><span class="sxs-lookup"><span data-stu-id="31b2d-120">Possible values are shown in the following table.</span></span> <span data-ttu-id="31b2d-121">默认值为 `Basic256`。</span><span class="sxs-lookup"><span data-stu-id="31b2d-121">The default value is `Basic256`.</span></span><br /><br /> <span data-ttu-id="31b2d-122">如果服务绑定指定的 `algorithmSuite` 值不等于默认值，并且你使用 Svcutil.exe 生成配置文件，则不会正确生成该文件，你必须手动编辑此配置文件，将此属性设置为所需的值。</span><span class="sxs-lookup"><span data-stu-id="31b2d-122">If the service binding specifies an `algorithmSuite` value that is not equal to the default, and you generate the configuration file using Svcutil.exe, then it is not generated correctly, and you must manually edit the configuration file to set this attribute to the desired value.</span></span>|  
|`clientCredentialType`|<span data-ttu-id="31b2d-123">指定要在使用基于消息的安全性执行客户端身份验证时使用的凭据类型。</span><span class="sxs-lookup"><span data-stu-id="31b2d-123">Specifies the type of credential to be used when performing client authentication using Message-based security.</span></span> <span data-ttu-id="31b2d-124">下表中显示了可能的值。</span><span class="sxs-lookup"><span data-stu-id="31b2d-124">Possible values are shown in the following table.</span></span> <span data-ttu-id="31b2d-125">默认值为 `UserName`。</span><span class="sxs-lookup"><span data-stu-id="31b2d-125">The default value is `UserName`.</span></span> <span data-ttu-id="31b2d-126">此属性的类型为 <xref:System.ServiceModel.MessageCredentialType>。</span><span class="sxs-lookup"><span data-stu-id="31b2d-126">This attribute is of type <xref:System.ServiceModel.MessageCredentialType>.</span></span>|  
  
## <a name="algorithmsuite-attribute"></a><span data-ttu-id="31b2d-127">algorithmSuite 属性</span><span class="sxs-lookup"><span data-stu-id="31b2d-127">algorithmSuite Attribute</span></span>  
  
|<span data-ttu-id="31b2d-128">“值”</span><span class="sxs-lookup"><span data-stu-id="31b2d-128">Value</span></span>|<span data-ttu-id="31b2d-129">描述</span><span class="sxs-lookup"><span data-stu-id="31b2d-129">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="31b2d-130">Basic128</span><span class="sxs-lookup"><span data-stu-id="31b2d-130">Basic128</span></span>|<span data-ttu-id="31b2d-131">使用 Aes128 加密，对消息摘要使用 Sha1，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-131">Use Aes128 encryption, Sha1 for message digest, and Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-132">Basic192</span><span class="sxs-lookup"><span data-stu-id="31b2d-132">Basic192</span></span>|<span data-ttu-id="31b2d-133">使用 Aes192 加密，对消息摘要使用 Sha1，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-133">Use Aes192 encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-134">Basic256</span><span class="sxs-lookup"><span data-stu-id="31b2d-134">Basic256</span></span>|<span data-ttu-id="31b2d-135">使用 Aes256 加密，对消息摘要使用 Sha1，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-135">Use Aes256 encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-136">Basic256Rsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-136">Basic256Rsa15</span></span>|<span data-ttu-id="31b2d-137">对消息加密使用 Aes256，对消息摘要使用 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-137">Use Aes256 for message encryption, Sha1 for message digest and Rsa15 for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-138">Basic192Rsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-138">Basic192Rsa15</span></span>|<span data-ttu-id="31b2d-139">对消息加密使用 Aes192，对消息摘要使用 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-139">Use Aes192 for message encryption, Sha1 for message digest and Rsa15 for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-140">TripleDes</span><span class="sxs-lookup"><span data-stu-id="31b2d-140">TripleDes</span></span>|<span data-ttu-id="31b2d-141">使用 TripleDes 加密，对消息摘要使用 Sha1，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-141">Use TripleDes encryption, Sha1 for message digest, Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-142">Basic128Rsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-142">Basic128Rsa15</span></span>|<span data-ttu-id="31b2d-143">对消息加密使用 Aes128，对消息摘要使用 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-143">Use Aes128 for message encryption, Sha1 for message digest and Rsa15 for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-144">TripleDesRsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-144">TripleDesRsa15</span></span>|<span data-ttu-id="31b2d-145">使用 TripleDes 加密，对消息摘要使用 Sha1，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-145">Use TripleDes encryption, Sha1 for message digest and Rsa15 for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-146">Basic128Sha256</span><span class="sxs-lookup"><span data-stu-id="31b2d-146">Basic128Sha256</span></span>|<span data-ttu-id="31b2d-147">对消息加密使用 Aes256，对消息摘要使用 Sha256，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-147">Use Aes256 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-148">Basic192Sha256</span><span class="sxs-lookup"><span data-stu-id="31b2d-148">Basic192Sha256</span></span>|<span data-ttu-id="31b2d-149">对消息加密使用 Aes192，对消息摘要使用 Sha256，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-149">Use Aes192 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-150">Basic256Sha256</span><span class="sxs-lookup"><span data-stu-id="31b2d-150">Basic256Sha256</span></span>|<span data-ttu-id="31b2d-151">对消息加密使用 Aes256，对消息摘要使用 Sha256，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-151">Use Aes256 for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-152">TripleDesSha256</span><span class="sxs-lookup"><span data-stu-id="31b2d-152">TripleDesSha256</span></span>|<span data-ttu-id="31b2d-153">对消息加密使用 TripleDes，对消息摘要使用 Sha256，对密钥包装使用 Rsa-oaep-mgf1p。</span><span class="sxs-lookup"><span data-stu-id="31b2d-153">Use TripleDes for message encryption, Sha256 for message digest and Rsa-oaep-mgf1p for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-154">Basic128Sha256Rsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-154">Basic128Sha256Rsa15</span></span>|<span data-ttu-id="31b2d-155">对消息加密使用 Aes128，对消息摘要使用 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-155">Use Aes128 for message encryption, Sha256 for message digest and Rsa15 for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-156">Basic192Sha256Rsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-156">Basic192Sha256Rsa15</span></span>|<span data-ttu-id="31b2d-157">对消息加密使用 Aes192，对消息摘要使用 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-157">Use Aes192 for message encryption, Sha256 for message digest and Rsa15 for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-158">Basic256Sha256Rsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-158">Basic256Sha256Rsa15</span></span>|<span data-ttu-id="31b2d-159">对消息加密使用 Aes256，对消息摘要使用 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-159">Use Aes256 for message encryption, Sha256 for message digest and Rsa15 for key wrap.</span></span>|  
|<span data-ttu-id="31b2d-160">TripleDesSha256Rsa15</span><span class="sxs-lookup"><span data-stu-id="31b2d-160">TripleDesSha256Rsa15</span></span>|<span data-ttu-id="31b2d-161">对消息加密使用 TripleDes，对消息摘要使用 Sha256，对密钥包装使用 Rsa15。</span><span class="sxs-lookup"><span data-stu-id="31b2d-161">Use TripleDes for message encryption, Sha256 for message digest and Rsa15 for key wrap.</span></span>|  
  
## <a name="clientcredentialtype-attribute"></a><span data-ttu-id="31b2d-162">clientCredentialType 属性</span><span class="sxs-lookup"><span data-stu-id="31b2d-162">clientCredentialType Attribute</span></span>  
  
|<span data-ttu-id="31b2d-163">“值”</span><span class="sxs-lookup"><span data-stu-id="31b2d-163">Value</span></span>|<span data-ttu-id="31b2d-164">描述</span><span class="sxs-lookup"><span data-stu-id="31b2d-164">Description</span></span>|  
|-----------|-----------------|  
|<span data-ttu-id="31b2d-165">None</span><span class="sxs-lookup"><span data-stu-id="31b2d-165">None</span></span>|<span data-ttu-id="31b2d-166">允许服务与匿名客户端交互。</span><span class="sxs-lookup"><span data-stu-id="31b2d-166">This allows the service to interact with anonymous clients.</span></span> <span data-ttu-id="31b2d-167">对于服务，这表示服务不需要任何客户端凭据。</span><span class="sxs-lookup"><span data-stu-id="31b2d-167">On the service, this indicates that the service does not require any client credential.</span></span> <span data-ttu-id="31b2d-168">对于客户端，这表示客户端不提供任何客户端凭据。</span><span class="sxs-lookup"><span data-stu-id="31b2d-168">On the client, this indicates that the client does not provide any client credential.</span></span>|  
|<span data-ttu-id="31b2d-169">Windows</span><span class="sxs-lookup"><span data-stu-id="31b2d-169">Windows</span></span>|<span data-ttu-id="31b2d-170">允许 SOAP 交换在已通过身份验证的 Windows 凭据上下文中执行。</span><span class="sxs-lookup"><span data-stu-id="31b2d-170">Allows the SOAP exchanges to be under the authenticated context of a Windows credential.</span></span>|  
|<span data-ttu-id="31b2d-171">UserName</span><span class="sxs-lookup"><span data-stu-id="31b2d-171">UserName</span></span>|<span data-ttu-id="31b2d-172">允许服务要求使用 UserName 凭据对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="31b2d-172">Allows the service to require that the client be authenticated using a UserName credential.</span></span> <span data-ttu-id="31b2d-173">WCF 不支持发送密码摘要，也不支持使用密码派生密钥并使用此类密钥来实现消息安全性。</span><span class="sxs-lookup"><span data-stu-id="31b2d-173">WCF does not support sending a password digest or deriving keys using password and using such keys for message security.</span></span> <span data-ttu-id="31b2d-174">因此，在使用用户名凭据时，WCF 会强制保护传输。</span><span class="sxs-lookup"><span data-stu-id="31b2d-174">As such, WCF enforces that the transport is secured when using UserName credentials.</span></span> <span data-ttu-id="31b2d-175">这种凭据模式将产生可互操作的交换或不可互操作的协商，具体取决于 `negotiateServiceCredential` 属性。</span><span class="sxs-lookup"><span data-stu-id="31b2d-175">This credential mode results in either an interoperable exchange or a non-interoperable negotiation based on the `negotiateServiceCredential` attribute.</span></span>|  
|<span data-ttu-id="31b2d-176">证书</span><span class="sxs-lookup"><span data-stu-id="31b2d-176">Certificate</span></span>|<span data-ttu-id="31b2d-177">允许服务要求使用证书对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="31b2d-177">Allows the service to require that the client be authenticated using a certificate.</span></span> <span data-ttu-id="31b2d-178">如果使用消息安全模式并且将 `negotiateServiceCredential` 属性设置为 `false`，则必须向客户端提供服务证书。</span><span class="sxs-lookup"><span data-stu-id="31b2d-178">If message security mode is used and the `negotiateServiceCredential` attribute is set to `false`, the client must be provisioned with the service certificate.</span></span>|  
|<span data-ttu-id="31b2d-179">IssuedToken</span><span class="sxs-lookup"><span data-stu-id="31b2d-179">IssuedToken</span></span>|<span data-ttu-id="31b2d-180">指定自定义令牌，该令牌通常由安全令牌服务 (STS) 颁发。</span><span class="sxs-lookup"><span data-stu-id="31b2d-180">Specifies a custom token, usually issued by a Security Token Service (STS).</span></span>|  
  
### <a name="child-elements"></a><span data-ttu-id="31b2d-181">子元素</span><span class="sxs-lookup"><span data-stu-id="31b2d-181">Child Elements</span></span>  
 <span data-ttu-id="31b2d-182">None</span><span class="sxs-lookup"><span data-stu-id="31b2d-182">None</span></span>  
  
### <a name="parent-elements"></a><span data-ttu-id="31b2d-183">父元素</span><span class="sxs-lookup"><span data-stu-id="31b2d-183">Parent Elements</span></span>  
  
|<span data-ttu-id="31b2d-184">元素</span><span class="sxs-lookup"><span data-stu-id="31b2d-184">Element</span></span>|<span data-ttu-id="31b2d-185">描述</span><span class="sxs-lookup"><span data-stu-id="31b2d-185">Description</span></span>|  
|-------------|-----------------|  
|[<span data-ttu-id="31b2d-186">\<security ></span><span class="sxs-lookup"><span data-stu-id="31b2d-186">\<security></span></span>](security-of-nettcpbinding.md)|<span data-ttu-id="31b2d-187">定义 <xref:System.ServiceModel.Configuration.NetTcpBindingElement>的安全功能。</span><span class="sxs-lookup"><span data-stu-id="31b2d-187">Defines the security capabilities for the <xref:System.ServiceModel.Configuration.NetTcpBindingElement>.</span></span>|  
  
## <a name="remarks"></a><span data-ttu-id="31b2d-188">备注</span><span class="sxs-lookup"><span data-stu-id="31b2d-188">Remarks</span></span>  
 <span data-ttu-id="31b2d-189">消息使用消息级安全性实现 SOAP 消息的完整性和保密性，还用于通信对等方的相互身份验证。</span><span class="sxs-lookup"><span data-stu-id="31b2d-189">Message uses message-level security for the integrity and confidentiality of the SOAP message, and for mutual authentication of the communication peers.</span></span> <span data-ttu-id="31b2d-190">如果在绑定上选择此安全模式，则使用消息安全性绑定元素配置信道堆栈，并且 SOAP 消息可按照 WS-Security\* 标准进行保护。</span><span class="sxs-lookup"><span data-stu-id="31b2d-190">If this security mode is selected on a binding, the channel stack is configured with message security binding elements and the SOAP messages are secured in compliance with WS-Security\* standards.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="31b2d-191">请参阅</span><span class="sxs-lookup"><span data-stu-id="31b2d-191">See also</span></span>

- <xref:System.ServiceModel.MessageSecurityOverTcp>
- <xref:System.ServiceModel.Configuration.NetTcpSecurityElement.Message%2A>
- <xref:System.ServiceModel.NetTcpSecurity.Message%2A>
- <xref:System.ServiceModel.Configuration.NetTcpSecurityElement>
- [<span data-ttu-id="31b2d-192">保护服务和客户端的安全</span><span class="sxs-lookup"><span data-stu-id="31b2d-192">Securing Services and Clients</span></span>](../../../wcf/feature-details/securing-services-and-clients.md)
- [<span data-ttu-id="31b2d-193">绑定</span><span class="sxs-lookup"><span data-stu-id="31b2d-193">Bindings</span></span>](../../../wcf/bindings.md)
- [<span data-ttu-id="31b2d-194">配置系统提供的绑定</span><span class="sxs-lookup"><span data-stu-id="31b2d-194">Configuring System-Provided Bindings</span></span>](../../../wcf/feature-details/configuring-system-provided-bindings.md)
- [<span data-ttu-id="31b2d-195">使用绑定配置服务和客户端</span><span class="sxs-lookup"><span data-stu-id="31b2d-195">Using Bindings to Configure Services and Clients</span></span>](../../../wcf/using-bindings-to-configure-services-and-clients.md)
- [<span data-ttu-id="31b2d-196">\<binding ></span><span class="sxs-lookup"><span data-stu-id="31b2d-196">\<binding></span></span>](bindings.md)
