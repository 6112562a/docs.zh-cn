---
title: 与数据绑定相关的接口
ms.date: 03/30/2017
helpviewer_keywords:
- data [Windows Forms], data-binding interfaces
- INotifyPropertyChanged interface
- IBindingListView interface
- IList interface [Windows Forms], Windows Forms data binding
- IBindingList interface [Windows Forms], Windows Forms data binding
- interfaces [Windows Forms], Windows Forms data binding
- IEditableObject interface [Windows Forms], Windows Forms data binding
- data binding [Windows Forms], interfaces
- IDataErrorInfo interface [Windows Forms], Windows Forms data binding
ms.assetid: 14e49a2e-3e46-47ca-b491-70d546333277
ms.openlocfilehash: 4e40f7ec1922cdf43e6a0b8f5734acaaeefbc514
ms.sourcegitcommit: 8a0fe8a2227af612f8b8941bdb8b19d6268748e7
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/03/2019
ms.locfileid: "71834592"
---
# <a name="interfaces-related-to-data-binding"></a><span data-ttu-id="a7e5d-102">与数据绑定相关的接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-102">Interfaces Related to Data Binding</span></span>

<span data-ttu-id="a7e5d-103">使用 ADO.NET，可以创建许多不同的数据结构，以满足应用程序的绑定需求和正在处理的数据的需要。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-103">With ADO.NET, you can create many different data structures to suit the binding needs of your application and the data you are working with.</span></span> <span data-ttu-id="a7e5d-104">你可能希望创建自己的类，以便在 Windows 窗体中提供或使用数据。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-104">You may want to create your own classes that provide or consume data in Windows Forms.</span></span> <span data-ttu-id="a7e5d-105">这些对象可以提供各种级别的功能和复杂性，从基本的数据绑定，到提供设计时支持、错误检查、更改通知，甚至是支持对数据本身所做更改的结构化回退。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-105">These objects can offer varying levels of functionality and complexity, from basic data binding, to providing design-time support, error checking, change notification, or even support for a structured rollback of the changes made to the data itself.</span></span>

## <a name="consumers-of-data-binding-interfaces"></a><span data-ttu-id="a7e5d-106">数据绑定接口的使用者</span><span class="sxs-lookup"><span data-stu-id="a7e5d-106">Consumers of Data-Binding Interfaces</span></span>

<span data-ttu-id="a7e5d-107">以下各节描述了两组接口对象。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-107">The following sections describe two groups of interface objects.</span></span> <span data-ttu-id="a7e5d-108">第一组列出数据源作者在数据源上实现的接口。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-108">The first group lists interfaces that are implemented on data sources by data source authors.</span></span> <span data-ttu-id="a7e5d-109">这些接口旨在由数据源使用者使用，在多数情况下，这些使用者是 Windows 窗体控件或组件。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-109">These interfaces are designed to be consumed by data source consumers, which are in most cases Windows Forms controls or components.</span></span> <span data-ttu-id="a7e5d-110">第二组列出面向组件作者设计的接口。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-110">The second group lists interfaces designed for use by component authors.</span></span> <span data-ttu-id="a7e5d-111">组件作者在创建支持数据绑定的组件时使用这些接口，以便它们能够被 Windows 窗体数据绑定引擎使用。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-111">Component authors use these interfaces when they are creating a component that supports data binding to be consumed by the Windows Forms data-binding engine.</span></span> <span data-ttu-id="a7e5d-112">可以在与窗体关联的类中实现这些接口以启用数据绑定；每种情况都表示一个类，该类所实现的接口支持与数据进行交互。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-112">You can implement these interfaces within classes associated with your form to enable data binding; each case presents a class that implements an interface that enables interaction with data.</span></span> <span data-ttu-id="a7e5d-113">Visual Studio 快速应用程序开发（RAD）数据设计体验工具已充分利用此功能。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-113">Visual Studio rapid application development (RAD) data design experience tools already take advantage of this functionality.</span></span>

### <a name="interfaces-for-implementation-by-data-source-authors"></a><span data-ttu-id="a7e5d-114">要由数据源作者实现的接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-114">Interfaces for Implementation by Data Source Authors</span></span>

<span data-ttu-id="a7e5d-115">下列接口设计为由 Windows 窗体控件使用：</span><span class="sxs-lookup"><span data-stu-id="a7e5d-115">The following interfaces are designed to be consumed by Windows Forms controls:</span></span>

- <span data-ttu-id="a7e5d-116"><xref:System.Collections.IList> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-116"><xref:System.Collections.IList> interface</span></span>

  <span data-ttu-id="a7e5d-117">实现 <xref:System.Collections.IList> 接口的类可以是 <xref:System.Array>、<xref:System.Collections.ArrayList>或 <xref:System.Collections.CollectionBase>。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-117">A class that implements the <xref:System.Collections.IList> interface could be an <xref:System.Array>, <xref:System.Collections.ArrayList>, or <xref:System.Collections.CollectionBase>.</span></span> <span data-ttu-id="a7e5d-118">这些是 <xref:System.Object>类型的项的索引列表。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-118">These are indexed lists of items of type <xref:System.Object>.</span></span> <span data-ttu-id="a7e5d-119">这些列表必须包含同源类型，因为索引中的第一项确定类型。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-119">These lists must contain homogenous types, because the first item of the index determines the type.</span></span> <span data-ttu-id="a7e5d-120"><xref:System.Collections.IList> 仅在运行时可用于绑定。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-120"><xref:System.Collections.IList> would be available for binding only at run time.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-121">如果要创建与 Windows 窗体绑定的业务对象列表，则应考虑使用 <xref:System.ComponentModel.BindingList%601>。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-121">If you want to create a list of business objects for binding with Windows Forms, you should consider using the <xref:System.ComponentModel.BindingList%601>.</span></span> <span data-ttu-id="a7e5d-122"><xref:System.ComponentModel.BindingList%601> 是一种可扩展的类，可实现双向 Windows 窗体数据绑定所需的主要接口。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-122">The <xref:System.ComponentModel.BindingList%601> is an extensible class that implements the primary interfaces required for two-way Windows Forms data binding.</span></span>

- <span data-ttu-id="a7e5d-123"><xref:System.ComponentModel.IBindingList> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-123"><xref:System.ComponentModel.IBindingList> interface</span></span>

  <span data-ttu-id="a7e5d-124">实现 <xref:System.ComponentModel.IBindingList> 接口的类提供更高级别的数据绑定功能。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-124">A class that implements the <xref:System.ComponentModel.IBindingList> interface provides a much higher level of data-binding functionality.</span></span> <span data-ttu-id="a7e5d-125">此实现在列表项更改时（例如，客户列表中的第三项更改了 Address 字段）和列表本身更改时（例如，列表中项的数量增加或减少）都提供基本的排序功能和更改通知。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-125">This implementation offers you basic sorting capabilities and change notification, both for when the list items change (for example, the third item in a list of customers has a change to the Address field), as well as when the list itself changes (for example, the number of items in the list increases or decreases).</span></span> <span data-ttu-id="a7e5d-126">如果计划将多个控件绑定到同一个数据，但是希望将在其中某个控件中进行的数据更改传播到其他绑定控件，更改通知就非常重要。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-126">Change notification is important if you plan to have multiple controls bound to the same data, and you want data changes made in one of the controls to propagate to the other bound controls.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-127">通过 <xref:System.ComponentModel.IBindingList.SupportsChangeNotification%2A> 属性为 <xref:System.ComponentModel.IBindingList> 接口启用更改通知，`true`时，将引发 <xref:System.ComponentModel.IBindingList.ListChanged> 事件，指示列表已更改或列表中的项已更改。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-127">Change notification is enabled for the <xref:System.ComponentModel.IBindingList> interface through the <xref:System.ComponentModel.IBindingList.SupportsChangeNotification%2A> property which, when `true`, raises a <xref:System.ComponentModel.IBindingList.ListChanged> event, indicating the list changed or an item in the list changed.</span></span>

  <span data-ttu-id="a7e5d-128">更改类型由 <xref:System.ComponentModel.ListChangedEventArgs> 参数的 <xref:System.ComponentModel.ListChangedType> 属性描述。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-128">The type of change is described by the <xref:System.ComponentModel.ListChangedType> property of the <xref:System.ComponentModel.ListChangedEventArgs> parameter.</span></span> <span data-ttu-id="a7e5d-129">因此，当数据模型进行更新时，任何依赖视图（例如，绑定到同一个数据源的其他控件）也会进行更新。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-129">Hence, whenever the data model is updated, any dependent views, such as other controls bound to the same data source, will also be updated.</span></span> <span data-ttu-id="a7e5d-130">但是，当列表中包含的对象发生更改时，必须通知列表，以便列表能够引发 <xref:System.ComponentModel.IBindingList.ListChanged> 事件。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-130">However, objects contained within the list will have to notify the list when they change so that the list can raise the <xref:System.ComponentModel.IBindingList.ListChanged> event.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-131"><xref:System.ComponentModel.BindingList%601> 提供 <xref:System.ComponentModel.IBindingList> 接口的泛型实现。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-131">The <xref:System.ComponentModel.BindingList%601> provides a generic implementation of the <xref:System.ComponentModel.IBindingList> interface.</span></span>

- <span data-ttu-id="a7e5d-132"><xref:System.ComponentModel.IBindingListView> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-132"><xref:System.ComponentModel.IBindingListView> interface</span></span>

  <span data-ttu-id="a7e5d-133">实现 <xref:System.ComponentModel.IBindingListView> 接口的类提供 <xref:System.ComponentModel.IBindingList>的实现的所有功能，以及筛选和高级排序功能。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-133">A class that implements the <xref:System.ComponentModel.IBindingListView> interface provides all the functionality of an implementation of <xref:System.ComponentModel.IBindingList>, as well as filtering and advanced sorting functionality.</span></span> <span data-ttu-id="a7e5d-134">此实现使用属性描述符-方向对提供基于字符串的筛选和多列排序能力。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-134">This implementation offers string-based filtering, and multicolumn sorting with property descriptor-direction pairs.</span></span>

- <span data-ttu-id="a7e5d-135"><xref:System.ComponentModel.IEditableObject> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-135"><xref:System.ComponentModel.IEditableObject> interface</span></span>

  <span data-ttu-id="a7e5d-136">实现 <xref:System.ComponentModel.IEditableObject> 接口的类允许对象控制对该对象进行的更改是永久性的。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-136">A class that implements the <xref:System.ComponentModel.IEditableObject> interface allows an object to control when changes to that object are made permanent.</span></span> <span data-ttu-id="a7e5d-137">此实现提供了 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>、<xref:System.ComponentModel.IEditableObject.EndEdit%2A>和 <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> 方法，使您能够回滚对对象所做的更改。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-137">This implementation affords you the <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>, <xref:System.ComponentModel.IEditableObject.EndEdit%2A>, and <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> methods, which enable you to roll back changes made to the object.</span></span> <span data-ttu-id="a7e5d-138">下面简要说明了 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>、<xref:System.ComponentModel.IEditableObject.EndEdit%2A>和 <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> 方法的功能，以及它们彼此之间的相互结合，以实现对数据所做更改的可能回滚：</span><span class="sxs-lookup"><span data-stu-id="a7e5d-138">Following is a brief explanation of the functioning of the <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>, <xref:System.ComponentModel.IEditableObject.EndEdit%2A>, and <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> methods and how they work in conjunction with one another to enable a possible rollback of changes made to the data:</span></span>

  - <span data-ttu-id="a7e5d-139"><xref:System.ComponentModel.IEditableObject.BeginEdit%2A> 方法指示对对象的编辑开始。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-139">The <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> method signals the start of an edit on an object.</span></span> <span data-ttu-id="a7e5d-140">实现此接口的对象需要在 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> 方法调用之后存储任何更新，这样一来，如果调用 <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> 方法，就可以放弃更新。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-140">An object that implements this interface will need to store any updates after the <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> method call in such a way that the updates can be discarded if the <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> method is called.</span></span> <span data-ttu-id="a7e5d-141">在数据绑定 Windows 窗体中，可以在单个编辑事务的作用域内多次调用 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> （例如，<xref:System.ComponentModel.IEditableObject.BeginEdit%2A>、<xref:System.ComponentModel.IEditableObject.BeginEdit%2A>、<xref:System.ComponentModel.IEditableObject.EndEdit%2A>）。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-141">In data binding Windows Forms, you can call <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> multiple times within the scope of a single edit transaction (for example, <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>, <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>, <xref:System.ComponentModel.IEditableObject.EndEdit%2A>).</span></span> <span data-ttu-id="a7e5d-142"><xref:System.ComponentModel.IEditableObject> 的实现应跟踪 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> 是否已被调用，并忽略对 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>的后续调用。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-142">Implementations of <xref:System.ComponentModel.IEditableObject> should keep track of whether <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> has already been called and ignore subsequent calls to <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>.</span></span> <span data-ttu-id="a7e5d-143">由于可以多次调用此方法，因此对它的后续调用非常重要;也就是说，后续 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> 调用无法销毁已进行的更新，也无法更改第一次 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> 调用中保存的数据。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-143">Because this method can be called multiple times, it is important that subsequent calls to it are nondestructive; that is, subsequent <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> calls cannot destroy the updates that have been made or change the data that was saved on the first <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> call.</span></span>

  - <span data-ttu-id="a7e5d-144">如果对象当前处于编辑模式，则 <xref:System.ComponentModel.IEditableObject.EndEdit%2A> 方法会将自 <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> 调用后发生的任何更改推送到基础对象。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-144">The <xref:System.ComponentModel.IEditableObject.EndEdit%2A> method pushes any changes since <xref:System.ComponentModel.IEditableObject.BeginEdit%2A> was called into the underlying object, if the object is currently in edit mode.</span></span>

  - <span data-ttu-id="a7e5d-145"><xref:System.ComponentModel.IEditableObject.CancelEdit%2A> 方法丢弃对对象所做的任何更改。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-145">The <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> method discards any changes made to the object.</span></span>

  <span data-ttu-id="a7e5d-146">有关<xref:System.ComponentModel.IEditableObject.BeginEdit%2A>、<xref:System.ComponentModel.IEditableObject.EndEdit%2A> 和 <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> 方法的工作方式的详细信息，请参阅[将数据保存回数据库](/visualstudio/data-tools/save-data-back-to-the-database)。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-146">For more information about how the <xref:System.ComponentModel.IEditableObject.BeginEdit%2A>, <xref:System.ComponentModel.IEditableObject.EndEdit%2A>, and <xref:System.ComponentModel.IEditableObject.CancelEdit%2A> methods work, see [Save data back to the database](/visualstudio/data-tools/save-data-back-to-the-database).</span></span>

  <span data-ttu-id="a7e5d-147"><xref:System.Windows.Forms.DataGridView> 控件使用数据功能的这种事务性概念。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-147">This transactional notion of data functionality is used by the <xref:System.Windows.Forms.DataGridView> control.</span></span>

- <span data-ttu-id="a7e5d-148"><xref:System.ComponentModel.ICancelAddNew> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-148"><xref:System.ComponentModel.ICancelAddNew> interface</span></span>

  <span data-ttu-id="a7e5d-149">实现 <xref:System.ComponentModel.ICancelAddNew> 接口的类通常实现 <xref:System.ComponentModel.IBindingList> 接口，并允许你使用 <xref:System.ComponentModel.IBindingList.AddNew%2A> 方法回滚对数据源所做的添加。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-149">A class that implements the <xref:System.ComponentModel.ICancelAddNew> interface usually implements the <xref:System.ComponentModel.IBindingList> interface and allows you to roll back an addition made to the data source with the <xref:System.ComponentModel.IBindingList.AddNew%2A> method.</span></span> <span data-ttu-id="a7e5d-150">如果数据源实现 <xref:System.ComponentModel.IBindingList> 接口，则还应让它实现 <xref:System.ComponentModel.ICancelAddNew> 接口。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-150">If your data source implements the <xref:System.ComponentModel.IBindingList> interface, you should also have it implement the <xref:System.ComponentModel.ICancelAddNew> interface.</span></span>

- <span data-ttu-id="a7e5d-151"><xref:System.ComponentModel.IDataErrorInfo> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-151"><xref:System.ComponentModel.IDataErrorInfo> interface</span></span>

  <span data-ttu-id="a7e5d-152">实现 <xref:System.ComponentModel.IDataErrorInfo> 接口的类允许对象向绑定控件提供自定义错误信息：</span><span class="sxs-lookup"><span data-stu-id="a7e5d-152">A class that implements the <xref:System.ComponentModel.IDataErrorInfo> interface allows objects to offer custom error information to bound controls:</span></span>

  - <span data-ttu-id="a7e5d-153"><xref:System.ComponentModel.IDataErrorInfo.Error%2A> 属性返回常规错误消息文本（例如，"发生错误"）。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-153">The <xref:System.ComponentModel.IDataErrorInfo.Error%2A> property returns general error message text (for example, "An error has occurred").</span></span>

  - <span data-ttu-id="a7e5d-154"><xref:System.ComponentModel.IDataErrorInfo.Item%2A> 属性返回一个字符串，其中包含来自列的特定错误消息（例如 "`State` 列中的值无效"）。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-154">The <xref:System.ComponentModel.IDataErrorInfo.Item%2A> property returns a string with the specific error message from the column (for example, "The value in the `State` column is invalid").</span></span>

- <span data-ttu-id="a7e5d-155"><xref:System.Collections.IEnumerable> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-155"><xref:System.Collections.IEnumerable> interface</span></span>

  <span data-ttu-id="a7e5d-156">实现 <xref:System.Collections.IEnumerable> 接口的类通常由 ASP.NET 使用。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-156">A class that implements the <xref:System.Collections.IEnumerable> interface is typically consumed by ASP.NET.</span></span> <span data-ttu-id="a7e5d-157">仅可通过 <xref:System.Windows.Forms.BindingSource> 组件获取对此接口的 Windows 窗体支持。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-157">Windows Forms support for this interface is only available through the <xref:System.Windows.Forms.BindingSource> component.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-158"><xref:System.Windows.Forms.BindingSource> 组件出于绑定目的将所有 <xref:System.Collections.IEnumerable> 项复制到一个单独的列表中。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-158">The <xref:System.Windows.Forms.BindingSource> component copies all <xref:System.Collections.IEnumerable> items into a separate list for binding purposes.</span></span>

- <span data-ttu-id="a7e5d-159"><xref:System.ComponentModel.ITypedList> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-159"><xref:System.ComponentModel.ITypedList> interface</span></span>

  <span data-ttu-id="a7e5d-160">实现 <xref:System.ComponentModel.ITypedList> 接口的集合类提供控制向绑定控件公开的属性和属性集的功能。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-160">A collections class that implements the <xref:System.ComponentModel.ITypedList> interface provides the ability to control the order and the set of properties exposed to the bound control.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-161">当实现 <xref:System.ComponentModel.ITypedList.GetItemProperties%2A> 方法并且 <xref:System.ComponentModel.PropertyDescriptor> 数组不为 null 时，数组中的最后一项将是描述列表属性（另一项列表）的属性说明符。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-161">When you implement the <xref:System.ComponentModel.ITypedList.GetItemProperties%2A> method, and the <xref:System.ComponentModel.PropertyDescriptor> array is not null, the last entry in the array will be the property descriptor that describes the list property that is another list of items.</span></span>

- <span data-ttu-id="a7e5d-162"><xref:System.ComponentModel.ICustomTypeDescriptor> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-162"><xref:System.ComponentModel.ICustomTypeDescriptor> interface</span></span>

  <span data-ttu-id="a7e5d-163">实现 <xref:System.ComponentModel.ICustomTypeDescriptor> 接口的类提供有关其自身的动态信息。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-163">A class that implements the <xref:System.ComponentModel.ICustomTypeDescriptor> interface provides dynamic information about itself.</span></span> <span data-ttu-id="a7e5d-164">此接口与 <xref:System.ComponentModel.ITypedList> 类似，但用于对象而不是列表。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-164">This interface is similar to <xref:System.ComponentModel.ITypedList> but is used for objects rather than lists.</span></span> <span data-ttu-id="a7e5d-165"><xref:System.Data.DataRowView> 使用此接口来投影基础行的架构。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-165">This interface is used by <xref:System.Data.DataRowView> to project the schema of the underlying rows.</span></span> <span data-ttu-id="a7e5d-166"><xref:System.ComponentModel.CustomTypeDescriptor> 类提供 <xref:System.ComponentModel.ICustomTypeDescriptor> 的简单实现。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-166">A simple implementation of <xref:System.ComponentModel.ICustomTypeDescriptor> is provided by the <xref:System.ComponentModel.CustomTypeDescriptor> class.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-167">为了支持对实现 <xref:System.ComponentModel.ICustomTypeDescriptor>的类型的设计时绑定，该类型还必须实现 <xref:System.ComponentModel.IComponent> 并作为窗体上的实例存在。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-167">To support design-time binding to types that implement <xref:System.ComponentModel.ICustomTypeDescriptor>, the type must also implement <xref:System.ComponentModel.IComponent> and exist as an instance on the Form.</span></span>

- <span data-ttu-id="a7e5d-168"><xref:System.ComponentModel.IListSource> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-168"><xref:System.ComponentModel.IListSource> interface</span></span>

  <span data-ttu-id="a7e5d-169">实现 <xref:System.ComponentModel.IListSource> 接口的类启用非列表对象上基于列表的绑定。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-169">A class that implements the <xref:System.ComponentModel.IListSource> interface enables list-based binding on non-list objects.</span></span> <span data-ttu-id="a7e5d-170"><xref:System.ComponentModel.IListSource> 的 <xref:System.ComponentModel.IListSource.GetList%2A> 方法用于从不从 <xref:System.Collections.IList>继承的对象中返回可绑定列表。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-170">The <xref:System.ComponentModel.IListSource.GetList%2A> method of <xref:System.ComponentModel.IListSource> is used to return a bindable list from an object that does not inherit from <xref:System.Collections.IList>.</span></span> <span data-ttu-id="a7e5d-171"><xref:System.ComponentModel.IListSource> 由 <xref:System.Data.DataSet> 类使用。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-171"><xref:System.ComponentModel.IListSource> is used by the <xref:System.Data.DataSet> class.</span></span>

- <span data-ttu-id="a7e5d-172"><xref:System.ComponentModel.IRaiseItemChangedEvents> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-172"><xref:System.ComponentModel.IRaiseItemChangedEvents> interface</span></span>

  <span data-ttu-id="a7e5d-173">实现 <xref:System.ComponentModel.IRaiseItemChangedEvents> 接口的类是一个也实现 <xref:System.ComponentModel.IBindingList> 接口的可绑定列表。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-173">A class that implements the <xref:System.ComponentModel.IRaiseItemChangedEvents> interface is a bindable list that also implements the <xref:System.ComponentModel.IBindingList> interface.</span></span> <span data-ttu-id="a7e5d-174">此接口用于通过其 <xref:System.ComponentModel.IRaiseItemChangedEvents.RaisesItemChangedEvents%2A> 属性，指示类型是否引发 <xref:System.ComponentModel.ListChangedType.ItemChanged> 类型的 <xref:System.ComponentModel.IBindingList.ListChanged> 事件。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-174">This interface is used to indicate if your type raises <xref:System.ComponentModel.IBindingList.ListChanged> events of type <xref:System.ComponentModel.ListChangedType.ItemChanged> through its <xref:System.ComponentModel.IRaiseItemChangedEvents.RaisesItemChangedEvents%2A> property.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-175">如果你的数据源提供了前面所述的用于列出事件转换的属性，并且该属性与 <xref:System.Windows.Forms.BindingSource> 组件交互，则应实现 <xref:System.ComponentModel.IRaiseItemChangedEvents>。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-175">You should implement the <xref:System.ComponentModel.IRaiseItemChangedEvents> if your data source provides the property to list event conversion described previously and is interacting with the <xref:System.Windows.Forms.BindingSource> component.</span></span> <span data-ttu-id="a7e5d-176">否则，<xref:System.Windows.Forms.BindingSource> 还将执行属性以列出事件转换，从而降低性能。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-176">Otherwise, the <xref:System.Windows.Forms.BindingSource> will also perform property to list event conversion resulting in slower performance.</span></span>

- <span data-ttu-id="a7e5d-177"><xref:System.ComponentModel.ISupportInitialize> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-177"><xref:System.ComponentModel.ISupportInitialize> interface</span></span>

  <span data-ttu-id="a7e5d-178">实现 <xref:System.ComponentModel.ISupportInitialize> 接口的组件利用批处理优化的优点来设置属性和初始化依赖属性。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-178">A component that implements the <xref:System.ComponentModel.ISupportInitialize> interface takes advantages of batch optimizations for setting properties and initializing co-dependent properties.</span></span> <span data-ttu-id="a7e5d-179"><xref:System.ComponentModel.ISupportInitialize> 包含两种方法：</span><span class="sxs-lookup"><span data-stu-id="a7e5d-179">The <xref:System.ComponentModel.ISupportInitialize> contains two methods:</span></span>

  - <span data-ttu-id="a7e5d-180"><xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> 发出对象初始化正在启动的信号。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-180"><xref:System.ComponentModel.ISupportInitialize.BeginInit%2A> signals that object initialization is starting.</span></span>

  - <span data-ttu-id="a7e5d-181"><xref:System.ComponentModel.ISupportInitialize.EndInit%2A> 通知对象初始化已完成。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-181"><xref:System.ComponentModel.ISupportInitialize.EndInit%2A> signals that object initialization is finishing.</span></span>

- <span data-ttu-id="a7e5d-182"><xref:System.ComponentModel.ISupportInitializeNotification> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-182"><xref:System.ComponentModel.ISupportInitializeNotification> interface</span></span>

  <span data-ttu-id="a7e5d-183">实现 <xref:System.ComponentModel.ISupportInitializeNotification> 接口的组件还实现了 <xref:System.ComponentModel.ISupportInitialize> 接口。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-183">A component that implements the <xref:System.ComponentModel.ISupportInitializeNotification> interface also implements the <xref:System.ComponentModel.ISupportInitialize> interface.</span></span> <span data-ttu-id="a7e5d-184">此接口允许通知其他 <xref:System.ComponentModel.ISupportInitialize> 初始化完成的组件。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-184">This interface allows you to notify other <xref:System.ComponentModel.ISupportInitialize> components that initialization is complete.</span></span> <span data-ttu-id="a7e5d-185"><xref:System.ComponentModel.ISupportInitializeNotification> 接口包含两个成员：</span><span class="sxs-lookup"><span data-stu-id="a7e5d-185">The <xref:System.ComponentModel.ISupportInitializeNotification> interface contains two members:</span></span>

  - <span data-ttu-id="a7e5d-186"><xref:System.ComponentModel.ISupportInitializeNotification.IsInitialized%2A> 返回一个 `boolean` 值，该值指示组件是否已初始化。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-186"><xref:System.ComponentModel.ISupportInitializeNotification.IsInitialized%2A> returns a `boolean` value indicating whether the component is initialized.</span></span>

  - <span data-ttu-id="a7e5d-187">调用 <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> 时发生 <xref:System.ComponentModel.ISupportInitializeNotification.Initialized>。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-187"><xref:System.ComponentModel.ISupportInitializeNotification.Initialized> occurs when <xref:System.ComponentModel.ISupportInitialize.EndInit%2A> is called.</span></span>

- <span data-ttu-id="a7e5d-188"><xref:System.ComponentModel.INotifyPropertyChanged> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-188"><xref:System.ComponentModel.INotifyPropertyChanged> interface</span></span>

  <span data-ttu-id="a7e5d-189">实现此接口的类是一个在其任何属性值更改时都会引发事件的类型。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-189">A class that implements this interface is a type that raises an event when any of its property values change.</span></span> <span data-ttu-id="a7e5d-190">此接口旨在替换控件的每个属性都有一个更改事件这种模式。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-190">This interface is designed to replace the pattern of having a change event for each property of a control.</span></span> <span data-ttu-id="a7e5d-191">在 <xref:System.ComponentModel.BindingList%601>中使用时，业务对象应该实现 <xref:System.ComponentModel.INotifyPropertyChanged> 接口，System.componentmodel.bindinglist\`1 会将 <xref:System.ComponentModel.INotifyPropertyChanged.PropertyChanged> 事件转换为 <xref:System.ComponentModel.BindingList%601.ListChanged> 类型 <xref:System.ComponentModel.ListChangedType.ItemChanged>事件。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-191">When used in a <xref:System.ComponentModel.BindingList%601>, a business object should implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface and the BindingList\`1 will convert <xref:System.ComponentModel.INotifyPropertyChanged.PropertyChanged> events to <xref:System.ComponentModel.BindingList%601.ListChanged> events of type <xref:System.ComponentModel.ListChangedType.ItemChanged>.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-192">对于绑定客户端和数据源之间的绑定中发生的更改通知，绑定数据源类型应实现 <xref:System.ComponentModel.INotifyPropertyChanged> 接口（首选），也可以为绑定类型提供*propertyName*`Changed` 事件，但不应同时执行这两个操作。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-192">For change notification to occur in a binding between a bound client and a data source your bound data-source type should either implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface (preferred) or you can provide *propertyName*`Changed` events for the bound type, but you shouldn't do both.</span></span>

### <a name="interfaces-for-implementation-by-component-authors"></a><span data-ttu-id="a7e5d-193">要由组件作者实现的接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-193">Interfaces for Implementation by Component Authors</span></span>

<span data-ttu-id="a7e5d-194">下列接口设计为由 Windows 窗体数据绑定引擎使用：</span><span class="sxs-lookup"><span data-stu-id="a7e5d-194">The following interfaces are designed for consumption by the Windows Forms data-binding engine:</span></span>

- <span data-ttu-id="a7e5d-195"><xref:System.Windows.Forms.IBindableComponent> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-195"><xref:System.Windows.Forms.IBindableComponent> interface</span></span>

  <span data-ttu-id="a7e5d-196">实现此接口的类是支持数据绑定的非控件组件。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-196">A class that implements this interface is a non-control component that supports data binding.</span></span> <span data-ttu-id="a7e5d-197">此类通过此接口的 <xref:System.Windows.Forms.IBindableComponent.DataBindings%2A> 和 <xref:System.Windows.Forms.IBindableComponent.BindingContext%2A> 属性返回组件的数据绑定和绑定上下文。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-197">This class returns the data bindings and binding context of the component through the <xref:System.Windows.Forms.IBindableComponent.DataBindings%2A> and <xref:System.Windows.Forms.IBindableComponent.BindingContext%2A> properties of this interface.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-198">如果组件继承自 <xref:System.Windows.Forms.Control>，则无需实现 <xref:System.Windows.Forms.IBindableComponent> 接口。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-198">If your component inherits from <xref:System.Windows.Forms.Control>, you do not need to implement the <xref:System.Windows.Forms.IBindableComponent> interface.</span></span>

- <span data-ttu-id="a7e5d-199"><xref:System.Windows.Forms.ICurrencyManagerProvider> 接口</span><span class="sxs-lookup"><span data-stu-id="a7e5d-199"><xref:System.Windows.Forms.ICurrencyManagerProvider> interface</span></span>

  <span data-ttu-id="a7e5d-200">实现 <xref:System.Windows.Forms.ICurrencyManagerProvider> 接口的类是一个组件，它提供自己的 <xref:System.Windows.Forms.CurrencyManager> 来管理与此特定组件关联的绑定。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-200">A class that implements the <xref:System.Windows.Forms.ICurrencyManagerProvider> interface is a component that provides its own <xref:System.Windows.Forms.CurrencyManager> to manage the bindings associated with this particular component.</span></span> <span data-ttu-id="a7e5d-201"><xref:System.Windows.Forms.ICurrencyManagerProvider.CurrencyManager%2A> 属性提供对自定义 <xref:System.Windows.Forms.CurrencyManager> 的访问。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-201">Access to the custom <xref:System.Windows.Forms.CurrencyManager> is provided by the <xref:System.Windows.Forms.ICurrencyManagerProvider.CurrencyManager%2A> property.</span></span>

  > [!NOTE]
  > <span data-ttu-id="a7e5d-202">继承自 <xref:System.Windows.Forms.Control> 的类通过其 <xref:System.Windows.Forms.Control.BindingContext%2A> 属性自动管理绑定，因此，需要实现 <xref:System.Windows.Forms.ICurrencyManagerProvider> 的情况非常少见。</span><span class="sxs-lookup"><span data-stu-id="a7e5d-202">A class that inherits from <xref:System.Windows.Forms.Control> manages bindings automatically through its <xref:System.Windows.Forms.Control.BindingContext%2A> property, so cases in which you need to implement the <xref:System.Windows.Forms.ICurrencyManagerProvider> are fairly rare.</span></span>

## <a name="see-also"></a><span data-ttu-id="a7e5d-203">另请参阅</span><span class="sxs-lookup"><span data-stu-id="a7e5d-203">See also</span></span>

- [<span data-ttu-id="a7e5d-204">数据绑定和 Windows 窗体</span><span class="sxs-lookup"><span data-stu-id="a7e5d-204">Data Binding and Windows Forms</span></span>](data-binding-and-windows-forms.md)
- [<span data-ttu-id="a7e5d-205">如何：在 Windows 窗体上创建简单绑定的控件</span><span class="sxs-lookup"><span data-stu-id="a7e5d-205">How to: Create a Simple-Bound Control on a Windows Form</span></span>](how-to-create-a-simple-bound-control-on-a-windows-form.md)
- [<span data-ttu-id="a7e5d-206">Windows 窗体数据绑定</span><span class="sxs-lookup"><span data-stu-id="a7e5d-206">Windows Forms Data Binding</span></span>](windows-forms-data-binding.md)
