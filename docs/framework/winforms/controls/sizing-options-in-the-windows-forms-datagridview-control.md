---
title: Windows 窗体 DataGridView 控件中的大小调整选项
ms.date: 03/30/2017
helpviewer_keywords:
- DataGridView control [Windows Forms], row sizing
- data grids [Windows Forms], column sizing
- DataGridView control [Windows Forms], column sizing
- DataGridView control [Windows Forms], sizing options
- data grids [Windows Forms], row sizing
- data grids [Windows Forms], sizing options
ms.assetid: a5620a9c-0d06-41e3-8934-c25ddb16c9e6
ms.openlocfilehash: a8e2e05877746dfb043b7e8ac2a6c2b7017883c3
ms.sourcegitcommit: 68653db98c5ea7744fd438710248935f70020dfb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/22/2019
ms.locfileid: "69960425"
---
# <a name="sizing-options-in-the-windows-forms-datagridview-control"></a><span data-ttu-id="4b935-102">Windows 窗体 DataGridView 控件中的大小调整选项</span><span class="sxs-lookup"><span data-stu-id="4b935-102">Sizing Options in the Windows Forms DataGridView Control</span></span>
<span data-ttu-id="4b935-103"><xref:System.Windows.Forms.DataGridView>由于发生了许多不同的情况, 行、列和标头可能会改变大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-103"><xref:System.Windows.Forms.DataGridView> rows, columns, and headers can change size as a result of many different occurrences.</span></span> <span data-ttu-id="4b935-104">下表显示了这些情况。</span><span class="sxs-lookup"><span data-stu-id="4b935-104">The following table shows these occurrences.</span></span>  
  
|<span data-ttu-id="4b935-105">匹配项</span><span class="sxs-lookup"><span data-stu-id="4b935-105">Occurrence</span></span>|<span data-ttu-id="4b935-106">描述</span><span class="sxs-lookup"><span data-stu-id="4b935-106">Description</span></span>|  
|----------------|-----------------|  
|<span data-ttu-id="4b935-107">用户调整大小</span><span class="sxs-lookup"><span data-stu-id="4b935-107">User resize</span></span>|<span data-ttu-id="4b935-108">用户可以通过拖动或双击行、列或标题分隔线来调整大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-108">Users can make size adjustments by dragging or double-clicking row, column, or header dividers.</span></span>|  
|<span data-ttu-id="4b935-109">控件调整大小</span><span class="sxs-lookup"><span data-stu-id="4b935-109">Control resize</span></span>|<span data-ttu-id="4b935-110">在列填充模式下, 当控件的宽度发生变化时, 列宽将更改;例如, 当控件停靠在其父窗体上并且用户调整窗体的大小时。</span><span class="sxs-lookup"><span data-stu-id="4b935-110">In column fill mode, column widths change when the control width changes; for example, when the control is docked to its parent form and the user resizes the form.</span></span>|  
|<span data-ttu-id="4b935-111">单元格值更改</span><span class="sxs-lookup"><span data-stu-id="4b935-111">Cell value change</span></span>|<span data-ttu-id="4b935-112">在基于内容的自动调整大小模式下, 调整大小以适应新的显示值。</span><span class="sxs-lookup"><span data-stu-id="4b935-112">In content-based automatic sizing modes, sizes change to fit new display values.</span></span>|  
|<span data-ttu-id="4b935-113">方法调用</span><span class="sxs-lookup"><span data-stu-id="4b935-113">Method call</span></span>|<span data-ttu-id="4b935-114">基于编程内容的大小调整使你可以基于方法调用时的单元格值进行机会调整大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-114">Programmatic content-based resizing lets you make opportunistic size adjustments based on cell values at the time of the method call.</span></span>|  
|<span data-ttu-id="4b935-115">属性设置</span><span class="sxs-lookup"><span data-stu-id="4b935-115">Property setting</span></span>|<span data-ttu-id="4b935-116">你还可以设置特定的高度和宽度值。</span><span class="sxs-lookup"><span data-stu-id="4b935-116">You can also set specific height and width values.</span></span>|  
  
 <span data-ttu-id="4b935-117">默认情况下, 将启用用户大小调整, 禁用自动调整大小, 并剪裁宽度超过其列的单元值。</span><span class="sxs-lookup"><span data-stu-id="4b935-117">By default, user resizing is enabled, automatic sizing is disabled, and cell values that are wider than their columns are clipped.</span></span>  
  
 <span data-ttu-id="4b935-118">下表显示了可用于调整默认行为或使用特定大小调整选项实现特定效果的方案。</span><span class="sxs-lookup"><span data-stu-id="4b935-118">The following table shows scenarios that you can use to adjust the default behavior or to use specific sizing options to achieve particular effects.</span></span>  
  
|<span data-ttu-id="4b935-119">应用场景</span><span class="sxs-lookup"><span data-stu-id="4b935-119">Scenario</span></span>|<span data-ttu-id="4b935-120">实现</span><span class="sxs-lookup"><span data-stu-id="4b935-120">Implementation</span></span>|  
|--------------|--------------------|  
|<span data-ttu-id="4b935-121">使用列填充模式, 在占用整个控件宽度的列中显示大小类似的数据, 而不显示水平滚动条。</span><span class="sxs-lookup"><span data-stu-id="4b935-121">Use column fill mode for displaying similarly sized data in a relatively small number of columns that occupy the entire width of the control without displaying the horizontal scroll bar.</span></span>|<span data-ttu-id="4b935-122">将 <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A> 属性设置为 <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill>。</span><span class="sxs-lookup"><span data-stu-id="4b935-122">Set the <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A> property to <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill>.</span></span>|  
|<span data-ttu-id="4b935-123">使用具有不同大小的显示值的列填充模式。</span><span class="sxs-lookup"><span data-stu-id="4b935-123">Use column fill mode with display values of varying sizes.</span></span>|<span data-ttu-id="4b935-124">将 <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A> 属性设置为 <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill>。</span><span class="sxs-lookup"><span data-stu-id="4b935-124">Set the <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A> property to <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill>.</span></span> <span data-ttu-id="4b935-125">通过设置列<xref:System.Windows.Forms.DataGridViewColumn.FillWeight%2A>属性或在使用数据填充控件后调用控件<xref:System.Windows.Forms.DataGridView.AutoResizeColumns%2A>方法来初始化相对列宽。</span><span class="sxs-lookup"><span data-stu-id="4b935-125">Initialize relative column widths by setting the column <xref:System.Windows.Forms.DataGridViewColumn.FillWeight%2A> properties or by calling the control <xref:System.Windows.Forms.DataGridView.AutoResizeColumns%2A> method after filling the control with data.</span></span>|  
|<span data-ttu-id="4b935-126">使用具有不同重要性的值的列填充模式。</span><span class="sxs-lookup"><span data-stu-id="4b935-126">Use column fill mode with values of varying importance.</span></span>|<span data-ttu-id="4b935-127">将 <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A> 属性设置为 <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill>。</span><span class="sxs-lookup"><span data-stu-id="4b935-127">Set the <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A> property to <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode.Fill>.</span></span> <span data-ttu-id="4b935-128">为必须<xref:System.Windows.Forms.DataGridViewColumn.MinimumWidth%2A>始终显示某些数据的列设置较大的值, 或者为特定列使用填充模式之外的调整大小选项。</span><span class="sxs-lookup"><span data-stu-id="4b935-128">Set large <xref:System.Windows.Forms.DataGridViewColumn.MinimumWidth%2A> values for columns that must always display some of their data or use a sizing option other than fill mode for specific columns.</span></span>|  
|<span data-ttu-id="4b935-129">使用列填充模式可避免显示控件背景。</span><span class="sxs-lookup"><span data-stu-id="4b935-129">Use column fill mode to avoid displaying the control background.</span></span>|<span data-ttu-id="4b935-130">将最后一列的<xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.Fill> 属性设置为,并对其他列使用其他调整大小选项。<xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A></span><span class="sxs-lookup"><span data-stu-id="4b935-130">Set the <xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A> property of the last column to <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.Fill> and use other sizing options for the other columns.</span></span> <span data-ttu-id="4b935-131">如果其他列使用太多的可用空间, 请设置<xref:System.Windows.Forms.DataGridViewColumn.MinimumWidth%2A>最后一列的属性。</span><span class="sxs-lookup"><span data-stu-id="4b935-131">If the other columns use too much of the available space, set the <xref:System.Windows.Forms.DataGridViewColumn.MinimumWidth%2A> property of the last column.</span></span>|  
|<span data-ttu-id="4b935-132">显示固定宽度的列, 例如图标或 ID 列。</span><span class="sxs-lookup"><span data-stu-id="4b935-132">Display a fixed-width column, such as an icon or ID column.</span></span>|<span data-ttu-id="4b935-133">对于列<xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.None> , <xref:System.Windows.Forms.DataGridViewColumn.Resizable%2A>将设置<xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A>为和。 <xref:System.Windows.Forms.DataGridViewTriState.False></span><span class="sxs-lookup"><span data-stu-id="4b935-133">Set <xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A> to <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.None> and <xref:System.Windows.Forms.DataGridViewColumn.Resizable%2A> to <xref:System.Windows.Forms.DataGridViewTriState.False> for the column.</span></span> <span data-ttu-id="4b935-134">通过设置<xref:System.Windows.Forms.DataGridViewColumn.Width%2A>属性或在使用数据填充控件后调用控件<xref:System.Windows.Forms.DataGridView.AutoResizeColumn%2A>方法来初始化其宽度。</span><span class="sxs-lookup"><span data-stu-id="4b935-134">Initialize its width by setting the <xref:System.Windows.Forms.DataGridViewColumn.Width%2A> property or by calling the control <xref:System.Windows.Forms.DataGridView.AutoResizeColumn%2A> method after filling the control with data.</span></span>|  
|<span data-ttu-id="4b935-135">当单元格内容更改时自动调整大小, 以避免剪辑和优化空间的使用。</span><span class="sxs-lookup"><span data-stu-id="4b935-135">Adjust sizes automatically whenever cell contents change to avoid clipping and to optimize the use of space.</span></span>|<span data-ttu-id="4b935-136">将自动调整大小属性设置为一个值, 该值表示基于内容的大小调整模式。</span><span class="sxs-lookup"><span data-stu-id="4b935-136">Set an automatic sizing property to a value that represents a content-based sizing mode.</span></span> <span data-ttu-id="4b935-137">若要避免在处理大量数据时出现性能损失, 请使用只计算显示行的调整大小模式。</span><span class="sxs-lookup"><span data-stu-id="4b935-137">To avoid a performance penalty when working with large amounts of data, use a sizing mode that calculates displayed rows only.</span></span>|  
|<span data-ttu-id="4b935-138">调整大小以适合显示行中的值, 以避免在使用多行时出现性能下降。</span><span class="sxs-lookup"><span data-stu-id="4b935-138">Adjust sizes to fit values in displayed rows to avoid performance penalties when working with many rows.</span></span>|<span data-ttu-id="4b935-139">使用自动大小调整或编程大小调整模式枚举值。</span><span class="sxs-lookup"><span data-stu-id="4b935-139">Use the appropriate sizing-mode enumeration values with automatic or programmatic resizing.</span></span> <span data-ttu-id="4b935-140">若要在滚动时调整大小以适应新显示的行中的值, 请在<xref:System.Windows.Forms.DataGridView.Scroll>事件处理程序中调用调整大小方法。</span><span class="sxs-lookup"><span data-stu-id="4b935-140">To adjust sizes to fit values in newly displayed rows while scrolling, call a resizing method in a <xref:System.Windows.Forms.DataGridView.Scroll> event handler.</span></span> <span data-ttu-id="4b935-141">若要自定义用户双击大小, 以便仅显示的行中的值确定新大小, 请在<xref:System.Windows.Forms.DataGridView.RowDividerDoubleClick>或<xref:System.Windows.Forms.DataGridView.ColumnDividerDoubleClick>事件处理程序中调用调整大小方法。</span><span class="sxs-lookup"><span data-stu-id="4b935-141">To customize user double-click resizing so that only values in displayed rows determine the new sizes, call a resizing method in a <xref:System.Windows.Forms.DataGridView.RowDividerDoubleClick> or <xref:System.Windows.Forms.DataGridView.ColumnDividerDoubleClick> event handler.</span></span>|  
|<span data-ttu-id="4b935-142">仅在特定时间调整大小以适合单元格内容, 以避免性能下降或启用用户调整大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-142">Adjust sizes to fit cell contents only at specific times to avoid performance penalties or to enable user resizing.</span></span>|<span data-ttu-id="4b935-143">在事件处理程序中调用基于内容的大小调整方法。</span><span class="sxs-lookup"><span data-stu-id="4b935-143">Call a content-based resizing method in an event handler.</span></span> <span data-ttu-id="4b935-144">例如, 使用<xref:System.Windows.Forms.DataGridView.DataBindingComplete>事件在绑定后初始化大小, 并<xref:System.Windows.Forms.DataGridView.CellValidated>处理或<xref:System.Windows.Forms.DataGridView.CellValueChanged>事件以调整大小以对绑定数据源中的用户编辑或更改进行补偿。</span><span class="sxs-lookup"><span data-stu-id="4b935-144">For example, use the <xref:System.Windows.Forms.DataGridView.DataBindingComplete> event to initialize sizes after binding, and handle the <xref:System.Windows.Forms.DataGridView.CellValidated> or <xref:System.Windows.Forms.DataGridView.CellValueChanged> event to adjust sizes to compensate for user edits or changes in a bound data source.</span></span>|  
|<span data-ttu-id="4b935-145">调整多行单元格内容的行高。</span><span class="sxs-lookup"><span data-stu-id="4b935-145">Adjust row heights for multiline cell contents.</span></span>|<span data-ttu-id="4b935-146">确保列宽适用于显示文本段落, 并使用自动或基于内容的编程行大小调整来调整高度。</span><span class="sxs-lookup"><span data-stu-id="4b935-146">Ensure that column widths are appropriate for displaying paragraphs of text and use automatic or programmatic content-based row sizing to adjust the heights.</span></span> <span data-ttu-id="4b935-147">还应确保使用<xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A>单元样式<xref:System.Windows.Forms.DataGridViewTriState.True>值显示具有多行内容的单元格。</span><span class="sxs-lookup"><span data-stu-id="4b935-147">Also ensure that cells with multiline content are displayed using a <xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A> cell style value of <xref:System.Windows.Forms.DataGridViewTriState.True>.</span></span><br /><br /> <span data-ttu-id="4b935-148">通常, 您将使用自动列大小调整模式来维护列宽, 或在调整行高之前将其设置为特定宽度。</span><span class="sxs-lookup"><span data-stu-id="4b935-148">Typically, you will use an automatic column sizing mode to maintain column widths or set them to specific widths before row heights are adjusted.</span></span>|  
  
## <a name="resizing-with-the-mouse"></a><span data-ttu-id="4b935-149">用鼠标调整大小</span><span class="sxs-lookup"><span data-stu-id="4b935-149">Resizing with the Mouse</span></span>  
 <span data-ttu-id="4b935-150">默认情况下, 用户可以根据单元格值调整不使用自动调整大小模式的行、列和标头的大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-150">By default, users can resize rows, columns, and headers that do not use an automatic sizing mode based on cell values.</span></span> <span data-ttu-id="4b935-151">若要防止用户调整其他模式 (如列填充模式) 的大小, 请设置以下<xref:System.Windows.Forms.DataGridView>一个或多个属性:</span><span class="sxs-lookup"><span data-stu-id="4b935-151">To prevent users from resizing with other modes, such as column fill mode, set one or more of the following <xref:System.Windows.Forms.DataGridView> properties:</span></span>  
  
- <xref:System.Windows.Forms.DataGridView.AllowUserToResizeColumns%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AllowUserToResizeRows%2A>  
  
- <xref:System.Windows.Forms.DataGridView.ColumnHeadersHeightSizeMode%2A>  
  
- <xref:System.Windows.Forms.DataGridView.RowHeadersWidthSizeMode%2A>  
  
 <span data-ttu-id="4b935-152">还可以通过设置各个行或列的属性, 防止用户调整<xref:System.Windows.Forms.DataGridViewBand.Resizable%2A>它们的大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-152">You can also prevent users from resizing individual rows or columns by setting their <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> properties.</span></span> <span data-ttu-id="4b935-153">默认情况下, <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A>属性值基于列的<xref:System.Windows.Forms.DataGridView.AllowUserToResizeColumns%2A>属性<xref:System.Windows.Forms.DataGridView.AllowUserToResizeRows%2A>值和行的属性值。</span><span class="sxs-lookup"><span data-stu-id="4b935-153">By default, the <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> property value is based on the <xref:System.Windows.Forms.DataGridView.AllowUserToResizeColumns%2A> property value for columns and the <xref:System.Windows.Forms.DataGridView.AllowUserToResizeRows%2A> property value for rows.</span></span> <span data-ttu-id="4b935-154">但是, 如果将<xref:System.Windows.Forms.DataGridViewBand.Resizable%2A>显式<xref:System.Windows.Forms.DataGridViewTriState.True>设置<xref:System.Windows.Forms.DataGridViewTriState.False>为或, 则指定的值将覆盖该行或列的控件值。</span><span class="sxs-lookup"><span data-stu-id="4b935-154">If you explicitly set <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> to <xref:System.Windows.Forms.DataGridViewTriState.True> or <xref:System.Windows.Forms.DataGridViewTriState.False>, however, the specified value overrides the control value is for that row or column.</span></span> <span data-ttu-id="4b935-155">设置<xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> 为<xref:System.Windows.Forms.DataGridViewTriState.NotSet>以还原继承。</span><span class="sxs-lookup"><span data-stu-id="4b935-155">Set <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> to <xref:System.Windows.Forms.DataGridViewTriState.NotSet> to restore the inheritance.</span></span>  
  
 <span data-ttu-id="4b935-156">由于<xref:System.Windows.Forms.DataGridViewTriState.NotSet>还原值继承<xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> , 因此<xref:System.Windows.Forms.DataGridViewTriState.NotSet>属性永远不会返回值, 除非行<xref:System.Windows.Forms.DataGridView>或列尚未添加到控件中。</span><span class="sxs-lookup"><span data-stu-id="4b935-156">Because <xref:System.Windows.Forms.DataGridViewTriState.NotSet> restores the value inheritance, the <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> property will never return a <xref:System.Windows.Forms.DataGridViewTriState.NotSet> value unless the row or column has not been added to a <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="4b935-157">如果需要确定是否继承行或<xref:System.Windows.Forms.DataGridViewBand.Resizable%2A>列的属性值, 请检查其<xref:System.Windows.Forms.DataGridViewElement.State%2A>属性。</span><span class="sxs-lookup"><span data-stu-id="4b935-157">If you need to determine whether the <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> property value of a row or column is inherited, examine its <xref:System.Windows.Forms.DataGridViewElement.State%2A> property.</span></span> <span data-ttu-id="4b935-158">如果值包括标志, 则不会<xref:System.Windows.Forms.DataGridViewBand.Resizable%2A>继承属性值。 <xref:System.Windows.Forms.DataGridViewElementStates.ResizableSet> <xref:System.Windows.Forms.DataGridViewElement.State%2A></span><span class="sxs-lookup"><span data-stu-id="4b935-158">If the <xref:System.Windows.Forms.DataGridViewElement.State%2A> value includes the <xref:System.Windows.Forms.DataGridViewElementStates.ResizableSet> flag, the <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A> property value is not inherited.</span></span>  
  
## <a name="automatic-sizing"></a><span data-ttu-id="4b935-159">自动调整大小</span><span class="sxs-lookup"><span data-stu-id="4b935-159">Automatic Sizing</span></span>  
 <span data-ttu-id="4b935-160"><xref:System.Windows.Forms.DataGridView>控件中有两种自动调整大小的类型: 列填充模式和基于内容的自动调整大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-160">There are two kinds of automatic sizing in the <xref:System.Windows.Forms.DataGridView> control: column fill mode and content-based automatic sizing.</span></span>  
  
 <span data-ttu-id="4b935-161">列填充模式使控件中的可见列填充控件的显示区域的宽度。</span><span class="sxs-lookup"><span data-stu-id="4b935-161">Column fill mode causes the visible columns in the control to fill the width of the control's display area.</span></span> <span data-ttu-id="4b935-162">有关此模式的详细信息, 请参阅[Windows 窗体 DataGridView 控件中的列填充模式](column-fill-mode-in-the-windows-forms-datagridview-control.md)。</span><span class="sxs-lookup"><span data-stu-id="4b935-162">For more information about this mode, see [Column Fill Mode in the Windows Forms DataGridView Control](column-fill-mode-in-the-windows-forms-datagridview-control.md).</span></span>  
  
 <span data-ttu-id="4b935-163">您还可以配置行、列和标头以自动调整其大小以适应其单元格内容。</span><span class="sxs-lookup"><span data-stu-id="4b935-163">You can also configure rows, columns, and headers to automatically adjust their sizes to fit their cell contents.</span></span> <span data-ttu-id="4b935-164">在这种情况下, 只要单元格内容发生更改, 就会发生大小调整。</span><span class="sxs-lookup"><span data-stu-id="4b935-164">In this case, size adjustment occurs whenever cell contents change.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="4b935-165">如果使用虚拟模式在自定义数据缓存中维护单元值, 则当用户编辑单元值时, 将自动调整大小, 但当你在<xref:System.Windows.Forms.DataGridView.CellValuePushed>事件处理程序外部更改缓存的值时, 将不会发生这种情况。</span><span class="sxs-lookup"><span data-stu-id="4b935-165">If you maintain cell values in a custom data cache using virtual mode, automatic sizing occurs when the user edits a cell value but does not occur when you alter a cached value outside of a <xref:System.Windows.Forms.DataGridView.CellValuePushed> event handler.</span></span> <span data-ttu-id="4b935-166">在这种情况下, <xref:System.Windows.Forms.DataGridView.UpdateCellValue%2A>请调用方法来强制控件更新单元格的显示, 并应用当前的自动调整大小模式。</span><span class="sxs-lookup"><span data-stu-id="4b935-166">In this case, call the <xref:System.Windows.Forms.DataGridView.UpdateCellValue%2A> method to force the control to update the cell display and apply the current automatic sizing modes.</span></span>  
  
 <span data-ttu-id="4b935-167">如果对一个维度仅启用了基于内容的自动调整大小 (即, 对于行而不是列) 或列 (而不是行<xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A> ), 则还会启用大小调整, 只要其他维度发生变化。</span><span class="sxs-lookup"><span data-stu-id="4b935-167">If content-based automatic sizing is enabled for one dimension only—that is, for rows but not columns, or for columns but not rows—and <xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A> is also enabled, size adjustment also occurs whenever the other dimension changes.</span></span> <span data-ttu-id="4b935-168">例如, 如果将行而不是列配置为自动调整大小<xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A>并启用, 则用户可以拖动列分隔线来更改列的宽度, 行高会自动调整, 以便仍完全显示单元格内容。</span><span class="sxs-lookup"><span data-stu-id="4b935-168">For example, if rows but not columns are configured for automatic sizing and <xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A> is enabled, users can drag column dividers to change the width of a column and row heights will automatically adjust so that cell contents are still fully displayed.</span></span>  
  
 <span data-ttu-id="4b935-169">如果将行和列配置为基于内容的自动调整大小并<xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A>启用<xref:System.Windows.Forms.DataGridView> , 则当单元格内容发生更改时, 控件将调整大小, 并将在计算新大小时使用理想的单元格高度与宽度的比率。</span><span class="sxs-lookup"><span data-stu-id="4b935-169">If you configure both rows and columns for content-based automatic sizing and <xref:System.Windows.Forms.DataGridViewCellStyle.WrapMode%2A> is enabled, the <xref:System.Windows.Forms.DataGridView> control will adjust sizes whenever cell contents changed and will use an ideal cell height-to-width ratio when calculating new sizes.</span></span>  
  
 <span data-ttu-id="4b935-170">若要为标头和行以及不重写控件值的列配置大小调整模式, 请设置以下<xref:System.Windows.Forms.DataGridView>一个或多个属性:</span><span class="sxs-lookup"><span data-stu-id="4b935-170">To configure the sizing mode for headers and rows and for columns that do not override the control value, set one or more of the following <xref:System.Windows.Forms.DataGridView> properties:</span></span>  
  
- <xref:System.Windows.Forms.DataGridView.ColumnHeadersHeightSizeMode%2A>  
  
- <xref:System.Windows.Forms.DataGridView.RowHeadersWidthSizeMode%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AutoSizeRowsMode%2A>  
  
 <span data-ttu-id="4b935-171">若要为个别列覆盖控件的列大小调整模式, 请将<xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A>其属性设置为以外的<xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.NotSet>值。</span><span class="sxs-lookup"><span data-stu-id="4b935-171">To override the control's column sizing mode for an individual column, set its <xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A> property to a value other than <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.NotSet>.</span></span> <span data-ttu-id="4b935-172">列的大小调整模式实际上由其<xref:System.Windows.Forms.DataGridViewColumn.InheritedAutoSizeMode%2A>属性确定。</span><span class="sxs-lookup"><span data-stu-id="4b935-172">The sizing mode for a column is actually determined by its <xref:System.Windows.Forms.DataGridViewColumn.InheritedAutoSizeMode%2A> property.</span></span> <span data-ttu-id="4b935-173">此属性的值基于列的<xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A>属性值, 除非该值为<xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.NotSet>, 在这种情况下, 将继承控件的<xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A>值。</span><span class="sxs-lookup"><span data-stu-id="4b935-173">The value of this property is based on the column's <xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A> property value unless that value is <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.NotSet>, in which case the control's <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A> value is inherited.</span></span>  
  
 <span data-ttu-id="4b935-174">使用基于内容的自动调整大小, 在处理大量数据时务必小心。</span><span class="sxs-lookup"><span data-stu-id="4b935-174">Use content-based automatic resizing with caution when working with large amounts of data.</span></span> <span data-ttu-id="4b935-175">若要避免性能损失, 请使用自动大小调整模式, 这些模式仅基于显示的行计算大小, 而不是分析控件中的每一行。</span><span class="sxs-lookup"><span data-stu-id="4b935-175">To avoid performance penalties, use the automatic sizing modes that calculate sizes based only on the displayed rows rather than analyzing every row in the control.</span></span> <span data-ttu-id="4b935-176">为了获得最佳性能, 请改用编程大小调整, 以便在特定时间 (例如, 在加载新数据后立即) 调整大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-176">For maximum performance, use programmatic resizing instead so that you can resize at specific times, such as immediately after new data is loaded.</span></span>  
  
 <span data-ttu-id="4b935-177">基于内容的自动调整大小模式不会影响通过<xref:System.Windows.Forms.DataGridViewBand.Visible%2A>将行或列<xref:System.Windows.Forms.DataGridView.RowHeadersVisible%2A> <xref:System.Windows.Forms.DataGridView.ColumnHeadersVisible%2A>或属性设置为`false`而隐藏的行、列或标头。</span><span class="sxs-lookup"><span data-stu-id="4b935-177">Content-based automatic sizing modes do not affect rows, columns, or headers that you have hidden by setting the row or column <xref:System.Windows.Forms.DataGridViewBand.Visible%2A> property or the control <xref:System.Windows.Forms.DataGridView.RowHeadersVisible%2A> or <xref:System.Windows.Forms.DataGridView.ColumnHeadersVisible%2A> properties to `false`.</span></span> <span data-ttu-id="4b935-178">例如, 如果某个列在自动调整大小以容纳大单元值之后隐藏, 则隐藏列将不会更改其大小 (如果删除包含大单元值的行)。</span><span class="sxs-lookup"><span data-stu-id="4b935-178">For example, if a column is hidden after it is automatically sized to fit a large cell value, the hidden column will not change its size if the row containing the large cell value is deleted.</span></span> <span data-ttu-id="4b935-179">当可见性更改时不会进行自动调整大小, 因此<xref:System.Windows.Forms.DataGridViewColumn.Visible%2A> , `true`将列属性更改回后, 不会强制它根据其当前内容重新计算其大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-179">Automatic sizing does not occur when visibility changes, so changing the column <xref:System.Windows.Forms.DataGridViewColumn.Visible%2A> property back to `true` will not force it to recalculate its size based on its current contents.</span></span>  
  
 <span data-ttu-id="4b935-180">基于编程内容的大小调整会影响行、列和标头, 而不考虑它们的可见性。</span><span class="sxs-lookup"><span data-stu-id="4b935-180">Programmatic content-based resizing affects rows, columns, and headers regardless of their visibility.</span></span>  
  
## <a name="programmatic-resizing"></a><span data-ttu-id="4b935-181">以编程方式调整大小</span><span class="sxs-lookup"><span data-stu-id="4b935-181">Programmatic Resizing</span></span>  
 <span data-ttu-id="4b935-182">禁用自动调整大小后, 可以通过以下属性以编程方式设置行、列或标题的精确宽度或高度:</span><span class="sxs-lookup"><span data-stu-id="4b935-182">When automatic sizing is disabled, you can programmatically set the exact width or height of rows, columns, or headers through the following properties:</span></span>  
  
- <xref:System.Windows.Forms.DataGridView.RowHeadersWidth%2A?displayProperty=nameWithType>  
  
- <xref:System.Windows.Forms.DataGridView.ColumnHeadersHeight%2A?displayProperty=nameWithType>  
  
- <xref:System.Windows.Forms.DataGridViewRow.Height%2A?displayProperty=nameWithType>  
  
- <xref:System.Windows.Forms.DataGridViewColumn.Width%2A?displayProperty=nameWithType>  
  
 <span data-ttu-id="4b935-183">你还可以使用下列方法以编程方式调整行、列和标头的大小以适应其内容:</span><span class="sxs-lookup"><span data-stu-id="4b935-183">You can also programmatically resize rows, columns, and headers to fit their contents using the following methods:</span></span>  
  
- <xref:System.Windows.Forms.DataGridView.AutoResizeColumn%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AutoResizeColumns%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AutoResizeColumnHeadersHeight%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AutoResizeRow%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AutoResizeRows%2A>  
  
- <xref:System.Windows.Forms.DataGridView.AutoResizeRowHeadersWidth%2A>  
  
 <span data-ttu-id="4b935-184">这些方法一次调整行、列或标头的大小, 而不是将其配置为连续调整大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-184">These methods will resize rows, columns, or headers once rather than configuring them for continuous resizing.</span></span> <span data-ttu-id="4b935-185">新大小将自动计算, 以显示所有单元格内容而不进行剪辑。</span><span class="sxs-lookup"><span data-stu-id="4b935-185">The new sizes are automatically calculated to display all cell contents without clipping.</span></span> <span data-ttu-id="4b935-186">但是, 当你以编程方式<xref:System.Windows.Forms.DataGridViewColumn.InheritedAutoSizeMode%2A>调整具有属性<xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.Fill>值的列的大小时, 将使用基于内容的计算宽度按比例<xref:System.Windows.Forms.DataGridViewColumn.FillWeight%2A>调整列属性值, 并且实际列宽为然后根据这些新的比例计算, 以便所有列都填充控件的可用显示区域。</span><span class="sxs-lookup"><span data-stu-id="4b935-186">When you programmatically resize columns that have <xref:System.Windows.Forms.DataGridViewColumn.InheritedAutoSizeMode%2A> property values of <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode.Fill>, however, the calculated content-based widths are used to proportionally adjust the column <xref:System.Windows.Forms.DataGridViewColumn.FillWeight%2A> property values, and the actually column widths are then calculated according to these new proportions so that all columns fill the available display area of the control.</span></span>  
  
 <span data-ttu-id="4b935-187">以编程方式调整大小有助于避免连续调整大小时的性能下降。</span><span class="sxs-lookup"><span data-stu-id="4b935-187">Programmatic resizing is useful to avoid performance penalties with continuous resizing.</span></span> <span data-ttu-id="4b935-188">它还可为用户可调整大小的行、列和标头以及列填充模式提供初始大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-188">It is also useful to provide initial sizes for user-resizable rows, columns, and headers, and for column fill mode.</span></span>  
  
 <span data-ttu-id="4b935-189">通常会在特定时间调用编程大小调整方法。</span><span class="sxs-lookup"><span data-stu-id="4b935-189">You will typically call the programmatic resizing methods at specific times.</span></span> <span data-ttu-id="4b935-190">例如, 可以在加载数据后立即以编程方式调整所有列的大小, 也可以在修改特定单元格值后以编程方式调整特定行的大小。</span><span class="sxs-lookup"><span data-stu-id="4b935-190">For example, you might programmatically resize all columns immediately after loading data, or you might programmatically resize a specific row after a particular cell value has been modified.</span></span>  
  
## <a name="customizing-content-based-sizing-behavior"></a><span data-ttu-id="4b935-191">自定义基于内容的大小调整行为</span><span class="sxs-lookup"><span data-stu-id="4b935-191">Customizing Content-based Sizing Behavior</span></span>  
 <span data-ttu-id="4b935-192">可以在使用派生<xref:System.Windows.Forms.DataGridView>的<xref:System.Windows.Forms.DataGridViewCell.GetPreferredSize%2A?displayProperty=nameWithType>单元格、行和列类型时, 通过重写、 <xref:System.Windows.Forms.DataGridViewRow.GetPreferredHeight%2A?displayProperty=nameWithType>或<xref:System.Windows.Forms.DataGridViewColumn.GetPreferredWidth%2A?displayProperty=nameWithType>方法或通过调用派生<xref:System.Windows.Forms.DataGridView>控件.</span><span class="sxs-lookup"><span data-stu-id="4b935-192">You can customize sizing behaviors when working with derived <xref:System.Windows.Forms.DataGridView> cell, row, and column types by overriding the <xref:System.Windows.Forms.DataGridViewCell.GetPreferredSize%2A?displayProperty=nameWithType>, <xref:System.Windows.Forms.DataGridViewRow.GetPreferredHeight%2A?displayProperty=nameWithType>, or <xref:System.Windows.Forms.DataGridViewColumn.GetPreferredWidth%2A?displayProperty=nameWithType> methods or by calling protected resizing method overloads in a derived <xref:System.Windows.Forms.DataGridView> control.</span></span> <span data-ttu-id="4b935-193">受保护的调整大小方法重载设计为成对工作以实现理想的单元格高度与宽度的比率, 以避免过于宽或高度的单元格。</span><span class="sxs-lookup"><span data-stu-id="4b935-193">The protected resizing method overloads are designed to work in pairs to achieve an ideal cell height-to-width ratio, avoiding overly wide or tall cells.</span></span> <span data-ttu-id="4b935-194">`AutoResizeRows(DataGridViewAutoSizeRowsMode,Boolean)`例如, 如果调用<xref:System.Windows.Forms.DataGridView.AutoResizeRows%2A>方法的重载并`false`为<xref:System.Boolean>参数传入值, 则该重载将计算行中单元格的理想高度和宽度, 但会调整行高仅供参考.</span><span class="sxs-lookup"><span data-stu-id="4b935-194">For example, if you call the `AutoResizeRows(DataGridViewAutoSizeRowsMode,Boolean)` overload of the <xref:System.Windows.Forms.DataGridView.AutoResizeRows%2A> method and pass in a value of `false` for the <xref:System.Boolean> parameter, the overload will calculate the ideal heights and widths for cells in the row, but it will adjust the row heights only.</span></span> <span data-ttu-id="4b935-195">然后, 必须调用<xref:System.Windows.Forms.DataGridView.AutoResizeColumns%2A>方法, 将列宽调整为计算得出的理想。</span><span class="sxs-lookup"><span data-stu-id="4b935-195">You must then call the <xref:System.Windows.Forms.DataGridView.AutoResizeColumns%2A> method to adjust the column widths to the calculated ideal.</span></span>  
  
## <a name="content-based-sizing-options"></a><span data-ttu-id="4b935-196">基于内容的大小调整选项</span><span class="sxs-lookup"><span data-stu-id="4b935-196">Content-based Sizing Options</span></span>  
 <span data-ttu-id="4b935-197">对于基于内容的大小调整, 大小调整属性和方法使用的枚举具有相似的值。</span><span class="sxs-lookup"><span data-stu-id="4b935-197">The enumerations used by sizing properties and methods have similar values for content-based sizing.</span></span> <span data-ttu-id="4b935-198">使用这些值可以限制用于计算首选大小的单元格。</span><span class="sxs-lookup"><span data-stu-id="4b935-198">With these values, you can limit which cells are used to calculate the preferred sizes.</span></span> <span data-ttu-id="4b935-199">对于所有大小调整枚举, 名称引用显示单元的值将其计算限制为显示的行中的单元格。</span><span class="sxs-lookup"><span data-stu-id="4b935-199">For all sizing enumerations, values with names that refer to displayed cells limit their calculations to cells in displayed rows.</span></span> <span data-ttu-id="4b935-200">在处理大量行时, 排除行有助于避免性能下降。</span><span class="sxs-lookup"><span data-stu-id="4b935-200">Excluding rows is useful to avoid a performance penalty when you are working with a large quantity of rows.</span></span> <span data-ttu-id="4b935-201">还可以将计算限制为标头或 nonheader 单元中的单元值。</span><span class="sxs-lookup"><span data-stu-id="4b935-201">You can also restrict calculations to cell values in header or nonheader cells.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="4b935-202">请参阅</span><span class="sxs-lookup"><span data-stu-id="4b935-202">See also</span></span>

- <xref:System.Windows.Forms.DataGridView>
- <xref:System.Windows.Forms.DataGridView.AllowUserToResizeColumns%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AllowUserToResizeRows%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.ColumnHeadersHeightSizeMode%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.RowHeadersWidthSizeMode%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridViewBand.Resizable%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoSizeColumnsMode%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoSizeRowsMode%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridViewColumn.AutoSizeMode%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridViewColumn.InheritedAutoSizeMode%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.RowHeadersWidth%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.ColumnHeadersHeight%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridViewRow.Height%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridViewColumn.Width%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoResizeColumn%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoResizeColumns%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoResizeColumnHeadersHeight%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoResizeRow%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoResizeRows%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridView.AutoResizeRowHeadersWidth%2A?displayProperty=nameWithType>
- <xref:System.Windows.Forms.DataGridViewAutoSizeRowMode>
- <xref:System.Windows.Forms.DataGridViewAutoSizeRowsMode>
- <xref:System.Windows.Forms.DataGridViewAutoSizeColumnMode>
- <xref:System.Windows.Forms.DataGridViewAutoSizeColumnsMode>
- <xref:System.Windows.Forms.DataGridViewColumnHeadersHeightSizeMode>
- <xref:System.Windows.Forms.DataGridViewRowHeadersWidthSizeMode>
- [<span data-ttu-id="4b935-203">调整 Windows 窗体 DataGridView 控件中列和行的大小</span><span class="sxs-lookup"><span data-stu-id="4b935-203">Resizing Columns and Rows in the Windows Forms DataGridView Control</span></span>](resizing-columns-and-rows-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="4b935-204">Windows 窗体 DataGridView 控件中的列填充模式</span><span class="sxs-lookup"><span data-stu-id="4b935-204">Column Fill Mode in the Windows Forms DataGridView Control</span></span>](column-fill-mode-in-the-windows-forms-datagridview-control.md)
- [<span data-ttu-id="4b935-205">如何：设置 Windows 窗体 DataGridView 控件的大小调整模式</span><span class="sxs-lookup"><span data-stu-id="4b935-205">How to: Set the Sizing Modes of the Windows Forms DataGridView Control</span></span>](how-to-set-the-sizing-modes-of-the-windows-forms-datagridview-control.md)
