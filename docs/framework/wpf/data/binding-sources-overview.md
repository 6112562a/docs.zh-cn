---
title: 绑定源概述
ms.date: 03/30/2017
helpviewer_keywords:
- binding data [WPF], binding sources
- data binding [WPF], binding source
- binding sources [WPF]
ms.assetid: 2df2cd11-6aac-4bdf-ab7b-ea5f464cd5ca
ms.openlocfilehash: 72ef84cb53c6eff1fc2fb9459b40e780869243a1
ms.sourcegitcommit: 0be8a279af6d8a43e03141e349d3efd5d35f8767
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/18/2019
ms.locfileid: "59145920"
---
# <a name="binding-sources-overview"></a><span data-ttu-id="45021-102">绑定源概述</span><span class="sxs-lookup"><span data-stu-id="45021-102">Binding Sources Overview</span></span>
<span data-ttu-id="45021-103">在数据绑定中，绑定源对象是指用户从其获取数据的对象。</span><span class="sxs-lookup"><span data-stu-id="45021-103">In data binding, the binding source object refers to the object you obtain data from.</span></span> <span data-ttu-id="45021-104">本主题讨论可用作绑定源的对象类型。</span><span class="sxs-lookup"><span data-stu-id="45021-104">This topic discusses the types of objects you can use as the binding source.</span></span>  

<a name="binding_sources"></a>   
## <a name="binding-source-types"></a><span data-ttu-id="45021-105">绑定源类型</span><span class="sxs-lookup"><span data-stu-id="45021-105">Binding Source Types</span></span>  
 [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] <span data-ttu-id="45021-106">数据绑定支持以下绑定源类型：</span><span class="sxs-lookup"><span data-stu-id="45021-106">data binding supports the following binding source types:</span></span>  
  
|<span data-ttu-id="45021-107">绑定源</span><span class="sxs-lookup"><span data-stu-id="45021-107">Binding Source</span></span>|<span data-ttu-id="45021-108">描述</span><span class="sxs-lookup"><span data-stu-id="45021-108">Description</span></span>|  
|--------------------|-----------------|  
|[!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] <span data-ttu-id="45021-109">对象</span><span class="sxs-lookup"><span data-stu-id="45021-109">objects</span></span>|<span data-ttu-id="45021-110">可以绑定到任何 [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] 对象的公有属性、子属性以及索引器。</span><span class="sxs-lookup"><span data-stu-id="45021-110">You can bind to public properties, sub-properties, as well as indexers, of any [!INCLUDE[TLA#tla_clr](../../../../includes/tlasharptla-clr-md.md)] object.</span></span> <span data-ttu-id="45021-111">绑定引擎使用 [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] 反射来获取属性值。</span><span class="sxs-lookup"><span data-stu-id="45021-111">The binding engine uses [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] reflection to get the values of the properties.</span></span> <span data-ttu-id="45021-112">或者，对象实现<xref:System.ComponentModel.ICustomTypeDescriptor>或注册了<xref:System.ComponentModel.TypeDescriptionProvider>也适用于绑定引擎。</span><span class="sxs-lookup"><span data-stu-id="45021-112">Alternatively, objects that implement <xref:System.ComponentModel.ICustomTypeDescriptor> or have a registered <xref:System.ComponentModel.TypeDescriptionProvider> also work with the binding engine.</span></span><br /><br /> <span data-ttu-id="45021-113">有关如何实现可用作绑定源的类的详细信息，请参阅本主题后面的[为绑定源实现类](#classes)。</span><span class="sxs-lookup"><span data-stu-id="45021-113">For more information about how to implement a class that can serve as a binding source, see [Implementing a Class for the Binding Source](#classes) later in this topic.</span></span>|  
|<span data-ttu-id="45021-114">动态对象</span><span class="sxs-lookup"><span data-stu-id="45021-114">dynamic objects</span></span>|<span data-ttu-id="45021-115">可以将绑定到可用的属性和实现的对象的索引器<xref:System.Dynamic.IDynamicMetaObjectProvider>接口。</span><span class="sxs-lookup"><span data-stu-id="45021-115">You can bind to available properties and indexers of an object that implements the <xref:System.Dynamic.IDynamicMetaObjectProvider> interface.</span></span> <span data-ttu-id="45021-116">如果可以访问代码中的成员，则可以绑定到该成员。</span><span class="sxs-lookup"><span data-stu-id="45021-116">If you can access the member in code, you can bind to it.</span></span> <span data-ttu-id="45021-117">例如，如果动态对象使用户可以通过 `someObjet.AProperty` 访问代码中的成员，则可以通过将绑定路径设置为 `AProperty` 来绑定到该成员。</span><span class="sxs-lookup"><span data-stu-id="45021-117">For example, if a dynamic object enables you to access a member in code via `someObjet.AProperty`, you can bind to it by setting the binding path to `AProperty`.</span></span>|  
|[!INCLUDE[TLA#tla_adonet](../../../../includes/tlasharptla-adonet-md.md)] <span data-ttu-id="45021-118">对象</span><span class="sxs-lookup"><span data-stu-id="45021-118">objects</span></span>|<span data-ttu-id="45021-119">可以将绑定到[!INCLUDE[TLA2#tla_adonet](../../../../includes/tla2sharptla-adonet-md.md)]对象，如<xref:System.Data.DataTable>。</span><span class="sxs-lookup"><span data-stu-id="45021-119">You can bind to [!INCLUDE[TLA2#tla_adonet](../../../../includes/tla2sharptla-adonet-md.md)] objects, such as <xref:System.Data.DataTable>.</span></span> <span data-ttu-id="45021-120">[!INCLUDE[TLA2#tla_adonet](../../../../includes/tla2sharptla-adonet-md.md)] <xref:System.Data.DataView>实现<xref:System.ComponentModel.IBindingList>接口，它提供了绑定引擎侦听的更改通知。</span><span class="sxs-lookup"><span data-stu-id="45021-120">The [!INCLUDE[TLA2#tla_adonet](../../../../includes/tla2sharptla-adonet-md.md)] <xref:System.Data.DataView> implements the <xref:System.ComponentModel.IBindingList> interface, which provides change notifications that the binding engine listens for.</span></span>|  
|[!INCLUDE[TLA#tla_xml](../../../../includes/tlasharptla-xml-md.md)] <span data-ttu-id="45021-121">对象</span><span class="sxs-lookup"><span data-stu-id="45021-121">objects</span></span>|<span data-ttu-id="45021-122">你可以将绑定到并运行`XPath`查询上的<xref:System.Xml.XmlNode>， <xref:System.Xml.XmlDocument>，或<xref:System.Xml.XmlElement>。</span><span class="sxs-lookup"><span data-stu-id="45021-122">You can bind to and run `XPath` queries on an <xref:System.Xml.XmlNode>, <xref:System.Xml.XmlDocument>, or <xref:System.Xml.XmlElement>.</span></span> <span data-ttu-id="45021-123">方便地访问[!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)]标记中的绑定源的数据是使用<xref:System.Windows.Data.XmlDataProvider>对象。</span><span class="sxs-lookup"><span data-stu-id="45021-123">A convenient way to access [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] data that is the binding source in markup is to use an <xref:System.Windows.Data.XmlDataProvider> object.</span></span> <span data-ttu-id="45021-124">有关详细信息，请参阅[使用 XMLDataProvider 和 XPath 查询绑定到 XML 数据](how-to-bind-to-xml-data-using-an-xmldataprovider-and-xpath-queries.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-124">For more information, see [Bind to XML Data Using an XMLDataProvider and XPath Queries](how-to-bind-to-xml-data-using-an-xmldataprovider-and-xpath-queries.md).</span></span><br /><br /> <span data-ttu-id="45021-125">此外可以绑定到<xref:System.Xml.Linq.XElement>或<xref:System.Xml.Linq.XDocument>，或绑定到这些类型的对象上运行通过使用 LINQ to XML 查询的结果。</span><span class="sxs-lookup"><span data-stu-id="45021-125">You can also bind to an <xref:System.Xml.Linq.XElement> or <xref:System.Xml.Linq.XDocument>, or bind to the results of queries run on objects of these types by using LINQ to XML.</span></span> <span data-ttu-id="45021-126">使用 LINQ to XML 访问 XML 数据的标记中的绑定源的简便方法是使用<xref:System.Windows.Data.ObjectDataProvider>对象。</span><span class="sxs-lookup"><span data-stu-id="45021-126">A convenient way to use LINQ to XML to access XML data that is the binding source in markup is to use an <xref:System.Windows.Data.ObjectDataProvider> object.</span></span> <span data-ttu-id="45021-127">有关详细信息，请参阅[绑定到 XDocument、XElement 或 LINQ for XML 查询结果](how-to-bind-to-xdocument-xelement-or-linq-for-xml-query-results.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-127">For more information, see [Bind to XDocument, XElement, or LINQ for XML Query Results](how-to-bind-to-xdocument-xelement-or-linq-for-xml-query-results.md).</span></span>|  
|<span data-ttu-id="45021-128"><xref:System.Windows.DependencyObject> 对象</span><span class="sxs-lookup"><span data-stu-id="45021-128"><xref:System.Windows.DependencyObject> objects</span></span>|<span data-ttu-id="45021-129">可以绑定到的任何依赖关系属性<xref:System.Windows.DependencyObject>。</span><span class="sxs-lookup"><span data-stu-id="45021-129">You can bind to dependency properties of any <xref:System.Windows.DependencyObject>.</span></span> <span data-ttu-id="45021-130">有关示例，请参阅[绑定两个控件的属性](how-to-bind-the-properties-of-two-controls.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-130">For an example, see [Bind the Properties of Two Controls](how-to-bind-the-properties-of-two-controls.md).</span></span>|  
  
<a name="classes"></a>   
## <a name="implementing-a-class-for-the-binding-source"></a><span data-ttu-id="45021-131">为绑定源实现类</span><span class="sxs-lookup"><span data-stu-id="45021-131">Implementing a Class for the Binding Source</span></span>  
 <span data-ttu-id="45021-132">可以创建自己的绑定源。</span><span class="sxs-lookup"><span data-stu-id="45021-132">You can create your own binding sources.</span></span> <span data-ttu-id="45021-133">本部分讨论在要实现用作绑定源的类时需要了解的内容。</span><span class="sxs-lookup"><span data-stu-id="45021-133">This section discusses the things you need to know if you are implementing a class to serve as a binding source.</span></span>  
  
### <a name="providing-change-notifications"></a><span data-ttu-id="45021-134">提供更改通知</span><span class="sxs-lookup"><span data-stu-id="45021-134">Providing Change Notifications</span></span>  
 <span data-ttu-id="45021-135">如果正在使用<xref:System.Windows.Data.BindingMode.OneWay>或<xref:System.Windows.Data.BindingMode.TwoWay>绑定 (因为您希望您[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]更新绑定源属性动态更改时)，您必须实现适当的属性更改通知机制。</span><span class="sxs-lookup"><span data-stu-id="45021-135">If you are using either <xref:System.Windows.Data.BindingMode.OneWay> or <xref:System.Windows.Data.BindingMode.TwoWay> binding (because you want your [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] to update when the binding source properties change dynamically), you must implement a suitable property changed notification mechanism.</span></span> <span data-ttu-id="45021-136">建议的机制是有关[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]或动态类，以实现<xref:System.ComponentModel.INotifyPropertyChanged>接口。</span><span class="sxs-lookup"><span data-stu-id="45021-136">The recommended mechanism is for the [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] or dynamic class to implement the <xref:System.ComponentModel.INotifyPropertyChanged> interface.</span></span> <span data-ttu-id="45021-137">有关详细信息，请参阅[实现属性更改通知](how-to-implement-property-change-notification.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-137">For more information, see [Implement Property Change Notification](how-to-implement-property-change-notification.md).</span></span>  
  
 <span data-ttu-id="45021-138">如果您创建[!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)]对象，它不实现<xref:System.ComponentModel.INotifyPropertyChanged>，必须安排您自己的通知系统，以确保绑定中使用的数据保持最新。</span><span class="sxs-lookup"><span data-stu-id="45021-138">If you create a [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] object that does not implement <xref:System.ComponentModel.INotifyPropertyChanged>, then you must arrange for your own notification system to make sure that the data used in a binding stays current.</span></span> <span data-ttu-id="45021-139">可以通过支持要更改通知的每个属性的 `PropertyChanged` 模式来提供更改通知。</span><span class="sxs-lookup"><span data-stu-id="45021-139">You can provide change notifications by supporting the `PropertyChanged` pattern for each property that you want change notifications for.</span></span> <span data-ttu-id="45021-140">若要支持此模式，请为每个属性定义一个 *PropertyName*Changed 事件，其中 *PropertyName* 是属性的名称。</span><span class="sxs-lookup"><span data-stu-id="45021-140">To support this pattern, you define a *PropertyName*Changed event for each property, where *PropertyName* is the name of the property.</span></span> <span data-ttu-id="45021-141">每次更改属性时都会引发该事件。</span><span class="sxs-lookup"><span data-stu-id="45021-141">You raise the event every time the property changes.</span></span>  
  
 <span data-ttu-id="45021-142">如果绑定源实现了其中一个通知机制，将会自动进行目标更新。</span><span class="sxs-lookup"><span data-stu-id="45021-142">If your binding source implements one of these notification mechanisms, target updates happen automatically.</span></span> <span data-ttu-id="45021-143">如果出于任何原因绑定源不提供正确的属性更改通知，可以选择要使用<xref:System.Windows.Data.BindingExpression.UpdateTarget%2A>方法来显式更新目标属性。</span><span class="sxs-lookup"><span data-stu-id="45021-143">If for any reason your binding source does not provide the proper property changed notifications, you have the option to use the <xref:System.Windows.Data.BindingExpression.UpdateTarget%2A> method to update the target property explicitly.</span></span>  
  
### <a name="other-characteristics"></a><span data-ttu-id="45021-144">其他特性</span><span class="sxs-lookup"><span data-stu-id="45021-144">Other Characteristics</span></span>  
 <span data-ttu-id="45021-145">下表提供了需要注意的其他要点：</span><span class="sxs-lookup"><span data-stu-id="45021-145">The following list provides other important points to note:</span></span>  
  
-   <span data-ttu-id="45021-146">如果要在 [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] 中创建对象，类必须具有默认的构造函数。</span><span class="sxs-lookup"><span data-stu-id="45021-146">If you want to create the object in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], the class must have a default constructor.</span></span> <span data-ttu-id="45021-147">在某些[!INCLUDE[TLA2#tla_net](../../../../includes/tla2sharptla-net-md.md)]语言，如C#，可能会为你创建的默认构造函数。</span><span class="sxs-lookup"><span data-stu-id="45021-147">In some [!INCLUDE[TLA2#tla_net](../../../../includes/tla2sharptla-net-md.md)] languages, such as C#, the default constructor might be created for you.</span></span>  
  
-   <span data-ttu-id="45021-148">用作绑定的绑定源属性的属性必须为类的公共属性。</span><span class="sxs-lookup"><span data-stu-id="45021-148">The properties you use as binding source properties for a binding must be public properties of your class.</span></span> <span data-ttu-id="45021-149">不能出于绑定目的来访问显式定义的接口属性，也不能访问没有基实现的受保护、私有、内部或虚拟属性。</span><span class="sxs-lookup"><span data-stu-id="45021-149">Explicitly defined interface properties cannot be accessed for binding purposes, nor can protected, private, internal, or virtual properties that have no base implementation.</span></span>  
  
-   <span data-ttu-id="45021-150">不能绑定到公共字段。</span><span class="sxs-lookup"><span data-stu-id="45021-150">You cannot bind to public fields.</span></span>  
  
-   <span data-ttu-id="45021-151">类中声明的属性类型是传递给绑定的类型。</span><span class="sxs-lookup"><span data-stu-id="45021-151">The type of the property declared in your class is the type that is passed to the binding.</span></span> <span data-ttu-id="45021-152">不过，绑定最终所用的类型取决于绑定目标属性的类型，而不是绑定源属性的类型。</span><span class="sxs-lookup"><span data-stu-id="45021-152">However, the type ultimately used by the binding depends on the type of the binding target property, not of the binding source property.</span></span> <span data-ttu-id="45021-153">如果类型不同，可能需要编写一个转换器来处理自定义属性最初传递给绑定的方式。</span><span class="sxs-lookup"><span data-stu-id="45021-153">If there is a difference in type, you might want to write a converter to handle how your custom property is initially passed to the binding.</span></span> <span data-ttu-id="45021-154">有关详细信息，请参阅 <xref:System.Windows.Data.IValueConverter>。</span><span class="sxs-lookup"><span data-stu-id="45021-154">For more information, see <xref:System.Windows.Data.IValueConverter>.</span></span>  
  
<a name="objects"></a>   
## <a name="using-entire-objects-as-a-binding-source"></a><span data-ttu-id="45021-155">将整个对象用作绑定源</span><span class="sxs-lookup"><span data-stu-id="45021-155">Using Entire Objects as a Binding Source</span></span>  
 <span data-ttu-id="45021-156">可以将整个对象用作绑定源。</span><span class="sxs-lookup"><span data-stu-id="45021-156">You can use an entire object as a binding source.</span></span> <span data-ttu-id="45021-157">可以通过使用指定绑定源<xref:System.Windows.Data.Binding.Source%2A>或<xref:System.Windows.FrameworkElement.DataContext%2A>属性，然后提供一个空白绑定声明： `{Binding}`。</span><span class="sxs-lookup"><span data-stu-id="45021-157">You can specify a binding source by using the <xref:System.Windows.Data.Binding.Source%2A> or the <xref:System.Windows.FrameworkElement.DataContext%2A> property, and then provide a blank binding declaration: `{Binding}`.</span></span> <span data-ttu-id="45021-158">适用的场景包括绑定到属于类型字符串的对象、绑定到具有感兴趣的多个属性的对象或绑定到集合对象。</span><span class="sxs-lookup"><span data-stu-id="45021-158">Scenarios in which this is useful include binding to objects that are of type string, binding to objects with multiple properties you are interested in, or binding to collection objects.</span></span> <span data-ttu-id="45021-159">有关绑定到整个集合对象的示例，请参阅[对分层数据使用主-从模式](how-to-use-the-master-detail-pattern-with-hierarchical-data.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-159">For an example of binding to an entire collection object, see [Use the Master-Detail Pattern with Hierarchical Data](how-to-use-the-master-detail-pattern-with-hierarchical-data.md).</span></span>  
  
 <span data-ttu-id="45021-160">请注意，可能需要应用自定义逻辑，以便数据对于绑定的目标属性有意义。</span><span class="sxs-lookup"><span data-stu-id="45021-160">Note that you may need to apply custom logic so that the data is meaningful to your bound target property.</span></span> <span data-ttu-id="45021-161">自定义逻辑可能采用自定义转换器形式 （如果尚不存在默认的类型转换） 或<xref:System.Windows.DataTemplate>。</span><span class="sxs-lookup"><span data-stu-id="45021-161">The custom logic may be in the form of a custom converter (if default type conversion does not exist) or a <xref:System.Windows.DataTemplate>.</span></span> <span data-ttu-id="45021-162">有关转换器的详细信息，请参阅[数据绑定概述](data-binding-overview.md)的“数据转换”一节。</span><span class="sxs-lookup"><span data-stu-id="45021-162">For more information about converters, see the Data Conversion section of [Data Binding Overview](data-binding-overview.md).</span></span> <span data-ttu-id="45021-163">有关数据模板的详细信息，请参阅[数据模板化概述](data-templating-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-163">For more information about data templates, see [Data Templating Overview](data-templating-overview.md).</span></span>  
  
<a name="collections"></a>   
## <a name="using-collection-objects-as-a-binding-source"></a><span data-ttu-id="45021-164">将集合对象用作绑定源</span><span class="sxs-lookup"><span data-stu-id="45021-164">Using Collection Objects as a Binding Source</span></span>  
 <span data-ttu-id="45021-165">通常，要用作绑定源的对象是自定义对象的集合。</span><span class="sxs-lookup"><span data-stu-id="45021-165">Often, the object you want to use as the binding source is a collection of custom objects.</span></span> <span data-ttu-id="45021-166">每个对象都用作重复绑定的一个实例的源。</span><span class="sxs-lookup"><span data-stu-id="45021-166">Each object serves as the source for one instance of a repeated binding.</span></span> <span data-ttu-id="45021-167">例如，可能存在由 `CustomerOrder` 对象组成的 `CustomerOrders` 集合，其中应用程序会循环访问该集合以确定存在的订单数量，以及每个订单中的数据。</span><span class="sxs-lookup"><span data-stu-id="45021-167">For example, you might have a `CustomerOrders` collection that consists of `CustomerOrder` objects, where your application iterates over the collection to determine how many orders exist and the data contained in each.</span></span>  
  
 <span data-ttu-id="45021-168">可以枚举实现任何集合<xref:System.Collections.IEnumerable>接口。</span><span class="sxs-lookup"><span data-stu-id="45021-168">You can enumerate over any collection that implements the <xref:System.Collections.IEnumerable> interface.</span></span> <span data-ttu-id="45021-169">但是，若要设置动态绑定，以便插入或删除集合中的更新[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]自动，该集合必须实现<xref:System.Collections.Specialized.INotifyCollectionChanged>接口。</span><span class="sxs-lookup"><span data-stu-id="45021-169">However, to set up dynamic bindings so that insertions or deletions in the collection update the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] automatically, the collection must implement the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface.</span></span> <span data-ttu-id="45021-170">此接口公开一个事件，只要基础集合发生更改，就必须引发该事件。</span><span class="sxs-lookup"><span data-stu-id="45021-170">This interface exposes an event that must be raised whenever the underlying collection changes.</span></span>  
  
 <span data-ttu-id="45021-171"><xref:System.Collections.ObjectModel.ObservableCollection%601>类是公开的数据集合的内置实现<xref:System.Collections.Specialized.INotifyCollectionChanged>接口。</span><span class="sxs-lookup"><span data-stu-id="45021-171">The <xref:System.Collections.ObjectModel.ObservableCollection%601> class is a built-in implementation of a data collection that exposes the <xref:System.Collections.Specialized.INotifyCollectionChanged> interface.</span></span> <span data-ttu-id="45021-172">集合中的个别数据对象必须满足前面章节中所述的要求。</span><span class="sxs-lookup"><span data-stu-id="45021-172">The individual data objects within the collection must satisfy the requirements described in the preceding sections.</span></span> <span data-ttu-id="45021-173">有关示例，请参阅[创建和绑定到 ObservableCollection](how-to-create-and-bind-to-an-observablecollection.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-173">For an example, see [Create and Bind to an ObservableCollection](how-to-create-and-bind-to-an-observablecollection.md).</span></span> <span data-ttu-id="45021-174">在实现自己的集合之前, 请考虑使用<xref:System.Collections.ObjectModel.ObservableCollection%601>或一个现有集合类，如<xref:System.Collections.Generic.List%601>， <xref:System.Collections.ObjectModel.Collection%601>，和<xref:System.ComponentModel.BindingList%601>，此外还有许多其他。</span><span class="sxs-lookup"><span data-stu-id="45021-174">Before implementing your own collection, consider using <xref:System.Collections.ObjectModel.ObservableCollection%601> or one of the existing collection classes, such as <xref:System.Collections.Generic.List%601>, <xref:System.Collections.ObjectModel.Collection%601>, and <xref:System.ComponentModel.BindingList%601>, among many others.</span></span>  
  
 <span data-ttu-id="45021-175">WPF 从不直接绑定到集合。</span><span class="sxs-lookup"><span data-stu-id="45021-175">WPF never binds directly to a collection.</span></span> <span data-ttu-id="45021-176">如果指定集合作为绑定源，WPF 实际上会绑定到该集合的默认视图。</span><span class="sxs-lookup"><span data-stu-id="45021-176">If you specify a collection as a binding source, WPF actually binds to the collection's default view.</span></span> <span data-ttu-id="45021-177">有关默认视图的信息，请参阅[数据绑定概述](data-binding-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-177">For information about default views, see [Data Binding Overview](data-binding-overview.md).</span></span>  
  
 <span data-ttu-id="45021-178">如果有高级的方案，并且您想要实现自己的集合，请考虑使用<xref:System.Collections.IList>接口。</span><span class="sxs-lookup"><span data-stu-id="45021-178">If you have an advanced scenario and you want to implement your own collection, consider using the <xref:System.Collections.IList> interface.</span></span> <span data-ttu-id="45021-179"><xref:System.Collections.IList> 提供了可按照索引，这可以提高性能单独访问的对象的非泛型集合。</span><span class="sxs-lookup"><span data-stu-id="45021-179"><xref:System.Collections.IList> provides a non-generic collection of objects that can be individually accessed by index, which can improve performance.</span></span>  
  
<a name="permissions"></a>   
## <a name="permission-requirements-in-data-binding"></a><span data-ttu-id="45021-180">数据绑定中的权限要求</span><span class="sxs-lookup"><span data-stu-id="45021-180">Permission Requirements in Data Binding</span></span>  
 <span data-ttu-id="45021-181">当进行数据绑定时，必须考虑应用程序的信任级别。</span><span class="sxs-lookup"><span data-stu-id="45021-181">When data binding, you must consider the trust level of the application.</span></span> <span data-ttu-id="45021-182">下表总结了在完全信任或部分信任级别下执行的应用程序中可以绑定到的属性类型：</span><span class="sxs-lookup"><span data-stu-id="45021-182">The following table summarizes what property types can be bound to in an application that is executing in either full trust or partial trust:</span></span>  
  
|<span data-ttu-id="45021-183">属性类型</span><span class="sxs-lookup"><span data-stu-id="45021-183">Property type</span></span><br /><br /> <span data-ttu-id="45021-184">（所有访问修饰符）</span><span class="sxs-lookup"><span data-stu-id="45021-184">(all access modifiers)</span></span>|<span data-ttu-id="45021-185">动态对象属性</span><span class="sxs-lookup"><span data-stu-id="45021-185">Dynamic object property</span></span>|<span data-ttu-id="45021-186">动态对象属性</span><span class="sxs-lookup"><span data-stu-id="45021-186">Dynamic object property</span></span>|<span data-ttu-id="45021-187">CLR 属性</span><span class="sxs-lookup"><span data-stu-id="45021-187">CLR property</span></span>|<span data-ttu-id="45021-188">CLR 属性</span><span class="sxs-lookup"><span data-stu-id="45021-188">CLR property</span></span>|<span data-ttu-id="45021-189">依赖属性</span><span class="sxs-lookup"><span data-stu-id="45021-189">Dependency property</span></span>|<span data-ttu-id="45021-190">依赖属性</span><span class="sxs-lookup"><span data-stu-id="45021-190">Dependency property</span></span>|  
|------------------------------------------------|-----------------------------|-----------------------------|------------------|------------------|-------------------------|-------------------------|  
|<span data-ttu-id="45021-191">**信任级别**</span><span class="sxs-lookup"><span data-stu-id="45021-191">**Trust level**</span></span>|<span data-ttu-id="45021-192">**完全信任**</span><span class="sxs-lookup"><span data-stu-id="45021-192">**Full trust**</span></span>|<span data-ttu-id="45021-193">**部分信任**</span><span class="sxs-lookup"><span data-stu-id="45021-193">**Partial trust**</span></span>|<span data-ttu-id="45021-194">**完全信任**</span><span class="sxs-lookup"><span data-stu-id="45021-194">**Full trust**</span></span>|<span data-ttu-id="45021-195">**部分信任**</span><span class="sxs-lookup"><span data-stu-id="45021-195">**Partial trust**</span></span>|<span data-ttu-id="45021-196">**完全信任**</span><span class="sxs-lookup"><span data-stu-id="45021-196">**Full trust**</span></span>|<span data-ttu-id="45021-197">**部分信任**</span><span class="sxs-lookup"><span data-stu-id="45021-197">**Partial trust**</span></span>|  
|<span data-ttu-id="45021-198">公共类</span><span class="sxs-lookup"><span data-stu-id="45021-198">Public class</span></span>|<span data-ttu-id="45021-199">是</span><span class="sxs-lookup"><span data-stu-id="45021-199">Yes</span></span>|<span data-ttu-id="45021-200">是</span><span class="sxs-lookup"><span data-stu-id="45021-200">Yes</span></span>|<span data-ttu-id="45021-201">是</span><span class="sxs-lookup"><span data-stu-id="45021-201">Yes</span></span>|<span data-ttu-id="45021-202">是</span><span class="sxs-lookup"><span data-stu-id="45021-202">Yes</span></span>|<span data-ttu-id="45021-203">是</span><span class="sxs-lookup"><span data-stu-id="45021-203">Yes</span></span>|<span data-ttu-id="45021-204">是</span><span class="sxs-lookup"><span data-stu-id="45021-204">Yes</span></span>|  
|<span data-ttu-id="45021-205">非公共类</span><span class="sxs-lookup"><span data-stu-id="45021-205">Non-public class</span></span>|<span data-ttu-id="45021-206">是</span><span class="sxs-lookup"><span data-stu-id="45021-206">Yes</span></span>|<span data-ttu-id="45021-207">No</span><span class="sxs-lookup"><span data-stu-id="45021-207">No</span></span>|<span data-ttu-id="45021-208">是</span><span class="sxs-lookup"><span data-stu-id="45021-208">Yes</span></span>|<span data-ttu-id="45021-209">No</span><span class="sxs-lookup"><span data-stu-id="45021-209">No</span></span>|<span data-ttu-id="45021-210">是</span><span class="sxs-lookup"><span data-stu-id="45021-210">Yes</span></span>|<span data-ttu-id="45021-211">是</span><span class="sxs-lookup"><span data-stu-id="45021-211">Yes</span></span>|  
  
 <span data-ttu-id="45021-212">此表描述了数据绑定中有关权限要求的以下要点：</span><span class="sxs-lookup"><span data-stu-id="45021-212">This table describes the following important points about permission requirements in data binding:</span></span>  
  
-   <span data-ttu-id="45021-213">对于 [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] 属性，只要绑定引擎能够使用反射访问绑定源属性，数据绑定就有效。</span><span class="sxs-lookup"><span data-stu-id="45021-213">For [!INCLUDE[TLA2#tla_clr](../../../../includes/tla2sharptla-clr-md.md)] properties, data binding works as long as the binding engine is able to access the binding source property using reflection.</span></span> <span data-ttu-id="45021-214">否则，绑定引擎会发出找不到属性的警告，并使用回退值或默认值（如果可用）。</span><span class="sxs-lookup"><span data-stu-id="45021-214">Otherwise, the binding engine issues a warning that the property cannot be found and uses the fallback value or the default value, if it is available.</span></span>  
  
-   <span data-ttu-id="45021-215">可以绑定到在编译时或运行时定义的动态对象上的属性。</span><span class="sxs-lookup"><span data-stu-id="45021-215">You can bind to properties on dynamic objects that are defined at compile time or run time.</span></span>  
  
-   <span data-ttu-id="45021-216">始终可以绑定到依赖属性。</span><span class="sxs-lookup"><span data-stu-id="45021-216">You can always bind to dependency properties.</span></span>  
  
 <span data-ttu-id="45021-217">[!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] 绑定的权限要求非常类似。</span><span class="sxs-lookup"><span data-stu-id="45021-217">The permission requirement for [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] binding is similar.</span></span> <span data-ttu-id="45021-218">在部分信任沙盒中，<xref:System.Windows.Data.XmlDataProvider>没有权限访问指定的数据时将失败。</span><span class="sxs-lookup"><span data-stu-id="45021-218">In a partial-trust sandbox, <xref:System.Windows.Data.XmlDataProvider> fails when it does not have permissions to access the specified data.</span></span>  
  
 <span data-ttu-id="45021-219">具有匿名类型的对象是内部对象。</span><span class="sxs-lookup"><span data-stu-id="45021-219">Objects with an anonymous type are internal.</span></span> <span data-ttu-id="45021-220">只有在完全信任级别下运行，才能绑定到匿名类型的属性。</span><span class="sxs-lookup"><span data-stu-id="45021-220">You can bind to properties of anonymous types only when running in full trust.</span></span> <span data-ttu-id="45021-221">有关匿名类型的详细信息，请参阅[匿名类型（C# 编程指南）](~/docs/csharp/programming-guide/classes-and-structs/anonymous-types.md)或[匿名类型 (Visual Basic)](~/docs/visual-basic/programming-guide/language-features/objects-and-classes/anonymous-types.md) (Visual Basic)。</span><span class="sxs-lookup"><span data-stu-id="45021-221">For more information about anonymous types, see [Anonymous Types (C# Programming Guide)](~/docs/csharp/programming-guide/classes-and-structs/anonymous-types.md) or [Anonymous Types (Visual Basic)](~/docs/visual-basic/programming-guide/language-features/objects-and-classes/anonymous-types.md) (Visual Basic).</span></span>  
  
 <span data-ttu-id="45021-222">有关部分信任安全的详细信息，请参阅 [WPF 部分信任安全](../wpf-partial-trust-security.md)。</span><span class="sxs-lookup"><span data-stu-id="45021-222">For more information about partial-trust security, see [WPF Partial Trust Security](../wpf-partial-trust-security.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="45021-223">请参阅</span><span class="sxs-lookup"><span data-stu-id="45021-223">See also</span></span>

- <xref:System.Windows.Data.ObjectDataProvider>
- <xref:System.Windows.Data.XmlDataProvider>
- [<span data-ttu-id="45021-224">指定绑定源</span><span class="sxs-lookup"><span data-stu-id="45021-224">Specify the Binding Source</span></span>](how-to-specify-the-binding-source.md)
- [<span data-ttu-id="45021-225">数据绑定概述</span><span class="sxs-lookup"><span data-stu-id="45021-225">Data Binding Overview</span></span>](data-binding-overview.md)
- [<span data-ttu-id="45021-226">帮助主题</span><span class="sxs-lookup"><span data-stu-id="45021-226">How-to Topics</span></span>](data-binding-how-to-topics.md)
- [<span data-ttu-id="45021-227">使用 LINQ to XML 进行 WPF 数据绑定概述</span><span class="sxs-lookup"><span data-stu-id="45021-227">WPF Data Binding with LINQ to XML Overview</span></span>](/visualstudio/designers/wpf-data-binding-with-linq-to-xml-overview)
- [<span data-ttu-id="45021-228">数据绑定</span><span class="sxs-lookup"><span data-stu-id="45021-228">Data Binding</span></span>](../advanced/optimizing-performance-data-binding.md)
