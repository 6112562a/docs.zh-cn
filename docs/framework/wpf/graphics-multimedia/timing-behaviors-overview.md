---
title: 计时行为概述
ms.date: 03/30/2017
helpviewer_keywords:
- timing behaviors [WPF]
- behaviors [WPF], timing
ms.assetid: 5b714d46-bd46-48b8-b467-b4be89ba3091
ms.openlocfilehash: a85f980a0cefaa282e9e92d533a2306a9009e3e7
ms.sourcegitcommit: f8c36054eab877de4d40a705aacafa2552ce70e9
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/31/2019
ms.locfileid: "75559945"
---
# <a name="timing-behaviors-overview"></a><span data-ttu-id="c1b08-102">计时行为概述</span><span class="sxs-lookup"><span data-stu-id="c1b08-102">Timing Behaviors Overview</span></span>
<span data-ttu-id="c1b08-103">本主题介绍动画和其他 <xref:System.Windows.Media.Animation.Timeline> 对象的计时行为。</span><span class="sxs-lookup"><span data-stu-id="c1b08-103">This topic describes the timing behaviors of animations and other <xref:System.Windows.Media.Animation.Timeline> objects.</span></span>  
  
<a name="prerequisites"></a>   
## <a name="prerequisites"></a><span data-ttu-id="c1b08-104">先决条件</span><span class="sxs-lookup"><span data-stu-id="c1b08-104">Prerequisites</span></span>  
 <span data-ttu-id="c1b08-105">若要了解本主题，应熟悉基本动画功能。</span><span class="sxs-lookup"><span data-stu-id="c1b08-105">To understand this topic, you should be familiar with basic animation features.</span></span> <span data-ttu-id="c1b08-106">有关详细信息，请参阅[动画概述](animation-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="c1b08-106">For more information, see the [Animation Overview](animation-overview.md).</span></span>  
  
<a name="timelinetypes"></a>   
## <a name="timeline-types"></a><span data-ttu-id="c1b08-107">时间线类型</span><span class="sxs-lookup"><span data-stu-id="c1b08-107">Timeline Types</span></span>  
 <span data-ttu-id="c1b08-108">一个 <xref:System.Windows.Media.Animation.Timeline> 表示时间段。</span><span class="sxs-lookup"><span data-stu-id="c1b08-108">A <xref:System.Windows.Media.Animation.Timeline> represents a segment of time.</span></span> <span data-ttu-id="c1b08-109">它提供的属性让你可以指定该时间段的长度、开始时间、重复次数、该时间段内时间进度的快慢等。</span><span class="sxs-lookup"><span data-stu-id="c1b08-109">It provides properties that enable you to specify the length of that segment, when it should start, how many times it will repeat, how fast time progresses in that segment, and more.</span></span>  
  
 <span data-ttu-id="c1b08-110">从时间线类继承的类可提供附加功能，例如动画和媒体播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-110">Classes that inherit from the timeline class provide additional functionality, such as animation and media playback.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="c1b08-111">提供以下 <xref:System.Windows.Media.Animation.Timeline> 类型。</span><span class="sxs-lookup"><span data-stu-id="c1b08-111">provides the following <xref:System.Windows.Media.Animation.Timeline> types.</span></span>  
  
|<span data-ttu-id="c1b08-112">时间线类型</span><span class="sxs-lookup"><span data-stu-id="c1b08-112">Timeline type</span></span>|<span data-ttu-id="c1b08-113">描述</span><span class="sxs-lookup"><span data-stu-id="c1b08-113">Description</span></span>|  
|-------------------|-----------------|  
|<xref:System.Windows.Media.Animation.AnimationTimeline>|<span data-ttu-id="c1b08-114">用于生成用于对属性进行动画处理的输出值的 <xref:System.Windows.Media.Animation.Timeline> 对象的抽象基类。</span><span class="sxs-lookup"><span data-stu-id="c1b08-114">Abstract base class for <xref:System.Windows.Media.Animation.Timeline> objects that generate output values for animating properties.</span></span>|  
|<xref:System.Windows.Media.MediaTimeline>|<span data-ttu-id="c1b08-115">从媒体文件生成输出。</span><span class="sxs-lookup"><span data-stu-id="c1b08-115">Generates output from a media file.</span></span>|  
|<xref:System.Windows.Media.Animation.ParallelTimeline>|<span data-ttu-id="c1b08-116">一种用于分组和控制子 <xref:System.Windows.Media.Animation.Timeline> 对象的 <xref:System.Windows.Media.Animation.TimelineGroup> 类型。</span><span class="sxs-lookup"><span data-stu-id="c1b08-116">A type of <xref:System.Windows.Media.Animation.TimelineGroup> that groups and controls child <xref:System.Windows.Media.Animation.Timeline> objects.</span></span>|  
|<xref:System.Windows.Media.Animation.Storyboard>|<span data-ttu-id="c1b08-117">一种 <xref:System.Windows.Media.Animation.ParallelTimeline> 类型，它为其包含的时间线对象提供目标信息。</span><span class="sxs-lookup"><span data-stu-id="c1b08-117">A type of <xref:System.Windows.Media.Animation.ParallelTimeline> that provides targeting information for the Timeline objects it contains.</span></span>|  
|<xref:System.Windows.Media.Animation.Timeline>|<span data-ttu-id="c1b08-118">定义计时行为的抽象基类。</span><span class="sxs-lookup"><span data-stu-id="c1b08-118">Abstract base class that defines timing behaviors.</span></span>|  
|<xref:System.Windows.Media.Animation.TimelineGroup>|<span data-ttu-id="c1b08-119">可包含其他 <xref:System.Windows.Media.Animation.Timeline> 对象的 <xref:System.Windows.Media.Animation.Timeline> 对象的抽象类。</span><span class="sxs-lookup"><span data-stu-id="c1b08-119">Abstract class for <xref:System.Windows.Media.Animation.Timeline> objects that can contain other <xref:System.Windows.Media.Animation.Timeline> objects.</span></span>|  
  
<a name="propertiesthatcontroltimelinelength"></a>   
## <a name="properties-that-control-the-length-of-a-timeline"></a><span data-ttu-id="c1b08-120">用于控制时间线长度的属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-120">Properties that Control the Length of a Timeline</span></span>  
 <span data-ttu-id="c1b08-121"><xref:System.Windows.Media.Animation.Timeline> 表示时间段，并且可以通过不同的方式描述时间线的长度。</span><span class="sxs-lookup"><span data-stu-id="c1b08-121">A <xref:System.Windows.Media.Animation.Timeline> represents a segment of time, and the length of a timeline can be described in different ways.</span></span> <span data-ttu-id="c1b08-122">下表定义了几个用于描述时间线长度的术语。</span><span class="sxs-lookup"><span data-stu-id="c1b08-122">The following table defines several terms for describing the length of a timeline.</span></span>  
  
|<span data-ttu-id="c1b08-123">术语</span><span class="sxs-lookup"><span data-stu-id="c1b08-123">Term</span></span>|<span data-ttu-id="c1b08-124">描述</span><span class="sxs-lookup"><span data-stu-id="c1b08-124">Description</span></span>|<span data-ttu-id="c1b08-125">属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-125">Properties</span></span>||||  
|----------|-----------------|----------------|-|-|-|  
|<span data-ttu-id="c1b08-126">简单持续时间</span><span class="sxs-lookup"><span data-stu-id="c1b08-126">Simple duration</span></span>|<span data-ttu-id="c1b08-127">时间线向前迭代一次所需的时间长度。</span><span class="sxs-lookup"><span data-stu-id="c1b08-127">The length of time a timeline takes to make a single forward iteration.</span></span>|<xref:System.Windows.Media.Animation.Timeline.Duration%2A>||||  
|<span data-ttu-id="c1b08-128">一次重复</span><span class="sxs-lookup"><span data-stu-id="c1b08-128">One repetition</span></span>|<span data-ttu-id="c1b08-129">时间线向前播放一次所花的时间长度，如果 <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> 属性为 true，则向后播放一次。</span><span class="sxs-lookup"><span data-stu-id="c1b08-129">The length of time it takes for a timeline to play forward once and, if the <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property is true, play backwards once.</span></span>|<span data-ttu-id="c1b08-130"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A></span><span class="sxs-lookup"><span data-stu-id="c1b08-130"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A></span></span>||||  
|<span data-ttu-id="c1b08-131">活动期</span><span class="sxs-lookup"><span data-stu-id="c1b08-131">Active period</span></span>|<span data-ttu-id="c1b08-132">时间线完成其 <xref:System.Windows.Media.Animation.RepeatBehavior> 属性指定的所有重复所用的时间长度。</span><span class="sxs-lookup"><span data-stu-id="c1b08-132">The length of time it takes for a timeline to complete all the repetitions specified by its <xref:System.Windows.Media.Animation.RepeatBehavior> property.</span></span>|<span data-ttu-id="c1b08-133"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>, <xref:System.Windows.Media.Animation.RepeatBehavior></span><span class="sxs-lookup"><span data-stu-id="c1b08-133"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>, <xref:System.Windows.Media.Animation.RepeatBehavior></span></span>||||  
  
<a name="duration"></a>   
### <a name="the-duration-property"></a><span data-ttu-id="c1b08-134">Duration 属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-134">The Duration Property</span></span>  
 <span data-ttu-id="c1b08-135">如前文所述，时间线表示时间段。</span><span class="sxs-lookup"><span data-stu-id="c1b08-135">As previously mentioned, a timeline represents a segment of time.</span></span> <span data-ttu-id="c1b08-136">该时间段的长度由时间线的 <xref:System.Windows.Media.Animation.Timeline.Duration%2A>确定。</span><span class="sxs-lookup"><span data-stu-id="c1b08-136">The length of that segment is determined by the timeline's <xref:System.Windows.Media.Animation.Timeline.Duration%2A>.</span></span> <span data-ttu-id="c1b08-137">当时间线到达其持续时间的终点时，就会停止播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-137">When a timeline reaches the end of its duration, it stops playing.</span></span> <span data-ttu-id="c1b08-138">如果时间线具有子时间线，这些子时间线也会停止播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-138">If the timeline has child timelines, they stop playing as well.</span></span> <span data-ttu-id="c1b08-139">对于动画，<xref:System.Windows.Media.Animation.Timeline.Duration%2A> 指定动画从其起始值过渡到其结束值所用的时间。</span><span class="sxs-lookup"><span data-stu-id="c1b08-139">In the case of an animation, the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> specifies how long the animation takes to transition from its starting value to its ending value.</span></span> <span data-ttu-id="c1b08-140">时间线的持续时间有时称为*简单持续时间*，用于区分单个迭代的持续时间和动画播放的总时间（包括重复）。</span><span class="sxs-lookup"><span data-stu-id="c1b08-140">A timeline's duration is sometimes called its *simple duration*, to distinguish between the duration of a single iteration and the total length of time the animation plays including repetitions.</span></span> <span data-ttu-id="c1b08-141">您可以使用有限时间值或特殊值 <xref:System.Windows.Duration.Automatic%2A> 或 <xref:System.Windows.Duration.Forever%2A>来指定持续时间。</span><span class="sxs-lookup"><span data-stu-id="c1b08-141">You can specify a duration using a finite time value or the special values <xref:System.Windows.Duration.Automatic%2A> or <xref:System.Windows.Duration.Forever%2A>.</span></span> <span data-ttu-id="c1b08-142">动画的持续时间应该解析为 <xref:System.Windows.Duration.TimeSpan%2A> 值，因此它可以在值之间过渡。</span><span class="sxs-lookup"><span data-stu-id="c1b08-142">An animation's duration should resolve to a <xref:System.Windows.Duration.TimeSpan%2A> value, so it can transition between values.</span></span>  
  
 <span data-ttu-id="c1b08-143">下面的示例演示一个 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 为5秒的 <xref:System.Windows.Media.Animation.DoubleAnimation>。</span><span class="sxs-lookup"><span data-stu-id="c1b08-143">The following example shows a <xref:System.Windows.Media.Animation.DoubleAnimation> with a <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of five seconds.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#AnimationWith5SecondDurationInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#animationwith5seconddurationinline)]  
  
 <span data-ttu-id="c1b08-144">容器时间线（如 <xref:System.Windows.Media.Animation.Storyboard> 和 <xref:System.Windows.Media.Animation.ParallelTimeline>）的默认持续时间为 <xref:System.Windows.Duration.Automatic%2A>，这意味着在其最后一个子级停止播放时，它们会自动结束。</span><span class="sxs-lookup"><span data-stu-id="c1b08-144">Container timelines, such as <xref:System.Windows.Media.Animation.Storyboard> and <xref:System.Windows.Media.Animation.ParallelTimeline>, have a default duration of <xref:System.Windows.Duration.Automatic%2A>, which means they automatically end when their last child stops playing.</span></span> <span data-ttu-id="c1b08-145">下面的示例演示了一个 <xref:System.Windows.Media.Animation.Storyboard>，其 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 解析为5秒，这是其所有子 <xref:System.Windows.Media.Animation.DoubleAnimation> 对象完成所用的时间长度。</span><span class="sxs-lookup"><span data-stu-id="c1b08-145">The following example shows a <xref:System.Windows.Media.Animation.Storyboard> whose <xref:System.Windows.Media.Animation.Timeline.Duration%2A> resolves to five seconds, the length of time it takes all its child <xref:System.Windows.Media.Animation.DoubleAnimation> objects to complete.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#ContainerTimelineExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#containertimelineexampleinline)]  
  
 <span data-ttu-id="c1b08-146">通过将容器时间线的 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 设置为 <xref:System.Windows.Duration.TimeSpan%2A> 值，你可以强制播放比它的子 <xref:System.Windows.Media.Animation.Timeline> 对象更长或更短的时间。</span><span class="sxs-lookup"><span data-stu-id="c1b08-146">By setting the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of a container timeline to a <xref:System.Windows.Duration.TimeSpan%2A> value, you can force to play longer or shorter than its child <xref:System.Windows.Media.Animation.Timeline> objects would play.</span></span> <span data-ttu-id="c1b08-147">如果将 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 设置为小于容器时间线的子 <xref:System.Windows.Media.Animation.Timeline> 对象的长度的值，则当容器时间线完成时，子 <xref:System.Windows.Media.Animation.Timeline> 对象将停止播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-147">If you set the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> to a value that's smaller than the length of the container timeline's child <xref:System.Windows.Media.Animation.Timeline> objects, the child <xref:System.Windows.Media.Animation.Timeline> objects stop playing when the container timeline does.</span></span> <span data-ttu-id="c1b08-148">下面的示例将前面的示例中 <xref:System.Windows.Media.Animation.Storyboard> 的 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 设置为三秒。</span><span class="sxs-lookup"><span data-stu-id="c1b08-148">The following example sets the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of the <xref:System.Windows.Media.Animation.Storyboard> from the preceding examples to three seconds.</span></span> <span data-ttu-id="c1b08-149">因此，第一个 <xref:System.Windows.Media.Animation.DoubleAnimation> 在三秒后停止前进，在这种情况下，当动画将目标矩形的宽度设定为60时，就会停止。</span><span class="sxs-lookup"><span data-stu-id="c1b08-149">As a result, the first <xref:System.Windows.Media.Animation.DoubleAnimation> stops progressing after three seconds, when it has animated the target rectangle's width to 60.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#ContainerTimelineWithShorterDurationExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#containertimelinewithshorterdurationexampleinline)]  
  
<a name="repeatinganimations"></a>   
### <a name="the-repeatbehavior-property"></a><span data-ttu-id="c1b08-150">RepeatBehavior 属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-150">The RepeatBehavior Property</span></span>  
 <span data-ttu-id="c1b08-151"><xref:System.Windows.Media.Animation.Timeline> 的 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> 属性控制其简单持续时间重复的次数。</span><span class="sxs-lookup"><span data-stu-id="c1b08-151">The <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property of a <xref:System.Windows.Media.Animation.Timeline> controls how many times it repeats its simple duration.</span></span> <span data-ttu-id="c1b08-152">使用 "<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>" 属性可以指定时间线播放的次数（迭代 <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A>）或它应播放的总时间长度（重复 <xref:System.Windows.Media.Animation.RepeatBehavior.Duration%2A>）。</span><span class="sxs-lookup"><span data-stu-id="c1b08-152">Using the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property, you can specify how many times the timeline plays (an iteration <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A>) or the total length of time it should play (a repeat <xref:System.Windows.Media.Animation.RepeatBehavior.Duration%2A>).</span></span> <span data-ttu-id="c1b08-153">无论是哪一种情况，动画都将从头到尾运行很多次，直到完成要求的次数或经历完所需的一段时间。</span><span class="sxs-lookup"><span data-stu-id="c1b08-153">In either case, the animation goes through as many beginning-to-end runs as necessary to fill the requested count or duration.</span></span> <span data-ttu-id="c1b08-154">默认情况下，时间线的迭代次数为 `1.0`，这意味着它们只播放一次，根本不重复。</span><span class="sxs-lookup"><span data-stu-id="c1b08-154">By default, timelines have an iteration count of `1.0`, which means they play once and do not repeat at all.</span></span>  
  
 <span data-ttu-id="c1b08-155">下面的示例使用 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> 属性，通过指定迭代次数，使 <xref:System.Windows.Media.Animation.DoubleAnimation> 播放其简单持续时间的两倍。</span><span class="sxs-lookup"><span data-stu-id="c1b08-155">The following example uses the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property to make a <xref:System.Windows.Media.Animation.DoubleAnimation> play for twice its simple duration by specifying an iteration count.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBRepeatBehavior2xExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbrepeatbehavior2xexampleinline)]  
  
 <span data-ttu-id="c1b08-156">下一个示例使用 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> 属性，使 <xref:System.Windows.Media.Animation.DoubleAnimation> 的播放时间为其简单持续时间的一半。</span><span class="sxs-lookup"><span data-stu-id="c1b08-156">The next example uses the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property to make the <xref:System.Windows.Media.Animation.DoubleAnimation> play for half its simple duration.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBRepeatBehavior05xExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbrepeatbehavior05xexampleinline)]  
  
 <span data-ttu-id="c1b08-157">如果将 <xref:System.Windows.Media.Animation.Timeline> 的 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> 属性设置为 <xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>，则 <xref:System.Windows.Media.Animation.Timeline> 会重复，直到以交互方式或通过计时系统停止。</span><span class="sxs-lookup"><span data-stu-id="c1b08-157">If you set the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property of a <xref:System.Windows.Media.Animation.Timeline> to <xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>, the <xref:System.Windows.Media.Animation.Timeline> repeats until stopped interactively or by the timing system.</span></span> <span data-ttu-id="c1b08-158">下面的示例使用 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> 属性，使 <xref:System.Windows.Media.Animation.DoubleAnimation> 无限期播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-158">The following example uses the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property to make the <xref:System.Windows.Media.Animation.DoubleAnimation> play indefinitely.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBRepeatBehaviorForeverExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbrepeatbehaviorforeverexampleinline)]  
  
 <span data-ttu-id="c1b08-159">有关其他示例，请参阅[重复使用动画](how-to-repeat-an-animation.md)。</span><span class="sxs-lookup"><span data-stu-id="c1b08-159">For an additional example, see [Repeat an Animation](how-to-repeat-an-animation.md).</span></span>  
  
<a name="autoreverseproperty"></a>   
### <a name="the-autoreverse-property"></a><span data-ttu-id="c1b08-160">AutoReverse 属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-160">The AutoReverse Property</span></span>  
 <span data-ttu-id="c1b08-161"><xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> 属性指定 <xref:System.Windows.Media.Animation.Timeline> 在每次向前迭代结束时是否会向后播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-161">The <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property specifies whether a <xref:System.Windows.Media.Animation.Timeline> will play backwards at the end of each forward iteration.</span></span> <span data-ttu-id="c1b08-162">下面的示例将设置为 <xref:System.Windows.Media.Animation.DoubleAnimation> 的 <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> 属性 `true`;因此，它将从零动画处理到100，然后从100动画处理到零。</span><span class="sxs-lookup"><span data-stu-id="c1b08-162">The following example sets to the <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property of a <xref:System.Windows.Media.Animation.DoubleAnimation> to `true`; as a result, it animates from zero to 100, and then from 100 to zero.</span></span> <span data-ttu-id="c1b08-163">它的总播放时长为 10 秒。</span><span class="sxs-lookup"><span data-stu-id="c1b08-163">It plays for a total of 10 seconds.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBAutoReverseExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbautoreverseexampleinline)]  
  
 <span data-ttu-id="c1b08-164">当使用 <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A> 值指定 <xref:System.Windows.Media.Animation.Timeline> 的 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>，并且 <xref:System.Windows.Media.Animation.Timeline> `true`的 <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> 属性时，单个重复项由一个向前迭代后跟一个向后迭代。</span><span class="sxs-lookup"><span data-stu-id="c1b08-164">When you use a <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A> value to specify the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> of a <xref:System.Windows.Media.Animation.Timeline> and the <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property of that <xref:System.Windows.Media.Animation.Timeline> is `true`, a single repetition consists of one forward iteration followed by one backwards iteration.</span></span>  <span data-ttu-id="c1b08-165">下面的示例将前面的示例中 <xref:System.Windows.Media.Animation.DoubleAnimation> 的 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> 设置为2的 <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A>。</span><span class="sxs-lookup"><span data-stu-id="c1b08-165">The following example sets the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> of the <xref:System.Windows.Media.Animation.DoubleAnimation> from the preceding example to a <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A> of two.</span></span> <span data-ttu-id="c1b08-166">因此，<xref:System.Windows.Media.Animation.DoubleAnimation> 的播放时间为20秒：前进5秒，反向5秒，再前进5秒，然后反向5秒钟。</span><span class="sxs-lookup"><span data-stu-id="c1b08-166">As a result, the <xref:System.Windows.Media.Animation.DoubleAnimation> plays for 20 seconds: forward for five seconds, backwards for five seconds, forward for 5 seconds again, and then backwards for five seconds.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBAutoReverseRepeatExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbautoreverserepeatexampleinline)]  
  
 <span data-ttu-id="c1b08-167">如果容器时间线具有子 <xref:System.Windows.Media.Animation.Timeline> 对象，则当容器时间线时，它们会反转。</span><span class="sxs-lookup"><span data-stu-id="c1b08-167">If a container timeline has child <xref:System.Windows.Media.Animation.Timeline> objects, they reverse when the container timeline does.</span></span> <span data-ttu-id="c1b08-168">有关其他示例，请参阅[指定时间线是否自动反转](how-to-specify-whether-a-timeline-automatically-reverses.md)。</span><span class="sxs-lookup"><span data-stu-id="c1b08-168">For additional examples, see [Specify Whether a Timeline Automatically Reverses](how-to-specify-whether-a-timeline-automatically-reverses.md).</span></span>  
  
<a name="timelinebegin"></a>   
## <a name="the-begintime-property"></a><span data-ttu-id="c1b08-169">BeginTime 属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-169">The BeginTime Property</span></span>  
 <span data-ttu-id="c1b08-170">利用 <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> 属性可以指定时间线的开始时间。</span><span class="sxs-lookup"><span data-stu-id="c1b08-170">The <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> property enables you to specify when a timeline starts.</span></span>  <span data-ttu-id="c1b08-171">时间线的开始时间相对于其父时间线。</span><span class="sxs-lookup"><span data-stu-id="c1b08-171">A timeline's begin time is relative to its parent timeline.</span></span> <span data-ttu-id="c1b08-172">如果开始时间为零秒，则表示其父时间线开始后，该时间线立即开始；如果开始时间为其他值，会在父时间线和子时间线的开始播放时间之间产生时间偏差。</span><span class="sxs-lookup"><span data-stu-id="c1b08-172">A begin time of zero seconds means the timeline starts as soon as it parent starts; any other value creates an offset between when the parent timeline starts playing and when the child timeline plays.</span></span> <span data-ttu-id="c1b08-173">例如，如果开始时间为两秒，则表示在其父时间线到达两秒后，该时间线才开始播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-173">For example, a begin time of two seconds means the timeline starts playing when its parent has reached a time of two seconds.</span></span> <span data-ttu-id="c1b08-174">默认情况下，所有时间线的开始时间都为零秒。</span><span class="sxs-lookup"><span data-stu-id="c1b08-174">By default, all timelines have a begin time of zero seconds.</span></span> <span data-ttu-id="c1b08-175">你还可以将时间线的开始时间设置为 `null`，这会阻止时间线启动。</span><span class="sxs-lookup"><span data-stu-id="c1b08-175">You may also set a timeline's begin time to `null`, which prevents the timeline from starting.</span></span> <span data-ttu-id="c1b08-176">在 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]中，使用[X:Null 标记扩展](../../../desktop-wpf/xaml-services/xnull-markup-extension.md)指定 null。</span><span class="sxs-lookup"><span data-stu-id="c1b08-176">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you specify null using the [x:Null Markup Extension](../../../desktop-wpf/xaml-services/xnull-markup-extension.md).</span></span>  
  
 <span data-ttu-id="c1b08-177">请注意，每当时间线因为其 <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> 设置而重复时，就不会应用开始时间。</span><span class="sxs-lookup"><span data-stu-id="c1b08-177">Note that the begin time is not applied each time a timeline repeats because of its <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> setting.</span></span> <span data-ttu-id="c1b08-178">如果创建的动画的 <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> 为10秒，而 <xref:System.Windows.Media.Animation.RepeatBehavior> <xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>，则在第一次播放动画之前会出现10秒的延迟，但对于每个连续的重复，则不会出现。</span><span class="sxs-lookup"><span data-stu-id="c1b08-178">If you were to create an animation with a <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> of 10 seconds and a <xref:System.Windows.Media.Animation.RepeatBehavior> of <xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>, there would be a 10-second delay before the animation played for the first time, but not for each successive repetition.</span></span> <span data-ttu-id="c1b08-179">但是，如果动画的父时间线重新开始或重复，则会延迟 10 秒。</span><span class="sxs-lookup"><span data-stu-id="c1b08-179">However, if the animation's parent timeline were to restart or repeat, the 10-second delay would occur.</span></span>  
  
 <span data-ttu-id="c1b08-180"><xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> 属性适用于交错时间线。</span><span class="sxs-lookup"><span data-stu-id="c1b08-180">The <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> property is useful for staggering timelines.</span></span> <span data-ttu-id="c1b08-181">下面的示例创建一个具有两个子 <xref:System.Windows.Media.Animation.DoubleAnimation> 对象的 <xref:System.Windows.Media.Animation.Storyboard>。</span><span class="sxs-lookup"><span data-stu-id="c1b08-181">The following example creates a <xref:System.Windows.Media.Animation.Storyboard> that has two child <xref:System.Windows.Media.Animation.DoubleAnimation> objects.</span></span> <span data-ttu-id="c1b08-182">第一个动画的 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 为5秒，第二个动画的 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 为3秒。</span><span class="sxs-lookup"><span data-stu-id="c1b08-182">The first animation has a <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of five seconds, and the second has a <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of 3 seconds.</span></span> <span data-ttu-id="c1b08-183">此示例将第一个 <xref:System.Windows.Media.Animation.DoubleAnimation> 的 <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> 设置为5秒，使其在第一个 <xref:System.Windows.Media.Animation.DoubleAnimation> 结束后开始播放。</span><span class="sxs-lookup"><span data-stu-id="c1b08-183">The example sets the <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> of the second <xref:System.Windows.Media.Animation.DoubleAnimation> to 5 seconds, so that it begins playing after the first <xref:System.Windows.Media.Animation.DoubleAnimation> ends.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBBeginTimeExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbbegintimeexampleinline)]  
  
<a name="fillbehaviorproperty"></a>   
## <a name="the-fillbehavior-property"></a><span data-ttu-id="c1b08-184">FillBehavior 属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-184">The FillBehavior Property</span></span>  
 <span data-ttu-id="c1b08-185">当 <xref:System.Windows.Media.Animation.Timeline> 达到其总活动持续时间的终点时，<xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> 属性指定它是停止还是保留其最后一个值。</span><span class="sxs-lookup"><span data-stu-id="c1b08-185">When a <xref:System.Windows.Media.Animation.Timeline> reaches the end of its total active duration, the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property specifies whether it stops or holds its last value.</span></span> <span data-ttu-id="c1b08-186"><xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> 为 <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> "保存" 其输出值的动画：要进行动画处理的属性将保留动画的最后一个值。</span><span class="sxs-lookup"><span data-stu-id="c1b08-186">An animation with a <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> of <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> "holds" its output value: the property being animated retains the last value of the animation.</span></span> <span data-ttu-id="c1b08-187">值 <xref:System.Windows.Media.Animation.FillBehavior.Stop> 会导致动画结束后，动画停止影响其目标属性。</span><span class="sxs-lookup"><span data-stu-id="c1b08-187">A value of <xref:System.Windows.Media.Animation.FillBehavior.Stop> causes that the animation stop affecting its target property after it ends.</span></span>  
  
 <span data-ttu-id="c1b08-188">下面的示例创建一个具有两个子 <xref:System.Windows.Media.Animation.DoubleAnimation> 对象的 <xref:System.Windows.Media.Animation.Storyboard>。</span><span class="sxs-lookup"><span data-stu-id="c1b08-188">The following example creates a <xref:System.Windows.Media.Animation.Storyboard> that has two child <xref:System.Windows.Media.Animation.DoubleAnimation> objects.</span></span> <span data-ttu-id="c1b08-189">这两个 <xref:System.Windows.Media.Animation.DoubleAnimation> 对象均对从0到100的 <xref:System.Windows.Shapes.Rectangle> 的 <xref:System.Windows.FrameworkElement.Width%2A> 进行动画处理。</span><span class="sxs-lookup"><span data-stu-id="c1b08-189">Both <xref:System.Windows.Media.Animation.DoubleAnimation> objects animate the <xref:System.Windows.FrameworkElement.Width%2A> of a <xref:System.Windows.Shapes.Rectangle> from 0 to 100.</span></span> <span data-ttu-id="c1b08-190"><xref:System.Windows.Shapes.Rectangle> 元素具有非动画 <xref:System.Windows.FrameworkElement.Width%2A> 值 500 [与设备无关的像素]。</span><span class="sxs-lookup"><span data-stu-id="c1b08-190">The <xref:System.Windows.Shapes.Rectangle> elements have non-animated <xref:System.Windows.FrameworkElement.Width%2A> values of 500 [device independent pixels].</span></span>  
  
- <span data-ttu-id="c1b08-191">第一个 <xref:System.Windows.Media.Animation.DoubleAnimation> 的 <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> 属性设置为 <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd>，默认值为。</span><span class="sxs-lookup"><span data-stu-id="c1b08-191">The <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property of the first <xref:System.Windows.Media.Animation.DoubleAnimation> is set to <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd>, the default value.</span></span> <span data-ttu-id="c1b08-192">因此，在 <xref:System.Windows.Media.Animation.DoubleAnimation> 结束后，矩形的宽度保持为100。</span><span class="sxs-lookup"><span data-stu-id="c1b08-192">As a result, the Width of the Rectangle stays at 100 after the <xref:System.Windows.Media.Animation.DoubleAnimation> ends.</span></span>  
  
- <span data-ttu-id="c1b08-193">第二个 <xref:System.Windows.Media.Animation.DoubleAnimation> 的 <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> 属性设置为 <xref:System.Windows.Media.Animation.FillBehavior.Stop>。</span><span class="sxs-lookup"><span data-stu-id="c1b08-193">The <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property of the second <xref:System.Windows.Media.Animation.DoubleAnimation> is set to <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span> <span data-ttu-id="c1b08-194">因此，第二个 <xref:System.Windows.Shapes.Rectangle> 的 <xref:System.Windows.FrameworkElement.Width%2A> 在 <xref:System.Windows.Media.Animation.DoubleAnimation> 结束后恢复为500。</span><span class="sxs-lookup"><span data-stu-id="c1b08-194">As a result, the <xref:System.Windows.FrameworkElement.Width%2A> of the second <xref:System.Windows.Shapes.Rectangle> reverts to 500 after the <xref:System.Windows.Media.Animation.DoubleAnimation> ends.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBFillBehaviorExample](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbfillbehaviorexample)]  
  
<a name="speedproperties"></a>   
## <a name="properties-that-control-the-speed-of-a-timeline"></a><span data-ttu-id="c1b08-195">用于控制时间线速度的属性</span><span class="sxs-lookup"><span data-stu-id="c1b08-195">Properties that Control the Speed of a Timeline</span></span>  
 <span data-ttu-id="c1b08-196"><xref:System.Windows.Media.Animation.Timeline> 类提供了三个用于指定其速度的属性：</span><span class="sxs-lookup"><span data-stu-id="c1b08-196">The <xref:System.Windows.Media.Animation.Timeline> class provides three properties for specifying its speed:</span></span>  
  
- <span data-ttu-id="c1b08-197"><xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A> –指定相对于其父级的速率（对于 <xref:System.Windows.Media.Animation.Timeline>的时间前进）。</span><span class="sxs-lookup"><span data-stu-id="c1b08-197"><xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A> – Specifies that rate, relative to its parent, at which time progresses for a <xref:System.Windows.Media.Animation.Timeline>.</span></span> <span data-ttu-id="c1b08-198">大于1的值将提高 <xref:System.Windows.Media.Animation.Timeline> 及其子 <xref:System.Windows.Media.Animation.Timeline> 对象的速度;介于0和1之间的值将减慢。</span><span class="sxs-lookup"><span data-stu-id="c1b08-198">Values greater than one increase the speed of the <xref:System.Windows.Media.Animation.Timeline> and its child <xref:System.Windows.Media.Animation.Timeline> objects; values between zero and one slow it down.</span></span> <span data-ttu-id="c1b08-199">如果值为1，则表示 <xref:System.Windows.Media.Animation.Timeline> 按其父级的相同速率进行。</span><span class="sxs-lookup"><span data-stu-id="c1b08-199">A value of one indicates that <xref:System.Windows.Media.Animation.Timeline> progresses at the same rate as its parent.</span></span> <span data-ttu-id="c1b08-200">容器时间线的 <xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A> 设置也会影响其所有子 <xref:System.Windows.Media.Animation.Timeline> 对象。</span><span class="sxs-lookup"><span data-stu-id="c1b08-200">The <xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A> setting  of a container timeline affects all of its child <xref:System.Windows.Media.Animation.Timeline> objects as well.</span></span>  
  
- <span data-ttu-id="c1b08-201"><xref:System.Windows.Media.Animation.Timeline.AccelerationRatio%2A> –指定时间线的 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 加速所用时间的百分比。</span><span class="sxs-lookup"><span data-stu-id="c1b08-201"><xref:System.Windows.Media.Animation.Timeline.AccelerationRatio%2A> – Specifies the percentage of the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of a Timeline spent accelerating.</span></span> <span data-ttu-id="c1b08-202">有关示例，请参阅[如何：加速或减速动画](how-to-accelerate-or-decelerate-an-animation.md)。</span><span class="sxs-lookup"><span data-stu-id="c1b08-202">For an example, see [How to: Accelerate or Decelerate an Animation](how-to-accelerate-or-decelerate-an-animation.md).</span></span> 
  
- <span data-ttu-id="c1b08-203"><xref:System.Windows.Media.Animation.Timeline.DecelerationRatio%2A>-指定减速所用时间线的 <xref:System.Windows.Media.Animation.Timeline.Duration%2A> 百分比。</span><span class="sxs-lookup"><span data-stu-id="c1b08-203"><xref:System.Windows.Media.Animation.Timeline.DecelerationRatio%2A> - Specifies the percentage of the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of a Timeline spent decelerating.</span></span> <span data-ttu-id="c1b08-204">有关示例，请参阅[如何：加速或减速动画](how-to-accelerate-or-decelerate-an-animation.md)。</span><span class="sxs-lookup"><span data-stu-id="c1b08-204">For an example, see [How to: Accelerate or Decelerate an Animation](how-to-accelerate-or-decelerate-an-animation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="c1b08-205">另请参阅</span><span class="sxs-lookup"><span data-stu-id="c1b08-205">See also</span></span>

- [<span data-ttu-id="c1b08-206">动画概述</span><span class="sxs-lookup"><span data-stu-id="c1b08-206">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="c1b08-207">动画和计时系统概述</span><span class="sxs-lookup"><span data-stu-id="c1b08-207">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="c1b08-208">计时事件概述</span><span class="sxs-lookup"><span data-stu-id="c1b08-208">Timing Events Overview</span></span>](timing-events-overview.md)
- [<span data-ttu-id="c1b08-209">帮助主题</span><span class="sxs-lookup"><span data-stu-id="c1b08-209">How-to Topics</span></span>](animation-and-timing-how-to-topics.md)
- [<span data-ttu-id="c1b08-210">动画计时行为示例</span><span class="sxs-lookup"><span data-stu-id="c1b08-210">Animation Timing Behavior Sample</span></span>](https://go.microsoft.com/fwlink/?LinkID=159970)
