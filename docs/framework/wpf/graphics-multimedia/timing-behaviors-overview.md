---
title: 计时行为概述
ms.date: 03/30/2017
helpviewer_keywords:
- timing behaviors [WPF]
- behaviors [WPF], timing
ms.assetid: 5b714d46-bd46-48b8-b467-b4be89ba3091
ms.openlocfilehash: 3bb42ddd991d3ae1221cc794afdd4aafc74a6046
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/12/2020
ms.locfileid: "79145392"
---
# <a name="timing-behaviors-overview"></a><span data-ttu-id="a9af5-102">计时行为概述</span><span class="sxs-lookup"><span data-stu-id="a9af5-102">Timing Behaviors Overview</span></span>
<span data-ttu-id="a9af5-103">本主题介绍动画和其他<xref:System.Windows.Media.Animation.Timeline>对象的计时行为。</span><span class="sxs-lookup"><span data-stu-id="a9af5-103">This topic describes the timing behaviors of animations and other <xref:System.Windows.Media.Animation.Timeline> objects.</span></span>  
  
<a name="prerequisites"></a>
## <a name="prerequisites"></a><span data-ttu-id="a9af5-104">系统必备</span><span class="sxs-lookup"><span data-stu-id="a9af5-104">Prerequisites</span></span>  
 <span data-ttu-id="a9af5-105">若要了解本主题，应熟悉基本动画功能。</span><span class="sxs-lookup"><span data-stu-id="a9af5-105">To understand this topic, you should be familiar with basic animation features.</span></span> <span data-ttu-id="a9af5-106">有关详细信息，请参阅[动画概述](animation-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="a9af5-106">For more information, see the [Animation Overview](animation-overview.md).</span></span>  
  
<a name="timelinetypes"></a>
## <a name="timeline-types"></a><span data-ttu-id="a9af5-107">时间线类型</span><span class="sxs-lookup"><span data-stu-id="a9af5-107">Timeline Types</span></span>  
 <span data-ttu-id="a9af5-108">A<xref:System.Windows.Media.Animation.Timeline>表示时间段。</span><span class="sxs-lookup"><span data-stu-id="a9af5-108">A <xref:System.Windows.Media.Animation.Timeline> represents a segment of time.</span></span> <span data-ttu-id="a9af5-109">它提供的属性让你可以指定该时间段的长度、开始时间、重复次数、该时间段内时间进度的快慢等。</span><span class="sxs-lookup"><span data-stu-id="a9af5-109">It provides properties that enable you to specify the length of that segment, when it should start, how many times it will repeat, how fast time progresses in that segment, and more.</span></span>  
  
 <span data-ttu-id="a9af5-110">从时间线类继承的类可提供附加功能，例如动画和媒体播放。</span><span class="sxs-lookup"><span data-stu-id="a9af5-110">Classes that inherit from the timeline class provide additional functionality, such as animation and media playback.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]<span data-ttu-id="a9af5-111">提供了以下<xref:System.Windows.Media.Animation.Timeline>类型。</span><span class="sxs-lookup"><span data-stu-id="a9af5-111">provides the following <xref:System.Windows.Media.Animation.Timeline> types.</span></span>  
  
|<span data-ttu-id="a9af5-112">时间线类型</span><span class="sxs-lookup"><span data-stu-id="a9af5-112">Timeline type</span></span>|<span data-ttu-id="a9af5-113">说明</span><span class="sxs-lookup"><span data-stu-id="a9af5-113">Description</span></span>|  
|-------------------|-----------------|  
|<xref:System.Windows.Media.Animation.AnimationTimeline>|<span data-ttu-id="a9af5-114">为属性生成输出<xref:System.Windows.Media.Animation.Timeline>值的对象的抽象基类。</span><span class="sxs-lookup"><span data-stu-id="a9af5-114">Abstract base class for <xref:System.Windows.Media.Animation.Timeline> objects that generate output values for animating properties.</span></span>|  
|<xref:System.Windows.Media.MediaTimeline>|<span data-ttu-id="a9af5-115">从媒体文件生成输出。</span><span class="sxs-lookup"><span data-stu-id="a9af5-115">Generates output from a media file.</span></span>|  
|<xref:System.Windows.Media.Animation.ParallelTimeline>|<span data-ttu-id="a9af5-116"><xref:System.Windows.Media.Animation.TimelineGroup>该组和控制子<xref:System.Windows.Media.Animation.Timeline>对象的一种类型。</span><span class="sxs-lookup"><span data-stu-id="a9af5-116">A type of <xref:System.Windows.Media.Animation.TimelineGroup> that groups and controls child <xref:System.Windows.Media.Animation.Timeline> objects.</span></span>|  
|<xref:System.Windows.Media.Animation.Storyboard>|<span data-ttu-id="a9af5-117">提供<xref:System.Windows.Media.Animation.ParallelTimeline>其包含的时间线对象的定位信息的类型。</span><span class="sxs-lookup"><span data-stu-id="a9af5-117">A type of <xref:System.Windows.Media.Animation.ParallelTimeline> that provides targeting information for the Timeline objects it contains.</span></span>|  
|<xref:System.Windows.Media.Animation.Timeline>|<span data-ttu-id="a9af5-118">定义计时行为的抽象基类。</span><span class="sxs-lookup"><span data-stu-id="a9af5-118">Abstract base class that defines timing behaviors.</span></span>|  
|<xref:System.Windows.Media.Animation.TimelineGroup>|<span data-ttu-id="a9af5-119">可以包含其他<xref:System.Windows.Media.Animation.Timeline><xref:System.Windows.Media.Animation.Timeline>对象的对象的抽象类。</span><span class="sxs-lookup"><span data-stu-id="a9af5-119">Abstract class for <xref:System.Windows.Media.Animation.Timeline> objects that can contain other <xref:System.Windows.Media.Animation.Timeline> objects.</span></span>|  
  
<a name="propertiesthatcontroltimelinelength"></a>
## <a name="properties-that-control-the-length-of-a-timeline"></a><span data-ttu-id="a9af5-120">用于控制时间线长度的属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-120">Properties that Control the Length of a Timeline</span></span>  
 <span data-ttu-id="a9af5-121">表示<xref:System.Windows.Media.Animation.Timeline>时间段，可以以不同的方式描述时间线的长度。</span><span class="sxs-lookup"><span data-stu-id="a9af5-121">A <xref:System.Windows.Media.Animation.Timeline> represents a segment of time, and the length of a timeline can be described in different ways.</span></span> <span data-ttu-id="a9af5-122">下表定义了几个用于描述时间线长度的术语。</span><span class="sxs-lookup"><span data-stu-id="a9af5-122">The following table defines several terms for describing the length of a timeline.</span></span>  
  
|<span data-ttu-id="a9af5-123">术语</span><span class="sxs-lookup"><span data-stu-id="a9af5-123">Term</span></span>|<span data-ttu-id="a9af5-124">说明</span><span class="sxs-lookup"><span data-stu-id="a9af5-124">Description</span></span>|<span data-ttu-id="a9af5-125">属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-125">Properties</span></span>||||  
|----------|-----------------|----------------|-|-|-|  
|<span data-ttu-id="a9af5-126">简单持续时间</span><span class="sxs-lookup"><span data-stu-id="a9af5-126">Simple duration</span></span>|<span data-ttu-id="a9af5-127">时间线向前迭代一次所需的时间长度。</span><span class="sxs-lookup"><span data-stu-id="a9af5-127">The length of time a timeline takes to make a single forward iteration.</span></span>|<xref:System.Windows.Media.Animation.Timeline.Duration%2A>||||  
|<span data-ttu-id="a9af5-128">一次重复</span><span class="sxs-lookup"><span data-stu-id="a9af5-128">One repetition</span></span>|<span data-ttu-id="a9af5-129">时间线向前播放一次所需的时间长度，如果<xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>属性为 true，则向后播放一次。</span><span class="sxs-lookup"><span data-stu-id="a9af5-129">The length of time it takes for a timeline to play forward once and, if the <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property is true, play backwards once.</span></span>|<span data-ttu-id="a9af5-130"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A></span><span class="sxs-lookup"><span data-stu-id="a9af5-130"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A></span></span>||||  
|<span data-ttu-id="a9af5-131">活动期</span><span class="sxs-lookup"><span data-stu-id="a9af5-131">Active period</span></span>|<span data-ttu-id="a9af5-132">时间线完成其<xref:System.Windows.Media.Animation.RepeatBehavior>属性指定的所有重复所需的时间长度。</span><span class="sxs-lookup"><span data-stu-id="a9af5-132">The length of time it takes for a timeline to complete all the repetitions specified by its <xref:System.Windows.Media.Animation.RepeatBehavior> property.</span></span>|<span data-ttu-id="a9af5-133"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>, <xref:System.Windows.Media.Animation.RepeatBehavior></span><span class="sxs-lookup"><span data-stu-id="a9af5-133"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>, <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>, <xref:System.Windows.Media.Animation.RepeatBehavior></span></span>||||  
  
<a name="duration"></a>
### <a name="the-duration-property"></a><span data-ttu-id="a9af5-134">Duration 属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-134">The Duration Property</span></span>  
 <span data-ttu-id="a9af5-135">如前文所述，时间线表示时间段。</span><span class="sxs-lookup"><span data-stu-id="a9af5-135">As previously mentioned, a timeline represents a segment of time.</span></span> <span data-ttu-id="a9af5-136">该段的长度由时间线的<xref:System.Windows.Media.Animation.Timeline.Duration%2A>确定。</span><span class="sxs-lookup"><span data-stu-id="a9af5-136">The length of that segment is determined by the timeline's <xref:System.Windows.Media.Animation.Timeline.Duration%2A>.</span></span> <span data-ttu-id="a9af5-137">当时间线到达其持续时间的终点时，就会停止播放。</span><span class="sxs-lookup"><span data-stu-id="a9af5-137">When a timeline reaches the end of its duration, it stops playing.</span></span> <span data-ttu-id="a9af5-138">如果时间线具有子时间线，这些子时间线也会停止播放。</span><span class="sxs-lookup"><span data-stu-id="a9af5-138">If the timeline has child timelines, they stop playing as well.</span></span> <span data-ttu-id="a9af5-139">在动画的情况下， 指定<xref:System.Windows.Media.Animation.Timeline.Duration%2A>动画从起始值过渡到其结束值所需的时间。</span><span class="sxs-lookup"><span data-stu-id="a9af5-139">In the case of an animation, the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> specifies how long the animation takes to transition from its starting value to its ending value.</span></span> <span data-ttu-id="a9af5-140">时间线的持续时间有时称为*其简单持续时间*，以区分单个迭代的持续时间和动画播放的总时间长度（包括重复）。</span><span class="sxs-lookup"><span data-stu-id="a9af5-140">A timeline's duration is sometimes called its *simple duration*, to distinguish between the duration of a single iteration and the total length of time the animation plays including repetitions.</span></span> <span data-ttu-id="a9af5-141">可以使用有限时间值或特殊值<xref:System.Windows.Duration.Automatic%2A>或<xref:System.Windows.Duration.Forever%2A>指定持续时间。</span><span class="sxs-lookup"><span data-stu-id="a9af5-141">You can specify a duration using a finite time value or the special values <xref:System.Windows.Duration.Automatic%2A> or <xref:System.Windows.Duration.Forever%2A>.</span></span> <span data-ttu-id="a9af5-142">动画的持续时间应解析为<xref:System.Windows.Duration.TimeSpan%2A>值，以便它可以在值之间转换。</span><span class="sxs-lookup"><span data-stu-id="a9af5-142">An animation's duration should resolve to a <xref:System.Windows.Duration.TimeSpan%2A> value, so it can transition between values.</span></span>  
  
 <span data-ttu-id="a9af5-143">下面的示例显示 a<xref:System.Windows.Media.Animation.DoubleAnimation><xref:System.Windows.Media.Animation.Timeline.Duration%2A>的五秒。</span><span class="sxs-lookup"><span data-stu-id="a9af5-143">The following example shows a <xref:System.Windows.Media.Animation.DoubleAnimation> with a <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of five seconds.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#AnimationWith5SecondDurationInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#animationwith5seconddurationinline)]  
  
 <span data-ttu-id="a9af5-144">容器时间线（如<xref:System.Windows.Media.Animation.Storyboard>和<xref:System.Windows.Media.Animation.ParallelTimeline>）的默认持续时间为<xref:System.Windows.Duration.Automatic%2A>，这意味着它们在最后一个子级停止播放时会自动结束。</span><span class="sxs-lookup"><span data-stu-id="a9af5-144">Container timelines, such as <xref:System.Windows.Media.Animation.Storyboard> and <xref:System.Windows.Media.Animation.ParallelTimeline>, have a default duration of <xref:System.Windows.Duration.Automatic%2A>, which means they automatically end when their last child stops playing.</span></span> <span data-ttu-id="a9af5-145">下面的示例显示其<xref:System.Windows.Media.Animation.Storyboard><xref:System.Windows.Media.Animation.Timeline.Duration%2A>解析为五秒的 a，即完成其所有子<xref:System.Windows.Media.Animation.DoubleAnimation>对象所需的时间长度。</span><span class="sxs-lookup"><span data-stu-id="a9af5-145">The following example shows a <xref:System.Windows.Media.Animation.Storyboard> whose <xref:System.Windows.Media.Animation.Timeline.Duration%2A> resolves to five seconds, the length of time it takes all its child <xref:System.Windows.Media.Animation.DoubleAnimation> objects to complete.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#ContainerTimelineExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#containertimelineexampleinline)]  
  
 <span data-ttu-id="a9af5-146"><xref:System.Windows.Media.Animation.Timeline.Duration%2A>通过将容器时间线设置为<xref:System.Windows.Duration.TimeSpan%2A>值，可以强制播放比其子<xref:System.Windows.Media.Animation.Timeline>对象播放的时间更长或短。</span><span class="sxs-lookup"><span data-stu-id="a9af5-146">By setting the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of a container timeline to a <xref:System.Windows.Duration.TimeSpan%2A> value, you can force to play longer or shorter than its child <xref:System.Windows.Media.Animation.Timeline> objects would play.</span></span> <span data-ttu-id="a9af5-147">如果将 设置为<xref:System.Windows.Media.Animation.Timeline.Duration%2A>小于容器时间线子<xref:System.Windows.Media.Animation.Timeline>对象长度的值，则子<xref:System.Windows.Media.Animation.Timeline>对象在容器时间线时停止播放。</span><span class="sxs-lookup"><span data-stu-id="a9af5-147">If you set the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> to a value that's smaller than the length of the container timeline's child <xref:System.Windows.Media.Animation.Timeline> objects, the child <xref:System.Windows.Media.Animation.Timeline> objects stop playing when the container timeline does.</span></span> <span data-ttu-id="a9af5-148">下面的示例将<xref:System.Windows.Media.Animation.Timeline.Duration%2A>上述示例中的<xref:System.Windows.Media.Animation.Storyboard>的 将 集 到三秒。</span><span class="sxs-lookup"><span data-stu-id="a9af5-148">The following example sets the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of the <xref:System.Windows.Media.Animation.Storyboard> from the preceding examples to three seconds.</span></span> <span data-ttu-id="a9af5-149">因此，第一个<xref:System.Windows.Media.Animation.DoubleAnimation>停止在三秒钟后前进，当它已动画的目标矩形的宽度到60。</span><span class="sxs-lookup"><span data-stu-id="a9af5-149">As a result, the first <xref:System.Windows.Media.Animation.DoubleAnimation> stops progressing after three seconds, when it has animated the target rectangle's width to 60.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#ContainerTimelineWithShorterDurationExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#containertimelinewithshorterdurationexampleinline)]  
  
<a name="repeatinganimations"></a>
### <a name="the-repeatbehavior-property"></a><span data-ttu-id="a9af5-150">RepeatBehavior 属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-150">The RepeatBehavior Property</span></span>  
 <span data-ttu-id="a9af5-151">属性<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A><xref:System.Windows.Media.Animation.Timeline>控制它重复其简单持续时间的次数。</span><span class="sxs-lookup"><span data-stu-id="a9af5-151">The <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property of a <xref:System.Windows.Media.Animation.Timeline> controls how many times it repeats its simple duration.</span></span> <span data-ttu-id="a9af5-152">使用<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>属性，可以指定时间线播放的次数（迭代<xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A>）或时间线应播放的总时间长度（重复）。 <xref:System.Windows.Media.Animation.RepeatBehavior.Duration%2A></span><span class="sxs-lookup"><span data-stu-id="a9af5-152">Using the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property, you can specify how many times the timeline plays (an iteration <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A>) or the total length of time it should play (a repeat <xref:System.Windows.Media.Animation.RepeatBehavior.Duration%2A>).</span></span> <span data-ttu-id="a9af5-153">无论是哪一种情况，动画都将从头到尾运行很多次，直到完成要求的次数或经历完所需的一段时间。</span><span class="sxs-lookup"><span data-stu-id="a9af5-153">In either case, the animation goes through as many beginning-to-end runs as necessary to fill the requested count or duration.</span></span> <span data-ttu-id="a9af5-154">默认情况下，时间线的迭代计数为`1.0`，这意味着它们播放一次，并且根本不重复。</span><span class="sxs-lookup"><span data-stu-id="a9af5-154">By default, timelines have an iteration count of `1.0`, which means they play once and do not repeat at all.</span></span>  
  
 <span data-ttu-id="a9af5-155">下面的示例使用 属性<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>通过指定迭代计数<xref:System.Windows.Media.Animation.DoubleAnimation>使播放具有两倍的简单持续时间。</span><span class="sxs-lookup"><span data-stu-id="a9af5-155">The following example uses the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property to make a <xref:System.Windows.Media.Animation.DoubleAnimation> play for twice its simple duration by specifying an iteration count.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBRepeatBehavior2xExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbrepeatbehavior2xexampleinline)]  
  
 <span data-ttu-id="a9af5-156">下一个示例使用<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>属性使<xref:System.Windows.Media.Animation.DoubleAnimation>该游戏的一半简单持续时间。</span><span class="sxs-lookup"><span data-stu-id="a9af5-156">The next example uses the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property to make the <xref:System.Windows.Media.Animation.DoubleAnimation> play for half its simple duration.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBRepeatBehavior05xExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbrepeatbehavior05xexampleinline)]  
  
 <span data-ttu-id="a9af5-157">如果将<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>属性<xref:System.Windows.Media.Animation.Timeline>设置为<xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>，则<xref:System.Windows.Media.Animation.Timeline>重复，直到以交互方式或由计时系统停止。</span><span class="sxs-lookup"><span data-stu-id="a9af5-157">If you set the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property of a <xref:System.Windows.Media.Animation.Timeline> to <xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>, the <xref:System.Windows.Media.Animation.Timeline> repeats until stopped interactively or by the timing system.</span></span> <span data-ttu-id="a9af5-158">下面的示例使用 属性<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>无限期地进行<xref:System.Windows.Media.Animation.DoubleAnimation>播放。</span><span class="sxs-lookup"><span data-stu-id="a9af5-158">The following example uses the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> property to make the <xref:System.Windows.Media.Animation.DoubleAnimation> play indefinitely.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBRepeatBehaviorForeverExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbrepeatbehaviorforeverexampleinline)]  
  
 <span data-ttu-id="a9af5-159">有关其他示例，请参阅[重复动画](how-to-repeat-an-animation.md)。</span><span class="sxs-lookup"><span data-stu-id="a9af5-159">For an additional example, see [Repeat an Animation](how-to-repeat-an-animation.md).</span></span>  
  
<a name="autoreverseproperty"></a>
### <a name="the-autoreverse-property"></a><span data-ttu-id="a9af5-160">AutoReverse 属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-160">The AutoReverse Property</span></span>  
 <span data-ttu-id="a9af5-161">属性<xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>指定 将在<xref:System.Windows.Media.Animation.Timeline>每次向前迭代结束时向后播放 。</span><span class="sxs-lookup"><span data-stu-id="a9af5-161">The <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property specifies whether a <xref:System.Windows.Media.Animation.Timeline> will play backwards at the end of each forward iteration.</span></span> <span data-ttu-id="a9af5-162">下面的示例将设置到<xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>的 属性<xref:System.Windows.Media.Animation.DoubleAnimation> `true`。因此，它将动画从零到 100，然后从 100 到零。</span><span class="sxs-lookup"><span data-stu-id="a9af5-162">The following example sets to the <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property of a <xref:System.Windows.Media.Animation.DoubleAnimation> to `true`; as a result, it animates from zero to 100, and then from 100 to zero.</span></span> <span data-ttu-id="a9af5-163">它的总播放时长为 10 秒。</span><span class="sxs-lookup"><span data-stu-id="a9af5-163">It plays for a total of 10 seconds.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBAutoReverseExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbautoreverseexampleinline)]  
  
 <span data-ttu-id="a9af5-164"><xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A>当使用 值指定 的<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A><xref:System.Windows.Media.Animation.Timeline><xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A>和 属性时<xref:System.Windows.Media.Animation.Timeline>`true`，单个重复由一个向前迭代组成，后跟一个向后迭代。</span><span class="sxs-lookup"><span data-stu-id="a9af5-164">When you use a <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A> value to specify the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> of a <xref:System.Windows.Media.Animation.Timeline> and the <xref:System.Windows.Media.Animation.Timeline.AutoReverse%2A> property of that <xref:System.Windows.Media.Animation.Timeline> is `true`, a single repetition consists of one forward iteration followed by one backwards iteration.</span></span>  <span data-ttu-id="a9af5-165">下面的示例将<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A><xref:System.Windows.Media.Animation.DoubleAnimation>上一个示例的 将 的<xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A>将 集的 2 个集。</span><span class="sxs-lookup"><span data-stu-id="a9af5-165">The following example sets the <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> of the <xref:System.Windows.Media.Animation.DoubleAnimation> from the preceding example to a <xref:System.Windows.Media.Animation.RepeatBehavior.Count%2A> of two.</span></span> <span data-ttu-id="a9af5-166">结果，<xref:System.Windows.Media.Animation.DoubleAnimation>播放 20 秒：向前 5 秒，向后 5 秒，再次向前前进 5 秒，然后向后向后 5 秒。</span><span class="sxs-lookup"><span data-stu-id="a9af5-166">As a result, the <xref:System.Windows.Media.Animation.DoubleAnimation> plays for 20 seconds: forward for five seconds, backwards for five seconds, forward for 5 seconds again, and then backwards for five seconds.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBAutoReverseRepeatExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbautoreverserepeatexampleinline)]  
  
 <span data-ttu-id="a9af5-167">如果容器时间线具有子<xref:System.Windows.Media.Animation.Timeline>对象，则当容器时间线执行时，它们会反转。</span><span class="sxs-lookup"><span data-stu-id="a9af5-167">If a container timeline has child <xref:System.Windows.Media.Animation.Timeline> objects, they reverse when the container timeline does.</span></span> <span data-ttu-id="a9af5-168">有关其他示例，请参阅[指定时间线是否自动反转](how-to-specify-whether-a-timeline-automatically-reverses.md)。</span><span class="sxs-lookup"><span data-stu-id="a9af5-168">For additional examples, see [Specify Whether a Timeline Automatically Reverses](how-to-specify-whether-a-timeline-automatically-reverses.md).</span></span>  
  
<a name="timelinebegin"></a>
## <a name="the-begintime-property"></a><span data-ttu-id="a9af5-169">BeginTime 属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-169">The BeginTime Property</span></span>  
 <span data-ttu-id="a9af5-170">属性<xref:System.Windows.Media.Animation.Timeline.BeginTime%2A>使您能够指定时间线何时启动。</span><span class="sxs-lookup"><span data-stu-id="a9af5-170">The <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> property enables you to specify when a timeline starts.</span></span>  <span data-ttu-id="a9af5-171">时间线的开始时间相对于其父时间线。</span><span class="sxs-lookup"><span data-stu-id="a9af5-171">A timeline's begin time is relative to its parent timeline.</span></span> <span data-ttu-id="a9af5-172">如果开始时间为零秒，则表示其父时间线开始后，该时间线立即开始；如果开始时间为其他值，会在父时间线和子时间线的开始播放时间之间产生时间偏差。</span><span class="sxs-lookup"><span data-stu-id="a9af5-172">A begin time of zero seconds means the timeline starts as soon as it parent starts; any other value creates an offset between when the parent timeline starts playing and when the child timeline plays.</span></span> <span data-ttu-id="a9af5-173">例如，如果开始时间为两秒，则表示在其父时间线到达两秒后，该时间线才开始播放。</span><span class="sxs-lookup"><span data-stu-id="a9af5-173">For example, a begin time of two seconds means the timeline starts playing when its parent has reached a time of two seconds.</span></span> <span data-ttu-id="a9af5-174">默认情况下，所有时间线的开始时间都为零秒。</span><span class="sxs-lookup"><span data-stu-id="a9af5-174">By default, all timelines have a begin time of zero seconds.</span></span> <span data-ttu-id="a9af5-175">您还可以将时间线的开始时间设置为`null`，这可以防止时间线启动。</span><span class="sxs-lookup"><span data-stu-id="a9af5-175">You may also set a timeline's begin time to `null`, which prevents the timeline from starting.</span></span> <span data-ttu-id="a9af5-176">在[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]中，使用[x：空标记扩展名](../../../desktop-wpf/xaml-services/xnull-markup-extension.md)指定 null。</span><span class="sxs-lookup"><span data-stu-id="a9af5-176">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you specify null using the [x:Null Markup Extension](../../../desktop-wpf/xaml-services/xnull-markup-extension.md).</span></span>  
  
 <span data-ttu-id="a9af5-177">请注意，每次时间线因其<xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A>设置而重复时，不会应用开始时间。</span><span class="sxs-lookup"><span data-stu-id="a9af5-177">Note that the begin time is not applied each time a timeline repeats because of its <xref:System.Windows.Media.Animation.Timeline.RepeatBehavior%2A> setting.</span></span> <span data-ttu-id="a9af5-178">如果要创建具有<xref:System.Windows.Media.Animation.Timeline.BeginTime%2A>10 秒和 1<xref:System.Windows.Media.Animation.RepeatBehavior>的<xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>动画，则在首次播放动画之前会有 10 秒的延迟，但每次连续重复时不会延迟。</span><span class="sxs-lookup"><span data-stu-id="a9af5-178">If you were to create an animation with a <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> of 10 seconds and a <xref:System.Windows.Media.Animation.RepeatBehavior> of <xref:System.Windows.Media.Animation.RepeatBehavior.Forever%2A>, there would be a 10-second delay before the animation played for the first time, but not for each successive repetition.</span></span> <span data-ttu-id="a9af5-179">但是，如果动画的父时间线重新开始或重复，则会延迟 10 秒。</span><span class="sxs-lookup"><span data-stu-id="a9af5-179">However, if the animation's parent timeline were to restart or repeat, the 10-second delay would occur.</span></span>  
  
 <span data-ttu-id="a9af5-180">该<xref:System.Windows.Media.Animation.Timeline.BeginTime%2A>属性可用于惊人的时间线。</span><span class="sxs-lookup"><span data-stu-id="a9af5-180">The <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> property is useful for staggering timelines.</span></span> <span data-ttu-id="a9af5-181">下面的示例创建具有两<xref:System.Windows.Media.Animation.Storyboard>个子<xref:System.Windows.Media.Animation.DoubleAnimation>对象的 。</span><span class="sxs-lookup"><span data-stu-id="a9af5-181">The following example creates a <xref:System.Windows.Media.Animation.Storyboard> that has two child <xref:System.Windows.Media.Animation.DoubleAnimation> objects.</span></span> <span data-ttu-id="a9af5-182">第一<xref:System.Windows.Media.Animation.Timeline.Duration%2A>个动画有 5 秒，第二个<xref:System.Windows.Media.Animation.Timeline.Duration%2A>动画有 3 秒。</span><span class="sxs-lookup"><span data-stu-id="a9af5-182">The first animation has a <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of five seconds, and the second has a <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of 3 seconds.</span></span> <span data-ttu-id="a9af5-183">该示例将第<xref:System.Windows.Media.Animation.Timeline.BeginTime%2A>二<xref:System.Windows.Media.Animation.DoubleAnimation>秒设置为 5 秒，以便它在第一<xref:System.Windows.Media.Animation.DoubleAnimation>端后开始播放。</span><span class="sxs-lookup"><span data-stu-id="a9af5-183">The example sets the <xref:System.Windows.Media.Animation.Timeline.BeginTime%2A> of the second <xref:System.Windows.Media.Animation.DoubleAnimation> to 5 seconds, so that it begins playing after the first <xref:System.Windows.Media.Animation.DoubleAnimation> ends.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBBeginTimeExampleInline](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbbegintimeexampleinline)]  
  
<a name="fillbehaviorproperty"></a>
## <a name="the-fillbehavior-property"></a><span data-ttu-id="a9af5-184">FillBehavior 属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-184">The FillBehavior Property</span></span>  
 <span data-ttu-id="a9af5-185">当<xref:System.Windows.Media.Animation.Timeline>达到其总活动持续时间的末尾时，<xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A>属性指定它是停止还是保留其最后一个值。</span><span class="sxs-lookup"><span data-stu-id="a9af5-185">When a <xref:System.Windows.Media.Animation.Timeline> reaches the end of its total active duration, the <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property specifies whether it stops or holds its last value.</span></span> <span data-ttu-id="a9af5-186">具有"保留"<xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A>其<xref:System.Windows.Media.Animation.FillBehavior.HoldEnd>输出值的动画：正在动画的属性将保留动画的最后一个值。</span><span class="sxs-lookup"><span data-stu-id="a9af5-186">An animation with a <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> of <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd> "holds" its output value: the property being animated retains the last value of the animation.</span></span> <span data-ttu-id="a9af5-187">动画结束后<xref:System.Windows.Media.Animation.FillBehavior.Stop>停止影响其目标属性的值。</span><span class="sxs-lookup"><span data-stu-id="a9af5-187">A value of <xref:System.Windows.Media.Animation.FillBehavior.Stop> causes that the animation stop affecting its target property after it ends.</span></span>  
  
 <span data-ttu-id="a9af5-188">下面的示例创建具有两<xref:System.Windows.Media.Animation.Storyboard>个子<xref:System.Windows.Media.Animation.DoubleAnimation>对象的 。</span><span class="sxs-lookup"><span data-stu-id="a9af5-188">The following example creates a <xref:System.Windows.Media.Animation.Storyboard> that has two child <xref:System.Windows.Media.Animation.DoubleAnimation> objects.</span></span> <span data-ttu-id="a9af5-189">两<xref:System.Windows.Media.Animation.DoubleAnimation>个对象为<xref:System.Windows.FrameworkElement.Width%2A>0<xref:System.Windows.Shapes.Rectangle>到 100 的 动画。</span><span class="sxs-lookup"><span data-stu-id="a9af5-189">Both <xref:System.Windows.Media.Animation.DoubleAnimation> objects animate the <xref:System.Windows.FrameworkElement.Width%2A> of a <xref:System.Windows.Shapes.Rectangle> from 0 to 100.</span></span> <span data-ttu-id="a9af5-190">元素<xref:System.Windows.Shapes.Rectangle>的非动画<xref:System.Windows.FrameworkElement.Width%2A>值为 500 [设备无关像素]。</span><span class="sxs-lookup"><span data-stu-id="a9af5-190">The <xref:System.Windows.Shapes.Rectangle> elements have non-animated <xref:System.Windows.FrameworkElement.Width%2A> values of 500 [device independent pixels].</span></span>  
  
- <span data-ttu-id="a9af5-191">第<xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A>一<xref:System.Windows.Media.Animation.DoubleAnimation>个的属性设置为<xref:System.Windows.Media.Animation.FillBehavior.HoldEnd>，默认值。</span><span class="sxs-lookup"><span data-stu-id="a9af5-191">The <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property of the first <xref:System.Windows.Media.Animation.DoubleAnimation> is set to <xref:System.Windows.Media.Animation.FillBehavior.HoldEnd>, the default value.</span></span> <span data-ttu-id="a9af5-192">因此，矩形的宽度在<xref:System.Windows.Media.Animation.DoubleAnimation>结束后保持在 100。</span><span class="sxs-lookup"><span data-stu-id="a9af5-192">As a result, the Width of the Rectangle stays at 100 after the <xref:System.Windows.Media.Animation.DoubleAnimation> ends.</span></span>  
  
- <span data-ttu-id="a9af5-193">第<xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A>二<xref:System.Windows.Media.Animation.DoubleAnimation>个属性设置为<xref:System.Windows.Media.Animation.FillBehavior.Stop>。</span><span class="sxs-lookup"><span data-stu-id="a9af5-193">The <xref:System.Windows.Media.Animation.Timeline.FillBehavior%2A> property of the second <xref:System.Windows.Media.Animation.DoubleAnimation> is set to <xref:System.Windows.Media.Animation.FillBehavior.Stop>.</span></span> <span data-ttu-id="a9af5-194">因此，第<xref:System.Windows.FrameworkElement.Width%2A>二<xref:System.Windows.Shapes.Rectangle>个在<xref:System.Windows.Media.Animation.DoubleAnimation>结束后将恢复为 500。</span><span class="sxs-lookup"><span data-stu-id="a9af5-194">As a result, the <xref:System.Windows.FrameworkElement.Width%2A> of the second <xref:System.Windows.Shapes.Rectangle> reverts to 500 after the <xref:System.Windows.Media.Animation.DoubleAnimation> ends.</span></span>  
  
 [!code-xaml[animation_ovws_snippet#TBFillBehaviorExample](~/samples/snippets/csharp/VS_Snippets_Wpf/animation_ovws_snippet/CS/TimingBehaviorsExample1.xaml#tbfillbehaviorexample)]  
  
<a name="speedproperties"></a>
## <a name="properties-that-control-the-speed-of-a-timeline"></a><span data-ttu-id="a9af5-195">用于控制时间线速度的属性</span><span class="sxs-lookup"><span data-stu-id="a9af5-195">Properties that Control the Speed of a Timeline</span></span>  
 <span data-ttu-id="a9af5-196">类<xref:System.Windows.Media.Animation.Timeline>提供了三个属性来指定其速度：</span><span class="sxs-lookup"><span data-stu-id="a9af5-196">The <xref:System.Windows.Media.Animation.Timeline> class provides three properties for specifying its speed:</span></span>  
  
- <span data-ttu-id="a9af5-197"><xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A>• 指定相对于其父级的速率，此时将进行<xref:System.Windows.Media.Animation.Timeline>。</span><span class="sxs-lookup"><span data-stu-id="a9af5-197"><xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A> – Specifies that rate, relative to its parent, at which time progresses for a <xref:System.Windows.Media.Animation.Timeline>.</span></span> <span data-ttu-id="a9af5-198">大于 1 的值会增加<xref:System.Windows.Media.Animation.Timeline>及其子<xref:System.Windows.Media.Animation.Timeline>对象的速度;零和 1 之间的值减慢速度。</span><span class="sxs-lookup"><span data-stu-id="a9af5-198">Values greater than one increase the speed of the <xref:System.Windows.Media.Animation.Timeline> and its child <xref:System.Windows.Media.Animation.Timeline> objects; values between zero and one slow it down.</span></span> <span data-ttu-id="a9af5-199">值 1 表示<xref:System.Windows.Media.Animation.Timeline>以与其父值相同的速率前进。</span><span class="sxs-lookup"><span data-stu-id="a9af5-199">A value of one indicates that <xref:System.Windows.Media.Animation.Timeline> progresses at the same rate as its parent.</span></span> <span data-ttu-id="a9af5-200">容器<xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A>时间线的设置也会影响其所有子<xref:System.Windows.Media.Animation.Timeline>对象。</span><span class="sxs-lookup"><span data-stu-id="a9af5-200">The <xref:System.Windows.Media.Animation.Timeline.SpeedRatio%2A> setting  of a container timeline affects all of its child <xref:System.Windows.Media.Animation.Timeline> objects as well.</span></span>  
  
- <span data-ttu-id="a9af5-201"><xref:System.Windows.Media.Animation.Timeline.AccelerationRatio%2A>• 指定加速花费的时间<xref:System.Windows.Media.Animation.Timeline.Duration%2A>轴的百分比。</span><span class="sxs-lookup"><span data-stu-id="a9af5-201"><xref:System.Windows.Media.Animation.Timeline.AccelerationRatio%2A> – Specifies the percentage of the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of a Timeline spent accelerating.</span></span> <span data-ttu-id="a9af5-202">例如，请参阅[如何：加速或减速动画](how-to-accelerate-or-decelerate-an-animation.md)。</span><span class="sxs-lookup"><span data-stu-id="a9af5-202">For an example, see [How to: Accelerate or Decelerate an Animation](how-to-accelerate-or-decelerate-an-animation.md).</span></span>
  
- <span data-ttu-id="a9af5-203"><xref:System.Windows.Media.Animation.Timeline.DecelerationRatio%2A>- 指定时间轴的<xref:System.Windows.Media.Animation.Timeline.Duration%2A>百分比，用于减速。</span><span class="sxs-lookup"><span data-stu-id="a9af5-203"><xref:System.Windows.Media.Animation.Timeline.DecelerationRatio%2A> - Specifies the percentage of the <xref:System.Windows.Media.Animation.Timeline.Duration%2A> of a Timeline spent decelerating.</span></span> <span data-ttu-id="a9af5-204">例如，请参阅[如何：加速或减速动画](how-to-accelerate-or-decelerate-an-animation.md)。</span><span class="sxs-lookup"><span data-stu-id="a9af5-204">For an example, see [How to: Accelerate or Decelerate an Animation](how-to-accelerate-or-decelerate-an-animation.md).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="a9af5-205">另请参阅</span><span class="sxs-lookup"><span data-stu-id="a9af5-205">See also</span></span>

- [<span data-ttu-id="a9af5-206">动画概述</span><span class="sxs-lookup"><span data-stu-id="a9af5-206">Animation Overview</span></span>](animation-overview.md)
- [<span data-ttu-id="a9af5-207">动画和计时系统概述</span><span class="sxs-lookup"><span data-stu-id="a9af5-207">Animation and Timing System Overview</span></span>](animation-and-timing-system-overview.md)
- [<span data-ttu-id="a9af5-208">计时事件概述</span><span class="sxs-lookup"><span data-stu-id="a9af5-208">Timing Events Overview</span></span>](timing-events-overview.md)
- [<span data-ttu-id="a9af5-209">如何使用主题</span><span class="sxs-lookup"><span data-stu-id="a9af5-209">How-to Topics</span></span>](animation-and-timing-how-to-topics.md)
- [<span data-ttu-id="a9af5-210">动画计时行为示例</span><span class="sxs-lookup"><span data-stu-id="a9af5-210">Animation Timing Behavior Sample</span></span>](https://github.com/Microsoft/WPF-Samples/tree/master/Animation/AnimationTiming)
