---
title: 最大化 3D 性能
ms.date: 03/30/2017
helpviewer_keywords:
- 3D graphics [WPF]
ms.assetid: 4bcf949d-d92f-4d8d-8a9b-1e4c61b25bf6
ms.openlocfilehash: 3825ea8e57c6863e2ee654072efda623db21c2a8
ms.sourcegitcommit: 267d092663aba36b6b2ea853034470aea493bfae
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/21/2020
ms.locfileid: "80111993"
---
# <a name="maximize-wpf-3d-performance"></a><span data-ttu-id="bd8c4-102">最大程度地提高 WPF 三维性能</span><span class="sxs-lookup"><span data-stu-id="bd8c4-102">Maximize WPF 3D Performance</span></span>
<span data-ttu-id="bd8c4-103">当您使用[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]生成 3D 控件并在应用程序中包含 3D 场景时，考虑性能优化非常重要。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-103">As you use the [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] to build 3D controls and include 3D scenes in your applications, it is important to consider performance optimization.</span></span> <span data-ttu-id="bd8c4-104">本主题提供了对应用程序具有性能影响的 3D 类和属性的列表，以及用于在使用时优化性能的建议。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-104">This topic provides a list of 3D classes and properties that have performance implications for your application, along with recommendations for optimizing performance when you use them.</span></span>  
  
 <span data-ttu-id="bd8c4-105">本主题假定对 3D[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]功能的高级理解。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-105">This topic assumes an advanced understanding of [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] 3D features.</span></span> <span data-ttu-id="bd8c4-106">本文档中的建议适用于"呈现第 2 层"-大致定义为支持像素底影版本 2.0 和顶点底影版 2.0 的硬件。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-106">The suggestions in this document apply to "rendering tier 2"—roughly defined as hardware that supports pixel shader version 2.0 and vertex shader version 2.0.</span></span> <span data-ttu-id="bd8c4-107">有关详细信息，请参阅[图形呈现层](../advanced/graphics-rendering-tiers.md)。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-107">For more details, see [Graphics Rendering Tiers](../advanced/graphics-rendering-tiers.md).</span></span>  
  
## <a name="performance-impact-high"></a><span data-ttu-id="bd8c4-108">性能影响：高</span><span class="sxs-lookup"><span data-stu-id="bd8c4-108">Performance Impact: High</span></span>  
  
|<span data-ttu-id="bd8c4-109">properties</span><span class="sxs-lookup"><span data-stu-id="bd8c4-109">Property</span></span>|<span data-ttu-id="bd8c4-110">建议</span><span class="sxs-lookup"><span data-stu-id="bd8c4-110">Recommendation</span></span>|  
|-|-|  
|<xref:System.Windows.Media.Brush>|<span data-ttu-id="bd8c4-111">画笔速度（最快到最慢）：</span><span class="sxs-lookup"><span data-stu-id="bd8c4-111">Brush speed (fastest to slowest):</span></span><br /><br /> <xref:System.Windows.Media.SolidColorBrush><br /><br /> <xref:System.Windows.Media.LinearGradientBrush><br /><br /> <xref:System.Windows.Media.ImageBrush><br /><br /> <span data-ttu-id="bd8c4-112"><xref:System.Windows.Media.DrawingBrush>（缓存）</span><span class="sxs-lookup"><span data-stu-id="bd8c4-112"><xref:System.Windows.Media.DrawingBrush> (cached)</span></span><br /><br /> <span data-ttu-id="bd8c4-113"><xref:System.Windows.Media.VisualBrush>（缓存）</span><span class="sxs-lookup"><span data-stu-id="bd8c4-113"><xref:System.Windows.Media.VisualBrush> (cached)</span></span><br /><br /> <xref:System.Windows.Media.RadialGradientBrush><br /><br /> <span data-ttu-id="bd8c4-114"><xref:System.Windows.Media.DrawingBrush>（未缓存）</span><span class="sxs-lookup"><span data-stu-id="bd8c4-114"><xref:System.Windows.Media.DrawingBrush> (uncached)</span></span><br /><br /> <span data-ttu-id="bd8c4-115"><xref:System.Windows.Media.VisualBrush>（未缓存）</span><span class="sxs-lookup"><span data-stu-id="bd8c4-115"><xref:System.Windows.Media.VisualBrush> (uncached)</span></span>|  
|<xref:System.Windows.UIElement.ClipToBoundsProperty>|<span data-ttu-id="bd8c4-116">只要`Viewport3D.ClipToBounds`不需要[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]显式剪辑 到 Viewport3D 矩形的内容<xref:System.Windows.Controls.Viewport3D>，则设置为 false。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-116">Set `Viewport3D.ClipToBounds` to false whenever you do not need to have [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] explicitly clip the content of a <xref:System.Windows.Controls.Viewport3D> to the Viewport3D’s rectangle.</span></span> [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]<span data-ttu-id="bd8c4-117">防锯齿裁剪可能非常慢，并且`ClipToBounds`默认在 上<xref:System.Windows.Controls.Viewport3D>启用（慢速）。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-117">antialiased clipping can be very slow, and `ClipToBounds` is enabled (slow) by default on <xref:System.Windows.Controls.Viewport3D>.</span></span>|  
|<xref:System.Windows.UIElement.IsHitTestVisible%2A>|<span data-ttu-id="bd8c4-118">每当`Viewport3D.IsHitTestVisible`执行鼠标命中测试时，只要[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]不考虑 的内容<xref:System.Windows.Controls.Viewport3D>，则设置为 false。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-118">Set `Viewport3D.IsHitTestVisible` to false whenever you do not need [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] to consider the content of a <xref:System.Windows.Controls.Viewport3D> when performing mouse hit testing.</span></span>  <span data-ttu-id="bd8c4-119">命中测试 3D 内容在软件中完成，并且使用大型网中速度很慢。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-119">Hit testing 3D content is done in software and can be slow with large meshes.</span></span> <span data-ttu-id="bd8c4-120"><xref:System.Windows.UIElement.IsHitTestVisible%2A>默认情况下启用（慢速）在<xref:System.Windows.Controls.Viewport3D>。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-120"><xref:System.Windows.UIElement.IsHitTestVisible%2A> is enabled (slow) by default on <xref:System.Windows.Controls.Viewport3D>.</span></span>|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D>|<span data-ttu-id="bd8c4-121">仅当不同模型需要不同的材质或变换时，才创建不同的模型。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-121">Create different models only when they require different Materials or Transforms.</span></span>  <span data-ttu-id="bd8c4-122">否则，请尝试将多个<xref:System.Windows.Media.Media3D.GeometryModel3D>实例与相同的材质合并，并将转换为几个较大的<xref:System.Windows.Media.Media3D.GeometryModel3D>实例。 <xref:System.Windows.Media.Media3D.MeshGeometry3D></span><span class="sxs-lookup"><span data-stu-id="bd8c4-122">Otherwise, try to coalesce many <xref:System.Windows.Media.Media3D.GeometryModel3D> instances with the same Materials and Transforms into a few larger <xref:System.Windows.Media.Media3D.GeometryModel3D> and <xref:System.Windows.Media.Media3D.MeshGeometry3D> instances.</span></span>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="bd8c4-123">网格动画 （按帧更改网格的各个顶点） 并不总是有效[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-123">Mesh animation—changing the individual vertices of a mesh on a per-frame basis—is not always efficient in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span>  <span data-ttu-id="bd8c4-124">为了在修改每个顶点时将更改通知的性能影响降至最低，请先从可视树中分离网格，然后再执行每个顶点修改。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-124">To minimize the performance impact of change notifications when each vertex is modified, detach the mesh from the visual tree before performing per-vertex modification.</span></span>  <span data-ttu-id="bd8c4-125">修改网格后，将其重新附加到可视化树。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-125">Once the mesh has been modified, reattach it to the visual tree.</span></span>  <span data-ttu-id="bd8c4-126">此外，尝试最小化以这种方式进行动画处理的网数的大小。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-126">Also, try to minimize the size of meshes that will be animated in this way.</span></span>|  
|<span data-ttu-id="bd8c4-127">3D 抗锯齿</span><span class="sxs-lookup"><span data-stu-id="bd8c4-127">3D Antialiasing</span></span>|<span data-ttu-id="bd8c4-128">要提高渲染速度，<xref:System.Windows.Controls.Viewport3D>请通过将附加属性<xref:System.Windows.Media.RenderOptions.EdgeMode%2A>设置为 禁用 上的多`Aliased`采样。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-128">To increase rendering speed, disable multisampling on a <xref:System.Windows.Controls.Viewport3D> by setting the attached property <xref:System.Windows.Media.RenderOptions.EdgeMode%2A> to `Aliased`.</span></span>  <span data-ttu-id="bd8c4-129">默认情况下，在 Windows 上启用 3D 防锯齿，每像素有 4 个样本。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-129">By default, 3D antialiasing is enabled on Windows with 4 samples per pixel.</span></span>|  
|<span data-ttu-id="bd8c4-130">文本</span><span class="sxs-lookup"><span data-stu-id="bd8c4-130">Text</span></span>|<span data-ttu-id="bd8c4-131">3D 场景中的实时文本（实时，因为它位于<xref:System.Windows.Media.DrawingBrush>或<xref:System.Windows.Media.VisualBrush>） 中，速度可能很慢。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-131">Live text in a 3D scene (live because it’s in a <xref:System.Windows.Media.DrawingBrush> or <xref:System.Windows.Media.VisualBrush>) can be slow.</span></span> <span data-ttu-id="bd8c4-132">请尝试使用文本的图像（通过<xref:System.Windows.Media.Imaging.RenderTargetBitmap>），除非文本将更改。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-132">Try to use images of the text instead (via <xref:System.Windows.Media.Imaging.RenderTargetBitmap>) unless the text will change.</span></span>|  
|<xref:System.Windows.Media.TileBrush>|<span data-ttu-id="bd8c4-133">如果由于画笔的内容不是<xref:System.Windows.Media.VisualBrush>静态的<xref:System.Windows.Media.DrawingBrush>，必须在 3D 场景中使用 或 ， 请尝试缓存画笔（将附加属性<xref:System.Windows.Media.RenderOptions.CachingHint%2A>设置为 。 `Cache`</span><span class="sxs-lookup"><span data-stu-id="bd8c4-133">If you must use a <xref:System.Windows.Media.VisualBrush> or a <xref:System.Windows.Media.DrawingBrush> in a 3D scene because the brush’s content is not static, try caching the brush (setting the attached property <xref:System.Windows.Media.RenderOptions.CachingHint%2A> to `Cache`).</span></span>  <span data-ttu-id="bd8c4-134">设置最小和最大比例失效阈值（具有附加属性<xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A>和<xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>），以便缓存的画笔不会过于频繁地重新生成，同时仍保持所需的质量级别。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-134">Set the minimum and maximum scale invalidation thresholds (with the attached properties <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMinimum%2A> and <xref:System.Windows.Media.RenderOptions.CacheInvalidationThresholdMaximum%2A>) so that the cached brushes won’t be regenerated too frequently, while still maintaining your desired level of quality.</span></span>  <span data-ttu-id="bd8c4-135">默认情况下，<xref:System.Windows.Media.DrawingBrush>并且<xref:System.Windows.Media.VisualBrush>不会缓存，这意味着每次必须重新渲染使用画笔绘制的内容时，必须首先将画笔的整个内容重新渲染到中间曲面。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-135">By default, <xref:System.Windows.Media.DrawingBrush> and <xref:System.Windows.Media.VisualBrush> are not cached, meaning that every time something painted with the brush has to be re-rendered, the entire content of the brush must first be re-rendered to an intermediate surface.</span></span>|  
|<xref:System.Windows.Media.Effects.BitmapEffect>|<span data-ttu-id="bd8c4-136"><xref:System.Windows.Media.Effects.BitmapEffect>强制呈现所有受影响的内容，而不进行硬件加速。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-136"><xref:System.Windows.Media.Effects.BitmapEffect> forces all affected content to be rendered without hardware acceleration.</span></span>  <span data-ttu-id="bd8c4-137">为获得最佳性能，请勿使用<xref:System.Windows.Media.Effects.BitmapEffect>。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-137">For best performance, do not use <xref:System.Windows.Media.Effects.BitmapEffect>.</span></span>|  
  
## <a name="performance-impact-medium"></a><span data-ttu-id="bd8c4-138">性能影响：中等</span><span class="sxs-lookup"><span data-stu-id="bd8c4-138">Performance Impact: Medium</span></span>  
  
|<span data-ttu-id="bd8c4-139">properties</span><span class="sxs-lookup"><span data-stu-id="bd8c4-139">Property</span></span>|<span data-ttu-id="bd8c4-140">建议</span><span class="sxs-lookup"><span data-stu-id="bd8c4-140">Recommendation</span></span>|  
|-|-|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="bd8c4-141">当网格定义为具有共享顶点的顶点的靠边三角形，并且这些顶点具有相同的位置、法线和纹理坐标时，仅定义每个共享顶点一次，然后使用 索引定义三角形<xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-141">When a mesh is defined as abutting triangles with shared vertices and those vertices have the same position, normal, and texture coordinates, define each shared vertex only once and then define your triangles by index with <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>.</span></span>|  
|<xref:System.Windows.Media.ImageBrush>|<span data-ttu-id="bd8c4-142">当您对大小具有显式控制时（当您使用<xref:System.Windows.Media.Imaging.RenderTargetBitmap>和/或 时），尝试最小化纹理大小。 <xref:System.Windows.Media.ImageBrush></span><span class="sxs-lookup"><span data-stu-id="bd8c4-142">Try to minimize texture sizes when you have explicit control over the size (when you’re using a <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and/or an <xref:System.Windows.Media.ImageBrush>).</span></span>  <span data-ttu-id="bd8c4-143">请注意，较低的分辨率纹理可能会降低视觉质量，因此请尝试在质量和性能之间找到适当的平衡。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-143">Note that lower resolution textures can decrease visual quality, so try to find the right balance between quality and performance.</span></span>|  
|<span data-ttu-id="bd8c4-144">不透明度</span><span class="sxs-lookup"><span data-stu-id="bd8c4-144">Opacity</span></span>|<span data-ttu-id="bd8c4-145">渲染半透明 3D 内容（如反射）时，请使用画笔或材质上的不透明属性（<xref:System.Windows.Media.Brush.Opacity%2A>通过或<xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>），而不是通过设置为<xref:System.Windows.Controls.Viewport3D>`Viewport3D.Opacity`小于 1 的值来创建单独的半透明。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-145">When rendering translucent 3D content (such as reflections), use the opacity properties on brushes or materials (via <xref:System.Windows.Media.Brush.Opacity%2A> or <xref:System.Windows.Media.Media3D.DiffuseMaterial.Color%2A>) instead of creating a separate translucent <xref:System.Windows.Controls.Viewport3D> by setting `Viewport3D.Opacity` to a value less than 1.</span></span>|  
|<xref:System.Windows.Controls.Viewport3D>|<span data-ttu-id="bd8c4-146">最小化场景中使用的对象<xref:System.Windows.Controls.Viewport3D>数。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-146">Minimize the number of <xref:System.Windows.Controls.Viewport3D> objects you’re using in a scene.</span></span>  <span data-ttu-id="bd8c4-147">将许多 3D 模型放在相同的 Viewport3D 中，而不是为每个模型创建单独的 Viewport3D 实例。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-147">Put many 3D models in the same Viewport3D rather than creating separate Viewport3D instances for each model.</span></span>|  
|<xref:System.Windows.Freezable>|<span data-ttu-id="bd8c4-148">通常，重复使用<xref:System.Windows.Media.Media3D.MeshGeometry3D>、、<xref:System.Windows.Media.Media3D.GeometryModel3D>画笔和材质是有好处的。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-148">Typically it’s beneficial to reuse <xref:System.Windows.Media.Media3D.MeshGeometry3D>, <xref:System.Windows.Media.Media3D.GeometryModel3D>, Brushes, and Materials.</span></span>  <span data-ttu-id="bd8c4-149">它们都是多父级的，因为它们派生自`Freezable`。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-149">All are multiparentable since they’re derived from `Freezable`.</span></span>|  
|<xref:System.Windows.Freezable>|<span data-ttu-id="bd8c4-150">在应用程序中<xref:System.Windows.Freezable.Freeze%2A>，当其属性保持不变时，在"可冻结"上调用该方法。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-150">Call the <xref:System.Windows.Freezable.Freeze%2A> method on Freezables when their properties will remain unchanged in your application.</span></span>  <span data-ttu-id="bd8c4-151">冻结可以减少工作集和提高速度。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-151">Freezing can decrease working set and increase speed.</span></span>|  
|<xref:System.Windows.Media.Brush>|<span data-ttu-id="bd8c4-152">使用<xref:System.Windows.Media.ImageBrush>而不是<xref:System.Windows.Media.VisualBrush>或<xref:System.Windows.Media.DrawingBrush>当画笔的内容不会更改时。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-152">Use <xref:System.Windows.Media.ImageBrush> instead of <xref:System.Windows.Media.VisualBrush> or <xref:System.Windows.Media.DrawingBrush> when the content of the brush will not change.</span></span>  <span data-ttu-id="bd8c4-153">2D 内容可以转换为通通<xref:System.Windows.Controls.Image>，<xref:System.Windows.Media.Imaging.RenderTargetBitmap>然后在 中使用<xref:System.Windows.Media.ImageBrush>。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-153">2D content can be converted to an <xref:System.Windows.Controls.Image> via <xref:System.Windows.Media.Imaging.RenderTargetBitmap> and then used in an <xref:System.Windows.Media.ImageBrush>.</span></span>|  
|<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>|<span data-ttu-id="bd8c4-154">不要使用<xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A>，除非你确实需要看到你的<xref:System.Windows.Media.Media3D.GeometryModel3D>背面。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-154">Don’t use <xref:System.Windows.Media.Media3D.GeometryModel3D.BackMaterial%2A> unless you actually need to see the back faces of your <xref:System.Windows.Media.Media3D.GeometryModel3D>.</span></span>|  
|<xref:System.Windows.Media.Media3D.Light>|<span data-ttu-id="bd8c4-155">光速（最快到最慢）：</span><span class="sxs-lookup"><span data-stu-id="bd8c4-155">Light speed (fastest to slowest):</span></span><br /><br /> <xref:System.Windows.Media.Media3D.AmbientLight><br /><br /> <xref:System.Windows.Media.Media3D.DirectionalLight><br /><br /> <xref:System.Windows.Media.Media3D.PointLight><br /><br /> <xref:System.Windows.Media.Media3D.SpotLight>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="bd8c4-156">尝试将网格大小保持在以下限制下：</span><span class="sxs-lookup"><span data-stu-id="bd8c4-156">Try to keep mesh sizes under these limits:</span></span><br /><br /> <span data-ttu-id="bd8c4-157"><xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>： 20，001<xref:System.Windows.Media.Media3D.Point3D>个实例</span><span class="sxs-lookup"><span data-stu-id="bd8c4-157"><xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>: 20,001 <xref:System.Windows.Media.Media3D.Point3D> instances</span></span><br /><br /> <span data-ttu-id="bd8c4-158"><xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>： 60，003<xref:System.Int32>个实例</span><span class="sxs-lookup"><span data-stu-id="bd8c4-158"><xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>: 60,003 <xref:System.Int32> instances</span></span>|  
|<xref:System.Windows.Media.Media3D.Material>|<span data-ttu-id="bd8c4-159">材料速度（最快到最慢）：</span><span class="sxs-lookup"><span data-stu-id="bd8c4-159">Material speed (fastest to slowest):</span></span><br /><br /> <xref:System.Windows.Media.Media3D.EmissiveMaterial><br /><br /> <xref:System.Windows.Media.Media3D.DiffuseMaterial><br /><br /> <xref:System.Windows.Media.Media3D.SpecularMaterial>|  
|<xref:System.Windows.Media.Brush>|[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]<span data-ttu-id="bd8c4-160">3D 不会以一致的方式选择退出不可见的画笔（黑色环境画笔、透明画笔等）。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-160">3D doesn't opt out of invisible brushes (black ambient brushes, clear brushes, etc.) in a consistent way.</span></span>  <span data-ttu-id="bd8c4-161">请考虑从场景中省略这些。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-161">Consider omitting these from your scene.</span></span>|  
|<xref:System.Windows.Media.Media3D.MaterialGroup>|<span data-ttu-id="bd8c4-162">每个<xref:System.Windows.Media.Media3D.Material>渲染<xref:System.Windows.Media.Media3D.MaterialGroup>通道都会导致另一个渲染通道，因此包括许多材质，甚至简单的材料，可以显著提高 GPU 的填充需求。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-162">Each <xref:System.Windows.Media.Media3D.Material> in a <xref:System.Windows.Media.Media3D.MaterialGroup> causes another rendering pass, so including many materials, even simple materials, can dramatically increase the fill demands on your GPU.</span></span>  <span data-ttu-id="bd8c4-163">最小化 中的材料数量<xref:System.Windows.Media.Media3D.MaterialGroup>。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-163">Minimize the number of materials in your <xref:System.Windows.Media.Media3D.MaterialGroup>.</span></span>|  
  
## <a name="performance-impact-low"></a><span data-ttu-id="bd8c4-164">性能影响：低</span><span class="sxs-lookup"><span data-stu-id="bd8c4-164">Performance Impact: Low</span></span>  
  
|<span data-ttu-id="bd8c4-165">properties</span><span class="sxs-lookup"><span data-stu-id="bd8c4-165">Property</span></span>|<span data-ttu-id="bd8c4-166">建议</span><span class="sxs-lookup"><span data-stu-id="bd8c4-166">Recommendation</span></span>|  
|-|-|  
|<xref:System.Windows.Media.Media3D.Transform3DGroup>|<span data-ttu-id="bd8c4-167">当不需要动画或数据绑定时，不使用包含多个转换的转换组，而是使用单个<xref:System.Windows.Media.Media3D.MatrixTransform3D>，将其设置为转换组中独立存在的所有转换的组成。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-167">When you don’t need animation or data binding, instead of using a transform group containing multiple transforms, use a single <xref:System.Windows.Media.Media3D.MatrixTransform3D>, setting it to be the product of all the transforms that would otherwise exist independently in the transform group.</span></span>|  
|<xref:System.Windows.Media.Media3D.Light>|<span data-ttu-id="bd8c4-168">最小化场景中的灯光数。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-168">Minimize the number of lights in your scene.</span></span> <span data-ttu-id="bd8c4-169">场景中的灯光过多将迫使[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]其回退到软件渲染。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-169">Too many lights in a scene will force [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] to fall back to software rendering.</span></span>  <span data-ttu-id="bd8c4-170">限制大约 110<xref:System.Windows.Media.Media3D.DirectionalLight>个对象、70<xref:System.Windows.Media.Media3D.PointLight>个对象或<xref:System.Windows.Media.Media3D.SpotLight>40 个对象。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-170">The limits are roughly 110 <xref:System.Windows.Media.Media3D.DirectionalLight> objects, 70 <xref:System.Windows.Media.Media3D.PointLight> objects, or 40 <xref:System.Windows.Media.Media3D.SpotLight> objects.</span></span>|  
|<xref:System.Windows.Media.Media3D.ModelVisual3D>|<span data-ttu-id="bd8c4-171">通过将移动对象放在单独的实例中，将移动对象<xref:System.Windows.Media.Media3D.ModelVisual3D>与静态对象分开。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-171">Separate moving objects from static objects by putting them in separate <xref:System.Windows.Media.Media3D.ModelVisual3D> instances.</span></span>  <span data-ttu-id="bd8c4-172">ModelVisual3D 比缓存转换的边界<xref:System.Windows.Media.Media3D.GeometryModel3D>"更重"。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-172">ModelVisual3D is "heavier" than <xref:System.Windows.Media.Media3D.GeometryModel3D> because it caches transformed bounds.</span></span>  <span data-ttu-id="bd8c4-173">几何模型3D被优化为模型;ModelVisual3D 已优化为场景节点。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-173">GeometryModel3D is optimized to be a model; ModelVisual3D is optimized to be a scene node.</span></span>  <span data-ttu-id="bd8c4-174">使用 ModelVisual3D 将几何模型 3D 的共享实例放入场景中。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-174">Use ModelVisual3D to put shared instances of GeometryModel3D into the scene.</span></span>|  
|<xref:System.Windows.Media.Media3D.Light>|<span data-ttu-id="bd8c4-175">最小化更改场景中灯光数的次数。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-175">Minimize the number of times you change the number of lights in the scene.</span></span>  <span data-ttu-id="bd8c4-176">光计数的每个更改都会强制进行底带再生和重新编译，除非该配置以前存在（因此缓存了其底带）。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-176">Each change of light count forces a shader regeneration and recompilation unless that configuration has existed previously (and thus had its shader cached).</span></span>|  
|<span data-ttu-id="bd8c4-177">浅色</span><span class="sxs-lookup"><span data-stu-id="bd8c4-177">Light</span></span>|<span data-ttu-id="bd8c4-178">黑光不可见，但它们会增加渲染时间;考虑省略它们。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-178">Black lights won’t be visible, but they will add to render time; consider omitting them.</span></span>|  
|<xref:System.Windows.Media.Media3D.MeshGeometry3D>|<span data-ttu-id="bd8c4-179">为了最小化 在 中[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]的大型集合的构造时间，例如 MeshGeometry3D<xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>的<xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A> <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>、和<xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>，在值填充之前预调整集合的大小。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-179">To minimize the construction time of large collections in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)], such as a MeshGeometry3D’s <xref:System.Windows.Media.Media3D.MeshGeometry3D.Positions%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.Normals%2A>, <xref:System.Windows.Media.Media3D.MeshGeometry3D.TextureCoordinates%2A>, and <xref:System.Windows.Media.Media3D.MeshGeometry3D.TriangleIndices%2A>, pre-size the collections before value population.</span></span> <span data-ttu-id="bd8c4-180">如果可能，传递集合的构造函数预填充的数据结构，如数组或列表。</span><span class="sxs-lookup"><span data-stu-id="bd8c4-180">If possible, pass the collections’ constructors prepopulated data structures such as arrays or Lists.</span></span>|  
  
## <a name="see-also"></a><span data-ttu-id="bd8c4-181">另请参阅</span><span class="sxs-lookup"><span data-stu-id="bd8c4-181">See also</span></span>

- [<span data-ttu-id="bd8c4-182">3D 图形概述</span><span class="sxs-lookup"><span data-stu-id="bd8c4-182">3D Graphics Overview</span></span>](3-d-graphics-overview.md)
