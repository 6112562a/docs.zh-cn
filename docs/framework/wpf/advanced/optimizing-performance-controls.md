---
title: 优化控件性能
ms.date: 03/30/2017
helpviewer_keywords:
- controls [WPF], improving performance
- container recycling [WPF]
- user interface virtualization [WPF]
ms.assetid: 45a31c43-ea8a-4546-96c8-0631b9934179
ms.openlocfilehash: d02fde7076cd6a24fdfb171ed54161b20f3d465e
ms.sourcegitcommit: de17a7a0a37042f0d4406f5ae5393531caeb25ba
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/24/2020
ms.locfileid: "76746725"
---
# <a name="optimizing-performance-controls"></a><span data-ttu-id="d8901-102">优化性能：控件</span><span class="sxs-lookup"><span data-stu-id="d8901-102">Optimizing performance: Controls</span></span>

<span data-ttu-id="d8901-103">Windows Presentation Foundation （WPF）包含许多 Windows 应用程序中使用的常用用户界面（UI）组件。</span><span class="sxs-lookup"><span data-stu-id="d8901-103">Windows Presentation Foundation (WPF) includes many of the common user-interface (UI) components that are used in most Windows applications.</span></span> <span data-ttu-id="d8901-104">本主题包含提高 UI 性能的技术。</span><span class="sxs-lookup"><span data-stu-id="d8901-104">This topic contains techniques for improving the performance of your UI.</span></span>

## <a name="displaying-large-data-sets"></a><span data-ttu-id="d8901-105">显示大型数据集</span><span class="sxs-lookup"><span data-stu-id="d8901-105">Displaying large data sets</span></span>

<span data-ttu-id="d8901-106">WPF 控件（如 <xref:System.Windows.Controls.ListView> 和 <xref:System.Windows.Controls.ComboBox>）用于显示应用程序中项的列表。</span><span class="sxs-lookup"><span data-stu-id="d8901-106">WPF controls such as the <xref:System.Windows.Controls.ListView> and <xref:System.Windows.Controls.ComboBox> are used to display lists of items in an application.</span></span> <span data-ttu-id="d8901-107">如果要显示的列表较大，则应用程序性能可能受到影响。</span><span class="sxs-lookup"><span data-stu-id="d8901-107">If the list to display is large, the application's performance can be affected.</span></span> <span data-ttu-id="d8901-108">这是因为标准布局系统会为每个与列表控件关联的项创建布局容器，并计算其布局大小和位置。</span><span class="sxs-lookup"><span data-stu-id="d8901-108">This is because the standard layout system creates a layout container for each item associated with the list control, and computes its layout size and position.</span></span> <span data-ttu-id="d8901-109">通常，无需同时显示所有项，而是显示子集，然后用户滚动浏览列表。</span><span class="sxs-lookup"><span data-stu-id="d8901-109">Typically, you do not have to display all the items at the same time; instead you display a subset, and the user scrolls through the list.</span></span> <span data-ttu-id="d8901-110">这种情况下，使用 UI 虚拟化具有意义，这意味着生成项容器，且项的关联布局计算会推迟，直到项可见时。</span><span class="sxs-lookup"><span data-stu-id="d8901-110">In this case, it makes sense to use UI *virtualization*, which means the item container generation and associated layout computation for an item is deferred until the item is visible.</span></span>

<span data-ttu-id="d8901-111">UI 虚拟化是列表控件的一个重要方面。</span><span class="sxs-lookup"><span data-stu-id="d8901-111">UI Virtualization is an important aspect of list controls.</span></span> <span data-ttu-id="d8901-112">不应混淆 UI 虚拟化和数据虚拟化。</span><span class="sxs-lookup"><span data-stu-id="d8901-112">UI virtualization should not be confused with data virtualization.</span></span> <span data-ttu-id="d8901-113">UI 虚拟化在内存中仅存储可见项，但在数据绑定方案中会存储内存中的整个数据结构。</span><span class="sxs-lookup"><span data-stu-id="d8901-113">UI virtualization stores only visible items in memory but in a data-binding scenario stores the entire data structure in memory.</span></span> <span data-ttu-id="d8901-114">相反，数据虚拟化仅存储内存中屏幕上可见的数据项。</span><span class="sxs-lookup"><span data-stu-id="d8901-114">In contrast, data virtualization stores only the data items that are visible on the screen in memory.</span></span>

<span data-ttu-id="d8901-115">默认情况下，为 <xref:System.Windows.Controls.ListView> 启用 UI 虚拟化，并在其列表项绑定到数据时 <xref:System.Windows.Controls.ListBox> 控件。</span><span class="sxs-lookup"><span data-stu-id="d8901-115">By default, UI virtualization is enabled for the <xref:System.Windows.Controls.ListView> and <xref:System.Windows.Controls.ListBox> controls when their list items are bound to data.</span></span> <span data-ttu-id="d8901-116">可以通过将 "<xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A?displayProperty=nameWithType> 附加属性" 设置为 "`true`" 来启用 <xref:System.Windows.Controls.TreeView> 虚拟化。</span><span class="sxs-lookup"><span data-stu-id="d8901-116"><xref:System.Windows.Controls.TreeView> virtualization can be enabled by setting the <xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A?displayProperty=nameWithType> attached property to `true`.</span></span> <span data-ttu-id="d8901-117">如果要为从 <xref:System.Windows.Controls.ItemsControl> 派生的自定义控件或使用 <xref:System.Windows.Controls.StackPanel> 类的现有项控件（如 <xref:System.Windows.Controls.ComboBox>）启用 UI 虚拟化，则可以将 <xref:System.Windows.Controls.ItemsControl.ItemsPanel%2A> 设置为 <xref:System.Windows.Controls.VirtualizingStackPanel> 并将 <xref:System.Windows.Controls.VirtualizingPanel.IsVirtualizing%2A> 设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="d8901-117">If you want to enable UI virtualization for custom controls that derive from <xref:System.Windows.Controls.ItemsControl> or existing item controls that use the <xref:System.Windows.Controls.StackPanel> class, such as <xref:System.Windows.Controls.ComboBox>, you can set the <xref:System.Windows.Controls.ItemsControl.ItemsPanel%2A> to <xref:System.Windows.Controls.VirtualizingStackPanel> and set <xref:System.Windows.Controls.VirtualizingPanel.IsVirtualizing%2A> to `true`.</span></span> <span data-ttu-id="d8901-118">遗憾的是，可对没有实现虚拟化的控件禁用 UI 虚拟化。</span><span class="sxs-lookup"><span data-stu-id="d8901-118">Unfortunately, you can disable UI virtualization for these controls without realizing it.</span></span> <span data-ttu-id="d8901-119">以下为禁用 UI 虚拟化的条件列表。</span><span class="sxs-lookup"><span data-stu-id="d8901-119">The following is a list of conditions that disable UI virtualization.</span></span>

- <span data-ttu-id="d8901-120">项容器直接添加到 <xref:System.Windows.Controls.ItemsControl>。</span><span class="sxs-lookup"><span data-stu-id="d8901-120">Item containers are added directly to the <xref:System.Windows.Controls.ItemsControl>.</span></span> <span data-ttu-id="d8901-121">例如，如果应用程序将 <xref:System.Windows.Controls.ListBoxItem> 对象显式添加到 <xref:System.Windows.Controls.ListBox>中，则 <xref:System.Windows.Controls.ListBox> 不会将 <xref:System.Windows.Controls.ListBoxItem> 对象虚拟化。</span><span class="sxs-lookup"><span data-stu-id="d8901-121">For example, if an application explicitly adds <xref:System.Windows.Controls.ListBoxItem> objects to a <xref:System.Windows.Controls.ListBox>, the <xref:System.Windows.Controls.ListBox> does not virtualize the <xref:System.Windows.Controls.ListBoxItem> objects.</span></span>

- <span data-ttu-id="d8901-122"><xref:System.Windows.Controls.ItemsControl> 中的项容器的类型不同。</span><span class="sxs-lookup"><span data-stu-id="d8901-122">Item containers in the <xref:System.Windows.Controls.ItemsControl> are of different types.</span></span> <span data-ttu-id="d8901-123">例如，使用 <xref:System.Windows.Controls.Separator> 对象的 <xref:System.Windows.Controls.Menu> 无法实现项回收，因为 <xref:System.Windows.Controls.Menu> 包含类型 <xref:System.Windows.Controls.Separator> 和 <xref:System.Windows.Controls.MenuItem>的对象。</span><span class="sxs-lookup"><span data-stu-id="d8901-123">For example, a <xref:System.Windows.Controls.Menu> that uses <xref:System.Windows.Controls.Separator> objects cannot implement item recycling because the <xref:System.Windows.Controls.Menu> contains objects of type <xref:System.Windows.Controls.Separator> and <xref:System.Windows.Controls.MenuItem>.</span></span>

- <span data-ttu-id="d8901-124">将 <xref:System.Windows.Controls.ScrollViewer.CanContentScroll%2A> 设置为 `false`。</span><span class="sxs-lookup"><span data-stu-id="d8901-124">Setting <xref:System.Windows.Controls.ScrollViewer.CanContentScroll%2A> to `false`.</span></span>

- <span data-ttu-id="d8901-125">将 <xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A> 设置为 `false`。</span><span class="sxs-lookup"><span data-stu-id="d8901-125">Setting <xref:System.Windows.Controls.VirtualizingStackPanel.IsVirtualizing%2A> to `false`.</span></span>

<span data-ttu-id="d8901-126">虚拟化项容器时需要考虑到一个重要因素，即是否具有与属于项的项容器相关联的其他状态信息。</span><span class="sxs-lookup"><span data-stu-id="d8901-126">An important consideration when you virtualize item containers is whether you have additional state information associated with an item container that belongs with the item.</span></span> <span data-ttu-id="d8901-127">这种情况下，必须保存其他状态。</span><span class="sxs-lookup"><span data-stu-id="d8901-127">In this case, you must save the additional state.</span></span> <span data-ttu-id="d8901-128">例如，你可能有一个包含在 <xref:System.Windows.Controls.Expander> 控件中的项，并且 <xref:System.Windows.Controls.Expander.IsExpanded%2A> 状态绑定到该项的容器，而不是绑定到该项本身。</span><span class="sxs-lookup"><span data-stu-id="d8901-128">For example, you might have an item contained in an <xref:System.Windows.Controls.Expander> control and the <xref:System.Windows.Controls.Expander.IsExpanded%2A> state is bound to the item's container, and not to the item itself.</span></span> <span data-ttu-id="d8901-129">当对新项重用容器时，<xref:System.Windows.Controls.Expander.IsExpanded%2A> 的当前值用于新项。</span><span class="sxs-lookup"><span data-stu-id="d8901-129">When the container is reused for a new item, the current value of <xref:System.Windows.Controls.Expander.IsExpanded%2A> is used for the new item.</span></span> <span data-ttu-id="d8901-130">此外，旧项丢失了正确的 <xref:System.Windows.Controls.Expander.IsExpanded%2A> 值。</span><span class="sxs-lookup"><span data-stu-id="d8901-130">In addition, the old item loses the correct <xref:System.Windows.Controls.Expander.IsExpanded%2A> value.</span></span>

<span data-ttu-id="d8901-131">当前，无任何 WPF 控件提供对数据虚拟化的内置支持。</span><span class="sxs-lookup"><span data-stu-id="d8901-131">Currently, no WPF controls offer built-in support for data virtualization.</span></span>

## <a name="container-recycling"></a><span data-ttu-id="d8901-132">容器回收</span><span class="sxs-lookup"><span data-stu-id="d8901-132">Container recycling</span></span>

<span data-ttu-id="d8901-133">为从 <xref:System.Windows.Controls.ItemsControl> 继承的控件添加到 .NET Framework 3.5 SP1 中的 UI 虚拟化优化是*容器回收，* 它还可以提高滚动性能。</span><span class="sxs-lookup"><span data-stu-id="d8901-133">An optimization to UI virtualization added in the .NET Framework 3.5 SP1 for controls that inherit from <xref:System.Windows.Controls.ItemsControl> is *container recycling,* which can also improve scrolling performance.</span></span> <span data-ttu-id="d8901-134">在填充使用 UI 虚拟化的 <xref:System.Windows.Controls.ItemsControl> 时，它会为每个滚动到视图中的项创建一个项容器，并为每个滚动到视图之外的项销毁项容器。</span><span class="sxs-lookup"><span data-stu-id="d8901-134">When an <xref:System.Windows.Controls.ItemsControl> that uses UI virtualization is populated, it creates an item container for each item that scrolls into view and destroys the item container for each item that scrolls out of view.</span></span> <span data-ttu-id="d8901-135">*容器回收*使控件可以为不同数据项重复使用现有项容器，以便在用户滚动 <xref:System.Windows.Controls.ItemsControl>时不会不断地创建和销毁项容器。</span><span class="sxs-lookup"><span data-stu-id="d8901-135">*Container recycling* enables the control to reuse the existing item containers for different data items, so that item containers are not constantly created and destroyed as the user scrolls the <xref:System.Windows.Controls.ItemsControl>.</span></span> <span data-ttu-id="d8901-136">可以通过将 <xref:System.Windows.Controls.VirtualizingPanel.VirtualizationMode%2A> 附加属性设置为 <xref:System.Windows.Controls.VirtualizationMode.Recycling>来选择启用项目回收。</span><span class="sxs-lookup"><span data-stu-id="d8901-136">You can choose to enable item recycling by setting the <xref:System.Windows.Controls.VirtualizingPanel.VirtualizationMode%2A> attached property to <xref:System.Windows.Controls.VirtualizationMode.Recycling>.</span></span>

<span data-ttu-id="d8901-137">支持虚拟化的任何 <xref:System.Windows.Controls.ItemsControl> 都可以使用容器回收。</span><span class="sxs-lookup"><span data-stu-id="d8901-137">Any <xref:System.Windows.Controls.ItemsControl> that supports virtualization can use container recycling.</span></span> <span data-ttu-id="d8901-138">有关如何在 <xref:System.Windows.Controls.ListBox>上启用容器回收的示例，请参阅[改善 ListBox 的滚动性能](../controls/how-to-improve-the-scrolling-performance-of-a-listbox.md)。</span><span class="sxs-lookup"><span data-stu-id="d8901-138">For an example of how to enable container recycling on a <xref:System.Windows.Controls.ListBox>, see [Improve the Scrolling Performance of a ListBox](../controls/how-to-improve-the-scrolling-performance-of-a-listbox.md).</span></span>

## <a name="supporting-bidirectional-virtualization"></a><span data-ttu-id="d8901-139">支持双向虚拟化</span><span class="sxs-lookup"><span data-stu-id="d8901-139">Supporting bidirectional virtualization</span></span>

<span data-ttu-id="d8901-140"><xref:System.Windows.Controls.VirtualizingStackPanel> 提供对 UI 虚拟化的内置支持（水平或垂直）。</span><span class="sxs-lookup"><span data-stu-id="d8901-140"><xref:System.Windows.Controls.VirtualizingStackPanel> offers built-in support for UI virtualization in one direction, either horizontally or vertically.</span></span> <span data-ttu-id="d8901-141">如果要对控件使用双向虚拟化，则必须实现一个扩展 <xref:System.Windows.Controls.VirtualizingStackPanel> 类的自定义面板。</span><span class="sxs-lookup"><span data-stu-id="d8901-141">If you want to use bidirectional virtualization for your controls, you must implement a custom panel that extends the <xref:System.Windows.Controls.VirtualizingStackPanel> class.</span></span> <span data-ttu-id="d8901-142"><xref:System.Windows.Controls.VirtualizingStackPanel> 类公开 <xref:System.Windows.Controls.VirtualizingStackPanel.OnViewportSizeChanged%2A>、<xref:System.Windows.Controls.VirtualizingStackPanel.LineUp%2A>、<xref:System.Windows.Controls.VirtualizingStackPanel.PageUp%2A>和 <xref:System.Windows.Controls.VirtualizingStackPanel.MouseWheelUp%2A>等虚拟方法。利用这些虚方法，你可以检测列表的可见部分中的更改并相应地对其进行处理。</span><span class="sxs-lookup"><span data-stu-id="d8901-142">The <xref:System.Windows.Controls.VirtualizingStackPanel> class exposes virtual methods such as <xref:System.Windows.Controls.VirtualizingStackPanel.OnViewportSizeChanged%2A>, <xref:System.Windows.Controls.VirtualizingStackPanel.LineUp%2A>, <xref:System.Windows.Controls.VirtualizingStackPanel.PageUp%2A>, and <xref:System.Windows.Controls.VirtualizingStackPanel.MouseWheelUp%2A>.These virtual methods enable you to detect a change in the visible part of a list and handle it accordingly.</span></span>

## <a name="optimizing-templates"></a><span data-ttu-id="d8901-143">优化模板</span><span class="sxs-lookup"><span data-stu-id="d8901-143">Optimizing templates</span></span>

<span data-ttu-id="d8901-144">可视化树包含应用程序中所有可视元素。</span><span class="sxs-lookup"><span data-stu-id="d8901-144">The visual tree contains all the visual elements in an application.</span></span> <span data-ttu-id="d8901-145">除直接创建的对象外，它还包括由于模板扩展而产生的对象。</span><span class="sxs-lookup"><span data-stu-id="d8901-145">In addition to the objects directly created, it also contains objects due to template expansion.</span></span> <span data-ttu-id="d8901-146">例如，在创建 <xref:System.Windows.Controls.Button>时，还会在可视化树中获取 <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> 和 <xref:System.Windows.Controls.ContentPresenter> 对象。</span><span class="sxs-lookup"><span data-stu-id="d8901-146">For example, when you create a <xref:System.Windows.Controls.Button>, you also get <xref:Microsoft.Windows.Themes.ClassicBorderDecorator> and <xref:System.Windows.Controls.ContentPresenter> objects in the visual tree.</span></span> <span data-ttu-id="d8901-147">如果尚未优化模板控件，则要在可视化树中创建大量不必要的额外对象。</span><span class="sxs-lookup"><span data-stu-id="d8901-147">If you haven't optimized your control templates, you may be creating a lot of extra unnecessary objects in the visual tree.</span></span> <span data-ttu-id="d8901-148">有关可视化树的详细信息，请参见 [WPF 图形呈现概述](../graphics-multimedia/wpf-graphics-rendering-overview.md)。</span><span class="sxs-lookup"><span data-stu-id="d8901-148">For more information on the visual tree, see [WPF Graphics Rendering Overview](../graphics-multimedia/wpf-graphics-rendering-overview.md).</span></span>

## <a name="deferred-scrolling"></a><span data-ttu-id="d8901-149">延迟滚动</span><span class="sxs-lookup"><span data-stu-id="d8901-149">Deferred scrolling</span></span>

<span data-ttu-id="d8901-150">默认情况下，用户拖动滚动条上的滚动块时，内容视图会不断更新。</span><span class="sxs-lookup"><span data-stu-id="d8901-150">By default, when the user drags the thumb on a scrollbar, the content view continuously updates.</span></span> <span data-ttu-id="d8901-151">如果控件中滚动较慢，请考虑使用延迟滚动。</span><span class="sxs-lookup"><span data-stu-id="d8901-151">If scrolling is slow in your control, consider using deferred scrolling.</span></span> <span data-ttu-id="d8901-152">在延迟滚动中，仅在用户释放滚动块时才会更新内容。</span><span class="sxs-lookup"><span data-stu-id="d8901-152">In deferred scrolling, the content is updated only when the user releases the thumb.</span></span>

<span data-ttu-id="d8901-153">若要实现延迟滚动，请将 <xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> 属性设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="d8901-153">To implement deferred scrolling, set the <xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> property to `true`.</span></span> <span data-ttu-id="d8901-154"><xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> 是附加属性，可在 <xref:System.Windows.Controls.ScrollViewer> 以及其控件模板中具有 <xref:System.Windows.Controls.ScrollViewer> 的任何控件上进行设置。</span><span class="sxs-lookup"><span data-stu-id="d8901-154"><xref:System.Windows.Controls.ScrollViewer.IsDeferredScrollingEnabled%2A> is an attached property and can be set on <xref:System.Windows.Controls.ScrollViewer> and any control that has a <xref:System.Windows.Controls.ScrollViewer> in its control template.</span></span>

## <a name="controls-that-implement-performance-features"></a><span data-ttu-id="d8901-155">实现性能功能的控件</span><span class="sxs-lookup"><span data-stu-id="d8901-155">Controls that implement performance features</span></span>

<span data-ttu-id="d8901-156">下表列出了显示数据的常见控件及其性能功能支持。</span><span class="sxs-lookup"><span data-stu-id="d8901-156">The following table lists the common controls for displaying data and their support of performance features.</span></span> <span data-ttu-id="d8901-157">有关如何启用这些功能的信息，请参阅先前章节。</span><span class="sxs-lookup"><span data-stu-id="d8901-157">See the previous sections for information on how to enable these features.</span></span>

|<span data-ttu-id="d8901-158">控件</span><span class="sxs-lookup"><span data-stu-id="d8901-158">Control</span></span>|<span data-ttu-id="d8901-159">虚拟化</span><span class="sxs-lookup"><span data-stu-id="d8901-159">Virtualization</span></span>|<span data-ttu-id="d8901-160">容器回收</span><span class="sxs-lookup"><span data-stu-id="d8901-160">Container recycling</span></span>|<span data-ttu-id="d8901-161">延迟滚动</span><span class="sxs-lookup"><span data-stu-id="d8901-161">Deferred scrolling</span></span>|
|-------------|--------------------|-------------------------|------------------------|
|<xref:System.Windows.Controls.ComboBox>|<span data-ttu-id="d8901-162">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-162">Can be enabled</span></span>|<span data-ttu-id="d8901-163">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-163">Can be enabled</span></span>|<span data-ttu-id="d8901-164">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-164">Can be enabled</span></span>|
|<xref:System.Windows.Controls.ContextMenu>|<span data-ttu-id="d8901-165">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-165">Can be enabled</span></span>|<span data-ttu-id="d8901-166">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-166">Can be enabled</span></span>|<span data-ttu-id="d8901-167">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-167">Can be enabled</span></span>|
|<xref:System.Windows.Controls.DocumentViewer>|<span data-ttu-id="d8901-168">不可用</span><span class="sxs-lookup"><span data-stu-id="d8901-168">Not available</span></span>|<span data-ttu-id="d8901-169">不可用</span><span class="sxs-lookup"><span data-stu-id="d8901-169">Not available</span></span>|<span data-ttu-id="d8901-170">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-170">Can be enabled</span></span>|
|<xref:System.Windows.Controls.ListBox>|<span data-ttu-id="d8901-171">默认</span><span class="sxs-lookup"><span data-stu-id="d8901-171">Default</span></span>|<span data-ttu-id="d8901-172">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-172">Can be enabled</span></span>|<span data-ttu-id="d8901-173">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-173">Can be enabled</span></span>|
|<xref:System.Windows.Controls.ListView>|<span data-ttu-id="d8901-174">默认</span><span class="sxs-lookup"><span data-stu-id="d8901-174">Default</span></span>|<span data-ttu-id="d8901-175">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-175">Can be enabled</span></span>|<span data-ttu-id="d8901-176">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-176">Can be enabled</span></span>|
|<xref:System.Windows.Controls.TreeView>|<span data-ttu-id="d8901-177">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-177">Can be enabled</span></span>|<span data-ttu-id="d8901-178">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-178">Can be enabled</span></span>|<span data-ttu-id="d8901-179">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-179">Can be enabled</span></span>|
|<xref:System.Windows.Controls.ToolBar>|<span data-ttu-id="d8901-180">不可用</span><span class="sxs-lookup"><span data-stu-id="d8901-180">Not available</span></span>|<span data-ttu-id="d8901-181">不可用</span><span class="sxs-lookup"><span data-stu-id="d8901-181">Not available</span></span>|<span data-ttu-id="d8901-182">可启用</span><span class="sxs-lookup"><span data-stu-id="d8901-182">Can be enabled</span></span>|

> [!NOTE]
> <span data-ttu-id="d8901-183">有关如何在 <xref:System.Windows.Controls.TreeView>上启用虚拟化和容器回收的示例，请参阅[提高 TreeView 的性能](../controls/how-to-improve-the-performance-of-a-treeview.md)。</span><span class="sxs-lookup"><span data-stu-id="d8901-183">For an example of how to enable virtualization and container recycling on a <xref:System.Windows.Controls.TreeView>, see [Improve the Performance of a TreeView](../controls/how-to-improve-the-performance-of-a-treeview.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="d8901-184">另请参阅</span><span class="sxs-lookup"><span data-stu-id="d8901-184">See also</span></span>

- [<span data-ttu-id="d8901-185">布局</span><span class="sxs-lookup"><span data-stu-id="d8901-185">Layout</span></span>](layout.md)
- [<span data-ttu-id="d8901-186">布局和设计</span><span class="sxs-lookup"><span data-stu-id="d8901-186">Layout and Design</span></span>](optimizing-performance-layout-and-design.md)
- [<span data-ttu-id="d8901-187">数据绑定</span><span class="sxs-lookup"><span data-stu-id="d8901-187">Data Binding</span></span>](optimizing-performance-data-binding.md)
- [<span data-ttu-id="d8901-188">控制</span><span class="sxs-lookup"><span data-stu-id="d8901-188">Controls</span></span>](../controls/index.md)
- [<span data-ttu-id="d8901-189">样式设置和模板化</span><span class="sxs-lookup"><span data-stu-id="d8901-189">Styling and Templating</span></span>](../../../desktop-wpf/fundamentals/styles-templates-overview.md)
- [<span data-ttu-id="d8901-190">演练：在 WPF 应用程序中缓存应用程序数据</span><span class="sxs-lookup"><span data-stu-id="d8901-190">Walkthrough: Caching Application Data in a WPF Application</span></span>](walkthrough-caching-application-data-in-a-wpf-application.md)
