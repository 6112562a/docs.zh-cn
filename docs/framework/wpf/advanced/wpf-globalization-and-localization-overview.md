---
title: WPF 全球化和本地化概述
ms.date: 03/30/2017
helpviewer_keywords:
- globalization [WPF], about globalization
- localization [WPF], about localization
ms.assetid: 56e5a5c8-6c96-4d19-b8e1-a5be1dc564af
ms.openlocfilehash: 374ab546cb0ba7a4b1fd789b13aca0158f22f686
ms.sourcegitcommit: d6e27023aeaffc4b5a3cb4b88685018d6284ada4
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/09/2019
ms.locfileid: "67662907"
---
# <a name="wpf-globalization-and-localization-overview"></a><span data-ttu-id="f72db-102">WPF 全球化和本地化概述</span><span class="sxs-lookup"><span data-stu-id="f72db-102">WPF Globalization and Localization Overview</span></span>

<span data-ttu-id="f72db-103">当你将自己的产品限制为只能通过一种语言使用时，便将潜在的客户群限制为全球 65 亿人口中的一小部分。</span><span class="sxs-lookup"><span data-stu-id="f72db-103">When you limit your product's availability to only one language, you limit your potential customer base to a fraction of our world’s 6.5 billion population.</span></span> <span data-ttu-id="f72db-104">如果想让自己的应用程序被全球用户所接受，那么对产品进行经济而有效的本地化将是赢得更多客户的最好、最经济的方法。</span><span class="sxs-lookup"><span data-stu-id="f72db-104">If you want your applications to reach a global audience, cost-effective localization of your product is one of the best and most economical ways to reach more customers.</span></span>

<span data-ttu-id="f72db-105">本文概述了全球化和本地化[!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-105">This overview introduces globalization and localization in [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)].</span></span> <span data-ttu-id="f72db-106">全球化是指设计和开发在多个地点执行的应用程序。</span><span class="sxs-lookup"><span data-stu-id="f72db-106">Globalization is the design and development of applications that perform in multiple locations.</span></span> <span data-ttu-id="f72db-107">例如，全球化支持适用于不同区域性用户的本地化用户界面和区域数据。</span><span class="sxs-lookup"><span data-stu-id="f72db-107">For example, globalization supports localized user interfaces and regional data for users in different cultures.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="f72db-108">提供了全球化的设计功能，包括自动布局、 附属程序集和本地化的特性和注释。</span><span class="sxs-lookup"><span data-stu-id="f72db-108">provides globalized design features, including automatic layout, satellite assemblies, and localized attributes and commenting.</span></span>

<span data-ttu-id="f72db-109">本地化是针对应用程序所支持的特定区域性将应用程序资源转换为本地化版本的过程。</span><span class="sxs-lookup"><span data-stu-id="f72db-109">Localization is the translation of application resources into localized versions for the specific cultures that the application supports.</span></span> <span data-ttu-id="f72db-110">当中进行本地化[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]，使用中的 Api<xref:System.Windows.Markup.Localizer>命名空间。</span><span class="sxs-lookup"><span data-stu-id="f72db-110">When you localize in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], you use the APIs in the <xref:System.Windows.Markup.Localizer> namespace.</span></span> <span data-ttu-id="f72db-111">这些 Api 支持[LocBaml 工具示例](https://go.microsoft.com/fwlink/?LinkID=160016)命令行工具。</span><span class="sxs-lookup"><span data-stu-id="f72db-111">These APIs power the [LocBaml Tool Sample](https://go.microsoft.com/fwlink/?LinkID=160016) command-line tool.</span></span> <span data-ttu-id="f72db-112">有关如何生成和使用 LocBaml 的信息，请参阅[本地化应用程序](how-to-localize-an-application.md)。</span><span class="sxs-lookup"><span data-stu-id="f72db-112">For information about how to build and use LocBaml, see [Localize an Application](how-to-localize-an-application.md).</span></span>

## <a name="best-practices-for-globalization-and-localization-in-wpf"></a><span data-ttu-id="f72db-113">在 WPF 中进行全球化和本地化的最佳做法</span><span class="sxs-lookup"><span data-stu-id="f72db-113">Best Practices for Globalization and Localization in WPF</span></span>

<span data-ttu-id="f72db-114">充分利用内置于的全球化和本地化功能[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]按照 UI 设计和本部分提供的本地化相关的技巧。</span><span class="sxs-lookup"><span data-stu-id="f72db-114">You can make the most of the globalization and localization functionality that is built into [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] by following the UI design and localization-related tips that this section provides.</span></span>

### <a name="best-practices-for-wpf-ui-design"></a><span data-ttu-id="f72db-115">WPF UI 设计的最佳做法</span><span class="sxs-lookup"><span data-stu-id="f72db-115">Best Practices for WPF UI Design</span></span>

<span data-ttu-id="f72db-116">设计时[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]– 基于[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]，请考虑实施这些最佳做法：</span><span class="sxs-lookup"><span data-stu-id="f72db-116">When you design a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]–based [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)], consider implementing these best practices:</span></span>

- <span data-ttu-id="f72db-117">编写你[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]中[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]; 避免创建[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]在代码中。</span><span class="sxs-lookup"><span data-stu-id="f72db-117">Write your [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]; avoid creating [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] in code.</span></span> <span data-ttu-id="f72db-118">在创建时你[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]通过使用[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]，通过内置的本地化 Api 公开。</span><span class="sxs-lookup"><span data-stu-id="f72db-118">When you create your [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] by using [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)], you expose it through built-in localization APIs.</span></span>

- <span data-ttu-id="f72db-119">避免使用绝对位置和固定的大小进行布局的内容;相反，使用相对或自动大小调整。</span><span class="sxs-lookup"><span data-stu-id="f72db-119">Avoid using absolute positions and fixed sizes to lay out content; instead, use relative or automatic sizing.</span></span>

  - <span data-ttu-id="f72db-120">使用<xref:System.Windows.Window.SizeToContent%2A>并将宽度和高度设置为`Auto`。</span><span class="sxs-lookup"><span data-stu-id="f72db-120">Use <xref:System.Windows.Window.SizeToContent%2A> and keep widths and heights set to `Auto`.</span></span>

  - <span data-ttu-id="f72db-121">避免使用<xref:System.Windows.Controls.Canvas>布置[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]s。</span><span class="sxs-lookup"><span data-stu-id="f72db-121">Avoid using <xref:System.Windows.Controls.Canvas> to lay out [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]s.</span></span>

  - <span data-ttu-id="f72db-122">使用<xref:System.Windows.Controls.Grid>及其大小共享功能。</span><span class="sxs-lookup"><span data-stu-id="f72db-122">Use <xref:System.Windows.Controls.Grid> and its size-sharing feature.</span></span>

- <span data-ttu-id="f72db-123">在边距中提供额外的空间，因为本地化文本通常需要更多空间。</span><span class="sxs-lookup"><span data-stu-id="f72db-123">Provide extra space in margins because localized text often requires more space.</span></span> <span data-ttu-id="f72db-124">额外空间为可能会延伸的字符预留了余地。</span><span class="sxs-lookup"><span data-stu-id="f72db-124">Extra space allows for possible overhanging characters.</span></span>

- <span data-ttu-id="f72db-125">启用<xref:System.Windows.Controls.TextBlock.TextWrapping%2A>上<xref:System.Windows.Controls.TextBlock>以避免剪裁。</span><span class="sxs-lookup"><span data-stu-id="f72db-125">Enable <xref:System.Windows.Controls.TextBlock.TextWrapping%2A> on <xref:System.Windows.Controls.TextBlock> to avoid clipping.</span></span>

- <span data-ttu-id="f72db-126">设置 `xml:lang` 特性。</span><span class="sxs-lookup"><span data-stu-id="f72db-126">Set the `xml:lang` attribute.</span></span> <span data-ttu-id="f72db-127">此属性描述特定元素及其子元素的区域性。</span><span class="sxs-lookup"><span data-stu-id="f72db-127">This attribute describes the culture of a specific element and its child elements.</span></span> <span data-ttu-id="f72db-128">此属性的值更改中的许多功能的行为[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-128">The value of this property changes the behavior of several features in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="f72db-129">例如，它可以更改断字、拼写检查、数字替换、复杂脚本成型和字体回退的行为。</span><span class="sxs-lookup"><span data-stu-id="f72db-129">For example, it changes the behavior of hyphenation, spell checking, number substitution, complex script shaping, and font fallback.</span></span> <span data-ttu-id="f72db-130">请参阅[WPF 的全球化](globalization-for-wpf.md)有关设置的详细信息[xml: lang 处理在 XAML 中](../../xaml-services/xml-lang-handling-in-xaml.md)。</span><span class="sxs-lookup"><span data-stu-id="f72db-130">See [Globalization for WPF](globalization-for-wpf.md) for more information about setting the [xml:lang Handling in XAML](../../xaml-services/xml-lang-handling-in-xaml.md).</span></span>

- <span data-ttu-id="f72db-131">创建自定义复合字体，以获取更好地控制用于不同语言的字体。</span><span class="sxs-lookup"><span data-stu-id="f72db-131">Create a customized composite font to obtain better control of fonts that are used for different languages.</span></span> <span data-ttu-id="f72db-132">默认情况下，[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]使用 windows\fonts 目录中的 GlobalUserInterface.composite 字体。</span><span class="sxs-lookup"><span data-stu-id="f72db-132">By default, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] uses the GlobalUserInterface.composite font in your Windows\Fonts directory.</span></span>

- <span data-ttu-id="f72db-133">当创建导航应用程序可能本地化区域性中的显示的文本从右到左格式时，显式设置<xref:System.Windows.FlowDirection>的每个页，以确保页面不会继承<xref:System.Windows.FlowDirection>从<xref:System.Windows.Navigation.NavigationWindow>。</span><span class="sxs-lookup"><span data-stu-id="f72db-133">When you create navigation applications that may be localized in a culture that presents text in a right-to-left format, explicitly set the <xref:System.Windows.FlowDirection> of every page to ensure the page does not inherit <xref:System.Windows.FlowDirection> from the <xref:System.Windows.Navigation.NavigationWindow>.</span></span>

- <span data-ttu-id="f72db-134">创建托管浏览器之外的独立导航应用程序时，设置<xref:System.Windows.Application.StartupUri%2A>将初始应用程序<xref:System.Windows.Navigation.NavigationWindow>而不是到页面 (例如， `<Application StartupUri="NavigationWindow.xaml">`)。</span><span class="sxs-lookup"><span data-stu-id="f72db-134">When you create stand-alone navigation applications that are hosted outside a browser, set the <xref:System.Windows.Application.StartupUri%2A> for your initial application to a <xref:System.Windows.Navigation.NavigationWindow> instead of to a page (for example, `<Application StartupUri="NavigationWindow.xaml">`).</span></span> <span data-ttu-id="f72db-135">此设计使您可以更改<xref:System.Windows.FlowDirection>窗口和导航栏。</span><span class="sxs-lookup"><span data-stu-id="f72db-135">This design enables you to change the <xref:System.Windows.FlowDirection> of the Window and the navigation bar.</span></span> <span data-ttu-id="f72db-136">有关详细信息和示例，请参阅[全球化主页示例](https://go.microsoft.com/fwlink/?LinkID=159990)。</span><span class="sxs-lookup"><span data-stu-id="f72db-136">For more information and an example, see [Globalization Homepage Sample](https://go.microsoft.com/fwlink/?LinkID=159990).</span></span>

### <a name="best-practices-for-wpf-localization"></a><span data-ttu-id="f72db-137">WPF 本地化的最佳做法</span><span class="sxs-lookup"><span data-stu-id="f72db-137">Best Practices for WPF Localization</span></span>

<span data-ttu-id="f72db-138">进行本地化时[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]– 基于应用程序，请考虑实施下列最佳做法：</span><span class="sxs-lookup"><span data-stu-id="f72db-138">When you localize [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]–based applications, consider implementing these best practices:</span></span>

- <span data-ttu-id="f72db-139">使用本地化注释为本地化人员提供额外的上下文。</span><span class="sxs-lookup"><span data-stu-id="f72db-139">Use localization comments to provide extra context for localizers.</span></span>

- <span data-ttu-id="f72db-140">使用本地化特性控制本地化，而不是选择性地省略<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>元素上的属性。</span><span class="sxs-lookup"><span data-stu-id="f72db-140">Use localization attributes to control localization instead of selectively omitting <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties on elements.</span></span> <span data-ttu-id="f72db-141">请参阅[本地化特性和注释](localization-attributes-and-comments.md)有关详细信息。</span><span class="sxs-lookup"><span data-stu-id="f72db-141">See [Localization Attributes and Comments](localization-attributes-and-comments.md) for more information.</span></span>

- <span data-ttu-id="f72db-142">使用`msbuild -t:updateuid`并`-t:checkuid`若要添加并检查<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>中的属性在[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-142">Use `msbuild -t:updateuid` and `-t:checkuid` to add and check <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties in your [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="f72db-143">使用<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>属性，用于开发和本地化之间跟踪更改。</span><span class="sxs-lookup"><span data-stu-id="f72db-143">Use <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties to track changes between development and localization.</span></span> <span data-ttu-id="f72db-144"><xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> 属性可帮助您对新的开发更改进行本地化。</span><span class="sxs-lookup"><span data-stu-id="f72db-144"><xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties help you localize new development changes.</span></span> <span data-ttu-id="f72db-145">如果你手动添加<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>属性设置为[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]，该任务是通常会比较繁重并且准确性较低。</span><span class="sxs-lookup"><span data-stu-id="f72db-145">If you manually add <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties to a [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)], the task is typically tedious and less accurate.</span></span>

  - <span data-ttu-id="f72db-146">请勿编辑或更改<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>后开始进行本地化的属性。</span><span class="sxs-lookup"><span data-stu-id="f72db-146">Do not edit or change <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties after you begin localization.</span></span>

  - <span data-ttu-id="f72db-147">不要使用重复<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>属性 （使用复制和粘贴命令时，请记住此提示）。</span><span class="sxs-lookup"><span data-stu-id="f72db-147">Do not use duplicate <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties (remember this tip when you use the copy-and-paste command).</span></span>

  - <span data-ttu-id="f72db-148">设置`UltimateResourceFallback`assemblyinfo.\* 若要指定合适的回退语言中的位置 (例如， `[assembly: NeutralResourcesLanguage("en-US",   UltimateResourceFallbackLocation.Satellite)]`)。</span><span class="sxs-lookup"><span data-stu-id="f72db-148">Set the `UltimateResourceFallback` location in AssemblyInfo.\* to specify the appropriate language for fallback (for example, `[assembly: NeutralResourcesLanguage("en-US",   UltimateResourceFallbackLocation.Satellite)]`).</span></span>

    <span data-ttu-id="f72db-149">如果您决定通过省略主程序集中添加源语言`<UICulture>`在项目文件中标记中，设置`UltimateResourceFallback`与主程序集而不是附属项的位置 (例如， `[assembly: NeutralResourcesLanguage("en-US", UltimateResourceFallbackLocation.MainAssembly)]`)。</span><span class="sxs-lookup"><span data-stu-id="f72db-149">If you decide to include your source language in the main assembly by omitting the `<UICulture>` tag in your project file, set the `UltimateResourceFallback` location as the main assembly instead of the satellite (for example, `[assembly: NeutralResourcesLanguage("en-US", UltimateResourceFallbackLocation.MainAssembly)]`).</span></span>

## <a name="localize-a-wpf-application"></a><span data-ttu-id="f72db-150">对 WPF 应用程序进行本地化</span><span class="sxs-lookup"><span data-stu-id="f72db-150">Localize a WPF Application</span></span>

<span data-ttu-id="f72db-151">进行本地化时[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]应用程序中，有几个选项。</span><span class="sxs-lookup"><span data-stu-id="f72db-151">When you localize a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application, you have several options.</span></span> <span data-ttu-id="f72db-152">例如，将可本地化资源绑定到应用程序中[!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)]文件，在 resx 表中存储可本地化的文本，或者让本地化人员使用[!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)]文件。</span><span class="sxs-lookup"><span data-stu-id="f72db-152">For example, you can bind the localizable resources in your application to an [!INCLUDE[TLA2#tla_xml](../../../../includes/tla2sharptla-xml-md.md)] file, store localizable text in resx tables, or have your localizer use [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] files.</span></span> <span data-ttu-id="f72db-153">本部分介绍使用 XAML，可提供的好处的 BAML 形式的本地化工作流：</span><span class="sxs-lookup"><span data-stu-id="f72db-153">This section describes a localization workflow that uses the BAML form of XAML, which provides several benefits:</span></span>

- <span data-ttu-id="f72db-154">可以本地化您的生成后。</span><span class="sxs-lookup"><span data-stu-id="f72db-154">You can localize after you build.</span></span>

- <span data-ttu-id="f72db-155">以便在开发时可以进行本地化，您可以从较旧版本的 XAML 的 BAML 形式更新本地化使用 XAML 的 BAML 形式的较新版本。</span><span class="sxs-lookup"><span data-stu-id="f72db-155">You can update to a newer version of the BAML form of XAML with localizations from an older version of the BAML form of XAML so that you can localize at the same time that you develop.</span></span>

- <span data-ttu-id="f72db-156">你可以验证原始源元素和语义在编译时由于 XAML 的 BAML 形式的已编译的形式[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-156">You can validate original source elements and semantics at compile time because the BAML form of XAML is the compiled form of [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span>

### <a name="localization-build-process"></a><span data-ttu-id="f72db-157">本地化生成过程</span><span class="sxs-lookup"><span data-stu-id="f72db-157">Localization Build Process</span></span>

<span data-ttu-id="f72db-158">开发时[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]应用程序中，本地化的生成过程如下所示：</span><span class="sxs-lookup"><span data-stu-id="f72db-158">When you develop a [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application, the build process for localization is as follows:</span></span>

- <span data-ttu-id="f72db-159">开发人员创建，并将其全球化[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]应用程序。</span><span class="sxs-lookup"><span data-stu-id="f72db-159">The developer creates and globalizes the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] application.</span></span> <span data-ttu-id="f72db-160">在项目文件中，开发人员设置`<UICulture>en-US</UICulture>`，以便编译应用程序时，会生成非特定于语言的主程序集。</span><span class="sxs-lookup"><span data-stu-id="f72db-160">In the project file the developer sets `<UICulture>en-US</UICulture>` so that when the application is compiled, a language-neutral main assembly is generated.</span></span> <span data-ttu-id="f72db-161">此程序集具有一个附属 .resources.dll 文件，其中包含所有可本地化的资源。</span><span class="sxs-lookup"><span data-stu-id="f72db-161">This assembly has a satellite .resources.dll file that contains all the localizable resources.</span></span> <span data-ttu-id="f72db-162">（可选） 在主程序集中保留源语言，因为我们本地化[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]支持从主程序集进行提取。</span><span class="sxs-lookup"><span data-stu-id="f72db-162">Optionally, you can keep the source language in the main assembly because our localization [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] support extraction from the main assembly.</span></span>

- <span data-ttu-id="f72db-163">该文件编译为在生成时[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]转换为 XAML 的 BAML 形式。</span><span class="sxs-lookup"><span data-stu-id="f72db-163">When the file is compiled into the build, the [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] is converted to the BAML form of XAML.</span></span> <span data-ttu-id="f72db-164">区域性非特定`MyDialog.exe`和区域性相关 （英语）`MyDialog.resources.dll`向说英语的客户发布文件。</span><span class="sxs-lookup"><span data-stu-id="f72db-164">The culturally neutral `MyDialog.exe` and the culturally dependent (English) `MyDialog.resources.dll` files are released to the English-speaking customer.</span></span>

### <a name="localization-workflow"></a><span data-ttu-id="f72db-165">本地化工作流</span><span class="sxs-lookup"><span data-stu-id="f72db-165">Localization Workflow</span></span>

<span data-ttu-id="f72db-166">本地化过程开始后未本地化`MyDialog.resources.dll`生成文件。</span><span class="sxs-lookup"><span data-stu-id="f72db-166">The localization process begins after the unlocalized `MyDialog.resources.dll` file is built.</span></span> <span data-ttu-id="f72db-167">[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]元素和属性在原始[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]通过使用从键-值对 XAML 的 BAML 形式提取[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]下<xref:System.Windows.Markup.Localizer>。</span><span class="sxs-lookup"><span data-stu-id="f72db-167">The [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] elements and properties in your original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] are extracted from the BAML form of XAML into key-value pairs by using the [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] under <xref:System.Windows.Markup.Localizer>.</span></span> <span data-ttu-id="f72db-168">本地化人员使用键/值对来对应用程序进行本地化。</span><span class="sxs-lookup"><span data-stu-id="f72db-168">Localizers use the key-value pairs to localize the application.</span></span> <span data-ttu-id="f72db-169">在本地化完成之后，可以从新值生成一个新的 .resource.dll。</span><span class="sxs-lookup"><span data-stu-id="f72db-169">You can generate a new .resource.dll from the new values after localization is complete.</span></span>

<span data-ttu-id="f72db-170">键 / 值对的键是`x:Uid`位于由开发人员在原始值[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-170">The keys of the key-value pairs are `x:Uid` values that are placed by the developer in the original [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="f72db-171">这些`x:Uid`值使 API 能够跟踪和合并在本地化过程发生在开发人员和本地化人员之间的更改。</span><span class="sxs-lookup"><span data-stu-id="f72db-171">These `x:Uid` values enable the API to track and merge changes that happen between the developer and the localizer during localization.</span></span> <span data-ttu-id="f72db-172">例如，如果开发人员更改[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]本地化人员开始进行本地化之后，可以合并将开发更改与已完成的本地化工作，以便使最小的翻译工作将丢失。</span><span class="sxs-lookup"><span data-stu-id="f72db-172">For example, if the developer changes the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] after the localizer begins localizing, you can merge the development change with the already completed localization work so that minimal translation work is lost.</span></span>

<span data-ttu-id="f72db-173">下图显示了一个基于 XAML 的 BAML 形式的典型本地化工作流。</span><span class="sxs-lookup"><span data-stu-id="f72db-173">The following graphic shows a typical localization workflow that is based on the BAML form of XAML.</span></span> <span data-ttu-id="f72db-174">此关系图假设开发人员以英语编写应用程序。</span><span class="sxs-lookup"><span data-stu-id="f72db-174">This diagram assumes the developer writes the application in English.</span></span> <span data-ttu-id="f72db-175">开发人员创建 WPF 应用程序并将其全球化。</span><span class="sxs-lookup"><span data-stu-id="f72db-175">The developer creates and globalizes the WPF application.</span></span> <span data-ttu-id="f72db-176">在项目文件中，开发人员设置`<UICulture>en-US</UICulture>`，以便在生成，语言的非特定语言主程序集获取生成的附属项。 包含所有可本地化资源的 resources.dll。</span><span class="sxs-lookup"><span data-stu-id="f72db-176">In the project file the developer sets `<UICulture>en-US</UICulture>` so that on build, a language neutral main assembly gets generated with a satellite .resources.dll containing all localizable resources.</span></span> <span data-ttu-id="f72db-177">或者，因为 WPF 本地化 API 支持从主程序集进行提取，所以还可以保留主程序集中的源语言。</span><span class="sxs-lookup"><span data-stu-id="f72db-177">Alternately, one could keep the source language in the main assembly because WPF localization APIs support extraction from the main assembly.</span></span> <span data-ttu-id="f72db-178">生成过程结束之后，XAML 会编译为 BAML。</span><span class="sxs-lookup"><span data-stu-id="f72db-178">After the build process, the XAML get compiled into BAML.</span></span> <span data-ttu-id="f72db-179">将向说英语的客户提供非特定区域性的 MyDialog.exe.resources.dll。</span><span class="sxs-lookup"><span data-stu-id="f72db-179">The culturally neutral MyDialog.exe.resources.dll get shipped to the English speaking customer.</span></span>

![本地化工作流的图示。](./media/wpf-globalization-and-localization-overview/localization-workflow.png)

![未本地化的工作流的图示。](./media/wpf-globalization-and-localization-overview/unlocalized-workflow.png)

## <a name="examples-of-wpf-localization"></a><span data-ttu-id="f72db-182">WPF 本地化示例</span><span class="sxs-lookup"><span data-stu-id="f72db-182">Examples of WPF Localization</span></span>

<span data-ttu-id="f72db-183">本部分包含本地化的应用程序，以帮助你了解如何生成和本地化示例[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]应用程序。</span><span class="sxs-lookup"><span data-stu-id="f72db-183">This section contains examples of localized applications to help you understand how to build and localize [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] applications.</span></span>

#### <a name="run-dialog-box-example"></a><span data-ttu-id="f72db-184">“运行”对话框示例</span><span class="sxs-lookup"><span data-stu-id="f72db-184">Run Dialog Box Example</span></span>

<span data-ttu-id="f72db-185">下图显示的输出**运行**对话框示例。</span><span class="sxs-lookup"><span data-stu-id="f72db-185">The following graphics show the output of the **Run** dialog box sample.</span></span>

<span data-ttu-id="f72db-186">**英语：**</span><span class="sxs-lookup"><span data-stu-id="f72db-186">**English:**</span></span>

![显示英语运行对话框屏幕截图。](./media/wpf-globalization-and-localization-overview/run-dialog-box-english.png)

<span data-ttu-id="f72db-188">**德语：**</span><span class="sxs-lookup"><span data-stu-id="f72db-188">**German:**</span></span>

![显示德语运行对话框屏幕截图。](./media/wpf-globalization-and-localization-overview/run-dialog-box-german.png)

<span data-ttu-id="f72db-190">**设计全球化“运行”对话框**</span><span class="sxs-lookup"><span data-stu-id="f72db-190">**Designing a Global Run Dialog Box**</span></span>

<span data-ttu-id="f72db-191">此示例将生成**运行**通过使用对话框[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]和[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-191">This example produces a **Run** dialog box by using [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)].</span></span> <span data-ttu-id="f72db-192">此对话框等效于**运行**对话框中，可从[!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)]开始菜单。</span><span class="sxs-lookup"><span data-stu-id="f72db-192">This dialog box is equivalent to the **Run** dialog box that is available from the [!INCLUDE[TLA#tla_win](../../../../includes/tlasharptla-win-md.md)] Start menu.</span></span>

<span data-ttu-id="f72db-193">生成全球化对话框的一些要点包括：</span><span class="sxs-lookup"><span data-stu-id="f72db-193">Some highlights for making global dialog boxes are:</span></span>

<span data-ttu-id="f72db-194">**自动布局**</span><span class="sxs-lookup"><span data-stu-id="f72db-194">**Automatic Layout**</span></span>

<span data-ttu-id="f72db-195">*在 Window1.xaml 中：*</span><span class="sxs-lookup"><span data-stu-id="f72db-195">*In Window1.xaml:*</span></span>

`<Window SizeToContent="WidthAndHeight">`

<span data-ttu-id="f72db-196">以前的 Window 属性会根据内容大小自动调整窗口大小。</span><span class="sxs-lookup"><span data-stu-id="f72db-196">The previous Window property automatically resizes the window according to the size of the content.</span></span> <span data-ttu-id="f72db-197">此属性可以防止窗口切断在本地化之后大小增加的内容；它还可以在内容由于本地化而大小减小时删除不必要的空格。</span><span class="sxs-lookup"><span data-stu-id="f72db-197">This property prevents the window from cutting off content that increases in size after localization; it also removes unneeded space when content decreases in size after localization.</span></span>

`<Grid x:Uid="Grid_1">`

<span data-ttu-id="f72db-198"><xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> 为了使所需属性[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]本地化[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]才能正常工作。</span><span class="sxs-lookup"><span data-stu-id="f72db-198"><xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties are needed in order for [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] localization [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] to work correctly.</span></span>

<span data-ttu-id="f72db-199">它们由[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]本地化[!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)]之间的开发和本地化的跟踪更改[!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-199">They are used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] localization [!INCLUDE[TLA2#tla_api#plural](../../../../includes/tla2sharptla-apisharpplural-md.md)] to track changes between the development and localization of the [!INCLUDE[TLA#tla_ui](../../../../includes/tlasharptla-ui-md.md)].</span></span> <span data-ttu-id="f72db-200"><xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> 属性，你可以合并的较新版本[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]与较早本地化[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-200"><xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties enable you to merge a newer version of the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] with an older localization of the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)].</span></span> <span data-ttu-id="f72db-201">您将添加<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>属性通过运行`msbuild -t:updateuid RunDialog.csproj`命令行界面中。</span><span class="sxs-lookup"><span data-stu-id="f72db-201">You add a <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> property by running `msbuild -t:updateuid RunDialog.csproj` in a command shell.</span></span> <span data-ttu-id="f72db-202">这是添加的建议的方法<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>属性因为手动添加它们是通常比较费时并且准确性较低。</span><span class="sxs-lookup"><span data-stu-id="f72db-202">This is the recommended method of adding <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties because manually adding them is typically time-consuming and less accurate.</span></span> <span data-ttu-id="f72db-203">你可以检查是否<xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A>属性正确设置通过运行`msbuild -t:checkuid RunDialog.csproj`。</span><span class="sxs-lookup"><span data-stu-id="f72db-203">You can check that <xref:System.Windows.Markup.Localizer.BamlLocalizableResourceKey.Uid%2A> properties are correctly set by running `msbuild -t:checkuid RunDialog.csproj`.</span></span>

<span data-ttu-id="f72db-204">[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]通过使用结构化<xref:System.Windows.Controls.Grid>控件，它是针对如何利用自动布局非常有用的控件中[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-204">The [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] is structured by using the <xref:System.Windows.Controls.Grid> control, which is a useful control for taking advantage of the automatic layout in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span> <span data-ttu-id="f72db-205">请注意，对话框拆分成三行五列。</span><span class="sxs-lookup"><span data-stu-id="f72db-205">Note that the dialog box is split into three rows and five columns.</span></span> <span data-ttu-id="f72db-206">没有一种行和列定义具有固定的大小;因此，[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]定位每个单元中的元素可以适应增加和减少的大小在本地化过程。</span><span class="sxs-lookup"><span data-stu-id="f72db-206">Not one of the row and column definitions has a fixed size; hence, the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] elements that are positioned in each cell can adapt to increases and decreases in size during localization.</span></span>

[!code-xaml[GlobalizationRunDialog#GridColumnDef](~/samples/snippets/csharp/VS_Snippets_Wpf/GlobalizationRunDialog/CS/Window1.xaml#gridcolumndef)]

<span data-ttu-id="f72db-207">前两列位置**打开：** 标签并<xref:System.Windows.Controls.ComboBox>放置的 10%[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]总宽度。</span><span class="sxs-lookup"><span data-stu-id="f72db-207">The first two columns where the **Open:** label and <xref:System.Windows.Controls.ComboBox> are placed use 10 percent of the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] total width.</span></span>

[!code-xaml[GlobalizationRunDialog#GridColumnDef2](~/samples/snippets/csharp/VS_Snippets_Wpf/GlobalizationRunDialog/CS/Window1.xaml#gridcolumndef2)]

<span data-ttu-id="f72db-208">请注意，该示例使用的共享大小调整功能<xref:System.Windows.Controls.Grid>。</span><span class="sxs-lookup"><span data-stu-id="f72db-208">Note that of the example uses the shared-sizing feature of <xref:System.Windows.Controls.Grid>.</span></span> <span data-ttu-id="f72db-209">最后三列通过将自身放置在同一个充分利用这<xref:System.Windows.Controls.DefinitionBase.SharedSizeGroup%2A>。</span><span class="sxs-lookup"><span data-stu-id="f72db-209">The last three columns take advantage of this by placing themselves in the same <xref:System.Windows.Controls.DefinitionBase.SharedSizeGroup%2A>.</span></span> <span data-ttu-id="f72db-210">正如属性名称所示，此属性允许不同的列采用相同大小。</span><span class="sxs-lookup"><span data-stu-id="f72db-210">As one would expect from the name of the property, this allows the columns to share the same size.</span></span> <span data-ttu-id="f72db-211">因此如果"浏览..."获取已本地化为较长的字符串"Durchsuchen..."，所有按钮都增加而不是让小型的"确定"按钮和一个极大的"Durchsuchen..."按钮的宽度。</span><span class="sxs-lookup"><span data-stu-id="f72db-211">So when the "Browse…" gets localized to the longer string "Durchsuchen…", all buttons grow in width instead of having a small "OK" button and a disproportionately large "Durchsuchen…" button.</span></span>

<span data-ttu-id="f72db-212">**xml:lang**</span><span class="sxs-lookup"><span data-stu-id="f72db-212">**xml:lang**</span></span>

`xml:lang="en-US"`

<span data-ttu-id="f72db-213">请注意[xml: lang 处理在 XAML 中](../../xaml-services/xml-lang-handling-in-xaml.md)放置在根元素处[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="f72db-213">Notice the [xml:lang Handling in XAML](../../xaml-services/xml-lang-handling-in-xaml.md) placed at the root element of the [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)].</span></span> <span data-ttu-id="f72db-214">此属性描述给定元素及其子元素的区域性。</span><span class="sxs-lookup"><span data-stu-id="f72db-214">This property describes the culture of a given element and its children.</span></span> <span data-ttu-id="f72db-215">此值由多个功能[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]，应在本地化过程相应地更改。</span><span class="sxs-lookup"><span data-stu-id="f72db-215">This value is used by several features in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and should be changed appropriately during localization.</span></span> <span data-ttu-id="f72db-216">此值会更改在断字以及对字词进行拼写检查时所使用的字典。</span><span class="sxs-lookup"><span data-stu-id="f72db-216">This value changes what language dictionary is use to hyphenate and spell check words.</span></span> <span data-ttu-id="f72db-217">它还会影响数字的显示以及字体回退系统选择所用字体的方式。</span><span class="sxs-lookup"><span data-stu-id="f72db-217">It also affects the display of digits and how the font fallback system selects which font to use.</span></span> <span data-ttu-id="f72db-218">最后，该属性会影响数值的显示方式，形成在复杂脚本中编写文本的方式。</span><span class="sxs-lookup"><span data-stu-id="f72db-218">Finally, the property affects the way numbers are displayed and the way texts written in complex scripts are shaped.</span></span> <span data-ttu-id="f72db-219">默认值为“en-US”。</span><span class="sxs-lookup"><span data-stu-id="f72db-219">The default value is "en-US".</span></span>

<span data-ttu-id="f72db-220">**生成附属资源程序集**</span><span class="sxs-lookup"><span data-stu-id="f72db-220">**Building a Satellite Resource Assembly**</span></span>

<span data-ttu-id="f72db-221">*在 .csproj 中：*</span><span class="sxs-lookup"><span data-stu-id="f72db-221">*In .csproj:*</span></span>

<span data-ttu-id="f72db-222">编辑`.csproj`文件，并将以下标记添加到无条件`<PropertyGroup>`:</span><span class="sxs-lookup"><span data-stu-id="f72db-222">Edit the `.csproj` file and add the following tag to an unconditional `<PropertyGroup>`:</span></span>

`<UICulture>en-US</UICulture>`

<span data-ttu-id="f72db-223">请注意，增加的`UICulture`值。</span><span class="sxs-lookup"><span data-stu-id="f72db-223">Notice the addition of a `UICulture` value.</span></span> <span data-ttu-id="f72db-224">当此项设置为有效<xref:System.Globalization.CultureInfo>值，如 EN-US，生成项目将在其中生成具有所有可本地化资源的附属程序集。</span><span class="sxs-lookup"><span data-stu-id="f72db-224">When this is set to a valid <xref:System.Globalization.CultureInfo> value such as en-US, building the project will generate a satellite assembly with all localizable resources in it.</span></span>

`<Resource Include="RunIcon.JPG">`

`<Localizable>False</Localizable>`

`</Resource>`

<span data-ttu-id="f72db-225">`RunIcon.JPG`不需要进行本地化，因为它应显示相同的所有区域性。</span><span class="sxs-lookup"><span data-stu-id="f72db-225">The `RunIcon.JPG` does not need to be localized because it should appear the same for all cultures.</span></span> <span data-ttu-id="f72db-226">`Localizable` 设置为`false`，以便它将保留在语言非特定语言主程序集而不是附属程序集。</span><span class="sxs-lookup"><span data-stu-id="f72db-226">`Localizable` is set to `false` so that it remains in the language neutral main assembly instead of the satellite assembly.</span></span> <span data-ttu-id="f72db-227">所有不可编译资源的默认值是`Localizable`设置为`true`。</span><span class="sxs-lookup"><span data-stu-id="f72db-227">The default value of all noncompilable resources is `Localizable` set to `true`.</span></span>

<span data-ttu-id="f72db-228">**本地化“运行”对话框**</span><span class="sxs-lookup"><span data-stu-id="f72db-228">**Localizing the Run Dialog**</span></span>

<span data-ttu-id="f72db-229">**分析**</span><span class="sxs-lookup"><span data-stu-id="f72db-229">**Parse**</span></span>

<span data-ttu-id="f72db-230">生成应用程序之后，对其进行本地化的第一步是将可本地化的资源从附属程序集中分析出来。</span><span class="sxs-lookup"><span data-stu-id="f72db-230">After building the application, the first step in localizing it is parsing the localizable resources out of the satellite assembly.</span></span> <span data-ttu-id="f72db-231">对于本主题的目的，使用的示例 LocBaml 工具，可以在中找到[LocBaml 工具示例](https://go.microsoft.com/fwlink/?LinkID=160016)。</span><span class="sxs-lookup"><span data-stu-id="f72db-231">For the purposes of this topic, use the sample LocBaml tool which can be found at [LocBaml Tool Sample](https://go.microsoft.com/fwlink/?LinkID=160016).</span></span> <span data-ttu-id="f72db-232">请注意，LocBaml 只是一个示例工具，用于帮助你了解有关如何生成适合你的本地化过程的本地化工具的入门知识。</span><span class="sxs-lookup"><span data-stu-id="f72db-232">Note that LocBaml is only a sample tool meant to help you get started in building a localization tool that fits into your localization process.</span></span> <span data-ttu-id="f72db-233">使用 LocBaml，运行以下命令，分析：**LocBaml/rundialog.resources.dll /out:** 生成"RunDialog.resources.dll.CSV"文件。</span><span class="sxs-lookup"><span data-stu-id="f72db-233">Using LocBaml, run the following to parse: **LocBaml /parse RunDialog.resources.dll /out:** to generate a "RunDialog.resources.dll.CSV" file.</span></span>

<span data-ttu-id="f72db-234">**本地化**</span><span class="sxs-lookup"><span data-stu-id="f72db-234">**Localize**</span></span>

<span data-ttu-id="f72db-235">使用你喜欢的支持 Unicode 的 CSV 编辑器来编辑此文件。</span><span class="sxs-lookup"><span data-stu-id="f72db-235">Use your favorite CSV editor that supports Unicode to edit this file.</span></span> <span data-ttu-id="f72db-236">筛选掉本地化类别为“None”的所有项。</span><span class="sxs-lookup"><span data-stu-id="f72db-236">Filter out all entries with a localization category of "None".</span></span> <span data-ttu-id="f72db-237">应看到下面的项：</span><span class="sxs-lookup"><span data-stu-id="f72db-237">You should see the following entries:</span></span>

|<span data-ttu-id="f72db-238">资源键</span><span class="sxs-lookup"><span data-stu-id="f72db-238">Resource Key</span></span>|<span data-ttu-id="f72db-239">本地化类别</span><span class="sxs-lookup"><span data-stu-id="f72db-239">Localization Category</span></span>|<span data-ttu-id="f72db-240">值</span><span class="sxs-lookup"><span data-stu-id="f72db-240">Value</span></span>|
|-|-|-|
|<span data-ttu-id="f72db-241">Button_1:System.Windows.Controls.Button.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-241">Button_1:System.Windows.Controls.Button.$Content</span></span>|<span data-ttu-id="f72db-242">Button</span><span class="sxs-lookup"><span data-stu-id="f72db-242">Button</span></span>|<span data-ttu-id="f72db-243">确定</span><span class="sxs-lookup"><span data-stu-id="f72db-243">OK</span></span>|
|<span data-ttu-id="f72db-244">Button_2:System.Windows.Controls.Button.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-244">Button_2:System.Windows.Controls.Button.$Content</span></span>|<span data-ttu-id="f72db-245">Button</span><span class="sxs-lookup"><span data-stu-id="f72db-245">Button</span></span>|<span data-ttu-id="f72db-246">取消</span><span class="sxs-lookup"><span data-stu-id="f72db-246">Cancel</span></span>|
|<span data-ttu-id="f72db-247">Button_3:System.Windows.Controls.Button.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-247">Button_3:System.Windows.Controls.Button.$Content</span></span>|<span data-ttu-id="f72db-248">Button</span><span class="sxs-lookup"><span data-stu-id="f72db-248">Button</span></span>|<span data-ttu-id="f72db-249">浏览...</span><span class="sxs-lookup"><span data-stu-id="f72db-249">Browse...</span></span>|
|<span data-ttu-id="f72db-250">ComboBox_1:System.Windows.Controls.ComboBox.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-250">ComboBox_1:System.Windows.Controls.ComboBox.$Content</span></span>|<span data-ttu-id="f72db-251">组合框</span><span class="sxs-lookup"><span data-stu-id="f72db-251">ComboBox</span></span>||
|<span data-ttu-id="f72db-252">TextBlock_1:System.Windows.Controls.TextBlock.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-252">TextBlock_1:System.Windows.Controls.TextBlock.$Content</span></span>|<span data-ttu-id="f72db-253">Text</span><span class="sxs-lookup"><span data-stu-id="f72db-253">Text</span></span>|<span data-ttu-id="f72db-254">Windows 将根据您所输入的名称，为您打开相应的程序、文件夹、文档或 Internet 资源。</span><span class="sxs-lookup"><span data-stu-id="f72db-254">Type the name of a program, folder, document, or Internet resource, and Windows will open it for you.</span></span>|
|<span data-ttu-id="f72db-255">TextBlock_2:System.Windows.Controls.TextBlock.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-255">TextBlock_2:System.Windows.Controls.TextBlock.$Content</span></span>|<span data-ttu-id="f72db-256">Text</span><span class="sxs-lookup"><span data-stu-id="f72db-256">Text</span></span>|<span data-ttu-id="f72db-257">打开:</span><span class="sxs-lookup"><span data-stu-id="f72db-257">Open:</span></span>|
|<span data-ttu-id="f72db-258">Window_1:System.Windows.Window.Title</span><span class="sxs-lookup"><span data-stu-id="f72db-258">Window_1:System.Windows.Window.Title</span></span>|<span data-ttu-id="f72db-259">标题</span><span class="sxs-lookup"><span data-stu-id="f72db-259">Title</span></span>|<span data-ttu-id="f72db-260">运行</span><span class="sxs-lookup"><span data-stu-id="f72db-260">Run</span></span>|

<span data-ttu-id="f72db-261">将该应用程序本地化为德语版本需要进行下面的翻译：</span><span class="sxs-lookup"><span data-stu-id="f72db-261">Localizing the application to German would require the following translations:</span></span>

|<span data-ttu-id="f72db-262">资源键</span><span class="sxs-lookup"><span data-stu-id="f72db-262">Resource Key</span></span>|<span data-ttu-id="f72db-263">本地化类别</span><span class="sxs-lookup"><span data-stu-id="f72db-263">Localization Category</span></span>|<span data-ttu-id="f72db-264">值</span><span class="sxs-lookup"><span data-stu-id="f72db-264">Value</span></span>|
|-|-|-|
|<span data-ttu-id="f72db-265">Button_1:System.Windows.Controls.Button.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-265">Button_1:System.Windows.Controls.Button.$Content</span></span>|<span data-ttu-id="f72db-266">Button</span><span class="sxs-lookup"><span data-stu-id="f72db-266">Button</span></span>|<span data-ttu-id="f72db-267">确定</span><span class="sxs-lookup"><span data-stu-id="f72db-267">OK</span></span>|
|<span data-ttu-id="f72db-268">Button_2:System.Windows.Controls.Button.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-268">Button_2:System.Windows.Controls.Button.$Content</span></span>|<span data-ttu-id="f72db-269">Button</span><span class="sxs-lookup"><span data-stu-id="f72db-269">Button</span></span>|<span data-ttu-id="f72db-270">Abbrechen</span><span class="sxs-lookup"><span data-stu-id="f72db-270">Abbrechen</span></span>|
|<span data-ttu-id="f72db-271">Button_3:System.Windows.Controls.Button.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-271">Button_3:System.Windows.Controls.Button.$Content</span></span>|<span data-ttu-id="f72db-272">Button</span><span class="sxs-lookup"><span data-stu-id="f72db-272">Button</span></span>|<span data-ttu-id="f72db-273">Durchsuchen…</span><span class="sxs-lookup"><span data-stu-id="f72db-273">Durchsuchen…</span></span>|
|<span data-ttu-id="f72db-274">ComboBox_1:System.Windows.Controls.ComboBox.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-274">ComboBox_1:System.Windows.Controls.ComboBox.$Content</span></span>|<span data-ttu-id="f72db-275">组合框</span><span class="sxs-lookup"><span data-stu-id="f72db-275">ComboBox</span></span>||
|<span data-ttu-id="f72db-276">TextBlock_1:System.Windows.Controls.TextBlock.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-276">TextBlock_1:System.Windows.Controls.TextBlock.$Content</span></span>|<span data-ttu-id="f72db-277">Text</span><span class="sxs-lookup"><span data-stu-id="f72db-277">Text</span></span>|<span data-ttu-id="f72db-278">Geben Sie den Namen eines Programms, Ordners, Dokuments oder einer Internetresource an.</span><span class="sxs-lookup"><span data-stu-id="f72db-278">Geben Sie den Namen eines Programms, Ordners, Dokuments oder einer Internetresource an.</span></span>|
|<span data-ttu-id="f72db-279">TextBlock_2:System.Windows.Controls.TextBlock.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-279">TextBlock_2:System.Windows.Controls.TextBlock.$Content</span></span>|<span data-ttu-id="f72db-280">Text</span><span class="sxs-lookup"><span data-stu-id="f72db-280">Text</span></span>|<span data-ttu-id="f72db-281">Öffnen:</span><span class="sxs-lookup"><span data-stu-id="f72db-281">Öffnen:</span></span>|
|<span data-ttu-id="f72db-282">Window_1:System.Windows.Window.Title</span><span class="sxs-lookup"><span data-stu-id="f72db-282">Window_1:System.Windows.Window.Title</span></span>|<span data-ttu-id="f72db-283">标题</span><span class="sxs-lookup"><span data-stu-id="f72db-283">Title</span></span>|<span data-ttu-id="f72db-284">运行</span><span class="sxs-lookup"><span data-stu-id="f72db-284">Run</span></span>|

<span data-ttu-id="f72db-285">**生成**</span><span class="sxs-lookup"><span data-stu-id="f72db-285">**Generate**</span></span>

<span data-ttu-id="f72db-286">本地化的最后一步涉及创建新进行本地化的附属程序集。</span><span class="sxs-lookup"><span data-stu-id="f72db-286">The last step of localization involves creating the newly localized satellite assembly.</span></span> <span data-ttu-id="f72db-287">可以使用下面的 LocBaml 命令完成此操作：</span><span class="sxs-lookup"><span data-stu-id="f72db-287">This can be accomplished with the following LocBaml command:</span></span>

<span data-ttu-id="f72db-288">**LocBaml.exe /generate RunDialog.resources.dll /trans:RunDialog.resources.dll.CSV /out: . /cul:de-DE**</span><span class="sxs-lookup"><span data-stu-id="f72db-288">**LocBaml.exe /generate RunDialog.resources.dll /trans:RunDialog.resources.dll.CSV /out: . /cul:de-DE**</span></span>

<span data-ttu-id="f72db-289">在德语[!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]，如果此 resources.dll 放置在主程序集旁边的 DE-DE 文件夹中，此资源会自动加载而不是 EN-US 文件夹中的一个。</span><span class="sxs-lookup"><span data-stu-id="f72db-289">On German [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)], if this resources.dll is placed in a de-DE folder next to the main assembly, this resource will automatically load instead of the one in the en-US folder.</span></span> <span data-ttu-id="f72db-290">如果没有德语版本的[!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]若要测试这一点，请将区域性设置的任何区域性[!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]使用 (例如， `en-US`)，并替换原始资源 DLL。</span><span class="sxs-lookup"><span data-stu-id="f72db-290">If you do not have a German version of [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)] to test this, set the culture to whatever culture of [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)] you are using (for example, `en-US`), and replace the original resources DLL.</span></span>

<span data-ttu-id="f72db-291">**附属资源加载**</span><span class="sxs-lookup"><span data-stu-id="f72db-291">**Satellite Resource Loading**</span></span>

|<span data-ttu-id="f72db-292">MyDialog.exe</span><span class="sxs-lookup"><span data-stu-id="f72db-292">MyDialog.exe</span></span>|<span data-ttu-id="f72db-293">en-US\MyDialog.resources.dll</span><span class="sxs-lookup"><span data-stu-id="f72db-293">en-US\MyDialog.resources.dll</span></span>|<span data-ttu-id="f72db-294">de-DE\MyDialog.resources.dll</span><span class="sxs-lookup"><span data-stu-id="f72db-294">de-DE\MyDialog.resources.dll</span></span>|
|------------------|------------------------------------|------------------------------------|
|<span data-ttu-id="f72db-295">代码</span><span class="sxs-lookup"><span data-stu-id="f72db-295">Code</span></span>|<span data-ttu-id="f72db-296">原始英语版 BAML</span><span class="sxs-lookup"><span data-stu-id="f72db-296">Original English BAML</span></span>|<span data-ttu-id="f72db-297">本地化的 BAML</span><span class="sxs-lookup"><span data-stu-id="f72db-297">Localized BAML</span></span>|
|<span data-ttu-id="f72db-298">非特定区域性资源</span><span class="sxs-lookup"><span data-stu-id="f72db-298">Culturally neutral resources</span></span>|<span data-ttu-id="f72db-299">其他英语资源</span><span class="sxs-lookup"><span data-stu-id="f72db-299">Other resources in English</span></span>|<span data-ttu-id="f72db-300">已本地化为德语的其他资源</span><span class="sxs-lookup"><span data-stu-id="f72db-300">Other resources localized to German</span></span>|

<span data-ttu-id="f72db-301">.NET framework 会自动选择要加载根据应用程序的哪些附属资源程序集`Thread.CurrentThread.CurrentUICulture`。</span><span class="sxs-lookup"><span data-stu-id="f72db-301">The .NET framework automatically chooses which satellite resources assembly to load based on the application’s `Thread.CurrentThread.CurrentUICulture`.</span></span> <span data-ttu-id="f72db-302">此值默认为的区域性将[!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]OS。</span><span class="sxs-lookup"><span data-stu-id="f72db-302">This defaults to the culture of your [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)] OS.</span></span> <span data-ttu-id="f72db-303">因此，如果您使用的德语[!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]，则会加载 de-DE\MyDialog.resources.dll，如果您使用的英语[!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)]，则会加载 en-US\MyDialog.resources.dll。</span><span class="sxs-lookup"><span data-stu-id="f72db-303">So if you are using German [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)], the de-DE\MyDialog.resources.dll loads, if you are using English [!INCLUDE[TLA#tla_mswin](../../../../includes/tlasharptla-mswin-md.md)], the en-US\MyDialog.resources.dll loads.</span></span> <span data-ttu-id="f72db-304">通过在项目的 AssemblyInfo.\* 中指定 NeutralResourcesLanguage，可以设置应用程序的最终回退资源。</span><span class="sxs-lookup"><span data-stu-id="f72db-304">You can set the ultimate fallback resource for your application by specifying the NeutralResourcesLanguage in your project’s AssemblyInfo.\*.</span></span> <span data-ttu-id="f72db-305">例如，如果指定：</span><span class="sxs-lookup"><span data-stu-id="f72db-305">For example if you specify:</span></span>

`[assembly: NeutralResourcesLanguage("en-US", UltimateResourceFallbackLocation.Satellite)]`

<span data-ttu-id="f72db-306">如果 de-DE\MyDialog.resources.dll 和 de\MyDialog.resources.dll 都不可用，则德语版 Windows 将使用 en-US\MyDialog.resources.dll。</span><span class="sxs-lookup"><span data-stu-id="f72db-306">then the en-US\MyDialog.resources.dll will be used with German Windows if a de-DE\MyDialog.resources.dll or de\MyDialog.resources.dll are both unavailable.</span></span>

### <a name="microsoft-saudi-arabia-homepage"></a><span data-ttu-id="f72db-307">Microsoft 沙特阿拉伯主页</span><span class="sxs-lookup"><span data-stu-id="f72db-307">Microsoft Saudi Arabia Homepage</span></span>

<span data-ttu-id="f72db-308">下图显示了英语和阿拉伯语主页。</span><span class="sxs-lookup"><span data-stu-id="f72db-308">The following graphics show an English and Arabic Homepage.</span></span> <span data-ttu-id="f72db-309">有关完整的示例生成这些图形，请参阅[全球化主页示例](https://go.microsoft.com/fwlink/?LinkID=159990)。</span><span class="sxs-lookup"><span data-stu-id="f72db-309">For the complete sample that produces these graphics see [Globalization Homepage Sample](https://go.microsoft.com/fwlink/?LinkID=159990).</span></span>

<span data-ttu-id="f72db-310">**英语：**</span><span class="sxs-lookup"><span data-stu-id="f72db-310">**English:**</span></span>

![显示英语主页的屏幕截图。](./media/wpf-globalization-and-localization-overview/english-home-page-sample.jpg)

<span data-ttu-id="f72db-312">**阿拉伯语：**</span><span class="sxs-lookup"><span data-stu-id="f72db-312">**Arabic:**</span></span>

![显示阿拉伯语主页的屏幕截图。](./media/wpf-globalization-and-localization-overview/arabic-home-page-sample.jpg)

### <a name="designing-a-global-microsoft-home-page"></a><span data-ttu-id="f72db-314">设计全球 Microsoft 主页</span><span class="sxs-lookup"><span data-stu-id="f72db-314">Designing a Global Microsoft home page</span></span>

<span data-ttu-id="f72db-315">Microsoft 沙特阿拉伯网站的这个实体模型说明了针对从右向左布局语言提供的全球化功能。</span><span class="sxs-lookup"><span data-stu-id="f72db-315">This mock up of the Microsoft Saudi Arabia web site illustrates the globalization features provided for RightToLeft languages.</span></span> <span data-ttu-id="f72db-316">希伯来语和阿拉伯语等语言具有从右到左阅读顺序，因此布局的[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]通常必须布局不是将英语等从左到右语言中，运行方式完全不同。</span><span class="sxs-lookup"><span data-stu-id="f72db-316">Languages such as Hebrew and Arabic have a right-to-left reading order so the layout of [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] must often be laid out quite differently than it would be in left-to-right languages such as English.</span></span> <span data-ttu-id="f72db-317">从从左到右布局语言本地化到从右到左布局语言可能相当困难，反之亦然。</span><span class="sxs-lookup"><span data-stu-id="f72db-317">Localizing from a left-to-right language to a right-to-left language or vice versa can be quite challenging.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="f72db-318">可使此类本地化工作变得更容易。</span><span class="sxs-lookup"><span data-stu-id="f72db-318">has been designed to make such localizations much easier.</span></span>

<span data-ttu-id="f72db-319">**FlowDirection**</span><span class="sxs-lookup"><span data-stu-id="f72db-319">**FlowDirection**</span></span>

<span data-ttu-id="f72db-320">*Homepage.xaml:*</span><span class="sxs-lookup"><span data-stu-id="f72db-320">*Homepage.xaml:*</span></span>

[!code-xaml[GlobalizationHomepage#Homepage](~/samples/snippets/csharp/VS_Snippets_Wpf/GlobalizationHomepage/CS/Homepage.xaml#homepage)]

<span data-ttu-id="f72db-321">请注意<xref:System.Windows.FrameworkElement.FlowDirection%2A>属性上的<xref:System.Windows.Controls.Page>。</span><span class="sxs-lookup"><span data-stu-id="f72db-321">Notice the <xref:System.Windows.FrameworkElement.FlowDirection%2A> property on <xref:System.Windows.Controls.Page>.</span></span> <span data-ttu-id="f72db-322">更改此属性设置为<xref:System.Windows.FlowDirection.RightToLeft>将更改<xref:System.Windows.FrameworkElement.FlowDirection%2A>的<xref:System.Windows.Controls.Page>及其子元素，以便此布局[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]翻转成为从右到左，如所料，阿拉伯语用户。</span><span class="sxs-lookup"><span data-stu-id="f72db-322">Changing this property to <xref:System.Windows.FlowDirection.RightToLeft> will change the <xref:System.Windows.FrameworkElement.FlowDirection%2A> of the <xref:System.Windows.Controls.Page> and its children elements so that the layout of this [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] is flipped to become right-to-left as an Arabic user would expect.</span></span> <span data-ttu-id="f72db-323">一个可通过指定显式替代继承行为<xref:System.Windows.FrameworkElement.FlowDirection%2A>任何元素上。</span><span class="sxs-lookup"><span data-stu-id="f72db-323">One can override the inheritance behavior by specifying an explicit <xref:System.Windows.FrameworkElement.FlowDirection%2A> on any element.</span></span> <span data-ttu-id="f72db-324"><xref:System.Windows.FrameworkElement.FlowDirection%2A>属性是出现在任何<xref:System.Windows.FrameworkElement>或文档相关的元素并且具有隐式值<xref:System.Windows.FlowDirection.LeftToRight>。</span><span class="sxs-lookup"><span data-stu-id="f72db-324">The <xref:System.Windows.FrameworkElement.FlowDirection%2A> property is available on any <xref:System.Windows.FrameworkElement> or document related element and has an implicit value of <xref:System.Windows.FlowDirection.LeftToRight>.</span></span>

<span data-ttu-id="f72db-325">观察，甚至背景渐变画笔了正确的翻转当根<xref:System.Windows.FrameworkElement.FlowDirection%2A>更改：</span><span class="sxs-lookup"><span data-stu-id="f72db-325">Observe that even the background gradient brushes are flipped correctly when the root <xref:System.Windows.FrameworkElement.FlowDirection%2A> is changed:</span></span>

<span data-ttu-id="f72db-326">**FlowDirection="LeftToRight"**</span><span class="sxs-lookup"><span data-stu-id="f72db-326">**FlowDirection="LeftToRight"**</span></span>

![显示从左到右的渐变流的屏幕截图。](./media/wpf-globalization-and-localization-overview/gradient-flow-left-right.png)

<span data-ttu-id="f72db-328">**FlowDirection="RightToLeft"**</span><span class="sxs-lookup"><span data-stu-id="f72db-328">**FlowDirection="RightToLeft"**</span></span>

![显示从右到左渐变的流的屏幕截图。](./media/wpf-globalization-and-localization-overview/gradient-flow-right-left.png)

<span data-ttu-id="f72db-330">**避免对面板和控件使用固定维度**</span><span class="sxs-lookup"><span data-stu-id="f72db-330">**Avoid Using Fixed Dimensions for Panels and Controls**</span></span>

<span data-ttu-id="f72db-331">请浏览 Homepage.xaml，注意，除了固定的宽度和高度指定的整个[!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)]在顶部<xref:System.Windows.Controls.DockPanel>，有其他固定的维度。</span><span class="sxs-lookup"><span data-stu-id="f72db-331">Take a look through Homepage.xaml, notice that aside from the fixed width and height specified for the entire [!INCLUDE[TLA2#tla_ui](../../../../includes/tla2sharptla-ui-md.md)] on the top <xref:System.Windows.Controls.DockPanel>, there are no other fixed dimensions.</span></span> <span data-ttu-id="f72db-332">请勿使用固定尺寸，以防裁剪可能比源文本长的本地化文本。</span><span class="sxs-lookup"><span data-stu-id="f72db-332">Avoid using fixed dimensions to prevent clipping localized text that may be longer than the source text.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="f72db-333">面板和控件将根据其所包含的内容自动调整大小。</span><span class="sxs-lookup"><span data-stu-id="f72db-333">panels and controls will automatically resize based on the content that they contain.</span></span> <span data-ttu-id="f72db-334">大多数控件还具有最小值和最大维度，可以为更多的控制设置 (例如 MinWidth ="20")。</span><span class="sxs-lookup"><span data-stu-id="f72db-334">Most controls also have minimum and maximum dimensions that you can set for more control (for example, MinWidth="20").</span></span> <span data-ttu-id="f72db-335">与<xref:System.Windows.Controls.Grid>，你还可以通过设置相对宽度和高度\*(例如， `Width="0.25*"`) 或使用其单元格大小共享功能。</span><span class="sxs-lookup"><span data-stu-id="f72db-335">With <xref:System.Windows.Controls.Grid>, you can also set relative widths and heights by using ‘\*’ (for example, `Width="0.25*"`) or use its cell size sharing feature.</span></span>

<span data-ttu-id="f72db-336">**本地化注释**</span><span class="sxs-lookup"><span data-stu-id="f72db-336">**Localization Comments**</span></span>

<span data-ttu-id="f72db-337">在很多情况下，内容可能不太明确，难以翻译。</span><span class="sxs-lookup"><span data-stu-id="f72db-337">There are many cases where content may be ambiguous and difficult to translate.</span></span> <span data-ttu-id="f72db-338">开发人员或设计人员可通过本地化注释为本地化人员提供额外的上下文和注释。</span><span class="sxs-lookup"><span data-stu-id="f72db-338">The developer or designer has the ability to provide extra context and comments to localizers through localization comments.</span></span> <span data-ttu-id="f72db-339">例如，下面的 Localization.Comments 阐明了字符“|”的用法。</span><span class="sxs-lookup"><span data-stu-id="f72db-339">For example the Localization.Comments below clarifies the usage of the character ‘&#124;’.</span></span>

[!code-xaml[GlobalizationHomepage#LocalizationComment](~/samples/snippets/csharp/VS_Snippets_Wpf/GlobalizationHomepage/CS/Homepage.xaml#localizationcomment)]

<span data-ttu-id="f72db-340">此注释将成为与 TextBlock_1 的内容以及在使用 LocBaml 工具的情况下关联 (请参阅[本地化应用程序](how-to-localize-an-application.md))，可在输出.csv 文件的 TextBlock_1 行的第六列：</span><span class="sxs-lookup"><span data-stu-id="f72db-340">This comment becomes associated with TextBlock_1’s content and in the case of the LocBaml Tool, ( see [Localize an Application](how-to-localize-an-application.md)), it can be seen in the 6th column of the TextBlock_1 row in the output .csv file:</span></span>

|<span data-ttu-id="f72db-341">资源键</span><span class="sxs-lookup"><span data-stu-id="f72db-341">Resource Key</span></span>|<span data-ttu-id="f72db-342">类别</span><span class="sxs-lookup"><span data-stu-id="f72db-342">Category</span></span>|<span data-ttu-id="f72db-343">可读性</span><span class="sxs-lookup"><span data-stu-id="f72db-343">Readable</span></span>|<span data-ttu-id="f72db-344">可修改性</span><span class="sxs-lookup"><span data-stu-id="f72db-344">Modifiable</span></span>|<span data-ttu-id="f72db-345">注释</span><span class="sxs-lookup"><span data-stu-id="f72db-345">Comment</span></span>|<span data-ttu-id="f72db-346">值</span><span class="sxs-lookup"><span data-stu-id="f72db-346">Value</span></span>|
|-|-|-|-|-|-|
|<span data-ttu-id="f72db-347">TextBlock_1:System.Windows.Controls.TextBlock.$Content</span><span class="sxs-lookup"><span data-stu-id="f72db-347">TextBlock_1:System.Windows.Controls.TextBlock.$Content</span></span>|<span data-ttu-id="f72db-348">Text</span><span class="sxs-lookup"><span data-stu-id="f72db-348">Text</span></span>|<span data-ttu-id="f72db-349">true</span><span class="sxs-lookup"><span data-stu-id="f72db-349">TRUE</span></span>|<span data-ttu-id="f72db-350">true</span><span class="sxs-lookup"><span data-stu-id="f72db-350">TRUE</span></span>|<span data-ttu-id="f72db-351">此字符用作装饰性规则。</span><span class="sxs-lookup"><span data-stu-id="f72db-351">This character is used as a decorative rule.</span></span>|<span data-ttu-id="f72db-352">&#124;</span><span class="sxs-lookup"><span data-stu-id="f72db-352">&#124;</span></span>|

<span data-ttu-id="f72db-353">使用下面的语法可以将注释放置在任何元素的内容或属性上：</span><span class="sxs-lookup"><span data-stu-id="f72db-353">Comments can be placed on the content or property of any element using the following syntax:</span></span>

[!code-xaml[GlobalizationHomepage#LocalizationCommentsProp](~/samples/snippets/csharp/VS_Snippets_Wpf/GlobalizationHomepage/CS/Homepage.xaml#localizationcommentsprop)]

<span data-ttu-id="f72db-354">**本地化特性**</span><span class="sxs-lookup"><span data-stu-id="f72db-354">**Localization Attributes**</span></span>

<span data-ttu-id="f72db-355">通常，开发人员或本地化经理需要控制本地化人员能够阅读和修改的内容。</span><span class="sxs-lookup"><span data-stu-id="f72db-355">Often the developer or localization manager needs control of what localizers can read and modify.</span></span> <span data-ttu-id="f72db-356">例如，可能不希望本地化人员翻译你公司的名称或法律用语。</span><span class="sxs-lookup"><span data-stu-id="f72db-356">For example, you might not want the localizer to translate the name of your company or legal wording.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="f72db-357">提供了一些特性，使用这些特性可以设置元素的内容或属性（本地化工具可以使用这些内容或属性锁定、隐藏元素或对元素进行排序）的可读性、可修改性和类别。</span><span class="sxs-lookup"><span data-stu-id="f72db-357">provides attributes that enable you to set the readability, modifiability, and category of an element’s content or property which your localization tool can use to lock, hide, or sort elements.</span></span> <span data-ttu-id="f72db-358">有关详细信息，请参阅 <xref:System.Windows.Localization.Attributes%2A>。</span><span class="sxs-lookup"><span data-stu-id="f72db-358">For more information, see <xref:System.Windows.Localization.Attributes%2A>.</span></span> <span data-ttu-id="f72db-359">此示例中 LocBaml 工具仅输出这些特性的值。</span><span class="sxs-lookup"><span data-stu-id="f72db-359">For the purposes of this sample, the LocBaml Tool just outputs the values of these attributes.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="f72db-360">控件对这些特性都使用默认值，但可以替代这些默认值。</span><span class="sxs-lookup"><span data-stu-id="f72db-360">controls all have default values for these attributes, but you the can override them.</span></span> <span data-ttu-id="f72db-361">例如，下面的示例重写的默认本地化特性`TextBlock_1`和为本地化人员设置的内容可读，但不可修改。</span><span class="sxs-lookup"><span data-stu-id="f72db-361">For example, the following example overrides the default localization attributes for `TextBlock_1` and sets the content to be readable but unmodifiable for localizers.</span></span>

[!code-xaml[LocalizationComAtt#LocalizationAttributes](~/samples/snippets/csharp/VS_Snippets_Wpf/LocalizationComAtt/CSharp/Attributes.xaml#localizationattributes)]

<span data-ttu-id="f72db-362">除了可读性和可修改性特性之外[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]提供了常见 UI 类别的枚举 (<xref:System.Windows.LocalizationCategory>) 可用于为本地化人员提供更多上下文。</span><span class="sxs-lookup"><span data-stu-id="f72db-362">In addition to the readability and modifiability attributes, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] provides an enumeration of common UI categories (<xref:System.Windows.LocalizationCategory>) that can be used to give localizers more context.</span></span> <span data-ttu-id="f72db-363">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]中，可以重写平台控件的默认类别[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]以及：</span><span class="sxs-lookup"><span data-stu-id="f72db-363">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] default categories for platform controls can be overridden in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] as well:</span></span>

[!code-xaml[LocalizationComAtt#LocalizationAttributesOverridden](~/samples/snippets/csharp/VS_Snippets_Wpf/LocalizationComAtt/CSharp/Attributes.xaml#localizationattributesoverridden)]

<span data-ttu-id="f72db-364">默认本地化特性[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]提供可以还通过代码进行替代，以便可以正确设置自定义控件的合适的默认值。</span><span class="sxs-lookup"><span data-stu-id="f72db-364">The default localization attributes that [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] provides can also be overridden through code, so you can correctly set the right default values for custom controls.</span></span> <span data-ttu-id="f72db-365">例如：</span><span class="sxs-lookup"><span data-stu-id="f72db-365">For example:</span></span>

```csharp
[Localizability(Readability = Readability.Readable, Modifiability=Modifiability.Unmodifiable, LocalizationCategory.None)]
public class CorporateLogo : TextBlock
{
    // ...
}
```

<span data-ttu-id="f72db-366">实例中设置特定特性[!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)]将优先于自定义控件上的代码中设置的值。</span><span class="sxs-lookup"><span data-stu-id="f72db-366">The per instance attributes set in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] will take precedence over the values set in code on custom controls.</span></span> <span data-ttu-id="f72db-367">有关特性和注释的详细信息，请参阅[本地化特性和注释](localization-attributes-and-comments.md)。</span><span class="sxs-lookup"><span data-stu-id="f72db-367">For more information on attributes and comments, see [Localization Attributes and Comments](localization-attributes-and-comments.md).</span></span>

<span data-ttu-id="f72db-368">**字体回退和复合字体**</span><span class="sxs-lookup"><span data-stu-id="f72db-368">**Font Fallback and Composite Fonts**</span></span>

<span data-ttu-id="f72db-369">如果指定不支持给定的码位范围的字体[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]会自动回退到一个通过使用位于 windows\fonts 目录中的 Global User Interface.compositefont 来实现。</span><span class="sxs-lookup"><span data-stu-id="f72db-369">If you specify a font that does not support a given codepoint range, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] will automatically fallback to one that does by using the Global User Interface.compositefont that is located in your Windows\Fonts directory.</span></span> <span data-ttu-id="f72db-370">复合字体工作原理与任何其他字体，以及可以通过设置元素的显式使用`FontFamily`(例如， `FontFamily="Global User Interface"`)。</span><span class="sxs-lookup"><span data-stu-id="f72db-370">Composite fonts work just as any other font and can be used explicitly by setting an element’s `FontFamily` (for instance, `FontFamily="Global User Interface"`).</span></span> <span data-ttu-id="f72db-371">通过创建你自己的复合字体并指定针对特定代码点范围和语言所使用的字体，可以指定你自己的字体回退首选项。</span><span class="sxs-lookup"><span data-stu-id="f72db-371">You can specify your own font fallback preference by creating your own composite font and specifying what font to use for specific codepoint ranges and languages.</span></span>

<span data-ttu-id="f72db-372">有关复合字体的详细信息请参阅<xref:System.Windows.Media.FontFamily>。</span><span class="sxs-lookup"><span data-stu-id="f72db-372">For more information on composite fonts see <xref:System.Windows.Media.FontFamily>.</span></span>

<span data-ttu-id="f72db-373">**本地化 Microsoft 主页**</span><span class="sxs-lookup"><span data-stu-id="f72db-373">**Localizing the Microsoft Homepage**</span></span>

<span data-ttu-id="f72db-374">可以按照“运行”对话框示例中的相同步骤对此应用程序进行本地化。</span><span class="sxs-lookup"><span data-stu-id="f72db-374">You can follow the same steps as the Run Dialog example to localize this application.</span></span> <span data-ttu-id="f72db-375">阿拉伯语的本地化的.csv 文件，供你在[全球化主页示例](https://go.microsoft.com/fwlink/?LinkID=159990)。</span><span class="sxs-lookup"><span data-stu-id="f72db-375">The localized .csv file for Arabic is available for you in the [Globalization Homepage Sample](https://go.microsoft.com/fwlink/?LinkID=159990).</span></span>
