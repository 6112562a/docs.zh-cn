---
title: 在客户端应用程序中使用数据服务（WCF 数据服务）
ms.date: 03/30/2017
helpviewer_keywords:
- WCF Data Services, client library
- WCF Data Services, getting started
ms.assetid: 90872d0c-e989-4490-b3e9-54afb10d33d4
ms.openlocfilehash: c2923a1940e3d58b6e3434f5b02edfb02995a202
ms.sourcegitcommit: 5b6d778ebb269ee6684fb57ad69a8c28b06235b9
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/08/2019
ms.locfileid: "59155930"
---
# <a name="using-a-data-service-in-a-client-application-wcf-data-services"></a><span data-ttu-id="65146-102">在客户端应用程序中使用数据服务（WCF 数据服务）</span><span class="sxs-lookup"><span data-stu-id="65146-102">Using a Data Service in a Client Application (WCF Data Services)</span></span>
<span data-ttu-id="65146-103">您可以访问公开的服务[!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)]源向 Web 浏览器提供 URI。</span><span class="sxs-lookup"><span data-stu-id="65146-103">You can access a service that exposes an [!INCLUDE[ssODataFull](../../../../includes/ssodatafull-md.md)] feed by supplying a URI to a Web browser.</span></span> <span data-ttu-id="65146-104">URI 提供某个资源的地址，系统将向这些地址发送请求消息以访问或更改该资源表示的基础数据。</span><span class="sxs-lookup"><span data-stu-id="65146-104">The URI provides the address of a resource, and request messages are sent to these addresses to access or change the underlying data that the resource represents.</span></span> <span data-ttu-id="65146-105">浏览器发出 HTTP GET 命令，并以 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] 源的形式返回请求的资源。</span><span class="sxs-lookup"><span data-stu-id="65146-105">The browser issues an HTTP GET command and returns the requested resource as an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed.</span></span> <span data-ttu-id="65146-106">有关详细信息，请参阅[从 Web 浏览器访问服务](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md)。</span><span class="sxs-lookup"><span data-stu-id="65146-106">For more information, see [Accessing the Service from a Web Browser](../../../../docs/framework/data/wcf/accessing-the-service-from-a-web-browser-wcf-data-services-quickstart.md).</span></span>  
  
 <span data-ttu-id="65146-107">尽管可以使用 Web 浏览器测试 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] 服务能否返回预期的数据，但应用程序代码或网页中的脚本编写语言通常会访问生产 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] 服务，这些服务也可用来创建、更新和删除数据。</span><span class="sxs-lookup"><span data-stu-id="65146-107">Although a Web browser may be useful for testing that an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] service returns the expected data, production [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] services that enable you to also create, update, and delete data are generally accessed by application code or scripting languages in a Web page.</span></span> <span data-ttu-id="65146-108">本主题概述了如何访问[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]客户端应用程序中的源。</span><span class="sxs-lookup"><span data-stu-id="65146-108">This topic provides an overview of how to access [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feeds from a client application.</span></span>  
  
## <a name="accessing-and-changing-data-using-rest-semantics"></a><span data-ttu-id="65146-109">使用 REST 语义访问和更改数据</span><span class="sxs-lookup"><span data-stu-id="65146-109">Accessing and Changing Data Using REST Semantics</span></span>  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] <span data-ttu-id="65146-110">有助于保证公开的服务之间的互操作性[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]馈送和使用的应用程序[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]馈送。</span><span class="sxs-lookup"><span data-stu-id="65146-110">helps guarantee interoperability between services that expose [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feeds and applications that consume [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feeds.</span></span> <span data-ttu-id="65146-111">应用程序访问和更改数据在[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-基于通过发送特定 HTTP 操作的寻址应该对其执行操作的实体资源的 URI，且请求消息的服务。</span><span class="sxs-lookup"><span data-stu-id="65146-111">Applications access and change data in an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]-based service by sending request messages of a specific HTTP action and with a URI that addresses an entity resource against which the action should be performed.</span></span> <span data-ttu-id="65146-112">如果必须提供实体数据，则会在消息正文中以明确编码的负载的形式提供该数据。</span><span class="sxs-lookup"><span data-stu-id="65146-112">When entity data must be supplied, it is supplied as a specifically encoded payload in the body of the message.</span></span>  
  
### <a name="http-actions"></a><span data-ttu-id="65146-113">HTTP 操作</span><span class="sxs-lookup"><span data-stu-id="65146-113">HTTP Actions</span></span>  
 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] <span data-ttu-id="65146-114">支持以下的 HTTP 操作，以执行创建、 读取、 更新和删除寻址的资源表示的实体数据的操作：</span><span class="sxs-lookup"><span data-stu-id="65146-114">supports the following HTTP actions to perform create, read, update, and delete operations on the entity data that the addressed resource represents:</span></span>  
  
-   <span data-ttu-id="65146-115">**HTTP GET** -这是默认操作时从浏览器访问的资源。</span><span class="sxs-lookup"><span data-stu-id="65146-115">**HTTP GET** - This is the default action when a resource is accessed from a browser.</span></span> <span data-ttu-id="65146-116">请求消息中不提供负载，将返回具有包含所请求数据的负载的响应方法。</span><span class="sxs-lookup"><span data-stu-id="65146-116">No payload is supplied in the request message, and a response method with a payload that contains the requested data is returned.</span></span>  
  
-   <span data-ttu-id="65146-117">**HTTP POST** -将新实体数据插入到提供的资源。</span><span class="sxs-lookup"><span data-stu-id="65146-117">**HTTP POST** - Inserts new entity data into the supplied resource.</span></span> <span data-ttu-id="65146-118">将在请求消息的负载中提供要插入的数据。</span><span class="sxs-lookup"><span data-stu-id="65146-118">Data to be inserted is supplied in the payload of the request message.</span></span> <span data-ttu-id="65146-119">响应消息的负载包含新建实体的数据。</span><span class="sxs-lookup"><span data-stu-id="65146-119">The payload of the response message contains the data for the newly created entity.</span></span> <span data-ttu-id="65146-120">这包括所有自动生成的键值。</span><span class="sxs-lookup"><span data-stu-id="65146-120">This includes any autogenerated key values.</span></span> <span data-ttu-id="65146-121">标头还包含用于对新实体资源进行寻址的 URI。</span><span class="sxs-lookup"><span data-stu-id="65146-121">The header also contains the URI that addresses the new entity resource.</span></span>  
  
-   <span data-ttu-id="65146-122">**HTTP DELETE** -删除指定的资源表示的实体数据。</span><span class="sxs-lookup"><span data-stu-id="65146-122">**HTTP DELETE** - Deletes the entity data that the specified resource represents.</span></span> <span data-ttu-id="65146-123">请求消息或响应消息中没有负载。</span><span class="sxs-lookup"><span data-stu-id="65146-123">A payload is not present in the request or response messages.</span></span>  
  
-   <span data-ttu-id="65146-124">**HTTP PUT** -替换现有实体数据请求的资源在使用新的请求消息负载中提供的数据。</span><span class="sxs-lookup"><span data-stu-id="65146-124">**HTTP PUT** - Replaces existing entity data at the requested resource with new data that is supplied in the payload of the request message.</span></span>  
  
-   <span data-ttu-id="65146-125">**HTTP MERGE** -由于执行删除后再仅仅为更改实体数据的数据源中插入的效率低下[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]引入了新的 HTTP MERGE 操作。</span><span class="sxs-lookup"><span data-stu-id="65146-125">**HTTP MERGE** - Because of inefficiencies in executing a delete followed by an insert in the data source just to change entity data, [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] introduces a new HTTP MERGE action.</span></span> <span data-ttu-id="65146-126">请求消息的负载包含必须在寻址的实体资源中更改的属性。</span><span class="sxs-lookup"><span data-stu-id="65146-126">The payload of the request message contains the properties that must be changed on the addressed entity resource.</span></span> <span data-ttu-id="65146-127">由于 HTTP 规范中未定义 HTTP MERGE，因此可能需要进行附加处理以便路由 HTTP MERGE 请求，使其通过无法识别 [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] 的服务器。</span><span class="sxs-lookup"><span data-stu-id="65146-127">Because HTTP MERGE is not defined in the HTTP specification, it may require additional processing to route a HTTP MERGE request through non-[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] aware servers.</span></span>  
  
 <span data-ttu-id="65146-128">有关详细信息，请参阅[OData:操作](https://go.microsoft.com/fwlink/?LinkId=185792)。</span><span class="sxs-lookup"><span data-stu-id="65146-128">For more information, see [OData: Operations](https://go.microsoft.com/fwlink/?LinkId=185792).</span></span>  
  
### <a name="payload-formats"></a><span data-ttu-id="65146-129">负载格式</span><span class="sxs-lookup"><span data-stu-id="65146-129">Payload Formats</span></span>  
 <span data-ttu-id="65146-130">对于 HTTP PUT、HTTP POST 或 HTTP MERGE 请求，请求消息的负载包含向数据服务发送的实体数据。</span><span class="sxs-lookup"><span data-stu-id="65146-130">For an HTTP PUT, HTTP POST, or HTTP MERGE request, the payload of a request message contains the entity data that you send to the data service.</span></span> <span data-ttu-id="65146-131">负载的内容取决于消息的数据格式。</span><span class="sxs-lookup"><span data-stu-id="65146-131">The contents of the payload depend on the data format of the message.</span></span> <span data-ttu-id="65146-132">除 DELETE 外，所有操作的 HTTP 响应也都包含这样一个负载。</span><span class="sxs-lookup"><span data-stu-id="65146-132">The HTTP responses to all actions except DELETE also contain such a payload.</span></span> [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] <span data-ttu-id="65146-133">访问和更改数据与服务支持使用以下负载格式：</span><span class="sxs-lookup"><span data-stu-id="65146-133">supports the following payload formats for accessing and changing data with the service:</span></span>  
  
-   <span data-ttu-id="65146-134">**Atom** -由基于 XML 的消息编码，可为定义[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]作为 Atom 发布协议 (AtomPub) 通过 HTTP 启用数据交换，为 Web 源、 播客、 wikis 和基于 XML 的 Internet 功能的扩展。</span><span class="sxs-lookup"><span data-stu-id="65146-134">**Atom** - An XML-based message encoding that is defined by [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] as an extension to the Atom Publishing Protocol (AtomPub) to enable data exchange over HTTP for Web feeds, podcasts, wikis, and XML-based Internet functionality.</span></span> <span data-ttu-id="65146-135">有关详细信息，请参阅[OData:Atom 格式](https://go.microsoft.com/fwlink/?LinkId=185794)。</span><span class="sxs-lookup"><span data-stu-id="65146-135">For more information, see [OData: Atom Format](https://go.microsoft.com/fwlink/?LinkId=185794).</span></span>  
  
-   <span data-ttu-id="65146-136">**JSON** -JavaScript 对象表示法 (JSON) 是一种轻型数据交换格式，基于 JavaScript 编程语言的子集。</span><span class="sxs-lookup"><span data-stu-id="65146-136">**JSON** - JavaScript Object Notation (JSON) is a lightweight data interchange format that is based on a subset of the JavaScript Programming Language.</span></span> <span data-ttu-id="65146-137">有关详细信息，请参阅[OData:JSON 格式](https://go.microsoft.com/fwlink/?LinkId=185795)。</span><span class="sxs-lookup"><span data-stu-id="65146-137">For more information, see [OData: JSON Format](https://go.microsoft.com/fwlink/?LinkId=185795).</span></span>  
  
 <span data-ttu-id="65146-138">将在 HTTP 请求消息的标头中请求负载的消息格式。</span><span class="sxs-lookup"><span data-stu-id="65146-138">The message format of the payload is requested in the header of the HTTP request message.</span></span> <span data-ttu-id="65146-139">有关详细信息，请参阅[OData:操作](https://go.microsoft.com/fwlink/?LinkID=185792)。</span><span class="sxs-lookup"><span data-stu-id="65146-139">For more information, see [OData: Operations](https://go.microsoft.com/fwlink/?LinkID=185792).</span></span>  
  
## <a name="accessing-and-changing-data-using-client-libraries"></a><span data-ttu-id="65146-140">使用客户端库访问和更改数据</span><span class="sxs-lookup"><span data-stu-id="65146-140">Accessing and Changing Data Using Client Libraries</span></span>  
 [!INCLUDE[ssAstoria](../../../../includes/ssastoria-md.md)] <span data-ttu-id="65146-141">包括一些客户端库，使您能够更轻松地使用[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]源从.NET Framework 和基于 Silverlight 的客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="65146-141">includes client libraries that enable you to more easily consume an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed from .NET Framework and Silverlight-based client applications.</span></span> <span data-ttu-id="65146-142">这些库简化了 HTTP 消息的发送和接收。</span><span class="sxs-lookup"><span data-stu-id="65146-142">These libraries simplify sending and receiving HTTP messages.</span></span> <span data-ttu-id="65146-143">它们还可将消息负载转换为代表实体数据的 CLR 对象。</span><span class="sxs-lookup"><span data-stu-id="65146-143">They also translate the message payload into CLR objects that represent entity data.</span></span> <span data-ttu-id="65146-144">客户端库具有两个核心类 <xref:System.Data.Services.Client.DataServiceContext> 和 <xref:System.Data.Services.Client.DataServiceQuery%601>。</span><span class="sxs-lookup"><span data-stu-id="65146-144">The client libraries feature the two core classes <xref:System.Data.Services.Client.DataServiceContext> and <xref:System.Data.Services.Client.DataServiceQuery%601>.</span></span> <span data-ttu-id="65146-145">通过使用这些类，可以查询数据服务，然后作为 CLR 对象使用返回的实体数据。</span><span class="sxs-lookup"><span data-stu-id="65146-145">These classes enable you to query a data service and then work with the returned entity data as CLR objects.</span></span> <span data-ttu-id="65146-146">有关详细信息，请参阅[WCF Data Services 客户端库](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md)并[WCF 数据服务 (Silverlight)](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95))。</span><span class="sxs-lookup"><span data-stu-id="65146-146">For more information, see [WCF Data Services Client Library](../../../../docs/framework/data/wcf/wcf-data-services-client-library.md) and [WCF Data Services (Silverlight)](https://docs.microsoft.com/previous-versions/windows/silverlight/dotnet-windows-silverlight/cc838234(v=vs.95)).</span></span>  
  
 <span data-ttu-id="65146-147">可以使用**添加服务引用**对话框在 Visual Studio 中添加对数据服务的引用。</span><span class="sxs-lookup"><span data-stu-id="65146-147">You can use the **Add Service Reference** dialog in Visual Studio to add a reference to a data service.</span></span> <span data-ttu-id="65146-148">此工具将向所引用的数据服务请求服务元数据，然后生成代表数据服务的 <xref:System.Data.Services.Client.DataServiceContext>，并生成代表实体的客户端数据服务类。</span><span class="sxs-lookup"><span data-stu-id="65146-148">This tool requests the service metadata from a referenced data service and generates the <xref:System.Data.Services.Client.DataServiceContext> that represents a data service, as well as generates the client data service classes that represent entities.</span></span> <span data-ttu-id="65146-149">有关详细信息，请参阅[生成数据服务客户端库](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md)。</span><span class="sxs-lookup"><span data-stu-id="65146-149">For more information, see [Generating the Data Service Client Library](../../../../docs/framework/data/wcf/generating-the-data-service-client-library-wcf-data-services.md).</span></span>  
  
 <span data-ttu-id="65146-150">有现成的编程库可用于使用[!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)]源中其他类型的客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="65146-150">There are programming libraries available that you can use to consume an [!INCLUDE[ssODataShort](../../../../includes/ssodatashort-md.md)] feed in other kinds of client applications.</span></span> <span data-ttu-id="65146-151">有关详细信息，请参阅[OData SDK](https://go.microsoft.com/fwlink/?LinkId=185796)。</span><span class="sxs-lookup"><span data-stu-id="65146-151">For more information, see the [OData SDK](https://go.microsoft.com/fwlink/?LinkId=185796).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="65146-152">请参阅</span><span class="sxs-lookup"><span data-stu-id="65146-152">See also</span></span>

- [<span data-ttu-id="65146-153">访问数据服务资源</span><span class="sxs-lookup"><span data-stu-id="65146-153">Accessing Data Service Resources</span></span>](../../../../docs/framework/data/wcf/accessing-data-service-resources-wcf-data-services.md)
- [<span data-ttu-id="65146-154">快速入门</span><span class="sxs-lookup"><span data-stu-id="65146-154">Quickstart</span></span>](../../../../docs/framework/data/wcf/quickstart-wcf-data-services.md)
