---
title: 迁移注意事项（实体框架）
ms.date: 03/30/2017
ms.assetid: c85b6fe8-cc32-4642-8f0a-dc0e5a695936
ms.openlocfilehash: f65c558b0cbc02bdff8e78189a38d06a7502434f
ms.sourcegitcommit: c7a7e1468bf0fa7f7065de951d60dfc8d5ba89f5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/14/2019
ms.locfileid: "65583575"
---
# <a name="migration-considerations-entity-framework"></a><span data-ttu-id="63ff0-102">迁移注意事项（实体框架）</span><span class="sxs-lookup"><span data-stu-id="63ff0-102">Migration Considerations (Entity Framework)</span></span>
<span data-ttu-id="63ff0-103">现有的应用程序可以从多方面受益于 [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] 实体框架。</span><span class="sxs-lookup"><span data-stu-id="63ff0-103">The [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] Entity Framework provides several benefits to an existing application.</span></span> <span data-ttu-id="63ff0-104">其中最重要的益处之一在于能够使用概念模型将应用程序使用的数据结构与数据源中的架构分离。</span><span class="sxs-lookup"><span data-stu-id="63ff0-104">One of the most important of these benefits is the ability to use a conceptual model to separate data structures used by the application from the schema in the data source.</span></span> <span data-ttu-id="63ff0-105">这样，日后便可轻松地对存储模型或数据源本身进行更改，而无需对应用程序进行补偿更改。</span><span class="sxs-lookup"><span data-stu-id="63ff0-105">This enables you to easily make future changes to the storage model or to the data source itself without making compensating changes to the application.</span></span> <span data-ttu-id="63ff0-106">有关使用的优点的详细信息[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]，请参阅[实体框架概述](../../../../../docs/framework/data/adonet/ef/overview.md)并[实体数据模型](../../../../../docs/framework/data/adonet/entity-data-model.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-106">For more information about the benefits of using the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)], see [Entity Framework Overview](../../../../../docs/framework/data/adonet/ef/overview.md) and [Entity Data Model](../../../../../docs/framework/data/adonet/entity-data-model.md).</span></span>  
  
 <span data-ttu-id="63ff0-107">为了利用[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]的益处，您可以将现有应用程序迁移到[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="63ff0-107">To take advantage of the benefits of the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)], you can migrate an existing application to the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span> <span data-ttu-id="63ff0-108">某些任务对于所有迁移的应用程序是通用的。</span><span class="sxs-lookup"><span data-stu-id="63ff0-108">Some tasks are common to all migrated applications.</span></span> <span data-ttu-id="63ff0-109">这些通用任务包括升级应用程序以使用.NET Framework 版本 3.5 Service Pack 1 (SP1) 开始定义模型和映射，以及配置实体框架。</span><span class="sxs-lookup"><span data-stu-id="63ff0-109">These common tasks include upgrading the application to use the .NET Framework starting with version 3.5 Service Pack 1 (SP1), defining models and mapping, and configuring the Entity Framework.</span></span> <span data-ttu-id="63ff0-110">在将应用程序迁移至[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]时，还需要考虑其他一些注意事项。</span><span class="sxs-lookup"><span data-stu-id="63ff0-110">When you migrate an application to the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)], there are additional considerations that apply.</span></span> <span data-ttu-id="63ff0-111">相关注意事项取决于要迁移的应用程序的类型及具体功能。</span><span class="sxs-lookup"><span data-stu-id="63ff0-111">These considerations depend on the type of application being migrated and on the specific functionality of the application.</span></span> <span data-ttu-id="63ff0-112">本主题提供的信息可帮助您为现有应用程序选择最佳的升级途径。</span><span class="sxs-lookup"><span data-stu-id="63ff0-112">This topic provides information to help you choose the best approach to use when you upgrade an existing application.</span></span>  
  
## <a name="general-migration-considerations"></a><span data-ttu-id="63ff0-113">有关迁移的一般注意事项</span><span class="sxs-lookup"><span data-stu-id="63ff0-113">General Migration Considerations</span></span>  
 <span data-ttu-id="63ff0-114">在将任何应用程序迁移到[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]时，需要考虑以下注意事项：</span><span class="sxs-lookup"><span data-stu-id="63ff0-114">The following considerations apply when you migrate any application to the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]:</span></span>  
  
- <span data-ttu-id="63ff0-115">使用.NET Framework 版本 3.5 SP1 的任何应用程序可以迁移至实体框架，只要应用程序使用的数据源的数据提供程序支持实体框架。</span><span class="sxs-lookup"><span data-stu-id="63ff0-115">Any application that uses the .NET Framework starting with version 3.5 SP1 can be migrated to the Entity Framework, as long as the data provider for the data source that is used by the application supports the Entity Framework.</span></span>  
  
- <span data-ttu-id="63ff0-116">即使某个数据源提供程序支持实体框架，实体框架也可能不支持该提供程序的所有功能。</span><span class="sxs-lookup"><span data-stu-id="63ff0-116">The Entity Framework may not support all the functionality of a data source provider, even if that provider supports the Entity Framework.</span></span>  
  
- <span data-ttu-id="63ff0-117">对于大型或复杂的应用程序，不需要一次性地将整个应用程序迁移到实体框架。</span><span class="sxs-lookup"><span data-stu-id="63ff0-117">For a large or complex application, you are not required to migrate the whole application to the Entity Framework at one time.</span></span> <span data-ttu-id="63ff0-118">但是，在数据源发生更改时，仍然需要更改应用程序中不使用实体框架的任何部分。</span><span class="sxs-lookup"><span data-stu-id="63ff0-118">However, any part of the application that does not use the Entity Framework must still be changed when the data source changes.</span></span>  
  
- <span data-ttu-id="63ff0-119">应用程序的其他部分可以共享实体框架所用的数据提供程序连接，因为[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]使用 [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] 数据提供程序访问数据源。</span><span class="sxs-lookup"><span data-stu-id="63ff0-119">The data provider connection used by the Entity Framework can be shared with other parts of your application because the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] uses [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] data providers to access the data source.</span></span> <span data-ttu-id="63ff0-120">例如，实体框架使用 SqlClient 提供程序访问 SQL Server 数据库。</span><span class="sxs-lookup"><span data-stu-id="63ff0-120">For example, the SqlClient provider is used by the Entity Framework to access a SQL Server database.</span></span> <span data-ttu-id="63ff0-121">有关详细信息，请参阅[针对实体框架的 EntityClient Provider](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-121">For more information, see [EntityClient Provider for the Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).</span></span>  
  
## <a name="common-migration-tasks"></a><span data-ttu-id="63ff0-122">通用迁移任务</span><span class="sxs-lookup"><span data-stu-id="63ff0-122">Common Migration Tasks</span></span>  
 <span data-ttu-id="63ff0-123">将现有应用程序迁移到[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]的途径取决于应用程序的类型以及现有的数据访问策略。</span><span class="sxs-lookup"><span data-stu-id="63ff0-123">The path to migrate an existing application to the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] depends both on the type of application and on the existing data access strategy.</span></span> <span data-ttu-id="63ff0-124">但是，在将现有应用程序迁移到[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]时，总是要执行以下任务。</span><span class="sxs-lookup"><span data-stu-id="63ff0-124">However, you must always perform the following tasks when you migrate an existing application to the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)].</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="63ff0-125">当您使用实体数据模型工具从 Visual Studio 2008 开始，所有这些任务会自动执行。</span><span class="sxs-lookup"><span data-stu-id="63ff0-125">All of these tasks are performed automatically when you use the Entity Data Model tools starting with Visual Studio 2008.</span></span> <span data-ttu-id="63ff0-126">有关详细信息，请参阅[如何：使用实体数据模型向导](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-126">For more information, see [How to: Use the Entity Data Model Wizard](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100)).</span></span>  
  
1. <span data-ttu-id="63ff0-127">升级应用程序。</span><span class="sxs-lookup"><span data-stu-id="63ff0-127">Upgrade the application.</span></span>  
  
     <span data-ttu-id="63ff0-128">通过使用 Visual Studio 和.NET Framework 的早期版本创建的项目必须升级为使用 Visual Studio 2008 SP1 和.NET Framework 版本 3.5 SP1。</span><span class="sxs-lookup"><span data-stu-id="63ff0-128">A project created by using an earlier version of Visual Studio and the .NET Framework must be upgraded to use Visual Studio 2008 SP1 and the .NET Framework starting with version 3.5 SP1.</span></span>  
  
2. <span data-ttu-id="63ff0-129">定义模型和映射。</span><span class="sxs-lookup"><span data-stu-id="63ff0-129">Define the models and mapping.</span></span>  
  
     <span data-ttu-id="63ff0-130">模型和映射文件定义概念模型中的实体、数据源中的结构（如表、存储过程和视图）以及实体与数据源结构之间的映射。</span><span class="sxs-lookup"><span data-stu-id="63ff0-130">The model and mapping files define entities in the conceptual model; structures in the data source, such as tables, stored procedures, and views; and the mapping between the entities and data source structures.</span></span> <span data-ttu-id="63ff0-131">有关详细信息，请参阅[如何：手动定义模型和映射文件](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399785(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-131">For more information, see [How to: Manually Define the Model and Mapping Files](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb399785(v=vs.100)).</span></span>  
  
     <span data-ttu-id="63ff0-132">在存储模型中定义的类型必须与数据源中对象的名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="63ff0-132">Types that are defined in the storage model must match the name of objects in the data source.</span></span> <span data-ttu-id="63ff0-133">如果现有应用程序将数据作为对象公开，则必须确保在概念模型中定义的实体和属性与这些现有数据类和属性的名称相匹配。</span><span class="sxs-lookup"><span data-stu-id="63ff0-133">If the existing application exposes data as objects, you must ensure that the entities and properties that are defined in the conceptual model match the names of these existing data classes and properties.</span></span> <span data-ttu-id="63ff0-134">有关详细信息，请参阅[如何：自定义建模和映射文件以使用自定义对象](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738625(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-134">For more information, see [How to: Customize Modeling and Mapping Files to Work with Custom Objects](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738625(v=vs.100)).</span></span>  
  
    > [!NOTE]
    >  <span data-ttu-id="63ff0-135">可以使用实体数据模型设计器重命名概念模型中的实体以匹配现有对象。</span><span class="sxs-lookup"><span data-stu-id="63ff0-135">The Entity Data Model Designer can be used to rename entities in the conceptual model to match existing objects.</span></span> <span data-ttu-id="63ff0-136">有关详细信息，请参阅[实体数据模型设计器](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc716685(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-136">For more information, see [Entity Data Model Designer](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/cc716685(v=vs.100)).</span></span>  
  
3. <span data-ttu-id="63ff0-137">定义连接字符串。</span><span class="sxs-lookup"><span data-stu-id="63ff0-137">Define the connection string.</span></span>  
  
     <span data-ttu-id="63ff0-138">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]在对概念模型执行查询时使用特殊格式的连接字符串。</span><span class="sxs-lookup"><span data-stu-id="63ff0-138">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] uses a specially formatted connection string when executing queries against a conceptual model.</span></span> <span data-ttu-id="63ff0-139">此连接字符串包装有关模型和映射文件和到数据源的连接的信息。</span><span class="sxs-lookup"><span data-stu-id="63ff0-139">This connection string encapsulates information about the model and mapping files and the connection to the data source.</span></span> <span data-ttu-id="63ff0-140">有关详细信息，请参阅[如何：定义连接字符串](../../../../../docs/framework/data/adonet/ef/how-to-define-the-connection-string.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-140">For more information, see [How to: Define the Connection String](../../../../../docs/framework/data/adonet/ef/how-to-define-the-connection-string.md).</span></span>  
  
4. <span data-ttu-id="63ff0-141">Visual Studio 项目配置。</span><span class="sxs-lookup"><span data-stu-id="63ff0-141">Configure the Visual Studio project.</span></span>  
  
     <span data-ttu-id="63ff0-142">对引用[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]必须将程序集的模型和映射文件添加到 Visual Studio 项目。</span><span class="sxs-lookup"><span data-stu-id="63ff0-142">References to [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] assemblies and the model and mapping files must be added to the Visual Studio project.</span></span> <span data-ttu-id="63ff0-143">可以将这些映射文件添加到项目中，以确保这些文件随应用程序一起部署在连接字符串中所指示的位置。</span><span class="sxs-lookup"><span data-stu-id="63ff0-143">You can add these mapping files to the project to ensure that they are deployed with the application in the location that is indicated in the connection string.</span></span> <span data-ttu-id="63ff0-144">有关详细信息，请参阅[如何：手动配置实体框架项目](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738546(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-144">For more information, see [How to: Manually Configure an Entity Framework Project](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738546(v=vs.100)).</span></span>  
  
## <a name="considerations-for-applications-with-existing-objects"></a><span data-ttu-id="63ff0-145">有关包含现有对象的应用程序的注意事项</span><span class="sxs-lookup"><span data-stu-id="63ff0-145">Considerations for Applications with Existing Objects</span></span>  
 <span data-ttu-id="63ff0-146">从.NET Framework 4，开始[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]支持"纯旧式"CLR 对象 (POCO) (也称为持久性未知对象。</span><span class="sxs-lookup"><span data-stu-id="63ff0-146">Starting with the .NET Framework 4, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] supports "plain old" CLR objects (POCO), also called persistence-ignorant objects.</span></span> <span data-ttu-id="63ff0-147">大多数情况下，通过进行少量修改，现有对象可以使用[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="63ff0-147">In most cases, your existing objects can work with the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] by making minor changes.</span></span> <span data-ttu-id="63ff0-148">有关详细信息，请参阅[使用 POCO 实体](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd456853(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-148">For more information, see [Working with POCO Entities](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/dd456853(v=vs.100)).</span></span> <span data-ttu-id="63ff0-149">此外可以将迁移到应用程序[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]和使用实体框架工具生成的数据类。</span><span class="sxs-lookup"><span data-stu-id="63ff0-149">You can also migrate an application to the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] and use the data classes that are generated by the Entity Framework tools.</span></span> <span data-ttu-id="63ff0-150">有关详细信息，请参阅[如何：使用实体数据模型向导](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-150">For more information, see [How to: Use the Entity Data Model Wizard](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738677(v=vs.100)).</span></span>  
  
## <a name="considerations-for-applications-that-use-adonet-providers"></a><span data-ttu-id="63ff0-151">有关使用 ADO.NET 提供程序的应用程序的注意事项</span><span class="sxs-lookup"><span data-stu-id="63ff0-151">Considerations for Applications that Use ADO.NET Providers</span></span>  
 [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] <span data-ttu-id="63ff0-152">提供程序，例如 SqlClient，使你能够查询要返回表格数据的数据源。</span><span class="sxs-lookup"><span data-stu-id="63ff0-152">providers, such as SqlClient, enable you to query a data source to return tabular data.</span></span> <span data-ttu-id="63ff0-153">此外可以将数据加载到[!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)]数据集。</span><span class="sxs-lookup"><span data-stu-id="63ff0-153">Data can also be loaded into an [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] DataSet.</span></span> <span data-ttu-id="63ff0-154">下表介绍在升级使用现有 [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] 提供程序的应用程序时的注意事项：</span><span class="sxs-lookup"><span data-stu-id="63ff0-154">The following list describes considerations for upgrading an application that uses an existing [!INCLUDE[vstecado](../../../../../includes/vstecado-md.md)] provider:</span></span>  
  
- <span data-ttu-id="63ff0-155">使用数据读取器显示表格格式数据。</span><span class="sxs-lookup"><span data-stu-id="63ff0-155">Displaying tabular data by using a data reader.</span></span>  

  <span data-ttu-id="63ff0-156">你可能考虑执行[!INCLUDE[esql](../../../../../includes/esql-md.md)]查询使用 EntityClient 提供程序和枚举返回<xref:System.Data.EntityClient.EntityDataReader>对象。</span><span class="sxs-lookup"><span data-stu-id="63ff0-156">You may consider executing an [!INCLUDE[esql](../../../../../includes/esql-md.md)] query using the EntityClient provider and enumerating through the returned <xref:System.Data.EntityClient.EntityDataReader> object.</span></span> <span data-ttu-id="63ff0-157">仅当应用程序使用数据读取器显示表格格式数据，且不需要由[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]提供用于将数据具体化为对象、跟踪更改和进行更新的功能时，才应这样做。</span><span class="sxs-lookup"><span data-stu-id="63ff0-157">Do this only if your application displays tabular data using a data reader and does not require the facilities provided by the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] for materializing data into objects, tracking changes, and making updates.</span></span> <span data-ttu-id="63ff0-158">可以继续使用对数据源进行更新的现有数据访问代码，但可以使用从 <xref:System.Data.EntityClient.EntityConnection.StoreConnection%2A> 的 <xref:System.Data.EntityClient.EntityConnection> 属性访问的现有连接。</span><span class="sxs-lookup"><span data-stu-id="63ff0-158">You can continue to use existing data access code that makes updates to the data source, but you can use the existing connection accessed from the <xref:System.Data.EntityClient.EntityConnection.StoreConnection%2A> property of <xref:System.Data.EntityClient.EntityConnection>.</span></span> <span data-ttu-id="63ff0-159">有关详细信息，请参阅[针对实体框架的 EntityClient Provider](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-159">For more information, see [EntityClient Provider for the Entity Framework](../../../../../docs/framework/data/adonet/ef/entityclient-provider-for-the-entity-framework.md).</span></span>  
  
- <span data-ttu-id="63ff0-160">使用数据集。</span><span class="sxs-lookup"><span data-stu-id="63ff0-160">Working with DataSets.</span></span>  

  <span data-ttu-id="63ff0-161">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]提供了很多相同功能提供的数据集，其中包括内存中持久性、 更改跟踪、 数据绑定以及将对象序列化为 XML 数据。</span><span class="sxs-lookup"><span data-stu-id="63ff0-161">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] provides many of the same functionalities provided by DataSet, including in-memory persistence, change tracking, data binding, and serializing objects as XML data.</span></span> <span data-ttu-id="63ff0-162">有关详细信息，请参阅[使用对象](../../../../../docs/framework/data/adonet/ef/working-with-objects.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-162">For more information, see [Working with Objects](../../../../../docs/framework/data/adonet/ef/working-with-objects.md).</span></span>  
  
  <span data-ttu-id="63ff0-163">如果[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]不提供功能的应用程序所需的数据集，您仍可以充分利用 LINQ 查询的优点使用[!INCLUDE[linq_dataset](../../../../../includes/linq-dataset-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="63ff0-163">If the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] does not provide the functionality of DataSet needed by your application, you can still take advantage of the benefits of LINQ queries by using [!INCLUDE[linq_dataset](../../../../../includes/linq-dataset-md.md)].</span></span> <span data-ttu-id="63ff0-164">有关详细信息，请参阅 [LINQ to DataSet](../../../../../docs/framework/data/adonet/linq-to-dataset.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-164">For more information, see [LINQ to DataSet](../../../../../docs/framework/data/adonet/linq-to-dataset.md).</span></span>  
  
## <a name="considerations-for-applications-that-bind-data-to-controls"></a><span data-ttu-id="63ff0-165">有关将数据绑定到控件的应用程序的注意事项</span><span class="sxs-lookup"><span data-stu-id="63ff0-165">Considerations for Applications that Bind Data to Controls</span></span>  
 <span data-ttu-id="63ff0-166">.NET Framework 使您可以如包装在数据源的数据，数据集或[!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)]数据源控件，，然后将用户界面元素绑定到这些数据控件。</span><span class="sxs-lookup"><span data-stu-id="63ff0-166">The .NET Framework lets you encapsulate data in a data source, such as a DataSet or an [!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)] data source control, and then bind user interface elements to those data controls.</span></span> <span data-ttu-id="63ff0-167">下表介绍将控件绑定到实体框架数据时的注意事项。</span><span class="sxs-lookup"><span data-stu-id="63ff0-167">The following list describes considerations for binding controls to Entity Framework data.</span></span>  
  
- <span data-ttu-id="63ff0-168">将数据绑定到控件。</span><span class="sxs-lookup"><span data-stu-id="63ff0-168">Binding data to controls.</span></span>  

  <span data-ttu-id="63ff0-169">查询概念模型时[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]作为对象的实体类型实例的形式返回的数据。</span><span class="sxs-lookup"><span data-stu-id="63ff0-169">When you query the conceptual model, the [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] returns the data as objects that are instances of entity types.</span></span> <span data-ttu-id="63ff0-170">这些对象可以直接绑定到控件，以及此绑定支持更新。</span><span class="sxs-lookup"><span data-stu-id="63ff0-170">These objects can be bound directly to controls, and this binding supports updates.</span></span> <span data-ttu-id="63ff0-171">这意味着，将更改为一个控件，例如中的行中的数据<xref:System.Windows.Forms.DataGridView>，则自动保存到数据库时<xref:System.Data.Objects.ObjectContext.SaveChanges%2A>调用方法。</span><span class="sxs-lookup"><span data-stu-id="63ff0-171">This means that changes to data in a control, such as a row in a <xref:System.Windows.Forms.DataGridView>, automatically get saved to the database when the <xref:System.Data.Objects.ObjectContext.SaveChanges%2A> method is called.</span></span>  
  
  <span data-ttu-id="63ff0-172">如果应用程序对查询结果进行枚举，以在 <xref:System.Windows.Forms.DataGridView> 或支持数据绑定的其他类型的控件中显示数据，则可以修改应用程序以将该控件绑定到 <xref:System.Data.Objects.ObjectQuery%601> 的结果。</span><span class="sxs-lookup"><span data-stu-id="63ff0-172">If your application enumerates the results of a query to display data in a <xref:System.Windows.Forms.DataGridView> or other type of control that supports data binding, you can modify your application to bind the control to the result of an <xref:System.Data.Objects.ObjectQuery%601>.</span></span>  
  
  <span data-ttu-id="63ff0-173">有关详细信息，请参阅[对象绑定到控件](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738469(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-173">For more information, see [Binding Objects to Controls](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738469(v=vs.100)).</span></span>  
  
- [!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)] <span data-ttu-id="63ff0-174">数据源控件。</span><span class="sxs-lookup"><span data-stu-id="63ff0-174">data source controls.</span></span>  

  <span data-ttu-id="63ff0-175">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]包括用于简化数据绑定中的数据源控件[!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)]Web 应用程序。</span><span class="sxs-lookup"><span data-stu-id="63ff0-175">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] includes a data source control designed to simplify data binding in [!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)] Web applications.</span></span> <span data-ttu-id="63ff0-176">有关详细信息，请参阅[EntityDataSource Web 服务器控件概述](https://docs.microsoft.com/previous-versions/aspnet/cc488502(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-176">For more information, see [EntityDataSource Web Server Control Overview](https://docs.microsoft.com/previous-versions/aspnet/cc488502(v=vs.100)).</span></span>  
  
## <a name="other-considerations"></a><span data-ttu-id="63ff0-177">其他注意事项</span><span class="sxs-lookup"><span data-stu-id="63ff0-177">Other Considerations</span></span>  
 <span data-ttu-id="63ff0-178">以下是在将特定类型的应用程序迁移到实体框架时可能需要考虑的一些注意事项。</span><span class="sxs-lookup"><span data-stu-id="63ff0-178">The following are considerations that may apply when you migrate specific types of applications to the Entity Framework.</span></span>  
  
- <span data-ttu-id="63ff0-179">公开数据服务的应用程序。</span><span class="sxs-lookup"><span data-stu-id="63ff0-179">Applications that expose data services.</span></span>  

  <span data-ttu-id="63ff0-180">基于 Windows Communication Foundation (WCF) 的 Web 服务和应用程序使用 XML 请求/响应消息格式公开基础数据源中的数据。</span><span class="sxs-lookup"><span data-stu-id="63ff0-180">Web services and applications that are based on the Windows Communication Foundation (WCF) expose data from an underlying data source by using an XML request/response messaging format.</span></span> <span data-ttu-id="63ff0-181">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]使用二进制、XML 或 WCF 数据约定序列化支持实体对象的序列化。</span><span class="sxs-lookup"><span data-stu-id="63ff0-181">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] supports the serialization of entity objects by using binary, XML, or WCF data contract serialization.</span></span> <span data-ttu-id="63ff0-182">二进制和 WCF 序列化都支持对象图的整体序列化。</span><span class="sxs-lookup"><span data-stu-id="63ff0-182">Binary and WCF serialization both support full serialization of object graphs.</span></span> <span data-ttu-id="63ff0-183">有关详细信息，请参阅[生成 N 层应用程序](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896304(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-183">For more information, see [Building N-Tier Applications](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896304(v=vs.100)).</span></span>  
  
- <span data-ttu-id="63ff0-184">使用 XML 数据的应用程序。</span><span class="sxs-lookup"><span data-stu-id="63ff0-184">Applications that use XML data.</span></span>  

  <span data-ttu-id="63ff0-185">通过对象序列化可以创建[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]数据服务。</span><span class="sxs-lookup"><span data-stu-id="63ff0-185">Object serialization enables you to create [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] data services.</span></span> <span data-ttu-id="63ff0-186">这些服务为使用 XML 数据的应用程序（如基于 AJAX 的 Internet 应用程序）提供数据。</span><span class="sxs-lookup"><span data-stu-id="63ff0-186">These services provide data to applications that consume XML data, such as AJAX-based Internet applications.</span></span> <span data-ttu-id="63ff0-187">在这类情况下，请考虑使用 [!INCLUDE[ssAstoria](../../../../../includes/ssastoria-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="63ff0-187">In these cases, consider using [!INCLUDE[ssAstoria](../../../../../includes/ssastoria-md.md)].</span></span> <span data-ttu-id="63ff0-188">这些数据服务基于实体数据模型和通过使用标准具象状态传输 (REST) HTTP 操作提供对实体数据的动态访问、 如 GET、 PUT 和 POST。</span><span class="sxs-lookup"><span data-stu-id="63ff0-188">These data services are based on the Entity Data Model and provide dynamic access to entity data by using standard Representational State Transfer (REST) HTTP actions, such as GET, PUT, and POST.</span></span> <span data-ttu-id="63ff0-189">有关详细信息，请参阅 [WCF Data Services 4.5](../../../../../docs/framework/data/wcf/index.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-189">For more information, see [WCF Data Services 4.5](../../../../../docs/framework/data/wcf/index.md).</span></span>  
  
  <span data-ttu-id="63ff0-190">[!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)]不支持本机 XML 数据类型。</span><span class="sxs-lookup"><span data-stu-id="63ff0-190">The [!INCLUDE[adonet_ef](../../../../../includes/adonet-ef-md.md)] does not support a native-XML data type.</span></span> <span data-ttu-id="63ff0-191">这意味着在将实体映射到包含 XML 列的表时，该 XML 列的等效实体属性是一个字符串。</span><span class="sxs-lookup"><span data-stu-id="63ff0-191">This means that when an entity is mapped to a table with an XML column, the equivalent entity property for the XML column is a string.</span></span> <span data-ttu-id="63ff0-192">对象可以断开连接，并序列化为 XML。</span><span class="sxs-lookup"><span data-stu-id="63ff0-192">Objects can be disconnected and serialized as XML.</span></span> <span data-ttu-id="63ff0-193">有关详细信息，请参阅[序列化对象](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738446(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-193">For more information, see [Serializing Objects](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb738446(v=vs.100)).</span></span>  
  
  <span data-ttu-id="63ff0-194">如果应用程序需要查询 XML 数据，则仍然可以通过使用 LINQ to XML 来利用 LINQ 查询的优点。</span><span class="sxs-lookup"><span data-stu-id="63ff0-194">If your application requires the ability to query XML data, you can still take advantage of the benefits of LINQ queries by using LINQ to XML.</span></span> <span data-ttu-id="63ff0-195">有关详细信息，请参阅[LINQ to XML (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-xml.md)或[LINQ to XML (Visual Basic)](../../../../visual-basic/programming-guide/concepts/linq/linq-to-xml.md)。</span><span class="sxs-lookup"><span data-stu-id="63ff0-195">For more information, see [LINQ to XML (C#)](../../../../csharp/programming-guide/concepts/linq/linq-to-xml.md) or [LINQ to XML (Visual Basic)](../../../../visual-basic/programming-guide/concepts/linq/linq-to-xml.md).</span></span>  
  
- <span data-ttu-id="63ff0-196">维护状态的应用程序。</span><span class="sxs-lookup"><span data-stu-id="63ff0-196">Applications that maintain state.</span></span>  

  [!INCLUDE[vstecasp](../../../../../includes/vstecasp-md.md)] <span data-ttu-id="63ff0-197">Web 应用程序需要经常维护网页或用户会话的状态。</span><span class="sxs-lookup"><span data-stu-id="63ff0-197">Web applications must frequently maintain the state of a Web page or of a user session.</span></span> <span data-ttu-id="63ff0-198">中的对象<xref:System.Data.Objects.ObjectContext>可以存储在客户端视图状态或在服务器上的会话状态中实例，和更高版本能检索和重新附加到新的对象上下文。</span><span class="sxs-lookup"><span data-stu-id="63ff0-198">Objects in an <xref:System.Data.Objects.ObjectContext> instance can be stored in the client view state or in the session state on the server, and later retrieved and reattached to a new object context.</span></span> <span data-ttu-id="63ff0-199">有关详细信息，请参阅[附加和分离对象](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896271(v=vs.100))。</span><span class="sxs-lookup"><span data-stu-id="63ff0-199">For more information, see [Attaching and Detaching Objects](https://docs.microsoft.com/previous-versions/dotnet/netframework-4.0/bb896271(v=vs.100)).</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="63ff0-200">请参阅</span><span class="sxs-lookup"><span data-stu-id="63ff0-200">See also</span></span>

- [<span data-ttu-id="63ff0-201">部署注意事项</span><span class="sxs-lookup"><span data-stu-id="63ff0-201">Deployment Considerations</span></span>](../../../../../docs/framework/data/adonet/ef/deployment-considerations.md)
- [<span data-ttu-id="63ff0-202">实体框架术语</span><span class="sxs-lookup"><span data-stu-id="63ff0-202">Entity Framework Terminology</span></span>](../../../../../docs/framework/data/adonet/ef/terminology.md)
