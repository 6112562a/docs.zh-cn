---
title: 部署承载于 Internet 信息服务中的 WCF 服务
ms.date: 03/30/2017
ms.assetid: 04ebd329-3fbd-44c3-b3ab-1de3517e27d7
ms.openlocfilehash: fcfad4c6cd7ffb0bf1233bab842b57a10bcc7f87
ms.sourcegitcommit: 2d42b7ae4252cfe1232777f501ea9ac97df31b63
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/01/2019
ms.locfileid: "67486917"
---
# <a name="deploying-an-internet-information-services-hosted-wcf-service"></a><span data-ttu-id="7dd64-102">部署承载于 Internet 信息服务中的 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="7dd64-102">Deploying an Internet Information Services-Hosted WCF Service</span></span>

<span data-ttu-id="7dd64-103">开发和部署托管在 Internet 信息服务 (IIS) 的 Windows Communication Foundation (WCF) 服务包括以下任务：</span><span class="sxs-lookup"><span data-stu-id="7dd64-103">Developing and deploying a Windows Communication Foundation (WCF) service that is hosted in Internet Information Services (IIS) consists of the following tasks:</span></span>

- <span data-ttu-id="7dd64-104">请确保，IIS、 ASP.NET、 WCF 和 WCF 激活组件正确安装和注册。</span><span class="sxs-lookup"><span data-stu-id="7dd64-104">Ensure that IIS, ASP.NET, WCF, and the WCF activation component are correctly installed and registered.</span></span>

- <span data-ttu-id="7dd64-105">创建新的 IIS 应用程序，或重新使用现有的 ASP.NET 应用程序。</span><span class="sxs-lookup"><span data-stu-id="7dd64-105">Create a new IIS application, or reuse an existing ASP.NET application.</span></span>

- <span data-ttu-id="7dd64-106">创建 WCF 服务的.svc 文件。</span><span class="sxs-lookup"><span data-stu-id="7dd64-106">Create a .svc file for the WCF service.</span></span>

- <span data-ttu-id="7dd64-107">将服务实现部署到 IIS 应用程序。</span><span class="sxs-lookup"><span data-stu-id="7dd64-107">Deploy the service implementation to the IIS application.</span></span>

- <span data-ttu-id="7dd64-108">配置 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="7dd64-108">Configure the WCF service.</span></span>

<span data-ttu-id="7dd64-109">创建 IIS 承载的 WCF 服务的详细演练，请参阅[如何：承载在 IIS 中的 WCF 服务](how-to-host-a-wcf-service-in-iis.md)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-109">For a detailed walkthrough of creating an IIS-hosted WCF service, see [How to: Host a WCF Service in IIS](how-to-host-a-wcf-service-in-iis.md).</span></span>

## <a name="ensure-that-iis-aspnet-and-wcf-are-correctly-installed-and-registered"></a><span data-ttu-id="7dd64-110">确保已正确安装和注册 IIS、ASP.NET 和 WCF</span><span class="sxs-lookup"><span data-stu-id="7dd64-110">Ensure That IIS, ASP.NET and WCF Are Correctly Installed and Registered</span></span>

<span data-ttu-id="7dd64-111">为 IIS 承载的 WCF 服务才能正常工作，必须安装 WCF、 IIS 和 ASP.NET。</span><span class="sxs-lookup"><span data-stu-id="7dd64-111">WCF, IIS, and ASP.NET must be installed for IIS-hosted WCF services to function correctly.</span></span> <span data-ttu-id="7dd64-112">安装 （作为.NET Framework 的一部分） 的 WCF、 ASP.NET 和 IIS 的过程有所不同，具体取决于你的操作系统。</span><span class="sxs-lookup"><span data-stu-id="7dd64-112">The procedures for installing WCF (as part of the .NET Framework), ASP.NET, and IIS vary depending on your operating system.</span></span> <span data-ttu-id="7dd64-113">有关安装 WCF 和.NET Framework 的详细信息，请参阅[安装面向开发人员的.NET Framework](../../install/guide-for-developers.md)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-113">For more information about installing WCF and the .NET Framework, see [Install the .NET Framework for developers](../../install/guide-for-developers.md).</span></span> <span data-ttu-id="7dd64-114">若要在 Windows 10 上安装 IIS，请打开**程序和功能**中**控制面板**，然后选择**打开或关闭打开的 Windows 功能**。</span><span class="sxs-lookup"><span data-stu-id="7dd64-114">To install IIS on Windows 10, open **Programs and Features** in **Control Panel** and then select **Turn Windows features on or off**.</span></span> <span data-ttu-id="7dd64-115">在中**Windows 功能**，选择**Internet Information Services** ，然后选择**确定**。</span><span class="sxs-lookup"><span data-stu-id="7dd64-115">In **Windows Features**, select **Internet Information Services** and then choose **OK**.</span></span>

![使用 IIS 突出显示的 Windows 功能](media/windows-features-iis.png)

<span data-ttu-id="7dd64-117">其他操作系统上安装 IIS 的说明可从[Windows Vista 和 Windows 7 上安装 IIS](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7)并[Windows Server 2012 R2 上安装 IIS 8.5](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-117">Instructions for installing IIS on other operating systems can be found at [Install IIS on Windows Vista and Windows 7](/iis/install/installing-iis-7/installing-iis-on-windows-vista-and-windows-7) and [Install IIS 8.5 on Windows Server 2012 R2](/iis/install/installing-iis-85/installing-iis-85-on-windows-server-2012-r2).</span></span>

<span data-ttu-id="7dd64-118">.NET Framework 的安装过程会自动注册 WCF 与 IIS 如果已在计算机上安装 IIS 的情况。</span><span class="sxs-lookup"><span data-stu-id="7dd64-118">The installation process for .NET Framework automatically registers WCF with IIS if IIS is already present on the machine.</span></span> <span data-ttu-id="7dd64-119">如果在.NET Framework 之后安装 IIS，则需要一个额外的步骤以将注册 IIS 和 ASP.NET 的 WCF。</span><span class="sxs-lookup"><span data-stu-id="7dd64-119">If IIS is installed after the .NET Framework, an additional step is required to register WCF with IIS and ASP.NET.</span></span> <span data-ttu-id="7dd64-120">根据您的操作系统，可以按如下所述执行此操作：</span><span class="sxs-lookup"><span data-stu-id="7dd64-120">You can do this as follows, depending on your operating system:</span></span>

- <span data-ttu-id="7dd64-121">Windows 7 和 Windows Server 2003:使用[ServiceModel 注册工具 (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md)工具向 IIS 注册 WCF。</span><span class="sxs-lookup"><span data-stu-id="7dd64-121">Windows 7 and Windows Server 2003: Use the [ServiceModel Registration Tool (ServiceModelReg.exe)](../../../../docs/framework/wcf/servicemodelreg-exe.md) tool to register WCF with IIS.</span></span> <span data-ttu-id="7dd64-122">若要使用此工具，请键入**ServiceModelReg.exe /i /x**中[Visual Studio 的开发人员命令提示](../../tools/developer-command-prompt-for-vs.md)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-122">To use this tool, type **ServiceModelReg.exe /i /x** in the [Developer Command Prompt for Visual Studio](../../tools/developer-command-prompt-for-vs.md).</span></span>

- <span data-ttu-id="7dd64-123">Windows 7：最后，必须验证 ASP.NET 配置为使用.NET Framework 4 或更高版本。</span><span class="sxs-lookup"><span data-stu-id="7dd64-123">Windows 7: Finally, you must verify that ASP.NET is configured to use the .NET Framework version 4 or later.</span></span> <span data-ttu-id="7dd64-124">为此，可运行的 ASPNET_Regiis 工具`–i`选项。</span><span class="sxs-lookup"><span data-stu-id="7dd64-124">You do this by running the ASPNET_Regiis tool with the `–i` option.</span></span> <span data-ttu-id="7dd64-125">有关详细信息，请参阅[ASP.NET IIS 注册工具](https://go.microsoft.com/fwlink/?LinkId=201186)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-125">For more information, see [ASP.NET IIS Registration Tool](https://go.microsoft.com/fwlink/?LinkId=201186).</span></span>

## <a name="create-a-new-iis-application-or-reuse-an-existing-aspnet-application"></a><span data-ttu-id="7dd64-126">创建新的 IIS 应用程序或重新使用现有的 ASP.NET 应用程序</span><span class="sxs-lookup"><span data-stu-id="7dd64-126">Create a New IIS Application or Reuse an Existing ASP.NET Application</span></span>

<span data-ttu-id="7dd64-127">IIS 承载的 WCF 服务必须驻留在 IIS 应用程序内。</span><span class="sxs-lookup"><span data-stu-id="7dd64-127">IIS-hosted WCF services must reside inside of an IIS application.</span></span> <span data-ttu-id="7dd64-128">可以以独占方式创建新的 IIS 应用程序承载 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="7dd64-128">You can create a new IIS application to host WCF services exclusively.</span></span> <span data-ttu-id="7dd64-129">或者，可以将 WCF 服务部署到现有应用程序已经承载 ASP.NET 2.0 内容 （如.aspx 页和 ASP.NET Web 服务 [ASMX]）。</span><span class="sxs-lookup"><span data-stu-id="7dd64-129">Alternatively, you can deploy an WCF service into an existing application that is already hosting ASP.NET 2.0 content (such as .aspx pages and ASP.NET Web services [ASMX]).</span></span> <span data-ttu-id="7dd64-130">有关这些选项的详细信息，请参阅"托管 WCF 的并排方案使用 ASP.NET"和"在 ASP.NET 兼容模式下承载 WCF 服务"部分中[WCF 服务和 ASP.NET](wcf-services-and-aspnet.md)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-130">For more information about these options, see the "Hosting WCF Side-by-Side with ASP.NET" and "Hosting WCF Services in ASP.NET Compatibility Mode" sections in [WCF Services and ASP.NET](wcf-services-and-aspnet.md).</span></span>

<span data-ttu-id="7dd64-131">请注意，IIS 6.0 和更高版本定期重新启动独立的面向对象的编程应用程序。</span><span class="sxs-lookup"><span data-stu-id="7dd64-131">Note that IIS 6.0 and later versions periodically restart an isolated object-oriented programming application.</span></span> <span data-ttu-id="7dd64-132">默认值为 1740 分钟。</span><span class="sxs-lookup"><span data-stu-id="7dd64-132">The default value is 1740 minutes.</span></span> <span data-ttu-id="7dd64-133">支持的最大值为 71,582 分钟。</span><span class="sxs-lookup"><span data-stu-id="7dd64-133">The maximum value supported is 71,582 minutes.</span></span> <span data-ttu-id="7dd64-134">可以禁用此重新启动。</span><span class="sxs-lookup"><span data-stu-id="7dd64-134">This restart can be disabled.</span></span> <span data-ttu-id="7dd64-135">有关此属性的详细信息，请参阅[PeriodicRestartTime](https://go.microsoft.com/fwlink/?LinkId=109968)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-135">For more information about this property, see the [PeriodicRestartTime](https://go.microsoft.com/fwlink/?LinkId=109968).</span></span>

## <a name="create-an-svc-file-for-the-wcf-service"></a><span data-ttu-id="7dd64-136">为 WCF 服务创建 .svc 文件</span><span class="sxs-lookup"><span data-stu-id="7dd64-136">Create an .svc File for the WCF Service</span></span>

<span data-ttu-id="7dd64-137">在 IIS 中承载的 WCF 服务表示为 IIS 应用程序内的特殊内容文件 （.svc 文件）。</span><span class="sxs-lookup"><span data-stu-id="7dd64-137">WCF services hosted in IIS are represented as special content files (.svc files) inside the IIS application.</span></span> <span data-ttu-id="7dd64-138">此模型与在 IIS 应用程序内将 ASMX 页表示为 .asmx 文件的方式类似。</span><span class="sxs-lookup"><span data-stu-id="7dd64-138">This model is similar to the way ASMX pages are represented inside of an IIS application as .asmx files.</span></span> <span data-ttu-id="7dd64-139">.Svc 文件包含特定于 WCF 的处理指令 ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) 允许 WCF 托管基础结构激活响应传入消息中的托管的服务。</span><span class="sxs-lookup"><span data-stu-id="7dd64-139">A .svc file contains a WCF-specific processing directive ([\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)) that allows the WCF hosting infrastructure to activate hosted services in response to incoming messages.</span></span> <span data-ttu-id="7dd64-140">.svc 文件的最常见语法如以下语句所示。</span><span class="sxs-lookup"><span data-stu-id="7dd64-140">The most common syntax for a .svc file is in the following statement.</span></span>

```
<% @ServiceHost Service="MyNamespace.MyServiceImplementationTypeName" %>
```

<span data-ttu-id="7dd64-141">它包含[ \@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)指令和单个属性`Service`。</span><span class="sxs-lookup"><span data-stu-id="7dd64-141">It consists of the [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md) directive and a single attribute, `Service`.</span></span> <span data-ttu-id="7dd64-142">`Service` 属性的值是服务实现的公共语言运行库 (CLR) 类型名称。</span><span class="sxs-lookup"><span data-stu-id="7dd64-142">The value of the `Service` attribute is the common language runtime (CLR) type name of the service implementation.</span></span> <span data-ttu-id="7dd64-143">使用此指令与使用以下代码创建服务主机基本等效。</span><span class="sxs-lookup"><span data-stu-id="7dd64-143">Using this directive is basically equivalent to creating a service host using the following code.</span></span>

```csharp
new ServiceHost( typeof( MyNamespace.MyServiceImplementationTypeName ) );
```

<span data-ttu-id="7dd64-144">也可以执行其他承载配置，如创建服务的基址列表。</span><span class="sxs-lookup"><span data-stu-id="7dd64-144">Additional hosting configuration, such as creating a list of base addresses for the service can also be done.</span></span> <span data-ttu-id="7dd64-145">也可以使用自定义 <xref:System.ServiceModel.Activation.ServiceHostFactory> 扩展指令以用于自定义承载解决方案。</span><span class="sxs-lookup"><span data-stu-id="7dd64-145">You can also use a custom <xref:System.ServiceModel.Activation.ServiceHostFactory> to extend the directive for use with custom hosting solutions.</span></span> <span data-ttu-id="7dd64-146">承载 WCF 服务的 IIS 应用程序不负责创建和生存期管理<xref:System.ServiceModel.ServiceHost>实例。</span><span class="sxs-lookup"><span data-stu-id="7dd64-146">The IIS applications that host WCF services are not responsible for managing the creation and lifetime of <xref:System.ServiceModel.ServiceHost> instances.</span></span> <span data-ttu-id="7dd64-147">托管的 WCF 托管基础结构会创建所需<xref:System.ServiceModel.ServiceHost>第一个请求收到.svc 文件时动态实例。</span><span class="sxs-lookup"><span data-stu-id="7dd64-147">The managed WCF hosting infrastructure creates the necessary <xref:System.ServiceModel.ServiceHost> instance dynamically when the first request is received for the .svc file.</span></span> <span data-ttu-id="7dd64-148">在代码显式关闭该实例之前或回收应用程序时，不释放该实例。</span><span class="sxs-lookup"><span data-stu-id="7dd64-148">The instance is not released until either it is closed explicitly by code or when the application is recycled.</span></span>

<span data-ttu-id="7dd64-149">有关.svc 文件语法的详细信息，请参阅[ \@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-149">For more information about the syntax for .svc files, see [\@ServiceHost](../../../../docs/framework/configure-apps/file-schema/wcf-directive/servicehost.md).</span></span>

## <a name="deploy-the-service-implementation-to-the-iis-application"></a><span data-ttu-id="7dd64-150">将服务实现部署到 IIS 应用程序</span><span class="sxs-lookup"><span data-stu-id="7dd64-150">Deploy the Service Implementation to the IIS Application</span></span>

<span data-ttu-id="7dd64-151">在 IIS 中承载的 WCF 服务使用相同的动态编译模型作为 ASP.NET 2.0。</span><span class="sxs-lookup"><span data-stu-id="7dd64-151">WCF services hosted in IIS use the same dynamic compilation model as ASP.NET 2.0.</span></span> <span data-ttu-id="7dd64-152">就像使用 ASP.NET 中，可以按如下所示部署在不同地区的几种方法中的 IIS 承载的 WCF 服务的实现代码：</span><span class="sxs-lookup"><span data-stu-id="7dd64-152">Just as with ASP.NET, you can deploy the implementation code for IIS-hosted WCF services in several ways at various locations, as follows:</span></span>

- <span data-ttu-id="7dd64-153">作为全局程序集缓存 (GAC) 或应用程序的 \bin 目录中的预编译 .dll 文件。</span><span class="sxs-lookup"><span data-stu-id="7dd64-153">As a precompiled .dll file located in the global assembly cache (GAC) or in the application’s \bin directory.</span></span> <span data-ttu-id="7dd64-154">在部署类库的新版本后，才更新预编译的二进制文件。</span><span class="sxs-lookup"><span data-stu-id="7dd64-154">Precompiled binaries are not updated until a new version of the class library is deployed.</span></span>

- <span data-ttu-id="7dd64-155">如未编译的源文件位于应用程序的 \App_Code 目录中。</span><span class="sxs-lookup"><span data-stu-id="7dd64-155">As uncompiled source files located in the application’s \App_Code directory.</span></span> <span data-ttu-id="7dd64-156">处理应用程序的第一个请求时，动态需要位于此目录中的源文件。</span><span class="sxs-lookup"><span data-stu-id="7dd64-156">Source files located in this directory are dynamically required when processing the application’s first request.</span></span> <span data-ttu-id="7dd64-157">对 \App_Code 目录中文件进行的任何更改都导致在收到下一个请求时回收和重新编译整个应用程序。</span><span class="sxs-lookup"><span data-stu-id="7dd64-157">Any changes to files in the \App_Code directory cause the entire application to be recycled and recompiled when the next request is received.</span></span>

- <span data-ttu-id="7dd64-158">如未编译的代码直接放在.svc 文件。</span><span class="sxs-lookup"><span data-stu-id="7dd64-158">As uncompiled code placed directly in the .svc file.</span></span> <span data-ttu-id="7dd64-159">实现代码也可以按内联方式位于的服务的.svc 文件之后, \@ServiceHost 指令。</span><span class="sxs-lookup"><span data-stu-id="7dd64-159">Implementation code can also be located inline in the service’s .svc file, after the \@ServiceHost directive.</span></span> <span data-ttu-id="7dd64-160">对内联代码进行的任何更改导致在收到下一个请求时回收和重新编译应用程序。</span><span class="sxs-lookup"><span data-stu-id="7dd64-160">Any changes to inline code cause the application to be recycled and recompiled when the next request is received.</span></span>

<span data-ttu-id="7dd64-161">有关 ASP.NET 2.0 编译模式的详细信息，请参阅[ASP.NET 编译概述](https://go.microsoft.com/fwlink/?LinkId=94773)。</span><span class="sxs-lookup"><span data-stu-id="7dd64-161">For more information about the ASP.NET 2.0 compilation model, see [ASP.NET Compilation Overview](https://go.microsoft.com/fwlink/?LinkId=94773).</span></span>

## <a name="configure-the-wcf-service"></a><span data-ttu-id="7dd64-162">配置 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="7dd64-162">Configure the WCF Service</span></span>

<span data-ttu-id="7dd64-163">IIS 承载的 WCF 服务应用程序 Web.config 文件中存储其配置。</span><span class="sxs-lookup"><span data-stu-id="7dd64-163">IIS-hosted WCF services store their configuration in the applications Web.config file.</span></span> <span data-ttu-id="7dd64-164">IIS 承载的服务作为 IIS 外部承载的 WCF 服务使用相同的配置元素和语法。</span><span class="sxs-lookup"><span data-stu-id="7dd64-164">IIS-hosted services use the same configuration elements and syntax as WCF services hosted outside of IIS.</span></span> <span data-ttu-id="7dd64-165">但是，下面的约束对 IIS 承载环境是唯一的：</span><span class="sxs-lookup"><span data-stu-id="7dd64-165">However, the following constraints are unique to the IIS hosting environment:</span></span>

- <span data-ttu-id="7dd64-166">承载于 IIS 中的服务的基址。</span><span class="sxs-lookup"><span data-stu-id="7dd64-166">Base addresses for IIS-hosted services.</span></span>

- <span data-ttu-id="7dd64-167">应用程序 IIS 外部承载的 WCF 服务可以控制通过传递一组基本的服务的基址址到 Uri<xref:System.ServiceModel.ServiceHost>构造函数或通过提供[\<主机 >](../../../../docs/framework/configure-apps/file-schema/wcf/host.md)中的元素服务的配置。</span><span class="sxs-lookup"><span data-stu-id="7dd64-167">Applications hosting WCF services outside of IIS can control the base address of the services they host by passing a set of base address URIs to the <xref:System.ServiceModel.ServiceHost> constructor or by providing a [\<host>](../../../../docs/framework/configure-apps/file-schema/wcf/host.md) element in the service’s configuration.</span></span> <span data-ttu-id="7dd64-168">承载于 IIS 中的服务无法控制其基址；承载于 IIS 中的服务的基址是其 .svc 文件的地址。</span><span class="sxs-lookup"><span data-stu-id="7dd64-168">Services hosted in IIS do not have the ability to control their base address; the base address of an IIS-hosted service is the address of its .svc file.</span></span>

### <a name="endpoint-addresses-for-iis-hosted-services"></a><span data-ttu-id="7dd64-169">承载于 IIS 中的服务的终结点地址</span><span class="sxs-lookup"><span data-stu-id="7dd64-169">Endpoint Addresses for IIS-Hosted Services</span></span>

<span data-ttu-id="7dd64-170">承载于 IIS 中时，任何终结点地址始终被认为相对于表示服务的 .svc 文件的地址。</span><span class="sxs-lookup"><span data-stu-id="7dd64-170">When hosted in IIS, endpoint addresses are always considered to be relative to the address of the .svc file that represents the service.</span></span> <span data-ttu-id="7dd64-171">例如，如果 WCF 服务的基址是`http://localhost/Application1/MyService.svc`使用以下终结点配置：</span><span class="sxs-lookup"><span data-stu-id="7dd64-171">For example, if the base address of a WCF service is `http://localhost/Application1/MyService.svc` with the following endpoint configuration:</span></span>

```xml
<endpoint address="anotherEndpoint" .../>
```

<span data-ttu-id="7dd64-172">这提供了可以到达的终结点`http://localhost/Application1/MyService.svc/anotherEndpoint`。</span><span class="sxs-lookup"><span data-stu-id="7dd64-172">This provides an endpoint that can be reached at `http://localhost/Application1/MyService.svc/anotherEndpoint`.</span></span>

<span data-ttu-id="7dd64-173">同样，使用空字符串，如提供可在终结点的相对地址的终结点配置元素`http://localhost/Application1/MyService.svc`，它是基址。</span><span class="sxs-lookup"><span data-stu-id="7dd64-173">Similarly, the endpoint configuration element that uses an empty string as the relative address provides an endpoint reachable at `http://localhost/Application1/MyService.svc`, which is the base address.</span></span>

```xml
<endpoint address="" ... />
```

<span data-ttu-id="7dd64-174">对于承载于 IIS 中的服务的终结点，必须始终使用相对终结点地址。</span><span class="sxs-lookup"><span data-stu-id="7dd64-174">You must always use relative endpoint addresses for IIS-hosted service endpoints.</span></span> <span data-ttu-id="7dd64-175">提供完全限定的终结点地址 (例如， `http://localhost/MyService.svc`) 终结点地址不指向承载公开终结点的服务的 IIS 的应用程序可能导致服务的部署中的错误。</span><span class="sxs-lookup"><span data-stu-id="7dd64-175">Supplying a fully-qualified endpoint address (for example, `http://localhost/MyService.svc`) can lead to errors in the deployment of the service if the endpoint address does not point to the IIS-application that hosts the service exposing the endpoint.</span></span> <span data-ttu-id="7dd64-176">对所承载的服务使用相对终结点地址避免了这些潜在冲突。</span><span class="sxs-lookup"><span data-stu-id="7dd64-176">Using relative endpoint addresses for hosted services avoids these potential conflicts.</span></span>

### <a name="available-transports"></a><span data-ttu-id="7dd64-177">可用传输</span><span class="sxs-lookup"><span data-stu-id="7dd64-177">Available Transports</span></span>

<span data-ttu-id="7dd64-178">WCF 服务承载于 IIS 5.1 和 IIS 6.0 被限制为使用基于 HTTP 的通信。</span><span class="sxs-lookup"><span data-stu-id="7dd64-178">WCF services hosted in IIS 5.1 and IIS 6.0 are restricted to using HTTP-based communication.</span></span> <span data-ttu-id="7dd64-179">在这些 IIS 平台上，将所承载的服务配置为使用非 HTTP 绑定会导致服务激活期间出错。</span><span class="sxs-lookup"><span data-stu-id="7dd64-179">On these IIS platforms, configuring a hosted service to use a non-HTTP binding results in an error during service activation.</span></span> <span data-ttu-id="7dd64-180">对于 IIS 7.0，支持的传输包括 HTTP、 Net.TCP、 Net.Pipe、 Net.MSMQ 和 msmq.formatname 的向后与现有 MSMQ 应用程序兼容性。</span><span class="sxs-lookup"><span data-stu-id="7dd64-180">For IIS 7.0, the supported transports include HTTP, Net.TCP, Net.Pipe, Net.MSMQ, and msmq.formatname for backwards compatibility with existing MSMQ applications.</span></span>

### <a name="http-transport-security"></a><span data-ttu-id="7dd64-181">HTTP 传输安全</span><span class="sxs-lookup"><span data-stu-id="7dd64-181">HTTP Transport Security</span></span>

<span data-ttu-id="7dd64-182">IIS 承载的 WCF 服务可以使用 HTTP 传输安全 （例如，HTTPS 和 HTTP 身份验证方案如基本、 摘要式和 Windows 集成身份验证），前提是包含该服务的 IIS 虚拟目录支持的那些设置。</span><span class="sxs-lookup"><span data-stu-id="7dd64-182">IIS-hosted WCF services can make use of HTTP transport security (for example, HTTPS and HTTP authentication schemes such as Basic, Digest, and Windows Integrated Authentication) as long as the IIS virtual directory that contains the service supports those settings.</span></span> <span data-ttu-id="7dd64-183">所承载终结点的绑定上的 HTTP 传输安全设置必须与包含它的 IIS 虚拟目录上的传输安全设置匹配。</span><span class="sxs-lookup"><span data-stu-id="7dd64-183">The HTTP Transport Security settings on a hosted endpoint’s binding must match the transport security settings on the IIS virtual directory that contains it.</span></span>

<span data-ttu-id="7dd64-184">例如，配置为使用 HTTP 摘要式身份验证的 WCF 终结点必须驻留在也配置为允许 HTTP 摘要式身份验证的 IIS 虚拟目录。</span><span class="sxs-lookup"><span data-stu-id="7dd64-184">For example, a WCF endpoint configured to use HTTP digest authentication must reside in an IIS virtual directory that is also configured to allow HTTP digest authentication.</span></span> <span data-ttu-id="7dd64-185">IIS 设置和 WCF 终结点设置不匹配的组合会在服务激活期间出错。</span><span class="sxs-lookup"><span data-stu-id="7dd64-185">Unmatched combinations of IIS settings and WCF endpoint settings result in an error during service activation.</span></span>

## <a name="see-also"></a><span data-ttu-id="7dd64-186">请参阅</span><span class="sxs-lookup"><span data-stu-id="7dd64-186">See also</span></span>

- [<span data-ttu-id="7dd64-187">在 Internet Information Services 中承载</span><span class="sxs-lookup"><span data-stu-id="7dd64-187">Hosting in Internet Information Services</span></span>](hosting-in-internet-information-services.md)
- [<span data-ttu-id="7dd64-188">Internet Information Services 承载最佳做法</span><span class="sxs-lookup"><span data-stu-id="7dd64-188">Internet Information Services Hosting Best Practices</span></span>](internet-information-services-hosting-best-practices.md)
- [<span data-ttu-id="7dd64-189">Windows Server App Fabric 承载功能</span><span class="sxs-lookup"><span data-stu-id="7dd64-189">Windows Server App Fabric Hosting Features</span></span>](https://go.microsoft.com/fwlink/?LinkId=201276)
