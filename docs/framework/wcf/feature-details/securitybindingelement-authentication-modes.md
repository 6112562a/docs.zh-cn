---
title: SecurityBindingElement 身份验证模式
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
ms.assetid: 12300bf4-c730-4405-9f65-d286f68b5a43
ms.openlocfilehash: b09b50d2db277d6aec325fb9305890f8e5be581c
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/23/2019
ms.locfileid: "54658895"
---
# <a name="securitybindingelement-authentication-modes"></a><span data-ttu-id="d1c3b-102">SecurityBindingElement 身份验证模式</span><span class="sxs-lookup"><span data-stu-id="d1c3b-102">SecurityBindingElement Authentication Modes</span></span>
<span data-ttu-id="d1c3b-103">Windows Communication Foundation (WCF) 提供了多个模式的客户端和服务互相进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-103">Windows Communication Foundation (WCF) provides several modes by which clients and services authenticate to one another.</span></span> <span data-ttu-id="d1c3b-104">你可以通过使用 <xref:System.ServiceModel.Channels.SecurityBindingElement> 类上的静态方法或通过配置为这些身份验证模式创建安全绑定元素。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-104">You can create security binding elements for these authentication modes by using static methods on the <xref:System.ServiceModel.Channels.SecurityBindingElement> class or through configuration.</span></span> <span data-ttu-id="d1c3b-105">本主题简要说明 18 种身份验证模式。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-105">This topic briefly describes the 18 authentication modes.</span></span>  
  
 <span data-ttu-id="d1c3b-106">有关使用该元素的一种身份验证模式的示例，请参阅[如何：为指定的身份验证模式创建 SecurityBindingElement](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-106">For an example of using the element for one of the authentication modes, see [How to: Create a SecurityBindingElement for a Specified Authentication Mode](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md).</span></span>  
  
## <a name="basic-configuration-programming"></a><span data-ttu-id="d1c3b-107">基本配置编程</span><span class="sxs-lookup"><span data-stu-id="d1c3b-107">Basic Configuration Programming</span></span>  
 <span data-ttu-id="d1c3b-108">下面的过程说明如何在配置文件中设置身份验证模式。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-108">The following procedure describes how to set the authentication mode in a configuration file.</span></span>  
  
#### <a name="to-set-the-authentication-mode-in-configuration"></a><span data-ttu-id="d1c3b-109">在配置中设置身份验证模式</span><span class="sxs-lookup"><span data-stu-id="d1c3b-109">To set the authentication mode in configuration</span></span>  
  
1.  <span data-ttu-id="d1c3b-110">向[\<绑定 >](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md)元素中，添加[ \<customBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md)。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-110">To the [\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element, add a [\<customBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/custombinding.md).</span></span>  
  
2.  <span data-ttu-id="d1c3b-111">作为子元素添加[\<绑定 >](../../../../docs/framework/misc/binding.md)元素`<customBinding>`元素。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-111">As a child element, add a [\<binding>](../../../../docs/framework/misc/binding.md) element to the `<customBinding>` element.</span></span>  
  
3.  <span data-ttu-id="d1c3b-112">向 `<security>` 元素中添加一个 `<binding>` 元素。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-112">Add a `<security>` element to the `<binding>` element.</span></span>  
  
4.  <span data-ttu-id="d1c3b-113">将 `authenticationMode` 属性设置为下述值之一。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-113">Set the `authenticationMode` attribute to one of the values described below.</span></span> <span data-ttu-id="d1c3b-114">例如，下面的代码将模式设置为 `AnonymousForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-114">For example, the following code sets the mode to `AnonymousForCertificate`.</span></span>  
  
    ```xml  
    <bindings>  
      <customBinding>  
        <binding name="SecureCustomBinding">  
         <security authenticationMode ="AnonymousForCertificate" />  
        </binding>  
      </customBinding>  
    </bindings>  
    ```  
  
#### <a name="to-set-the-mode-programmatically"></a><span data-ttu-id="d1c3b-115">以编程方式设置模式</span><span class="sxs-lookup"><span data-stu-id="d1c3b-115">To set the mode programmatically</span></span>  
  
1.  <span data-ttu-id="d1c3b-116">确定返回类型，可以是以下类型之一：<xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>、<xref:System.ServiceModel.Channels.TransportSecurityBindingElement>、<xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement> 或 <xref:System.ServiceModel.Channels.SecurityBindingElement>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-116">Determine the return type, which can be one of the following: <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement>, <xref:System.ServiceModel.Channels.TransportSecurityBindingElement>, <xref:System.ServiceModel.Channels.AsymmetricSecurityBindingElement>, or <xref:System.ServiceModel.Channels.SecurityBindingElement>.</span></span>  
  
2.  <span data-ttu-id="d1c3b-117">调用 <xref:System.ServiceModel.Channels.SecurityBindingElement> 类的适当静态方法。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-117">Call the appropriate static method of the <xref:System.ServiceModel.Channels.SecurityBindingElement> class.</span></span> <span data-ttu-id="d1c3b-118">例如，下面的代码调用 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A> 方法。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-118">For example, the following code calls the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A> method.</span></span>  
  
     [!code-csharp[c_CustomBindingsAuthMode#3](../../../../samples/snippets/csharp/VS_Snippets_CFX/c_custombindingsauthmode/cs/source.cs#3)]
     [!code-vb[c_CustomBindingsAuthMode#3](../../../../samples/snippets/visualbasic/VS_Snippets_CFX/c_custombindingsauthmode/vb/source.vb#3)]  
  
3.  <span data-ttu-id="d1c3b-119">使用绑定元素创建自定义绑定。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-119">Use the binding element to create the custom binding.</span></span> <span data-ttu-id="d1c3b-120">有关详细信息，请参阅[自定义绑定](../../../../docs/framework/wcf/extending/custom-bindings.md)。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-120">For more information, see [Custom Bindings](../../../../docs/framework/wcf/extending/custom-bindings.md).</span></span>  
  
## <a name="mode-descriptions"></a><span data-ttu-id="d1c3b-121">模式说明</span><span class="sxs-lookup"><span data-stu-id="d1c3b-121">Mode Descriptions</span></span>  
  
### <a name="anonymousforcertificate"></a><span data-ttu-id="d1c3b-122">AnonymousForCertificate</span><span class="sxs-lookup"><span data-stu-id="d1c3b-122">AnonymousForCertificate</span></span>  
 <span data-ttu-id="d1c3b-123">在此身份验证模式中，客户端是匿名的，因此使用 X.509 证书对服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-123">With this authentication mode, the client is anonymous and the service is authenticated using an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-124">安全绑定元素是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-124">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateAnonymousForCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-125">或者，设置`authenticationMode`属性的 <`security`> 元素`AnonymousForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-125">Alternatively, set the `authenticationMode` attribute of the <`security`> element to `AnonymousForCertificate`.</span></span>  
  
### <a name="anonymousforsslnegotiated"></a><span data-ttu-id="d1c3b-126">AnonymousForSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="d1c3b-126">AnonymousForSslNegotiated</span></span>  
 <span data-ttu-id="d1c3b-127">在此身份验证模式中，客户端是匿名的，因此使用在运行时进行协商的 X.509 证书对服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-127">With this authentication mode, the client is anonymous and the service is authenticated using an X.509 certificate that is negotiated at run time.</span></span> <span data-ttu-id="d1c3b-128">安全绑定元素是在为第一个参数传递 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 值时由 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> 方法返回的 `false`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-128">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> method when a value of `false` is passed for the first parameter.</span></span> <span data-ttu-id="d1c3b-129">或者，将 `authenticationMode` 属性设置为 `AnonymousForSslNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-129">Alternatively, set the `authenticationMode` attribute to `AnonymousForSslNegotiated`.</span></span>  
  
### <a name="certificateovertransport"></a><span data-ttu-id="d1c3b-130">CertificateOverTransport</span><span class="sxs-lookup"><span data-stu-id="d1c3b-130">CertificateOverTransport</span></span>  
 <span data-ttu-id="d1c3b-131">在此身份验证模式中，客户端使用 X.509 证书进行身份验证，此证书作为认可的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-131">With this authentication mode, the client authenticates using an X.509 certificate that appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-132">在传输层，服务是用 X.509 证书进行身份验证的。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-132">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="d1c3b-133">安全绑定元素是由 <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateCertificateOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-133">The security binding element is a <xref:System.ServiceModel.Channels.TransportSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateCertificateOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-134">或者，将 `authenticationMode` 属性设置为 `CertificateOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-134">Alternatively, set the `authenticationMode` attribute to `CertificateOverTransport`.</span></span>  
  
### <a name="issuedtoken"></a><span data-ttu-id="d1c3b-135">IssuedToken</span><span class="sxs-lookup"><span data-stu-id="d1c3b-135">IssuedToken</span></span>  
 <span data-ttu-id="d1c3b-136">在此身份验证模式中，客户端不向服务进行身份验证，而是向安全令牌服务进行身份验证并接收一个 SAML 令牌，然后将其提供给服务器，以证明它知道共享密钥。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-136">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="d1c3b-137">服务也不向客户端进行身份验证，但安全令牌服务会将共享密钥作为已颁发令牌的一部分进行加密，只有服务才能解密该密钥。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-137">The service is not authenticated to the client, as such, but the security token service encrypts the shared key as part of the issued token so that only the service can decrypt the key.</span></span> <span data-ttu-id="d1c3b-138">安全绑定元素是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-138">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-139">或者，将 `authenticationMode` 属性设置为 `IssuedToken`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-139">Alternatively, set the `authenticationMode` attribute to `IssuedToken`.</span></span>  
  
### <a name="issuedtokenforcertificate"></a><span data-ttu-id="d1c3b-140">IssuedTokenForCertificate</span><span class="sxs-lookup"><span data-stu-id="d1c3b-140">IssuedTokenForCertificate</span></span>  
 <span data-ttu-id="d1c3b-141">在此身份验证模式中，客户端不向服务进行身份验证，而是向安全令牌服务进行身份验证并接收一个 SAML 令牌，然后将其提供给服务器，以证明它知道共享密钥。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-141">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="d1c3b-142">颁发的令牌作为认可的支持令牌或持有者令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-142">The issued token appears at the SOAP layer as either an endorsing supporting token or a bearer token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-143">服务使用 X.509 证书对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-143">The service authenticates to the client using an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-144">安全绑定元素是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-144">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-145">或者，将 `authenticationMode` 属性设置为 `IssuedTokenForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-145">Alternatively, set the `authenticationMode` attribute to `IssuedTokenForCertificate`.</span></span>  
  
### <a name="issuedtokenforsslnegotiated"></a><span data-ttu-id="d1c3b-146">IssuedTokenForSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="d1c3b-146">IssuedTokenForSslNegotiated</span></span>  
 <span data-ttu-id="d1c3b-147">在此身份验证模式中，客户端不向服务进行身份验证，而是向安全令牌服务进行身份验证并接收一个 SAML 令牌，然后将其提供给服务器，以证明它知道共享密钥。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-147">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="d1c3b-148">颁发的令牌作为认可的支持令牌或持有者令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-148">The issued token appears at the SOAP layer as either an endorsing supporting token or a bearer token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-149">使用 X.509 证书对服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-149">The service is authenticated using an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-150">安全绑定元素是由 <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForSslBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-150">The security binding element is a <xref:System.ServiceModel.Channels.SymmetricSecurityBindingElement> returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenForSslBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-151">或者，将 `authenticationMode` 属性设置为 `IssuedTokenForSslnegotiated`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-151">Alternatively, set the `authenticationMode` attribute to `IssuedTokenForSslnegotiated`.</span></span>  
  
### <a name="issuedtokenovertransport"></a><span data-ttu-id="d1c3b-152">IssuedTokenOverTransport</span><span class="sxs-lookup"><span data-stu-id="d1c3b-152">IssuedTokenOverTransport</span></span>  
 <span data-ttu-id="d1c3b-153">在此身份验证模式中，客户端不向服务进行身份验证，而是向安全令牌服务进行身份验证并接收一个 SAML 令牌，然后将其提供给服务器，以证明它知道共享密钥。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-153">With this authentication mode, the client does not authenticate to the service, as such; instead, the client authenticates to a security token service and receives a SAML token, which it then presents to the server to prove its knowledge of a shared key.</span></span> <span data-ttu-id="d1c3b-154">颁发的令牌作为认可的支持令牌或持有者令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-154">The issued token appears at the SOAP layer as either an endorsing supporting token or a bearer token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-155">在传输层，服务是用 X.509 证书进行身份验证的。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-155">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="d1c3b-156">安全绑定元素是由 `TransportSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-156">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateIssuedTokenOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-157">或者，将 `authenticationMode` 属性设置为 `IssuedTokenOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-157">Alternatively, set the `authenticationMode` attribute to `IssuedTokenOverTransport`.</span></span>  
  
### <a name="kerberos"></a><span data-ttu-id="d1c3b-158">Kerberos</span><span class="sxs-lookup"><span data-stu-id="d1c3b-158">Kerberos</span></span>  
 <span data-ttu-id="d1c3b-159">在此身份验证模式下，客户端使用 Kerberos 票证向服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-159">With this authentication mode, the client authenticates to the service using a Kerberos ticket.</span></span> <span data-ttu-id="d1c3b-160">该票证还提供服务器身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-160">That same ticket also provides server authentication.</span></span> <span data-ttu-id="d1c3b-161">安全绑定元素是由 `SymmetricSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-161">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-162">或者，将 `authenticationMode` 属性设置为 `Kerberos`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-162">Alternatively, set the `authenticationMode` attribute to `Kerberos`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d1c3b-163">若要使用此身份验证模式，服务帐户必须与服务主体名称 (SPN) 关联。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-163">In order to use this authentication mode, the service account must be associated with a service principal name (SPN).</span></span> <span data-ttu-id="d1c3b-164">为此，请在 NETWORK SERVICE 帐户或 LOCAL SYSTEM 帐户下运行服务。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-164">To do this, run the service under the NETWORK SERVICE account or the LOCAL SYSTEM account.</span></span> <span data-ttu-id="d1c3b-165">也可以使用 SetSpn.exe 工具为服务帐户创建一个 SPN。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-165">Alternatively, use the SetSpn.exe tool to create an SPN for the service account.</span></span> <span data-ttu-id="d1c3b-166">在任一情况下，客户端必须使用在正确的 SPN [ \<servicePrincipalName >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md)元素，或使用<xref:System.ServiceModel.EndpointAddress>构造函数。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-166">In either case, the client must use the correct SPN in the [\<servicePrincipalName>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md) element, or by using the <xref:System.ServiceModel.EndpointAddress> constructor.</span></span> <span data-ttu-id="d1c3b-167">有关详细信息，请参阅[服务标识和身份验证](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-167">For more information, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d1c3b-168">当使用 `Kerberos` 身份验证模式时，不支持 <xref:System.Security.Principal.TokenImpersonationLevel.Anonymous> 和 <xref:System.Security.Principal.TokenImpersonationLevel.Delegation> 模拟级别。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-168">When the `Kerberos` authentication mode is used, the <xref:System.Security.Principal.TokenImpersonationLevel.Anonymous> and <xref:System.Security.Principal.TokenImpersonationLevel.Delegation> impersonation levels are not supported.</span></span>  
  
### <a name="kerberosovertransport"></a><span data-ttu-id="d1c3b-169">KerberosOverTransport</span><span class="sxs-lookup"><span data-stu-id="d1c3b-169">KerberosOverTransport</span></span>  
 <span data-ttu-id="d1c3b-170">在此身份验证模式下，客户端使用 Kerberos 票证向服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-170">With this authentication mode, the client authenticates to the service using a Kerberos ticket.</span></span> <span data-ttu-id="d1c3b-171">Kerberos 令牌作为认可的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-171">The Kerberos token appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-172">在传输层，服务是用 X.509 证书进行身份验证的。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-172">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="d1c3b-173">安全绑定元素是由 `TransportSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-173">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateKerberosOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-174">或者，将 `authenticationMode` 属性设置为 `KerberosOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-174">Alternatively, set the `authenticationMode` attribute to `KerberosOverTransport`.</span></span>  
  
> [!NOTE]
>  <span data-ttu-id="d1c3b-175">若要使用此身份验证模式，服务帐户必须与 SPN 关联。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-175">In order to use this authentication mode, the service account must be associated with an SPN.</span></span> <span data-ttu-id="d1c3b-176">为此，请在 NETWORK SERVICE 帐户或 LOCAL SYSTEM 帐户下运行服务。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-176">To do this, run the service under the NETWORK SERVICE account or the LOCAL SYSTEM account.</span></span> <span data-ttu-id="d1c3b-177">也可以使用 SetSpn.exe 工具为服务帐户创建一个 SPN。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-177">Alternatively, use the SetSpn.exe tool to create an SPN for the service account.</span></span> <span data-ttu-id="d1c3b-178">在任一情况下，客户端必须使用在正确的 SPN [ \<servicePrincipalName >](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md)元素，或使用<xref:System.ServiceModel.EndpointAddress>构造函数。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-178">In either case, the client must use the correct SPN in the [\<servicePrincipalName>](../../../../docs/framework/configure-apps/file-schema/wcf/serviceprincipalname.md) element, or by using the <xref:System.ServiceModel.EndpointAddress> constructor.</span></span> <span data-ttu-id="d1c3b-179">有关详细信息，请参阅[服务标识和身份验证](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md)。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-179">For more information, see [Service Identity and Authentication](../../../../docs/framework/wcf/feature-details/service-identity-and-authentication.md).</span></span>  
  
### <a name="mutualcertificate"></a><span data-ttu-id="d1c3b-180">MutualCertificate</span><span class="sxs-lookup"><span data-stu-id="d1c3b-180">MutualCertificate</span></span>  
 <span data-ttu-id="d1c3b-181">在此身份验证模式中，客户端使用 X.509 证书进行身份验证，此证书作为认可的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-181">With this authentication mode, the client authenticates using an X.509 certificate that appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-182">同样使用 X.509 证书对服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-182">The service is also authenticated using an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-183">安全绑定元素是由 `SymmetricSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-183">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-184">或者，将 `authenticationMode` 属性设置为 `MutualCertificate`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-184">Alternatively, set the `authenticationMode` attribute to `MutualCertificate`.</span></span>  
  
### <a name="mutualcertificateduplex"></a><span data-ttu-id="d1c3b-185">MutualCertificateDuplex</span><span class="sxs-lookup"><span data-stu-id="d1c3b-185">MutualCertificateDuplex</span></span>  
 <span data-ttu-id="d1c3b-186">在此身份验证模式中，客户端使用 X.509 证书进行身份验证，此证书作为认可的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-186">With this authentication mode, the client authenticates using an X.509 certificate that appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-187">同样使用 X.509 证书对服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-187">The service is also authenticated using an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-188">此绑定是由 `AsymmetricSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateDuplexBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-188">The binding is a `AsymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateMutualCertificateDuplexBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-189">或者，将 `authenticationMode` 属性设置为 `MutualCertificateDuplex`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-189">Alternatively, set the `authenticationMode` attribute to `MutualCertificateDuplex`.</span></span>  
  
### <a name="mutualsslnegotiated"></a><span data-ttu-id="d1c3b-190">MutualSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="d1c3b-190">MutualSslNegotiated</span></span>  
 <span data-ttu-id="d1c3b-191">在此身份验证模式中，客户端和服务都使用 X.509 证书进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-191">With this authentication mode, the client and the service authenticate using X.509 certificates.</span></span> <span data-ttu-id="d1c3b-192">安全绑定元素是在为第一个参数传递 `SymmetricSecurityBindingElement` 值时由 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> 方法返回的 `true`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-192">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSslNegotiationBindingElement%2A> method when a value of `true` is passed for the first parameter.</span></span> <span data-ttu-id="d1c3b-193">或者，将 `authenticationMode` 属性设置为 `MutualSslNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-193">Alternatively, set the `authenticationMode` attribute to `MutualSslNegotiated`.</span></span>  
  
### <a name="secureconversation"></a><span data-ttu-id="d1c3b-194">SecureConversation</span><span class="sxs-lookup"><span data-stu-id="d1c3b-194">SecureConversation</span></span>  
 <span data-ttu-id="d1c3b-195">安全绑定元素是由 `SymmetricSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-195">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSecureConversationBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-196">此方法将 <xref:System.ServiceModel.Channels.SecurityBindingElement> 作为一个参数，在初始化过程中使用该参数建立安全会话。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-196">This method takes a <xref:System.ServiceModel.Channels.SecurityBindingElement> as a parameter, which is used during initialization to establish the secure session.</span></span> <span data-ttu-id="d1c3b-197">或者，将 `authenticationMode` 属性设置为 `SecureConversation`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-197">Alternatively, set the `authenticationMode` attribute to `SecureConversation`.</span></span>  
  
 <span data-ttu-id="d1c3b-198">如果未指定启动绑定，则会对启动使用 `SspiNegotiated` 身份验证模式。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-198">If no bootstrap binding is specified, then the `SspiNegotiated` authentication mode is used for bootstrap.</span></span>  
  
### <a name="sspinegotiation"></a><span data-ttu-id="d1c3b-199">SspiNegotiation</span><span class="sxs-lookup"><span data-stu-id="d1c3b-199">SspiNegotiation</span></span>  
 <span data-ttu-id="d1c3b-200">在此身份验证模式中，使用协商协议来执行客户端和服务器身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-200">With this authentication mode, a negotiation protocol is used to perform client and server authentication.</span></span> <span data-ttu-id="d1c3b-201">可能时使用 Kerberos；否则使用 NT LanMan (NTLM)。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-201">Kerberos is used if possible; otherwise, NT LanMan (NTLM) is used.</span></span> <span data-ttu-id="d1c3b-202">安全绑定元素是由 `SymmetricSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-202">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-203">或者，将 `authenticationMode` 属性设置为 `SspiNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-203">Alternatively, set the `authenticationMode` attribute to `SspiNegotiated`.</span></span>  
  
### <a name="sspinegotiatedovertransport"></a><span data-ttu-id="d1c3b-204">SspiNegotiatedOverTransport</span><span class="sxs-lookup"><span data-stu-id="d1c3b-204">SspiNegotiatedOverTransport</span></span>  
 <span data-ttu-id="d1c3b-205">在此身份验证模式中，使用协商协议来执行客户端和服务器身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-205">With this authentication mode, a negotiation protocol is used to perform client and server authentication.</span></span> <span data-ttu-id="d1c3b-206">可能时使用 Kerberos 协议；否则使用 NTLM。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-206">Kerberos protocol is used if possible; otherwise, NTLM is used.</span></span> <span data-ttu-id="d1c3b-207">生成的令牌作为认可的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-207">The resulting token appears at the SOAP layer as an endorsing supporting token; that is, a token that signs the message signature.</span></span> <span data-ttu-id="d1c3b-208">在传输层，服务还是由 X.509 证书另外进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-208">The service is additionally authenticated at the transport layer by an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-209">安全绑定元素是由 `TransportSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-209">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateSspiNegotiationOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-210">或者，将 `authenticationMode` 属性设置为 `SspiNegotiatedOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-210">Alternatively, set the `authenticationMode` attribute to `SspiNegotiatedOverTransport`.</span></span>  
  
### <a name="usernameforcertificate"></a><span data-ttu-id="d1c3b-211">UserNameForCertificate</span><span class="sxs-lookup"><span data-stu-id="d1c3b-211">UserNameForCertificate</span></span>  
 <span data-ttu-id="d1c3b-212">在此身份验证模式中，客户端使用用户名令牌向服务进行身份验证，此证书作为经过签名的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-212">With this authentication mode, the client authenticates to the service using a Username Token that appears at the SOAP layer as a signed supporting token; that is, a token that is signed by the message signature.</span></span> <span data-ttu-id="d1c3b-213">服务使用 X.509 证书对客户端进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-213">The service authenticates to the client using an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-214">安全绑定元素是由 `SymmetricSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForCertificateBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-214">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForCertificateBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-215">或者，将 `authenticationMode` 属性设置为 `UserNameForCertificate`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-215">Alternatively, set the `authenticationMode` attribute to `UserNameForCertificate`.</span></span>  
  
 <span data-ttu-id="d1c3b-216">对于 `UserNameForCertificate` 身份验证模式，客户端和服务都必须使用 WS-Security 1.1。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-216">For the `UserNameForCertificate` authentication mode, both the client and service must be using WS-Security 1.1.</span></span>  
  
### <a name="usernameforsslnegotiated"></a><span data-ttu-id="d1c3b-217">UserNameForSslNegotiated</span><span class="sxs-lookup"><span data-stu-id="d1c3b-217">UserNameForSslNegotiated</span></span>  
 <span data-ttu-id="d1c3b-218">在此身份验证模式中，客户端使用用户名令牌进行身份验证，此证书作为经过签名的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-218">With this authentication mode, the client is authenticates using a Username Token which appears at the SOAP layer as a signed supporting token; that is, a token that is signed by the message signature.</span></span> <span data-ttu-id="d1c3b-219">使用 X.509 证书对服务进行身份验证。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-219">The service is authenticated using an X.509 certificate.</span></span> <span data-ttu-id="d1c3b-220">安全绑定元素是由 `SymmetricSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForSslBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-220">The security binding element is a `SymmetricSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameForSslBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-221">或者，将 `authenticationMode` 属性设置为 `UserNameForSslNegotiated`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-221">Alternatively, set the `authenticationMode` attribute to `UserNameForSslNegotiated`.</span></span>  
  
### <a name="usernameovertransport"></a><span data-ttu-id="d1c3b-222">UserNameOverTransport</span><span class="sxs-lookup"><span data-stu-id="d1c3b-222">UserNameOverTransport</span></span>  
 <span data-ttu-id="d1c3b-223">在此身份验证模式中，客户端使用用户名令牌进行身份验证，此证书作为经过签名的支持令牌（即签署消息签名的令牌）显示在 SOAP 层上。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-223">With this authentication mode, the client authenticates using a Username Token that appears at the SOAP layer as a signed supporting token; that is, a token that is signed by the message signature.</span></span> <span data-ttu-id="d1c3b-224">在传输层，服务是用 X.509 证书进行身份验证的。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-224">The service is authenticated using an X.509 certificate at the transport layer.</span></span> <span data-ttu-id="d1c3b-225">安全绑定元素是由 `TransportSecurityBindingElement` 方法返回的 <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameOverTransportBindingElement%2A>。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-225">The security binding element is a `TransportSecurityBindingElement` returned by the <xref:System.ServiceModel.Channels.SecurityBindingElement.CreateUserNameOverTransportBindingElement%2A> method.</span></span> <span data-ttu-id="d1c3b-226">或者，将 `authenticationMode` 属性设置为 `UserNameOverTransport`。</span><span class="sxs-lookup"><span data-stu-id="d1c3b-226">Alternatively, set the `authenticationMode` attribute to `UserNameOverTransport`.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="d1c3b-227">请参阅</span><span class="sxs-lookup"><span data-stu-id="d1c3b-227">See also</span></span>
- <xref:System.ServiceModel.Channels.SecurityBindingElement>
- [<span data-ttu-id="d1c3b-228">如何：为指定的身份验证模式创建 SecurityBindingElement</span><span class="sxs-lookup"><span data-stu-id="d1c3b-228">How to: Create a SecurityBindingElement for a Specified Authentication Mode</span></span>](../../../../docs/framework/wcf/feature-details/how-to-create-a-securitybindingelement-for-a-specified-authentication-mode.md)
