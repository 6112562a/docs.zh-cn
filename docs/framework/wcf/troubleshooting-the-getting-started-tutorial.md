---
title: 使用 Windows 通信基础教程对入门进行故障排除
ms.date: 01/25/2019
ms.assetid: 69a21511-0871-4c41-9a53-93110e84d7fd
ms.openlocfilehash: 73aa0f5784784cb788a7532f8e22cbe925429c41
ms.sourcegitcommit: 99b153b93bf94d0fecf7c7bcecb58ac424dfa47c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/25/2020
ms.locfileid: "80249612"
---
# <a name="troubleshoot-the-get-started-with-windows-communication-foundation-tutorials"></a><span data-ttu-id="8dbcc-102">使用 Windows 通信基础教程对入门进行故障排除</span><span class="sxs-lookup"><span data-stu-id="8dbcc-102">Troubleshoot the Get started with Windows Communication Foundation tutorials</span></span>

<span data-ttu-id="8dbcc-103">本文提供了解决方案，解决在按照[教程中的步骤：开始使用 Windows 通信基础应用程序](getting-started-tutorial.md)时可能面临的最常见问题和错误。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-103">This article provides solutions for the most common problems and errors you might face when you follow the steps in the [Tutorial: Get started with Windows Communication Foundation applications](getting-started-tutorial.md).</span></span>
  
## <a name="common-problems"></a><span data-ttu-id="8dbcc-104">常见问题</span><span class="sxs-lookup"><span data-stu-id="8dbcc-104">Common problems</span></span>

<span data-ttu-id="8dbcc-105">**我在硬盘上找不到项目文件。**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-105">**I can't find the project files on my hard drive.**</span></span>

 <span data-ttu-id="8dbcc-106">Visual Studio 将项目文件保存在*C：\用户\\&lt;用户名&gt;[源]存储库*中。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-106">Visual Studio saves project files in *C:\Users\\&lt;user name&gt;\source\repos*.</span></span>  

<span data-ttu-id="8dbcc-107">**我找不到*Svcutil.exe*生成的*App.config*文件。**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-107">**I can't find the *App.config* file generated by *Svcutil.exe*.**</span></span>

 <span data-ttu-id="8dbcc-108">在 Visual Studio 中，"**添加现有项目"** 窗口默认仅显示具有以下扩展名的文件：</span><span class="sxs-lookup"><span data-stu-id="8dbcc-108">In Visual Studio, the **Add Existing Item** window only displays files with the following extensions by default:</span></span>

- <span data-ttu-id="8dbcc-109">*.cs*</span><span class="sxs-lookup"><span data-stu-id="8dbcc-109">*.cs*</span></span>
- <span data-ttu-id="8dbcc-110">*.resx*</span><span class="sxs-lookup"><span data-stu-id="8dbcc-110">*.resx*</span></span>
- <span data-ttu-id="8dbcc-111">*.设置*</span><span class="sxs-lookup"><span data-stu-id="8dbcc-111">*.settings*</span></span>
- <span data-ttu-id="8dbcc-112">*.xsd*</span><span class="sxs-lookup"><span data-stu-id="8dbcc-112">*.xsd*</span></span>
- <span data-ttu-id="8dbcc-113">*.wsdl*</span><span class="sxs-lookup"><span data-stu-id="8dbcc-113">*.wsdl*</span></span>

<span data-ttu-id="8dbcc-114">要显示所有文件类型，请在 **"添加现有项目**"窗口右下角的下拉列表中选择 **"所有文件 "（.）。\*\***</span><span class="sxs-lookup"><span data-stu-id="8dbcc-114">To display all file types, select **All Files (\*.\*)** in the drop-down list in the lower-right corner of the **Add Existing Item** window.</span></span>  
  
## <a name="common-errors"></a><span data-ttu-id="8dbcc-115">常见错误</span><span class="sxs-lookup"><span data-stu-id="8dbcc-115">Common errors</span></span>

### <a name="compile-the-service-application"></a><span data-ttu-id="8dbcc-116">编译服务应用程序</span><span class="sxs-lookup"><span data-stu-id="8dbcc-116">Compile the service application</span></span>

<span data-ttu-id="8dbcc-117">**在"入门主机.模块1"中未找到错误 BC30420"子主"。**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-117">**Error BC30420 'Sub Main' was not found in 'GettingStartedHost.Module1'.**</span></span>

<span data-ttu-id="8dbcc-118">对于可视化基本应用程序，入口点不正确。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-118">The entry point is incorrect for the Visual Basic application.</span></span> <span data-ttu-id="8dbcc-119">进行以下更改：</span><span class="sxs-lookup"><span data-stu-id="8dbcc-119">Make the following change:</span></span>

   1. <span data-ttu-id="8dbcc-120">在 **"解决方案资源管理器"** 窗口中，选择 **"入门主机"** 文件夹，然后从快捷菜单中选择 **"属性**"。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-120">In the **Solution Explorer** window, select the **GettingStartedHost** folder, and then select **Properties** from the shortcut menu.</span></span>
    <span data-ttu-id="8dbcc-121">a.在“解决方案资源管理器”中，右键单击项目文件夹下的“引用”文件夹，然后单击“添加引用”。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-121">a.</span></span> <span data-ttu-id="8dbcc-122">在 **"入门主机"** 窗口中，对于**启动对象**，从列表中选择 **"服务.程序**"（或特定应用程序的入口点）。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-122">In the **GettingStartedHost** window, for **Startup object**, select **Service.Program** (or the entry point for your particular application) from the list.</span></span>
    <span data-ttu-id="8dbcc-123">b.保留“数据库类型”设置，即设置为“共享”。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-123">b.</span></span> <span data-ttu-id="8dbcc-124">从主菜单中，选择 **"全部保存文件** > **Save All**"。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-124">From the main menu, select **File** > **Save All**.</span></span>

### <a name="run-the-service-application"></a><span data-ttu-id="8dbcc-125">运行服务应用程序</span><span class="sxs-lookup"><span data-stu-id="8dbcc-125">Run the service application</span></span>

<span data-ttu-id="8dbcc-126">**HTTP 无法注册 URL "http：\//：8000/入门/计算器服务"。您的进程没有对此命名空间的访问权限。**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-126">**HTTP could not register URL 'http:\//+:8000/GettingStarted/CalculatorService'. Your process does not have access rights to this namespace.**</span></span>

 <span data-ttu-id="8dbcc-127">要获得适当的访问权限，可以启动托管具有管理权限的 Windows 通信基础 （WCF） 服务的过程：</span><span class="sxs-lookup"><span data-stu-id="8dbcc-127">For proper access, start the process hosting the Windows Communication Foundation (WCF) service with administrative privileges:</span></span>

- <span data-ttu-id="8dbcc-128">对于可视化工作室：在 **"开始"** 菜单中选择"视觉工作室"程序，然后从快捷菜单中选择 **"以管理员** > **身份运行**更多"。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-128">For Visual Studio: Select the Visual Studio program in the **Start** menu, and then select **More** > **Run as administrator** from the shortcut menu.</span></span>
- <span data-ttu-id="8dbcc-129">对于控制台窗口：在 **"开始"** 菜单中选择 **"命令提示"，** 然后从快捷菜单中选择 **"以** > **管理员身份运行**更多"。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-129">For a console window: Select **Command Prompt** in the **Start** menu, and then select **More** > **Run As administrator** from the shortcut menu.</span></span>
- <span data-ttu-id="8dbcc-130">对于 Windows 资源管理器：选择可执行文件，然后从快捷菜单中选择 **"以管理员身份运行**"。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-130">For Windows Explorer: Select the executable, and then select **Run as administrator** from the shortcut menu.</span></span>

### <a name="compile-the-client-application"></a><span data-ttu-id="8dbcc-131">编译客户端应用程序</span><span class="sxs-lookup"><span data-stu-id="8dbcc-131">Compile the client application</span></span>

<span data-ttu-id="8dbcc-132">**"计算器客户端"，不包含"方法名称>"\<的定义，并且找不到接受类型为"计算器客户端\<"的第一个参数的扩展方法"方法名称>"（您是否缺少使用指令或程序集引用？**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-132">**'CalculatorClient', does not contain a definition for '\<method name>' and no extension method '\<method name>' accepting a first argument of type 'CalculatorClient' could be found (are you missing a using directive or an assembly reference?)**</span></span>  

<span data-ttu-id="8dbcc-133">只有使用`ServiceOperationAttribute`属性标记的方法才会公开。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-133">Only those methods that you mark with the `ServiceOperationAttribute` attribute are publically exposed.</span></span> <span data-ttu-id="8dbcc-134">如果在`ICalculator`接口中的方法省略`ServiceOperationAttribute`该属性，则会在编译期间收到此错误消息。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-134">If you omit the `ServiceOperationAttribute` attribute from a method in the `ICalculator` interface, you receive this error message during compilation.</span></span>  

<span data-ttu-id="8dbcc-135">**找不到类型或命名空间名称"计算器客户端"（您是否缺少 using 指令或程序集引用？**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-135">**The type or namespace name 'CalculatorClient' could not be found (are you missing a using directive or an assembly reference?)**</span></span>

 <span data-ttu-id="8dbcc-136">如果在使用*Svcutil.exe*工具生成*generatedProxy.cs（* 或*生成的Proxy.vb）* 文件时，未将这些文件添加到客户端项目中，则收到此错误。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-136">You receive this error if you don't add the *generatedProxy.cs* (or *generatedProxy.vb*) file to your client project when you generated them with the *Svcutil.exe* tool.</span></span>  

### <a name="run-the-client-application"></a><span data-ttu-id="8dbcc-137">运行客户端应用程序</span><span class="sxs-lookup"><span data-stu-id="8dbcc-137">Run the client application</span></span>

<span data-ttu-id="8dbcc-138">**未处理异常：系统.服务模型.终结点未找到异常：无法连接到"http：/\/本地主机：8000/入门/计算器服务"。TCP 错误代码 10061：由于目标计算机主动拒绝，因此无法进行连接。**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-138">**Unhandled Exception: System.ServiceModel.EndpointNotFoundException: Could not connect to 'http:\//localhost:8000/GettingStarted/CalculatorService'. TCP error code 10061: No connection could be made because the target machine actively refused it.**</span></span>

<span data-ttu-id="8dbcc-139">如果在未首次启动服务的情况下运行客户端应用程序，则会发生此错误。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-139">This error occurs if you run the client application without first starting the service.</span></span> <span data-ttu-id="8dbcc-140">首先，运行主机应用程序以启动服务，然后运行客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-140">First, run the host application to start the service, and then run the client application.</span></span>

### <a name="use-the-svcutilexe-tool"></a><span data-ttu-id="8dbcc-141">使用 Svcutil.exe 工具</span><span class="sxs-lookup"><span data-stu-id="8dbcc-141">Use the Svcutil.exe tool</span></span>

<span data-ttu-id="8dbcc-142">**"Svcutil"不被识别为内部或外部命令、可操作程序或批处理文件。**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-142">**'Svcutil' is not recognized as an internal or external command, operable program, or batch file.**</span></span>

 <span data-ttu-id="8dbcc-143">*Svcutil.exe*必须位于系统路径中。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-143">*Svcutil.exe* must be in the system path.</span></span> <span data-ttu-id="8dbcc-144">最简单的解决方案是使用 Visual Studio 命令提示符。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-144">The easiest solution is to use the Visual Studio command prompt.</span></span> <span data-ttu-id="8dbcc-145">在 **"开始"** 菜单中，选择 **"\<视觉工作室"版本>** 目录，然后选择 \*\*"开发人员\<命令提示">。 \*\*</span><span class="sxs-lookup"><span data-stu-id="8dbcc-145">From the **Start** menu, select the **Visual Studio \<version>** directory, then select **Developer Command Prompt for VS \<version>**.</span></span> <span data-ttu-id="8dbcc-146">此命令提示符将系统路径设置到作为 Visual Studio 一部分提供的所有工具的正确位置。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-146">This command prompt sets the system path to the correct locations for all tools shipped as part of Visual Studio.</span></span>  
  
### <a name="run-the-service-and-client-applications"></a><span data-ttu-id="8dbcc-147">运行服务和客户端应用程序</span><span class="sxs-lookup"><span data-stu-id="8dbcc-147">Run the service and client applications</span></span>

<span data-ttu-id="8dbcc-148">**系统.服务模型.安全.安全协商例外：SOAP 安全协商与目标的"http：/localhost：8000/\/入门/计算器服务"的目标"http：/localhost：8000/\/入门/计算器服务"失败**</span><span class="sxs-lookup"><span data-stu-id="8dbcc-148">**System.ServiceModel.Security.SecurityNegotiationException: SOAP security negotiation with 'http:\//localhost:8000/GettingStarted/CalculatorService' for target 'http:\//localhost:8000/GettingStarted/CalculatorService' failed**</span></span>  

<span data-ttu-id="8dbcc-149">此错误发生在没有网络连接的域加入计算机上。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-149">This error occurs on a domain-joined computer that doesn't have network connectivity.</span></span> <span data-ttu-id="8dbcc-150">将计算机连接到网络或关闭服务和客户端的安全性。</span><span class="sxs-lookup"><span data-stu-id="8dbcc-150">Connect your computer to the network or turn off security for both the service and the client.</span></span>

<span data-ttu-id="8dbcc-151">要关闭安全性：</span><span class="sxs-lookup"><span data-stu-id="8dbcc-151">To turn off security:</span></span>

- <span data-ttu-id="8dbcc-152">对于服务，用以下代码替换创建`WSHttpBinding`的代码：</span><span class="sxs-lookup"><span data-stu-id="8dbcc-152">For the service, replace the code that creates the `WSHttpBinding` with the following code:</span></span>  
  
    ```csharp
    // Step 3: Add a service endpoint.
    selfhost.AddServiceEndpoint(typeof(ICalculator), new WSHttpBinding(SecurityMode.None), "CalculatorService");  
    ```

- <span data-ttu-id="8dbcc-153">对于客户端，在配置文件中，在**\<绑定>** 元素下更新**\<安全>** 元素，如下所示：</span><span class="sxs-lookup"><span data-stu-id="8dbcc-153">For the client, in the configuration file, update the **\<security>** element under the **\<binding>** element as follows:</span></span>  
  
    ```xml
    <binding name="WSHttpBinding_ICalculator">
      <security mode="None" />
    </binding
    ```  

## <a name="see-also"></a><span data-ttu-id="8dbcc-154">请参阅</span><span class="sxs-lookup"><span data-stu-id="8dbcc-154">See also</span></span>  
 [<span data-ttu-id="8dbcc-155">开始使用 WCF 应用程序</span><span class="sxs-lookup"><span data-stu-id="8dbcc-155">Get started with WCF applications</span></span>](getting-started-tutorial.md)  
 [<span data-ttu-id="8dbcc-156">WCF 故障排除快速入门</span><span class="sxs-lookup"><span data-stu-id="8dbcc-156">WCF troubleshooting quickstart</span></span>](wcf-troubleshooting-quickstart.md)  
 [<span data-ttu-id="8dbcc-157">排除设置问题</span><span class="sxs-lookup"><span data-stu-id="8dbcc-157">Troubleshooting setup issues</span></span>](troubleshooting-setup-issues.md)
