---
title: ServiceModel 元数据实用工具 (Svcutil.exe)
ms.date: 03/30/2017
helpviewer_keywords:
- clients [WCF], building
- endpoints [WCF]
- Svcutil.exe
- clients [WCF], consuming services
ms.assetid: 1abf3d9f-b420-46f1-b628-df238751f308
ms.openlocfilehash: 8fd623314c84a677ab5cef07271a48c5fdd581b8
ms.sourcegitcommit: 628e8147ca10187488e6407dab4c4e6ebe0cac47
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/15/2019
ms.locfileid: "72321422"
---
# <a name="servicemodel-metadata-utility-tool-svcutilexe"></a><span data-ttu-id="c40cb-102">ServiceModel 元数据实用工具 (Svcutil.exe)</span><span class="sxs-lookup"><span data-stu-id="c40cb-102">ServiceModel Metadata Utility Tool (Svcutil.exe)</span></span>

<span data-ttu-id="c40cb-103">"使用的元数据实用工具" 工具可从元数据文档生成服务模型代码，以及从服务模型代码生成元数据文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-103">The ServiceModel Metadata Utility tool is used to generate service model code from metadata documents, and metadata documents from service model code.</span></span>

## <a name="svcutilexe"></a><span data-ttu-id="c40cb-104">SvcUtil.exe</span><span class="sxs-lookup"><span data-stu-id="c40cb-104">SvcUtil.exe</span></span>

<span data-ttu-id="c40cb-105">可在 Windows SDK 安装位置找到 "%ProgramFiles%\Microsoft" 元数据实用工具，具体来说就是*SDKs\Windows\v6.0\Bin*。</span><span class="sxs-lookup"><span data-stu-id="c40cb-105">The ServiceModel Metadata Utility Tool can be found at the Windows SDK installation location, specifically *%ProgramFiles%\Microsoft SDKs\Windows\v6.0\Bin*.</span></span>

### <a name="functionalities"></a><span data-ttu-id="c40cb-106">功能</span><span class="sxs-lookup"><span data-stu-id="c40cb-106">Functionalities</span></span>

<span data-ttu-id="c40cb-107">下表汇总了此工具提供的各种功能，以及讨论如何使用该工具的相应主题：</span><span class="sxs-lookup"><span data-stu-id="c40cb-107">The following table summarizes the various functionalities provided by this tool, and the corresponding topic that discusses how it is used:</span></span>

|<span data-ttu-id="c40cb-108">任务</span><span class="sxs-lookup"><span data-stu-id="c40cb-108">Task</span></span>|<span data-ttu-id="c40cb-109">主题</span><span class="sxs-lookup"><span data-stu-id="c40cb-109">Topic</span></span>|
|----------|-----------|
|<span data-ttu-id="c40cb-110">依据运行的服务或静态元数据文档生成代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-110">Generates code from running services or static metadata documents.</span></span>|[<span data-ttu-id="c40cb-111">根据服务元数据生成 WCF 客户端</span><span class="sxs-lookup"><span data-stu-id="c40cb-111">Generating a WCF Client from Service Metadata</span></span>](./feature-details/generating-a-wcf-client-from-service-metadata.md)|
|<span data-ttu-id="c40cb-112">从编译的代码中导出元数据文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-112">Exports metadata documents from compiled code.</span></span>|[<span data-ttu-id="c40cb-113">如何：使用 Svcutil.exe 将元数据从已编译的服务代码中导出</span><span class="sxs-lookup"><span data-stu-id="c40cb-113">How to: Use Svcutil.exe to Export Metadata from Compiled Service Code</span></span>](./feature-details/how-to-use-svcutil-exe-to-export-metadata-from-compiled-service-code.md)|
|<span data-ttu-id="c40cb-114">验证编译的服务代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-114">Validates compiled service code.</span></span>|[<span data-ttu-id="c40cb-115">如何：使用 Svcutil.exe 验证已编译的服务代码</span><span class="sxs-lookup"><span data-stu-id="c40cb-115">How to: Use Svcutil.exe to Validate Compiled Service Code</span></span>](./feature-details/how-to-use-svcutil-exe-to-validate-compiled-service-code.md)|
|<span data-ttu-id="c40cb-116">从运行的服务中下载元数据文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-116">Downloads metadata documents from running services.</span></span>|[<span data-ttu-id="c40cb-117">如何：使用 Svcutil.exe 下载元数据文档</span><span class="sxs-lookup"><span data-stu-id="c40cb-117">How to: Use Svcutil.exe to Download Metadata Documents</span></span>](./feature-details/how-to-use-svcutil-exe-to-download-metadata-documents.md)|
|<span data-ttu-id="c40cb-118">生成序列化代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-118">Generates serialization code.</span></span>|[<span data-ttu-id="c40cb-119">如何：使用 XmlSerializer 改善 WCF 客户端应用程序的启动时间</span><span class="sxs-lookup"><span data-stu-id="c40cb-119">How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer</span></span>](./feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md)|

> [!CAUTION]
> <span data-ttu-id="c40cb-120">如果作为参数提供的名称相同，svcutil.exe 将覆盖磁盘上的现有文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-120">Svcutil overwrites existing files on a disk if the names supplied as parameters are identical.</span></span> <span data-ttu-id="c40cb-121">这可以包括代码文件、配置或元数据文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-121">This can include code files, configuration, or metadata files.</span></span> <span data-ttu-id="c40cb-122">为避免出现这种情况，请使用 `/mergeConfig` 开关。</span><span class="sxs-lookup"><span data-stu-id="c40cb-122">To avoid this when generating code and configuration files, use the `/mergeConfig` switch.</span></span>
>
> <span data-ttu-id="c40cb-123">此外，引用类型的 `/r` 和 `/ct` 开关用于生成数据协定。</span><span class="sxs-lookup"><span data-stu-id="c40cb-123">In addition, the `/r` and `/ct` switches for referencing types are for generating data contracts.</span></span> <span data-ttu-id="c40cb-124">使用 XmlSerializer 时，这些开关不起作用。</span><span class="sxs-lookup"><span data-stu-id="c40cb-124">These switches do not work when using XmlSerializer.</span></span>

### <a name="timeout"></a><span data-ttu-id="c40cb-125">超时</span><span class="sxs-lookup"><span data-stu-id="c40cb-125">Timeout</span></span>

<span data-ttu-id="c40cb-126">检索元数据时，该工具有五分钟的超时时间。</span><span class="sxs-lookup"><span data-stu-id="c40cb-126">The tool has a five minute timeout when retrieving metadata.</span></span> <span data-ttu-id="c40cb-127">此超时仅适用于通过网络检索元数据的操作。</span><span class="sxs-lookup"><span data-stu-id="c40cb-127">This timeout only applies to retrieving metadata over the network.</span></span> <span data-ttu-id="c40cb-128">它不适用于该元数据的任何处理操作。</span><span class="sxs-lookup"><span data-stu-id="c40cb-128">It does not apply to any processing of that metadata.</span></span>

### <a name="multi-targeting"></a><span data-ttu-id="c40cb-129">多目标</span><span class="sxs-lookup"><span data-stu-id="c40cb-129">Multi-targeting</span></span>

<span data-ttu-id="c40cb-130">该工具不支持多目标。</span><span class="sxs-lookup"><span data-stu-id="c40cb-130">The tool does not support multi-targeting.</span></span> <span data-ttu-id="c40cb-131">如果要从*svcutil.exe*生成 .net 4 项目，请使用 .NET 4 SDK 中的*svcutil.exe* 。</span><span class="sxs-lookup"><span data-stu-id="c40cb-131">If you want to generate a .NET 4 artifact from *svcutil.exe*, use the *svcutil.exe* from the .NET 4 SDK.</span></span> <span data-ttu-id="c40cb-132">若要生成 .NET 3.5 项目，请使用 .NET 3.5 SDK 中的可执行文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-132">To generate a .NET 3.5 artifact, use the executable from the .NET 3.5 SDK.</span></span>

### <a name="accessing-wsdl-documents"></a><span data-ttu-id="c40cb-133">访问 WSDL 文档</span><span class="sxs-lookup"><span data-stu-id="c40cb-133">Accessing WSDL Documents</span></span>

<span data-ttu-id="c40cb-134">使用 Svcutil 来访问具有对安全令牌服务 (STS) 的引用的 WSDL 文档时，Svcutil 将对 STS 执行 WS-MetadataExchange 调用。</span><span class="sxs-lookup"><span data-stu-id="c40cb-134">When you use Svcutil to access a WSDL document that has a reference to a security token service (STS), Svcutil makes a WS-MetadataExchange call to the STS.</span></span> <span data-ttu-id="c40cb-135">但是，服务可以使用 WS-MetadataExchange 或 HTTP GET 来公开其 WSDL 文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-135">However, the service can expose its WSDL documents using either WS-MetadataExchange or HTTP GET.</span></span> <span data-ttu-id="c40cb-136">因此，如果 STS 只使用 HTTP GET 公开了 WSDL 文档，则使用 WinFX 编写的客户端将失败。</span><span class="sxs-lookup"><span data-stu-id="c40cb-136">Therefore, if the STS has only exposed the WSDL document using HTTP GET, a client written in WinFX will fail.</span></span> <span data-ttu-id="c40cb-137">对于以 [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)] 编写的客户端，Svcutil.exe 尝试同时使用 Ws-metadataexchange 和 HTTP GET 来获取 STS WSDL。</span><span class="sxs-lookup"><span data-stu-id="c40cb-137">For clients written in [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)], Svcutil attempts to use both WS-MetadataExchange and HTTP GET to obtain the STS WSDL.</span></span>

## <a name="using-svcutilexe"></a><span data-ttu-id="c40cb-138">使用 SvcUtil.exe</span><span class="sxs-lookup"><span data-stu-id="c40cb-138">Using SvcUtil.exe</span></span>

### <a name="common-usages"></a><span data-ttu-id="c40cb-139">常见用法</span><span class="sxs-lookup"><span data-stu-id="c40cb-139">Common Usages</span></span>

<span data-ttu-id="c40cb-140">下表显示了此工具的一些常用选项：</span><span class="sxs-lookup"><span data-stu-id="c40cb-140">The following table shows some commonly used options for this tool:</span></span>

|<span data-ttu-id="c40cb-141">选项</span><span class="sxs-lookup"><span data-stu-id="c40cb-141">Option</span></span>|<span data-ttu-id="c40cb-142">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-142">Description</span></span>|
|------------|-----------------|
|<span data-ttu-id="c40cb-143">/目录： \<directory ></span><span class="sxs-lookup"><span data-stu-id="c40cb-143">/directory:\<directory></span></span>|<span data-ttu-id="c40cb-144">要在其中创建文件的目录。</span><span class="sxs-lookup"><span data-stu-id="c40cb-144">Directory to create files in.</span></span><br /><br /> <span data-ttu-id="c40cb-145">默认设置：当前目录。</span><span class="sxs-lookup"><span data-stu-id="c40cb-145">Default: The current directory.</span></span><br /><br /> <span data-ttu-id="c40cb-146">缩写形式：`/d`</span><span class="sxs-lookup"><span data-stu-id="c40cb-146">Short form: `/d`</span></span>|
|<span data-ttu-id="c40cb-147">/help</span><span class="sxs-lookup"><span data-stu-id="c40cb-147">/help</span></span>|<span data-ttu-id="c40cb-148">显示此工具的命令语法和选项。</span><span class="sxs-lookup"><span data-stu-id="c40cb-148">Displays the command syntax and options for the tool.</span></span><br /><br /> <span data-ttu-id="c40cb-149">缩写形式：`/?`</span><span class="sxs-lookup"><span data-stu-id="c40cb-149">Short form: `/?`</span></span>|
|<span data-ttu-id="c40cb-150">/noLogo</span><span class="sxs-lookup"><span data-stu-id="c40cb-150">/noLogo</span></span>|<span data-ttu-id="c40cb-151">取消版权和标题消息。</span><span class="sxs-lookup"><span data-stu-id="c40cb-151">Suppress the copyright and banner message.</span></span>|
|<span data-ttu-id="c40cb-152">/svcutilConfig： \<configFile ></span><span class="sxs-lookup"><span data-stu-id="c40cb-152">/svcutilConfig:\<configFile></span></span>|<span data-ttu-id="c40cb-153">指定要取代 App.config 文件使用的自定义配置文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-153">Specifies a custom configuration file to use instead of the App.config file.</span></span> <span data-ttu-id="c40cb-154">可以使用该自定义配置文件来注册 system.serviceModel 扩展，而无需更改工具的配置文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-154">This can be used to register system.serviceModel extensions without altering the tool's configuration file.</span></span>|
|<span data-ttu-id="c40cb-155">/target： \<output 类型 ></span><span class="sxs-lookup"><span data-stu-id="c40cb-155">/target:\<output type></span></span>|<span data-ttu-id="c40cb-156">指定要由工具生成的输出。</span><span class="sxs-lookup"><span data-stu-id="c40cb-156">Specifies the output to be generated by the tool.</span></span><br /><br /> <span data-ttu-id="c40cb-157">有效的值为代码、元数据或 xmlSerializer。</span><span class="sxs-lookup"><span data-stu-id="c40cb-157">Valid values are code, metadata or xmlSerializer.</span></span><br /><br /> <span data-ttu-id="c40cb-158">缩写形式：`/t`</span><span class="sxs-lookup"><span data-stu-id="c40cb-158">Short form: `/t`</span></span>|

### <a name="code-generation"></a><span data-ttu-id="c40cb-159">代码生成</span><span class="sxs-lookup"><span data-stu-id="c40cb-159">Code Generation</span></span>

<span data-ttu-id="c40cb-160">Svcutil.exe 可以依据元数据文档为服务协定、客户端和数据类型生成代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-160">Svcutil.exe can generate code for service contracts, clients and data types from metadata documents.</span></span> <span data-ttu-id="c40cb-161">这些元数据文档可以位于持久存储区上，也可以联机检索。</span><span class="sxs-lookup"><span data-stu-id="c40cb-161">These metadata documents can be on a durable storage, or be retrieved online.</span></span> <span data-ttu-id="c40cb-162">联机检索采用 WS-Metadata Exchange 协议或 DISCO 协议（有关详细信息，请参见“元数据下载”一节）。</span><span class="sxs-lookup"><span data-stu-id="c40cb-162">Online retrieval follows either the WS-Metadata Exchange protocol or the DISCO protocol (for details see the Metadata Download section).</span></span>

<span data-ttu-id="c40cb-163">可以使用*svcutil.exe*工具基于预定义的 WSDL 文档生成服务和数据协定。</span><span class="sxs-lookup"><span data-stu-id="c40cb-163">You can use the *SvcUtil.exe* tool to generate service and data contracts based on a predefined WSDL document.</span></span> <span data-ttu-id="c40cb-164">使用 /serviceContract 开关并指定可以从中下载或找到 WSDL 文档的 URL 或文件位置。</span><span class="sxs-lookup"><span data-stu-id="c40cb-164">Use the /serviceContract switch and specify a URL or file location where the WSDL document can be downloaded or found.</span></span> <span data-ttu-id="c40cb-165">这会生成在 WSDL 文档中定义的服务和数据协定，然后可以使用该协定来实现投诉服务。</span><span class="sxs-lookup"><span data-stu-id="c40cb-165">This generates the service and data contracts defined in the WSDL document that can then be used to implement a complaint service.</span></span> <span data-ttu-id="c40cb-166">有关详细信息，请参阅[如何：检索元数据并实现兼容服务](./feature-details/how-to-retrieve-metadata-and-implement-a-compliant-service.md)。</span><span class="sxs-lookup"><span data-stu-id="c40cb-166">For more information, see [How to: Retrieve Metadata and Implement a Compliant Service](./feature-details/how-to-retrieve-metadata-and-implement-a-compliant-service.md).</span></span>

<span data-ttu-id="c40cb-167">对于具有 BasicHttpContextBinding 终结点的服务， *svcutil.exe*会生成 BasicHttpBinding，并将 `allowCookies` 特性设置为 `true`。</span><span class="sxs-lookup"><span data-stu-id="c40cb-167">For a service with a BasicHttpContextBinding endpoint, *Svcutil.exe* generates a BasicHttpBinding with the `allowCookies` attribute set to `true` instead.</span></span> <span data-ttu-id="c40cb-168">Cookie 用于服务器上的上下文。</span><span class="sxs-lookup"><span data-stu-id="c40cb-168">The cookies are used for context on the server.</span></span> <span data-ttu-id="c40cb-169">如果在服务使用 Cookie 时，你要管理客户端上的上下文，则可以手动修改配置以使用上下文绑定。</span><span class="sxs-lookup"><span data-stu-id="c40cb-169">If you would like to manage context on the client when the service uses cookies, you can manually modify the configuration to use a context binding.</span></span>

> [!CAUTION]
> <span data-ttu-id="c40cb-170">Svcutil.exe 基于 WSDL 或从服务收到的策略文件生成客户端。</span><span class="sxs-lookup"><span data-stu-id="c40cb-170">Svcutil.exe generates the client based on the WSDL or policy file received from the service.</span></span> <span data-ttu-id="c40cb-171">用户主体名称（UPN）是通过将用户名、"\@" 和完全限定的域名（FQDN）进行连接生成的。</span><span class="sxs-lookup"><span data-stu-id="c40cb-171">The user principal name (UPN) is generated by concatenating username, "\@" and a fully-qualified domain name (FQDN).</span></span> <span data-ttu-id="c40cb-172">但是，对于在 Active Directory 上注册的用户，此格式无效，并且工具生成的 UPN 将导致 Kerberos 身份验证失败，错误消息为“登录没有成功”。</span><span class="sxs-lookup"><span data-stu-id="c40cb-172">However, for users who registered on Active Directory, this format is not valid and the UPN generated by the tool causes a failure in Kerberos authentication with the error message "The logon attempt failed".</span></span> <span data-ttu-id="c40cb-173">若要解决此问题，您应手动修复此工具生成的客户端文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-173">To resolve this problem, you should manually fix the client file generated by this tool.</span></span>

`svcutil.exe [/t:code]  <metadataDocumentPath>* | <url>* | <epr>`

|<span data-ttu-id="c40cb-174">参数</span><span class="sxs-lookup"><span data-stu-id="c40cb-174">Argument</span></span>|<span data-ttu-id="c40cb-175">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-175">Description</span></span>|
|--------------|-----------------|
|`epr`|<span data-ttu-id="c40cb-176">XML 文件的路径，该文件包含支持 WS-Metadata Exchange 的服务终结点的 WS-Addressing EndpointReference。</span><span class="sxs-lookup"><span data-stu-id="c40cb-176">The path to an XML file that contains a WS-Addressing EndpointReference for a service endpoint that supports WS-Metadata Exchange.</span></span> <span data-ttu-id="c40cb-177">有关更多信息，请参见“元数据下载”一节。</span><span class="sxs-lookup"><span data-stu-id="c40cb-177">For more information, see the Metadata Download section.</span></span>|
|`metadataDocumentPath`|<span data-ttu-id="c40cb-178">包含要导入到代码中的协定的元数据文档（*wsdl*或*xsd*）的路径（.wsdl、.xsd、. wspolicy 或 wsmex）。</span><span class="sxs-lookup"><span data-stu-id="c40cb-178">The path to a metadata document (*wsdl* or *xsd*) that contains the contract to import into code (.wsdl, .xsd, .wspolicy, or .wsmex).</span></span><br /><br /> <span data-ttu-id="c40cb-179">当您为元数据指定远程 URL 时，Svcutil 采用导入和包含的内容。</span><span class="sxs-lookup"><span data-stu-id="c40cb-179">Svcutil follows imports and includes when you specify a remote URL for metadata.</span></span> <span data-ttu-id="c40cb-180">但是，如果要在本地文件系统上处理元数据文件，则必须在此自变量中指定所有文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-180">However, if you want to process metadata files on the local file system, you must specify all files in this argument.</span></span> <span data-ttu-id="c40cb-181">这样，您可以在不能有网络依赖项的生成环境中使用 Svcutil。</span><span class="sxs-lookup"><span data-stu-id="c40cb-181">In this way, you can use Svcutil in a build environment where you cannot have network dependencies.</span></span> <span data-ttu-id="c40cb-182">对于此参数，可以使用通配符（\* .xsd，\* .wsdl）。</span><span class="sxs-lookup"><span data-stu-id="c40cb-182">You can use wildcards (\*.xsd, \*.wsdl) for this argument.</span></span>|
|`url`|<span data-ttu-id="c40cb-183">可提供元数据的服务终结点的 URL，或是联机承载的元数据文档的 URL。</span><span class="sxs-lookup"><span data-stu-id="c40cb-183">The URL to a service endpoint that provides metadata or to a metadata document hosted online.</span></span> <span data-ttu-id="c40cb-184">有关如何检索这些文档的更多信息，请参见“元数据下载”一节。</span><span class="sxs-lookup"><span data-stu-id="c40cb-184">For more information on how these documents are retrieved, see the Metadata Download section.</span></span>|

|<span data-ttu-id="c40cb-185">选项</span><span class="sxs-lookup"><span data-stu-id="c40cb-185">Option</span></span>|<span data-ttu-id="c40cb-186">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-186">Description</span></span>|
|------------|-----------------|
|<span data-ttu-id="c40cb-187">/async</span><span class="sxs-lookup"><span data-stu-id="c40cb-187">/async</span></span>|<span data-ttu-id="c40cb-188">同时生成同步和异步方法签名。</span><span class="sxs-lookup"><span data-stu-id="c40cb-188">Generates both synchronous and asynchronous method signatures.</span></span><br /><br /> <span data-ttu-id="c40cb-189">默认设置：只生成同步方法签名。</span><span class="sxs-lookup"><span data-stu-id="c40cb-189">Default: generate only synchronous method signatures.</span></span><br /><br /> <span data-ttu-id="c40cb-190">缩写形式：`/a`</span><span class="sxs-lookup"><span data-stu-id="c40cb-190">Short Form: `/a`</span></span>|
|<span data-ttu-id="c40cb-191">/collectionType： \<type ></span><span class="sxs-lookup"><span data-stu-id="c40cb-191">/collectionType:\<type></span></span>|<span data-ttu-id="c40cb-192">为 WCF 客户端指定列表集合类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-192">Specifies the list collection type for a WCF client.</span></span><br/><br /> <span data-ttu-id="c40cb-193">默认：集合类型为 System.object。</span><span class="sxs-lookup"><span data-stu-id="c40cb-193">Default: collection type is System.Array.</span></span> <br /><br /> <span data-ttu-id="c40cb-194">缩写形式：`/ct`</span><span class="sxs-lookup"><span data-stu-id="c40cb-194">Short Form: `/ct`</span></span>|
|<span data-ttu-id="c40cb-195">/config： \<configFile ></span><span class="sxs-lookup"><span data-stu-id="c40cb-195">/config:\<configFile></span></span>|<span data-ttu-id="c40cb-196">为生成的配置文件指定文件名。</span><span class="sxs-lookup"><span data-stu-id="c40cb-196">Specifies the filename for the generated configuration file.</span></span><br /><br /> <span data-ttu-id="c40cb-197">默认设置：output.config</span><span class="sxs-lookup"><span data-stu-id="c40cb-197">Default: output.config</span></span>|
|<span data-ttu-id="c40cb-198">/dataContractOnly</span><span class="sxs-lookup"><span data-stu-id="c40cb-198">/dataContractOnly</span></span>|<span data-ttu-id="c40cb-199">只为数据协定类型生成代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-199">Generates code for data contract types only.</span></span> <span data-ttu-id="c40cb-200">不生成服务协定类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-200">Service Contract types are not generated.</span></span><br /><br /> <span data-ttu-id="c40cb-201">只应为此选项指定本地元数据文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-201">You should only specify local metadata files for this option.</span></span><br /><br /> <span data-ttu-id="c40cb-202">缩写形式：`/dconly`</span><span class="sxs-lookup"><span data-stu-id="c40cb-202">Short Form: `/dconly`</span></span>|
|<span data-ttu-id="c40cb-203">/enableDataBinding</span><span class="sxs-lookup"><span data-stu-id="c40cb-203">/enableDataBinding</span></span>|<span data-ttu-id="c40cb-204">在所有数据协定类型上实现 <xref:System.ComponentModel.INotifyPropertyChanged> 接口以启用数据绑定。</span><span class="sxs-lookup"><span data-stu-id="c40cb-204">Implements the <xref:System.ComponentModel.INotifyPropertyChanged> interface on all Data Contract types to enable data binding.</span></span><br /><br /> <span data-ttu-id="c40cb-205">缩写形式：`/edb`</span><span class="sxs-lookup"><span data-stu-id="c40cb-205">Short Form: `/edb`</span></span>|
|<span data-ttu-id="c40cb-206">/excludeType： \<type ></span><span class="sxs-lookup"><span data-stu-id="c40cb-206">/excludeType:\<type></span></span>|<span data-ttu-id="c40cb-207">指定要从引用的协定类型中排除的完全限定或程序集限定类型名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-207">Specifies a fully-qualified or assembly-qualified type name to be excluded from referenced contract types.</span></span><br /><br /> <span data-ttu-id="c40cb-208">从单独的 DLL 中将此开关与 `/r` 一起使用时，将引用 XSD 类的全名。</span><span class="sxs-lookup"><span data-stu-id="c40cb-208">When using this switch together with `/r` from separate DLLs, the full name of the XSD class is referenced.</span></span><br /><br /> <span data-ttu-id="c40cb-209">缩写形式：`/et`</span><span class="sxs-lookup"><span data-stu-id="c40cb-209">Short Form: `/et`</span></span>|
|<span data-ttu-id="c40cb-210">/importXmlTypes</span><span class="sxs-lookup"><span data-stu-id="c40cb-210">/importXmlTypes</span></span>|<span data-ttu-id="c40cb-211">配置数据协定序列化程序，以便将非数据协定类型作为 IXmlSerializable 类型导入。</span><span class="sxs-lookup"><span data-stu-id="c40cb-211">Configures the Data Contract serializer to import non-Data Contract types as IXmlSerializable types.</span></span>|
|<span data-ttu-id="c40cb-212">/internal</span><span class="sxs-lookup"><span data-stu-id="c40cb-212">/internal</span></span>|<span data-ttu-id="c40cb-213">生成标记为内部的类。</span><span class="sxs-lookup"><span data-stu-id="c40cb-213">Generates classes that are marked as internal.</span></span> <span data-ttu-id="c40cb-214">默认设置：只生成公共类。</span><span class="sxs-lookup"><span data-stu-id="c40cb-214">Default: generate public classes only.</span></span><br /><br /> <span data-ttu-id="c40cb-215">缩写形式：`/i`</span><span class="sxs-lookup"><span data-stu-id="c40cb-215">Short Form: `/i`</span></span>|
|<span data-ttu-id="c40cb-216">/language： \<language ></span><span class="sxs-lookup"><span data-stu-id="c40cb-216">/language:\<language></span></span>|<span data-ttu-id="c40cb-217">指定要用于代码生成的编程语言。</span><span class="sxs-lookup"><span data-stu-id="c40cb-217">Specifies the programming language to use for code generation.</span></span> <span data-ttu-id="c40cb-218">应提供在 Machine.config 文件中注册的语言名称，或从 <xref:System.CodeDom.Compiler.CodeDomProvider> 继承的类的完全限定名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-218">You should provide either a language name registered in the Machine.config file, or the fully qualified name of a class that inherits from <xref:System.CodeDom.Compiler.CodeDomProvider>.</span></span><br /><br /> <span data-ttu-id="c40cb-219">值：c#、cs、csharp、vb、visualbasic、c++、cpp</span><span class="sxs-lookup"><span data-stu-id="c40cb-219">Values: c#, cs, csharp, vb, visualbasic, c++, cpp</span></span><br /><br /> <span data-ttu-id="c40cb-220">默认设置：csharp</span><span class="sxs-lookup"><span data-stu-id="c40cb-220">Default: csharp</span></span><br /><br /> <span data-ttu-id="c40cb-221">缩写形式：`/l`</span><span class="sxs-lookup"><span data-stu-id="c40cb-221">Short form: `/l`</span></span>|
|<span data-ttu-id="c40cb-222">/mergeConfig</span><span class="sxs-lookup"><span data-stu-id="c40cb-222">/mergeConfig</span></span>|<span data-ttu-id="c40cb-223">将生成的配置合并到现有文件中，而不是覆盖现有文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-223">Merges the generated configuration into an existing file, instead of overwriting the existing file.</span></span>|
|<span data-ttu-id="c40cb-224">/messageContract</span><span class="sxs-lookup"><span data-stu-id="c40cb-224">/messageContract</span></span>|<span data-ttu-id="c40cb-225">生成消息协定类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-225">Generates Message Contract types.</span></span><br /><br /> <span data-ttu-id="c40cb-226">缩写形式：`/mc`</span><span class="sxs-lookup"><span data-stu-id="c40cb-226">Short Form: `/mc`</span></span>|
|<span data-ttu-id="c40cb-227">/namespace： \<string，string ></span><span class="sxs-lookup"><span data-stu-id="c40cb-227">/namespace:\<string,string></span></span>|<span data-ttu-id="c40cb-228">指定从 WSDL 或 XML 架构 targetNamespace 到 CLR 命名空间的映射。</span><span class="sxs-lookup"><span data-stu-id="c40cb-228">Specifies a mapping from a WSDL or XML Schema targetNamespace to a CLR namespace.</span></span> <span data-ttu-id="c40cb-229">对于 targetNamespace，使用 "\*" 可将所有 Targetnamespace 映射到该 CLR 命名空间的显式映射。</span><span class="sxs-lookup"><span data-stu-id="c40cb-229">Using '\*' for the targetNamespace maps all targetNamespaces without an explicit mapping to that CLR namespace.</span></span><br /><br /> <span data-ttu-id="c40cb-230">为了确保消息协定名称与操作名称不冲突，您应使用 `::` 限定类型引用，或确保名称是唯一的。</span><span class="sxs-lookup"><span data-stu-id="c40cb-230">To make sure that the message contract name does not collide with operation name, you should either qualify the type reference with `::`, or make sure the names are unique.</span></span><br /><br /> <span data-ttu-id="c40cb-231">默认设置：派生自数据协定架构文档的目标命名空间。</span><span class="sxs-lookup"><span data-stu-id="c40cb-231">Default: Derived from the target namespace of the schema document for Data Contracts.</span></span> <span data-ttu-id="c40cb-232">默认命名空间用于所有其他生成的类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-232">The default namespace is used for all other generated types.</span></span><br /><br /> <span data-ttu-id="c40cb-233">短格式： `/n`**注意：** 生成要与 XmlSerializer 一起使用的类型时，仅支持单个命名空间映射。</span><span class="sxs-lookup"><span data-stu-id="c40cb-233">Short Form: `/n` **Note:**  When generating types to use with XmlSerializer, only a single namespace mapping is supported.</span></span> <span data-ttu-id="c40cb-234">所有生成的类型都将位于默认命名空间或由 "\*" 指定的命名空间中。</span><span class="sxs-lookup"><span data-stu-id="c40cb-234">All generated types will either be in the default namespace or the namespace specified by '\*'.</span></span>|
|<span data-ttu-id="c40cb-235">/noConfig</span><span class="sxs-lookup"><span data-stu-id="c40cb-235">/noConfig</span></span>|<span data-ttu-id="c40cb-236">不生成配置文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-236">Do not generate configuration files.</span></span>|
|<span data-ttu-id="c40cb-237">/noStdLib</span><span class="sxs-lookup"><span data-stu-id="c40cb-237">/noStdLib</span></span>|<span data-ttu-id="c40cb-238">不引用标准库。</span><span class="sxs-lookup"><span data-stu-id="c40cb-238">Do not reference standard libraries.</span></span><br /><br /> <span data-ttu-id="c40cb-239">默认设置：引用 Mscorlib.dll 和 System.servicemodel.dll。</span><span class="sxs-lookup"><span data-stu-id="c40cb-239">Default: Mscorlib.dll and System.servicemodel.dll are referenced.</span></span>|
|<span data-ttu-id="c40cb-240">/out： \<file ></span><span class="sxs-lookup"><span data-stu-id="c40cb-240">/out:\<file></span></span>|<span data-ttu-id="c40cb-241">为生成的代码指定文件名。</span><span class="sxs-lookup"><span data-stu-id="c40cb-241">Specifies the file name for the generated code.</span></span><br /><br /> <span data-ttu-id="c40cb-242">默认设置：派生自某个架构的 WSDL 定义名称、WSDL 服务名称或目标命名空间。</span><span class="sxs-lookup"><span data-stu-id="c40cb-242">Default: Derived from the WSDL definition name, WSDL service name or target namespace of one of the schemas.</span></span><br /><br /> <span data-ttu-id="c40cb-243">缩写形式：`/o`</span><span class="sxs-lookup"><span data-stu-id="c40cb-243">Short form: `/o`</span></span>|
|<span data-ttu-id="c40cb-244">/reference： \<file 路径 ></span><span class="sxs-lookup"><span data-stu-id="c40cb-244">/reference:\<file path></span></span>|<span data-ttu-id="c40cb-245">引用指定程序集中的类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-245">References types in the specified assembly.</span></span> <span data-ttu-id="c40cb-246">在生成客户端时，使用此选项来指定可能包含类型的程序集，这些类型表示所导入的元数据。</span><span class="sxs-lookup"><span data-stu-id="c40cb-246">When generating clients, use this option to specify assemblies that might contain types that represent the metadata being imported.</span></span><br /><br /> <span data-ttu-id="c40cb-247">无法使用此开关指定消息协定和 <xref:System.Xml.Serialization.XmlSerializer> 类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-247">You cannot specify message contracts and <xref:System.Xml.Serialization.XmlSerializer> types using this switch.</span></span><br /><br /> <span data-ttu-id="c40cb-248">如果引用了 <xref:System.DateTimeOffset>，则会使用此类型，而不是生成新类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-248">If <xref:System.DateTimeOffset> referenced, this type is used instead of generating a new type.</span></span> <span data-ttu-id="c40cb-249">如果应用程序是使用 [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)] 编写的，则 SvcUtil.exe 会自动引用 <xref:System.DateTimeOffset>。</span><span class="sxs-lookup"><span data-stu-id="c40cb-249">If the application is written using [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)], SvcUtil.exe references <xref:System.DateTimeOffset> automatically.</span></span><br /><br /> <span data-ttu-id="c40cb-250">缩写形式：`/r`</span><span class="sxs-lookup"><span data-stu-id="c40cb-250">Short Form: `/r`</span></span>|
|<span data-ttu-id="c40cb-251">/serializable</span><span class="sxs-lookup"><span data-stu-id="c40cb-251">/serializable</span></span>|<span data-ttu-id="c40cb-252">生成用 Serializable 属性标记的类。</span><span class="sxs-lookup"><span data-stu-id="c40cb-252">Generates classes marked with the Serializable Attribute.</span></span><br /><br /> <span data-ttu-id="c40cb-253">缩写形式：`/s`</span><span class="sxs-lookup"><span data-stu-id="c40cb-253">Short Form: `/s`</span></span>|
|<span data-ttu-id="c40cb-254">/serviceContract</span><span class="sxs-lookup"><span data-stu-id="c40cb-254">/serviceContract</span></span>|<span data-ttu-id="c40cb-255">仅生成服务协定的代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-255">Generate code for service contracts only.</span></span> <span data-ttu-id="c40cb-256">不会生成客户端类和配置</span><span class="sxs-lookup"><span data-stu-id="c40cb-256">Client class and configuration will not be generated</span></span><br /><br /> <span data-ttu-id="c40cb-257">缩写形式：`/sc`</span><span class="sxs-lookup"><span data-stu-id="c40cb-257">Short Form: `/sc`</span></span>|
|<span data-ttu-id="c40cb-258">/serializer:Auto</span><span class="sxs-lookup"><span data-stu-id="c40cb-258">/serializer:Auto</span></span>|<span data-ttu-id="c40cb-259">自动选择序列化程序。</span><span class="sxs-lookup"><span data-stu-id="c40cb-259">Automatically select the serializer.</span></span> <span data-ttu-id="c40cb-260">这会尝试使用数据协定序列化程序，如果失败，则使用 XmlSerializer。</span><span class="sxs-lookup"><span data-stu-id="c40cb-260">This tries to use the Data Contract serializer and uses the XmlSerializer if that fails.</span></span><br /><br /> <span data-ttu-id="c40cb-261">缩写形式：`/ser`</span><span class="sxs-lookup"><span data-stu-id="c40cb-261">Short Form: `/ser`</span></span>|
|<span data-ttu-id="c40cb-262">/serializer:DataContractSerializer</span><span class="sxs-lookup"><span data-stu-id="c40cb-262">/serializer:DataContractSerializer</span></span>|<span data-ttu-id="c40cb-263">生成使用数据协定序列化程序进行序列化和反序列化的数据类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-263">Generates data types that use the Data Contract Serializer for serialization and deserialization.</span></span><br /><br /> <span data-ttu-id="c40cb-264">缩写形式：`/ser:DataContractSerializer`</span><span class="sxs-lookup"><span data-stu-id="c40cb-264">Short Form: `/ser:DataContractSerializer`</span></span>|
|<span data-ttu-id="c40cb-265">/serializer:XmlSerializer</span><span class="sxs-lookup"><span data-stu-id="c40cb-265">/serializer:XmlSerializer</span></span>|<span data-ttu-id="c40cb-266">生成使用 <xref:System.Xml.Serialization.XmlSerializer> 进行序列化和反序列化的数据类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-266">Generates data types that use the <xref:System.Xml.Serialization.XmlSerializer> for serialization and deserialization.</span></span><br /><br /> <span data-ttu-id="c40cb-267">缩写形式：`/ser:XmlSerializer`</span><span class="sxs-lookup"><span data-stu-id="c40cb-267">Short Form: `/ser:XmlSerializer`</span></span>|
|<span data-ttu-id="c40cb-268">/targetClientVersion</span><span class="sxs-lookup"><span data-stu-id="c40cb-268">/targetClientVersion</span></span>|<span data-ttu-id="c40cb-269">指定应用程序面向 .NET Framework 的版本。</span><span class="sxs-lookup"><span data-stu-id="c40cb-269">Specify which version of .NET Framework the application is targeting.</span></span> <span data-ttu-id="c40cb-270">有效值为 `Version30` 和 `Version35`。</span><span class="sxs-lookup"><span data-stu-id="c40cb-270">Valid values are `Version30` and `Version35`.</span></span> <span data-ttu-id="c40cb-271">默认值为 `Version30`。</span><span class="sxs-lookup"><span data-stu-id="c40cb-271">The default value is `Version30`.</span></span><br /><br /> <span data-ttu-id="c40cb-272">缩写形式：`/tcv`</span><span class="sxs-lookup"><span data-stu-id="c40cb-272">Short Form: `/tcv`</span></span><br /><br /> <span data-ttu-id="c40cb-273">`Version30`：如果要为使用 WinFX 的客户端生成代码，请使用 `/tcv:Version30`。</span><span class="sxs-lookup"><span data-stu-id="c40cb-273">`Version30`: Use `/tcv:Version30` if you are generating code for clients that use WinFX.</span></span><br /><br /> <span data-ttu-id="c40cb-274">`Version35`：如果为使用 `/tcv:Version35` 的客户端生成代码，则使用 [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="c40cb-274">`Version35`: Use `/tcv:Version35` if you are generating code for clients that use [!INCLUDE[netfx35_short](../../../includes/netfx35-short-md.md)].</span></span> <span data-ttu-id="c40cb-275">如果将 `/tcv:Version35` 与 `/async` 开关一起使用，则会同时生成基于事件的异步方法和基于回调/委托的异步方法。</span><span class="sxs-lookup"><span data-stu-id="c40cb-275">When using `/tcv:Version35` with the `/async` switch, both event-based and callback/delegate-based asynchronous methods are generated.</span></span> <span data-ttu-id="c40cb-276">此外，还能够支持启用 LINQ 的数据集和 <xref:System.DateTimeOffset>。</span><span class="sxs-lookup"><span data-stu-id="c40cb-276">In addition, support for LINQ-enabled DataSets and <xref:System.DateTimeOffset> is enabled.</span></span>|
|<span data-ttu-id="c40cb-277">/wrapped</span><span class="sxs-lookup"><span data-stu-id="c40cb-277">/wrapped</span></span>|<span data-ttu-id="c40cb-278">控制是否对具有包装参数的 document-literal 样式的文档使用特殊大小写。</span><span class="sxs-lookup"><span data-stu-id="c40cb-278">Controls whether special-casing is used for document-literal styled documents with wrapped parameters.</span></span> <span data-ttu-id="c40cb-279">结合使用 **/wrapped**开关和[服务模型元数据实用工具（svcutil.exe）](servicemodel-metadata-utility-tool-svcutil-exe.md)工具来指定正常大小写。</span><span class="sxs-lookup"><span data-stu-id="c40cb-279">Use the **/wrapped** switch with the [Service Model Metadata Utility Tool (Svcutil.exe)](servicemodel-metadata-utility-tool-svcutil-exe.md) tool to specify normal casing.</span></span>|

> [!NOTE]
> <span data-ttu-id="c40cb-280">如果服务绑定是系统提供的绑定之一（请参阅[系统提供的绑定](system-provided-bindings.md)），并且 <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> 属性设置为 `None` 或 `Sign`，则 svcutil.exe 将使用 \<customBinding 生成配置文件[>](../configure-apps/file-schema/wcf/custombinding.md)元素，而不是预期的系统提供的元素。</span><span class="sxs-lookup"><span data-stu-id="c40cb-280">When the service binding is one of the system-provided bindings (see [System-Provided Bindings](system-provided-bindings.md)), and the <xref:System.ServiceModel.ServiceContractAttribute.ProtectionLevel%2A> property is set to either `None` or `Sign`, Svcutil generates a configuration file using the [\<customBinding>](../configure-apps/file-schema/wcf/custombinding.md) element instead of the expected system-provided element.</span></span> <span data-ttu-id="c40cb-281">例如，如果服务使用 `<wsHttpBinding>` 设置为 `ProtectionLevel` 的 `Sign` 元素，则生成的配置在绑定部分中将有 `<customBinding>`，而不是 `<wsHttpBinding>`。</span><span class="sxs-lookup"><span data-stu-id="c40cb-281">For example, if the service uses the `<wsHttpBinding>` element with the `ProtectionLevel` set to `Sign`, the generated configuration has `<customBinding>` in the bindings section instead of `<wsHttpBinding>`.</span></span> <span data-ttu-id="c40cb-282">有关保护级别的详细信息，请参阅[了解保护级别](understanding-protection-level.md)。</span><span class="sxs-lookup"><span data-stu-id="c40cb-282">For more information about the protection level, see [Understanding Protection Level](understanding-protection-level.md).</span></span>

### <a name="metadata-export"></a><span data-ttu-id="c40cb-283">元数据导出</span><span class="sxs-lookup"><span data-stu-id="c40cb-283">Metadata Export</span></span>

<span data-ttu-id="c40cb-284">Svcutil.exe 可以导出已编译程序集中服务、协定和数据类型的元数据。</span><span class="sxs-lookup"><span data-stu-id="c40cb-284">Svcutil.exe can export metadata for services, contracts and data types in compiled assemblies.</span></span> <span data-ttu-id="c40cb-285">若要导出服务的元数据，您必须使用 `/serviceName` 选项指定要导出的服务。</span><span class="sxs-lookup"><span data-stu-id="c40cb-285">To export metadata for a service, you must use the `/serviceName` option to specify the service you would like to export.</span></span> <span data-ttu-id="c40cb-286">若要导出程序集内的所有数据协定类型，应使用 `/dataContractOnly` 选项。</span><span class="sxs-lookup"><span data-stu-id="c40cb-286">To export all data contract types within an assembly, you should use the `/dataContractOnly` option.</span></span> <span data-ttu-id="c40cb-287">默认情况下，将为输入程序集中的所有服务协定导出元数据。</span><span class="sxs-lookup"><span data-stu-id="c40cb-287">By default, metadata is exported for all service contracts in the input assemblies.</span></span>

`svcutil.exe [/t:metadata] [/serviceName:<serviceConfigName>] [/dataContractOnly] <assemblyPath>*`

|<span data-ttu-id="c40cb-288">参数</span><span class="sxs-lookup"><span data-stu-id="c40cb-288">Argument</span></span>|<span data-ttu-id="c40cb-289">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-289">Description</span></span>|
|--------------|-----------------|
|`assemblyPath`|<span data-ttu-id="c40cb-290">指定程序集的路径，该程序集包含要导出的服务、协定或数据协定类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-290">Specifies the path to an assembly that contains services, contracts or data contract types to be exported.</span></span> <span data-ttu-id="c40cb-291">可以使用标准命令行通配符提供多个文件作为输入。</span><span class="sxs-lookup"><span data-stu-id="c40cb-291">Standard command line wildcards can be used to provide multiple files as input.</span></span>|

|<span data-ttu-id="c40cb-292">选项</span><span class="sxs-lookup"><span data-stu-id="c40cb-292">Option</span></span>|<span data-ttu-id="c40cb-293">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-293">Description</span></span>|
|------------|-----------------|
|<span data-ttu-id="c40cb-294">/serviceName： \<serviceConfigName ></span><span class="sxs-lookup"><span data-stu-id="c40cb-294">/serviceName:\<serviceConfigName></span></span>|<span data-ttu-id="c40cb-295">指定要导出的服务的配置名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-295">Specifies the configuration name of a service to be exported.</span></span> <span data-ttu-id="c40cb-296">如果使用此选项，则必须传递包含关联配置文件的可执行程序集作为输入。</span><span class="sxs-lookup"><span data-stu-id="c40cb-296">If this option is used, an executable assembly with an associated configuration file must be passed as input.</span></span> <span data-ttu-id="c40cb-297">Svcutil.exe 将为服务配置搜索所有关联的配置文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-297">Svcutil.exe searches all associated configuration files for the service configuration.</span></span> <span data-ttu-id="c40cb-298">如果配置文件包含任何扩展类型，则包含这些类型的程序集必须位于 GAC 中，或者必须使用 `/reference` 选项显式提供。</span><span class="sxs-lookup"><span data-stu-id="c40cb-298">If the configuration files contain any extension types, the assemblies that contain these types must either be in the GAC or explicitly provided using the `/reference` option.</span></span>|
|<span data-ttu-id="c40cb-299">/reference： \<file 路径 ></span><span class="sxs-lookup"><span data-stu-id="c40cb-299">/reference:\<file path></span></span>|<span data-ttu-id="c40cb-300">将指定程序集添加到用于解析类型引用的一组程序集中。</span><span class="sxs-lookup"><span data-stu-id="c40cb-300">Adds the specified assembly to the set of assemblies used for resolving type references.</span></span> <span data-ttu-id="c40cb-301">如果要导出或验证使用在配置中注册的第三方扩展（行为、绑定和绑定元素）的服务，请使用此选项找到不在 GAC 中的扩展程序集。</span><span class="sxs-lookup"><span data-stu-id="c40cb-301">If you are exporting or validating a service that uses 3rd-party extensions (Behaviors, Bindings and BindingElements) registered in configuration, use this option to locate extension assemblies that are not in the GAC.</span></span><br /><br /> <span data-ttu-id="c40cb-302">缩写形式：`/r`</span><span class="sxs-lookup"><span data-stu-id="c40cb-302">Short Form: `/r`</span></span>|
|<span data-ttu-id="c40cb-303">/dataContractOnly</span><span class="sxs-lookup"><span data-stu-id="c40cb-303">/dataContractOnly</span></span>|<span data-ttu-id="c40cb-304">只对数据协定类型进行操作。</span><span class="sxs-lookup"><span data-stu-id="c40cb-304">Operates on data contract types only.</span></span> <span data-ttu-id="c40cb-305">不会处理服务协定。</span><span class="sxs-lookup"><span data-stu-id="c40cb-305">Service Contracts are not processed.</span></span><br /><br /> <span data-ttu-id="c40cb-306">只应为此选项指定本地元数据文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-306">You should only specify local metadata files for this option.</span></span><br /><br /> <span data-ttu-id="c40cb-307">缩写形式：`/dconly`</span><span class="sxs-lookup"><span data-stu-id="c40cb-307">Short Form: `/dconly`</span></span>|
|<span data-ttu-id="c40cb-308">/excludeType： \<type ></span><span class="sxs-lookup"><span data-stu-id="c40cb-308">/excludeType:\<type></span></span>|<span data-ttu-id="c40cb-309">指定要从导出中排除的类型的完全限定或程序集限定名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-309">Specifies the fully-qualified or assembly-qualified name of a type to be excluded from export.</span></span> <span data-ttu-id="c40cb-310">在为服务或一组服务协定导出元数据时，可以使用此选项来防止导出某些类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-310">This option can be used when exporting metadata for a service, or a set of service contracts to exclude types from being exported.</span></span> <span data-ttu-id="c40cb-311">此选项不能与 `/dconly` 选项一起使用。</span><span class="sxs-lookup"><span data-stu-id="c40cb-311">This option cannot be used together with the `/dconly` option.</span></span><br /><br /> <span data-ttu-id="c40cb-312">如果有包含多个服务的单一程序集，并且每个服务都使用具有相同 XSD 名称的单独的类，则您应为此开关指定服务名称，而不是 XSD 类名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-312">When you have a single assembly containing multiple services, and each uses separate classes with the same XSD name, you should specify the service name instead of the XSD class name for this switch.</span></span><br /><br /> <span data-ttu-id="c40cb-313">不支持 XSD 或数据协定类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-313">XSD or data contract types are not supported.</span></span><br /><br /> <span data-ttu-id="c40cb-314">缩写形式：`/et`</span><span class="sxs-lookup"><span data-stu-id="c40cb-314">Short Form: `/et`</span></span>|

### <a name="service-validation"></a><span data-ttu-id="c40cb-315">服务验证</span><span class="sxs-lookup"><span data-stu-id="c40cb-315">Service Validation</span></span>

<span data-ttu-id="c40cb-316">可以使用验证在不承载服务的情况下检测服务实现中的错误。</span><span class="sxs-lookup"><span data-stu-id="c40cb-316">Validation can be used to detect errors in service implementations without hosting the service.</span></span> <span data-ttu-id="c40cb-317">必须使用 `/serviceName` 选项指示要验证的服务。</span><span class="sxs-lookup"><span data-stu-id="c40cb-317">You must use the `/serviceName` option to indicate the service you want to validate.</span></span>

`svcutil.exe /validate /serviceName:<serviceConfigName>  <assemblyPath>*`

|<span data-ttu-id="c40cb-318">参数</span><span class="sxs-lookup"><span data-stu-id="c40cb-318">Argument</span></span>|<span data-ttu-id="c40cb-319">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-319">Description</span></span>|
|--------------|-----------------|
|`assemblyPath`|<span data-ttu-id="c40cb-320">指定程序集的路径，该程序集包含要验证的服务类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-320">Specifies the path to an assembly that contains service types to be validated.</span></span> <span data-ttu-id="c40cb-321">程序集必须具有相关联的配置文件才能提供服务配置。</span><span class="sxs-lookup"><span data-stu-id="c40cb-321">The assembly must have an associated configuration file to provide service configuration.</span></span> <span data-ttu-id="c40cb-322">可以使用标准命令行通配符来提供多个程序集。</span><span class="sxs-lookup"><span data-stu-id="c40cb-322">Standard command-line wildcards can be used to provide multiple assemblies.</span></span>|

|<span data-ttu-id="c40cb-323">选项</span><span class="sxs-lookup"><span data-stu-id="c40cb-323">Option</span></span>|<span data-ttu-id="c40cb-324">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-324">Description</span></span>|
|------------|-----------------|
|<span data-ttu-id="c40cb-325">/validate</span><span class="sxs-lookup"><span data-stu-id="c40cb-325">/validate</span></span>|<span data-ttu-id="c40cb-326">验证 `/serviceName` 选项指定的服务实现。</span><span class="sxs-lookup"><span data-stu-id="c40cb-326">Validates a service implementation specified by the `/serviceName` option.</span></span> <span data-ttu-id="c40cb-327">如果使用此选项，则必须传递包含关联配置文件的可执行程序集作为输入。</span><span class="sxs-lookup"><span data-stu-id="c40cb-327">If this option is used, an executable assembly with an associated configuration file must be passed as input.</span></span><br /><br /> <span data-ttu-id="c40cb-328">缩写形式：`/v`</span><span class="sxs-lookup"><span data-stu-id="c40cb-328">Short Form: `/v`</span></span>|
|<span data-ttu-id="c40cb-329">/serviceName： \<serviceConfigName ></span><span class="sxs-lookup"><span data-stu-id="c40cb-329">/serviceName:\<serviceConfigName></span></span>|<span data-ttu-id="c40cb-330">指定要验证的服务的配置名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-330">Specifies the configuration name of a service to be validated.</span></span> <span data-ttu-id="c40cb-331">Svcutil.exe 将为服务配置搜索所有输入程序集的所有关联配置文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-331">Svcutil.exe searches all associated configuration files of all input assemblies for the service configuration.</span></span> <span data-ttu-id="c40cb-332">如果配置文件包含任何扩展类型，则包含这些类型的程序集必须位于 GAC 中，或者必须使用 `/reference` 选项显式提供。</span><span class="sxs-lookup"><span data-stu-id="c40cb-332">If the configuration files contain any extension types, the assemblies that contains these types must either be in the GAC or explicitly provided using the `/reference` option.</span></span>|
|<span data-ttu-id="c40cb-333">/reference： \<file 路径 ></span><span class="sxs-lookup"><span data-stu-id="c40cb-333">/reference:\<file path></span></span>|<span data-ttu-id="c40cb-334">将指定程序集添加到用于解析类型引用的一组程序集中。</span><span class="sxs-lookup"><span data-stu-id="c40cb-334">Adds the specified assembly to the set of assemblies used for resolving type references.</span></span> <span data-ttu-id="c40cb-335">如果要导出或验证使用在配置中注册的第三方扩展（行为、绑定和绑定元素）的服务，请使用此选项找到不在 GAC 中的扩展程序集。</span><span class="sxs-lookup"><span data-stu-id="c40cb-335">If you are exporting or validating a service that uses 3rd-party extensions (Behaviors, Bindings and BindingElements) registered in configuration, use this option to locate extension assemblies that are not in the GAC.</span></span><br /><br /> <span data-ttu-id="c40cb-336">缩写形式：`/r`</span><span class="sxs-lookup"><span data-stu-id="c40cb-336">Short Form: `/r`</span></span>|
|<span data-ttu-id="c40cb-337">/dataContractOnly</span><span class="sxs-lookup"><span data-stu-id="c40cb-337">/dataContractOnly</span></span>|<span data-ttu-id="c40cb-338">只对数据协定类型进行操作。</span><span class="sxs-lookup"><span data-stu-id="c40cb-338">Operates on data contract types only.</span></span> <span data-ttu-id="c40cb-339">不会处理服务协定。</span><span class="sxs-lookup"><span data-stu-id="c40cb-339">Service Contracts are not processed.</span></span><br /><br /> <span data-ttu-id="c40cb-340">只应为此选项指定本地元数据文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-340">You should only specify local metadata files for this option.</span></span><br /><br /> <span data-ttu-id="c40cb-341">缩写形式：`/dconly`</span><span class="sxs-lookup"><span data-stu-id="c40cb-341">Short Form: `/dconly`</span></span>|
|<span data-ttu-id="c40cb-342">/excludeType： \<type ></span><span class="sxs-lookup"><span data-stu-id="c40cb-342">/excludeType:\<type></span></span>|<span data-ttu-id="c40cb-343">指定要从验证中排除的类型的完全限定或程序集限定名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-343">Specifies the fully-qualified or assembly-qualified name of a type to be excluded from validation.</span></span><br /><br /> <span data-ttu-id="c40cb-344">缩写形式：`/et`</span><span class="sxs-lookup"><span data-stu-id="c40cb-344">Short Form: `/et`</span></span>|

### <a name="metadata-download"></a><span data-ttu-id="c40cb-345">元数据下载</span><span class="sxs-lookup"><span data-stu-id="c40cb-345">Metadata Download</span></span>

<span data-ttu-id="c40cb-346">可以使用 Svcutil.exe 从运行的服务中下载元数据，并将元数据保存到本地文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-346">Svcutil.exe can be used to download metadata from running services, and save the metadata to local files.</span></span> <span data-ttu-id="c40cb-347">若要下载元数据，您必须指定 `/t:metadata` 选项。</span><span class="sxs-lookup"><span data-stu-id="c40cb-347">To download metadata, you must specify the `/t:metadata` option.</span></span> <span data-ttu-id="c40cb-348">否则，将生成客户端代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-348">Otherwise, client code is generated.</span></span> <span data-ttu-id="c40cb-349">对于 HTTP 和 HTTPS URL 方案，Svcutil.exe 会尝试使用 WS-Metadata Exchange 和 DISCO 检索元数据。</span><span class="sxs-lookup"><span data-stu-id="c40cb-349">For HTTP and HTTPS URL schemes, Svcutil.exe attempts to retrieve metadata using WS-Metadata Exchange and DISCO.</span></span> <span data-ttu-id="c40cb-350">对于所有其他 URL 方案，Svcutil.exe 只使用 WS-Metadata Exchange。</span><span class="sxs-lookup"><span data-stu-id="c40cb-350">For all other URL schemes, Svcutil.exe only uses WS-Metadata Exchange.</span></span>

<span data-ttu-id="c40cb-351">Svcutil 会同时发出以下元数据请求以检索元数据。</span><span class="sxs-lookup"><span data-stu-id="c40cb-351">Svcutil issues the following metadata requests simultaneously to retrieve metadata.</span></span>

- <span data-ttu-id="c40cb-352">针对所提供地址的 MEX (WS-Transfer) 请求</span><span class="sxs-lookup"><span data-stu-id="c40cb-352">MEX (WS-Transfer) request to the supplied address</span></span>

- <span data-ttu-id="c40cb-353">针对所提供地址的 MEX 请求（附加有 /mex）</span><span class="sxs-lookup"><span data-stu-id="c40cb-353">MEX request to the supplied address with /mex appended</span></span>

- <span data-ttu-id="c40cb-354">针对所提供地址的 DISCO 请求（使用 ASMX 中的 DiscoveryClientProtocol）。</span><span class="sxs-lookup"><span data-stu-id="c40cb-354">DISCO request (using the DiscoveryClientProtocol from ASMX) to the supplied address.</span></span>

<span data-ttu-id="c40cb-355">默认情况下，Svcutil.exe 使用 <xref:System.ServiceModel.Description.MetadataExchangeBindings> 类中定义的绑定进行 MEX 请求。</span><span class="sxs-lookup"><span data-stu-id="c40cb-355">By default, Svcutil.exe uses the bindings defined in the <xref:System.ServiceModel.Description.MetadataExchangeBindings> class to make MEX requests.</span></span> <span data-ttu-id="c40cb-356">若要配置用于 WS-Metadata Exchange 的绑定，你必须在使用 IMetadataExchange 协定的配置中定义一个客户端终结点。</span><span class="sxs-lookup"><span data-stu-id="c40cb-356">To configure the binding used for WS-Metadata Exchange, you must define a client endpoint in configuration that uses the IMetadataExchange contract.</span></span> <span data-ttu-id="c40cb-357">可以在 Svcutil.exe 的配置文件中定义此终结点，也可以在使用 `/svcutilConfig` 选项指定的另一个配置文件中定义。</span><span class="sxs-lookup"><span data-stu-id="c40cb-357">This can be defined either in the configuration file of Svcutil.exe, or in another configuration file specified using the `/svcutilConfig` option.</span></span>

`svcutil.exe /t:metadata  <url>* | <epr>`

|<span data-ttu-id="c40cb-358">参数</span><span class="sxs-lookup"><span data-stu-id="c40cb-358">Argument</span></span>|<span data-ttu-id="c40cb-359">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-359">Description</span></span>|
|--------------|-----------------|
|`url`|<span data-ttu-id="c40cb-360">可提供元数据的服务终结点的 URL，或是联机承载的元数据文档的 URL。</span><span class="sxs-lookup"><span data-stu-id="c40cb-360">The URL to a service endpoint that provides metadata or to a metadata document hosted online.</span></span>|
|`epr`|<span data-ttu-id="c40cb-361">XML 文件的路径，该文件包含支持 WS-Metadata Exchange 的服务终结点的 WS-Addressing EndpointReference。</span><span class="sxs-lookup"><span data-stu-id="c40cb-361">The path to an XML file that contains a WS-Addressing EndpointReference for a service endpoint that supports WS-Metadata Exchange.</span></span>|

### <a name="xmlserializer-type-generation"></a><span data-ttu-id="c40cb-362">XmlSerializer 类型生成</span><span class="sxs-lookup"><span data-stu-id="c40cb-362">XmlSerializer Type Generation</span></span>

<span data-ttu-id="c40cb-363">如果服务和客户端应用程序使用可用 <xref:System.Xml.Serialization.XmlSerializer> 进行序列化的数据类型，则会在运行时生成并编译这些数据类型的序列化代码，从而导致启动性能降低。</span><span class="sxs-lookup"><span data-stu-id="c40cb-363">Services and client applications that use data types that are serializable using the <xref:System.Xml.Serialization.XmlSerializer> generate and compile serialization code for those data types at runtime, which can result in slow start-up performance.</span></span>

> [!NOTE]
> <span data-ttu-id="c40cb-364">预生成的序列化代码只能在客户端应用程序中使用，不能在服务中使用。</span><span class="sxs-lookup"><span data-stu-id="c40cb-364">Pre-generated serialization code can only be used in client applications and not in services.</span></span>

<span data-ttu-id="c40cb-365">Svcutil.exe 可依据应用程序的已编译程序集生成必要的 C# 序列化代码，因而可提高这些应用程序的启动性能。</span><span class="sxs-lookup"><span data-stu-id="c40cb-365">Svcutil.exe can generate the necessary C# serialization code from the compiled assemblies for the application, thus improving start-up performance for these applications.</span></span> <span data-ttu-id="c40cb-366">有关详细信息，请参阅[如何：使用 XmlSerializer 改善 WCF 客户端应用程序的启动时间](./feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md)。</span><span class="sxs-lookup"><span data-stu-id="c40cb-366">For more information, see [How to: Improve the Startup Time of WCF Client Applications using the XmlSerializer](./feature-details/startup-time-of-wcf-client-applications-using-the-xmlserializer.md).</span></span>

> [!NOTE]
> <span data-ttu-id="c40cb-367">Svcutil.exe 只会为输入程序集中的服务协定使用的类型生成代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-367">Svcutil.exe only generates code for types used by Service Contracts found in the input assemblies.</span></span>

`svcutil.exe /t:xmlSerializer  <assemblyPath>*`

|<span data-ttu-id="c40cb-368">参数</span><span class="sxs-lookup"><span data-stu-id="c40cb-368">Argument</span></span>|<span data-ttu-id="c40cb-369">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-369">Description</span></span>|
|--------------|-----------------|
|`assemblyPath`|<span data-ttu-id="c40cb-370">指定包含服务协定类型的程序集的路径。</span><span class="sxs-lookup"><span data-stu-id="c40cb-370">Specifies the path to an assembly that contains service contract types.</span></span> <span data-ttu-id="c40cb-371">为每个协定中的所有 Xml 可序列化类型生成序列化类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-371">Serialization types are generated for all Xml Serializable types in each contract.</span></span>|

|<span data-ttu-id="c40cb-372">选项</span><span class="sxs-lookup"><span data-stu-id="c40cb-372">Option</span></span>|<span data-ttu-id="c40cb-373">描述</span><span class="sxs-lookup"><span data-stu-id="c40cb-373">Description</span></span>|
|------------|-----------------|
|<span data-ttu-id="c40cb-374">/reference： \<file 路径 ></span><span class="sxs-lookup"><span data-stu-id="c40cb-374">/reference:\<file path></span></span>|<span data-ttu-id="c40cb-375">将指定程序集添加到用于解析类型引用的一组程序集中。</span><span class="sxs-lookup"><span data-stu-id="c40cb-375">Adds the specified assembly to the set of assemblies used for resolving type references.</span></span><br /><br /> <span data-ttu-id="c40cb-376">缩写形式：`/r`</span><span class="sxs-lookup"><span data-stu-id="c40cb-376">Short Form: `/r`</span></span>|
|<span data-ttu-id="c40cb-377">/excludeType： \<type ></span><span class="sxs-lookup"><span data-stu-id="c40cb-377">/excludeType:\<type></span></span>|<span data-ttu-id="c40cb-378">指定要从导出或验证中排除的类型的完全限定或程序集限定名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-378">Specifies the fully-qualified or assembly-qualified name of a type to be excluded from export or validation.</span></span><br /><br /> <span data-ttu-id="c40cb-379">缩写形式：`/et`</span><span class="sxs-lookup"><span data-stu-id="c40cb-379">Short Form: `/et`</span></span>|
|<span data-ttu-id="c40cb-380">/out： \<file ></span><span class="sxs-lookup"><span data-stu-id="c40cb-380">/out:\<file></span></span>|<span data-ttu-id="c40cb-381">为生成的代码指定文件名。</span><span class="sxs-lookup"><span data-stu-id="c40cb-381">Specifies the filename for the generated code.</span></span> <span data-ttu-id="c40cb-382">如果将多个程序集作为输入传递到工具，则会忽略此选项。</span><span class="sxs-lookup"><span data-stu-id="c40cb-382">This option is ignored when multiple assemblies are passed as input to the tool.</span></span><br /><br /> <span data-ttu-id="c40cb-383">默认设置：派生自程序集名称。</span><span class="sxs-lookup"><span data-stu-id="c40cb-383">Default: Derived from the assembly name.</span></span><br /><br /> <span data-ttu-id="c40cb-384">缩写形式：`/o`</span><span class="sxs-lookup"><span data-stu-id="c40cb-384">Short Form: `/o`</span></span>|
|<span data-ttu-id="c40cb-385">/UseSerializerForFaults</span><span class="sxs-lookup"><span data-stu-id="c40cb-385">/UseSerializerForFaults</span></span>|<span data-ttu-id="c40cb-386">指定应该使用 <xref:System.Xml.Serialization.XmlSerializer>（而不是默认的 <xref:System.Runtime.Serialization.DataContractSerializer>）来读取和写入错误。</span><span class="sxs-lookup"><span data-stu-id="c40cb-386">Specifies that the <xref:System.Xml.Serialization.XmlSerializer> should be used for reading and writing faults, instead of the default <xref:System.Runtime.Serialization.DataContractSerializer>.</span></span>|

## <a name="examples"></a><span data-ttu-id="c40cb-387">示例</span><span class="sxs-lookup"><span data-stu-id="c40cb-387">Examples</span></span>

<span data-ttu-id="c40cb-388">以下命令将依据运行的服务或联机元数据文档生成客户端代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-388">The following command generates client code from a running service or online metadata documents.</span></span>

`svcutil http://service/metadataEndpoint`

<span data-ttu-id="c40cb-389">以下命令将依据本地元数据文档生成客户端代码。</span><span class="sxs-lookup"><span data-stu-id="c40cb-389">The following command generates client code from local metadata documents.</span></span>

`svcutil *.wsdl *.xsd /language:C#`

<span data-ttu-id="c40cb-390">以下命令将依据本地架构文档用 Visual Basic 生成数据协定类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-390">The following command generates data contract types in Visual Basic from local schema documents.</span></span>

`svcutil /dconly *.xsd /language:VB`

<span data-ttu-id="c40cb-391">以下命令从运行的服务中下载元数据文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-391">The following command downloads metadata documents from running services.</span></span>

`svcutil /t:metadata http://service/metadataEndpoint`

<span data-ttu-id="c40cb-392">以下命令为程序集中的服务协定和关联的类型生成元数据文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-392">The following command generates metadata documents for service contracts and associated types in an assembly.</span></span>

`svcutil myAssembly.dll`

<span data-ttu-id="c40cb-393">以下命令为程序集中的服务以及所有关联的服务协定和数据类型生成元数据文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-393">The following command generates metadata documents for a service, and all associated service contracts and data types in an assembly.</span></span>

`svcutil myServiceHost.exe /serviceName:myServiceName`

<span data-ttu-id="c40cb-394">以下命令为程序集中的数据类型生成元数据文档。</span><span class="sxs-lookup"><span data-stu-id="c40cb-394">The following command generates metadata documents for data types in an assembly.</span></span>

`svcutil myServiceHost.exe /dconly`

<span data-ttu-id="c40cb-395">以下命令验证服务主机。</span><span class="sxs-lookup"><span data-stu-id="c40cb-395">The following command verifies service hosting.</span></span>

`svcutil /validate /serviceName:myServiceName myServiceHost.exe`

<span data-ttu-id="c40cb-396">以下命令为程序集中任何服务协定使用的 <xref:System.Xml.Serialization.XmlSerializer> 类型生成序列化类型。</span><span class="sxs-lookup"><span data-stu-id="c40cb-396">The following command generates serialization types for <xref:System.Xml.Serialization.XmlSerializer> types used by any service contracts in the assembly.</span></span>

`svcutil /t:xmlserializer myContractLibrary.exe`

## <a name="maximum-nametable-character-count-quota"></a><span data-ttu-id="c40cb-397">最大名称表字符计数配额</span><span class="sxs-lookup"><span data-stu-id="c40cb-397">Maximum Nametable Character Count Quota</span></span>

<span data-ttu-id="c40cb-398">使用 svcutil 生成服务的元数据时，您会收到以下消息：</span><span class="sxs-lookup"><span data-stu-id="c40cb-398">When using svcutil to generate metadata for a service, you may get the following message:</span></span>

<span data-ttu-id="c40cb-399">错误：无法从 `http://localhost:8000/somesservice/mex` 中获取元数据，因为读取 XML 数据时超过了最大字符数字符计数配额（16384）。</span><span class="sxs-lookup"><span data-stu-id="c40cb-399">Error: Cannot obtain Metadata from `http://localhost:8000/somesservice/mex` The maximum nametable character count quota (16384) has been exceeded while reading XML data.</span></span> <span data-ttu-id="c40cb-400">名称表是用于存储在处理 XML 时所遇到的字符串的数据结构 - 具有非重复元素名称、特性名称和特性值的长 XML 文档可能会触发此配额。</span><span class="sxs-lookup"><span data-stu-id="c40cb-400">The nametable is a data structure used to store strings encountered during XML processing - long XML documents with non-repeating element names, attribute names and attribute values may trigger this quota.</span></span> <span data-ttu-id="c40cb-401">通过更改在创建 XML 读取器时所使用的 XmlDictionaryReaderQuotas 对象的 MaxNameTableCharCount 属性，可增加此配额。</span><span class="sxs-lookup"><span data-stu-id="c40cb-401">This quota may be increased by changing the MaxNameTableCharCount property on the XmlDictionaryReaderQuotas object used when creating the XML reader.</span></span>

<span data-ttu-id="c40cb-402">如果您请求某个服务的元数据时返回大 WSDL 文件，则该服务会导致此错误。</span><span class="sxs-lookup"><span data-stu-id="c40cb-402">This error can be caused by a service that returns a large WSDL file when you request its metadata.</span></span> <span data-ttu-id="c40cb-403">问题在于超过了 svcutil.exe 工具的字符配额。</span><span class="sxs-lookup"><span data-stu-id="c40cb-403">The problem is that the character quota for the svcutil.exe tool is exceeded.</span></span> <span data-ttu-id="c40cb-404">设置此值是为了帮助防止遭受拒绝服务 (dos) 攻击。</span><span class="sxs-lookup"><span data-stu-id="c40cb-404">This value is set to help prevent denial of service (dos) attacks.</span></span> <span data-ttu-id="c40cb-405">您可以通过为 svcutil 指定下面的配置文件来增加此配额。</span><span class="sxs-lookup"><span data-stu-id="c40cb-405">You can increase this quota by specifying the following config file for svcutil.</span></span>

<span data-ttu-id="c40cb-406">下面的配置文件演示如何设置 svcutil 的读取器配额</span><span class="sxs-lookup"><span data-stu-id="c40cb-406">The following config file shows how to set the reader quotas for svcutil</span></span>

```xml
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.serviceModel>
        <bindings>
            <customBinding>
                <binding name="MyBinding">
                    <textMessageEncoding>
                        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                            maxArrayLength="2147483647" maxBytesPerRead="2147483647" maxNameTableCharCount="2147483647" />
                    </textMessageEncoding>
                    <httpTransport maxReceivedMessageSize="2147483647" maxBufferSize="2147483647" />
                </binding>
            </customBinding>
        </bindings>
        <client>
            <endpoint binding="customBinding" bindingConfiguration="MyBinding"
                contract="IMetadataExchange"
                name="http" />
        </client>
    </system.serviceModel>
</configuration>
```

<span data-ttu-id="c40cb-407">新建一个名为 svcutil.exe.config 的文件，再将 XML 示例代码复制到该文件中。</span><span class="sxs-lookup"><span data-stu-id="c40cb-407">Create a new file called svcutil.exe.config and copy the XML example code into it.</span></span> <span data-ttu-id="c40cb-408">然后将该文件放到与 svcutil.exe 相同的目录中。</span><span class="sxs-lookup"><span data-stu-id="c40cb-408">Then place the file in the same directory as svcutil.exe.</span></span> <span data-ttu-id="c40cb-409">下次运行 svcutil.exe 时，它会选取新的设置。</span><span class="sxs-lookup"><span data-stu-id="c40cb-409">The next time svcutil.exe is run it will pick up the new settings.</span></span>

## <a name="security-concerns"></a><span data-ttu-id="c40cb-410">安全问题</span><span class="sxs-lookup"><span data-stu-id="c40cb-410">Security Concerns</span></span>

<span data-ttu-id="c40cb-411">您应使用适当的访问控制列表 (ACL) 来保护 Svcutil.exe 的安装文件夹、Svcutil.config 以及 `/svcutilConfig` 所指向的文件。</span><span class="sxs-lookup"><span data-stu-id="c40cb-411">You should use the appropriate Access Control List (ACL) to protect Svcutil.exe's installation folder, Svcutil.config, and files being pointed to by `/svcutilConfig`.</span></span> <span data-ttu-id="c40cb-412">这样可以防止恶意扩展注册并运行。</span><span class="sxs-lookup"><span data-stu-id="c40cb-412">This can prevent malicious extensions from being registered and run.</span></span>

<span data-ttu-id="c40cb-413">此外，为了最大限度地减少安全漏洞的可能性，不应将不受信任的扩展添加为系统的一部分，或者使用 Svcutil.exe 的不受信任的代码提供程序。</span><span class="sxs-lookup"><span data-stu-id="c40cb-413">In addition, to minimize the chance that security be compromised, you should not add untrusted extensions to be part of the system or use untrusted code providers with Svcutil.exe.</span></span>

<span data-ttu-id="c40cb-414">最后，您不应在应用程序的中间层中使用该工具，因为它可能会导致当前进程拒绝服务。</span><span class="sxs-lookup"><span data-stu-id="c40cb-414">Finally, you should not use the tool in the middle-tier of your application, as it may cause denial-of-service to the current process.</span></span>

## <a name="see-also"></a><span data-ttu-id="c40cb-415">请参阅</span><span class="sxs-lookup"><span data-stu-id="c40cb-415">See also</span></span>

- <xref:System.Runtime.Serialization.DataContractAttribute>
- <xref:System.Runtime.Serialization.DataMemberAttribute>
- [<span data-ttu-id="c40cb-416">如何：创建客户端</span><span class="sxs-lookup"><span data-stu-id="c40cb-416">How to: Create a Client</span></span>](how-to-create-a-wcf-client.md)
