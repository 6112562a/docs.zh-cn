---
title: 承载服务
ms.date: 03/30/2017
helpviewer_keywords:
- hosting services [WCF]
ms.assetid: 192be927-6be2-4fda-98f0-e513c4881acc
ms.openlocfilehash: 208841d880ffcbfb2bbeb9e235cc8cdf0fa2f041
ms.sourcegitcommit: 6b308cf6d627d78ee36dbbae8972a310ac7fd6c8
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 01/23/2019
ms.locfileid: "54637919"
---
# <a name="hosting-services"></a><span data-ttu-id="0d608-102">承载服务</span><span class="sxs-lookup"><span data-stu-id="0d608-102">Hosting Services</span></span>
<span data-ttu-id="0d608-103">要变为活动状态，服务必须承载于创建它并控制它的上下文和生存期的运行时环境中。</span><span class="sxs-lookup"><span data-stu-id="0d608-103">To become active, a service must be hosted within a run-time environment that creates it and controls its context and lifetime.</span></span> <span data-ttu-id="0d608-104">Windows Communication Foundation (WCF) 服务设计为支持托管代码的任何 Windows 进程中运行。</span><span class="sxs-lookup"><span data-stu-id="0d608-104">Windows Communication Foundation (WCF) services are designed to run in any Windows process that supports managed code.</span></span>  
  
 <span data-ttu-id="0d608-105">WCF 提供了统一的编程模型，用于构建面向服务的应用程序。</span><span class="sxs-lookup"><span data-stu-id="0d608-105">WCF provides a unified programming model for building service-oriented applications.</span></span> <span data-ttu-id="0d608-106">此编程模型保持一致且独立于部署服务的运行时环境。</span><span class="sxs-lookup"><span data-stu-id="0d608-106">This programming model remains consistent and is independent of the run-time environment in which the service is deployed.</span></span> <span data-ttu-id="0d608-107">实际上，这意味着不管使用什么宿主选项，服务的代码看起来都非常类似。</span><span class="sxs-lookup"><span data-stu-id="0d608-107">In practice, this means that the code for your services looks much the same whatever the hosting option.</span></span>  
  
 <span data-ttu-id="0d608-108">这些宿主选项的范围是从在控制台应用程序内运行到在服务器环境（如在由 Internet 信息服务 (IIS) 或由 Windows 进程激活服务 (WAS) 管理的工作进程内运行的 Windows 服务）中运行。</span><span class="sxs-lookup"><span data-stu-id="0d608-108">These hosting options range from running inside a console application to server environments such as a Windows service running within a worker process managed by Internet Information Services (IIS) or by Windows Process Activation Service (WAS).</span></span> <span data-ttu-id="0d608-109">开发人员选择可满足服务的部署要求的宿主环境。</span><span class="sxs-lookup"><span data-stu-id="0d608-109">Developers choose the hosting environment that satisfies the service's deployment requirements.</span></span> <span data-ttu-id="0d608-110">这些要求可能源自部署应用程序的平台，它必须发送和接收消息的传输，或者进程回收的类型和为确保足够可用性所需的其他进程管理，或者某些其他管理或可靠性要求。</span><span class="sxs-lookup"><span data-stu-id="0d608-110">These requirements might derive from the platform on which the application is deployed, the transport on which it must send and receive messages, or on the type of process recycling and other process management required to ensure adequate availability, or on some other management or reliability requirements.</span></span> <span data-ttu-id="0d608-111">下一节提供了有关宿主选项的信息和指南。</span><span class="sxs-lookup"><span data-stu-id="0d608-111">The next section provides information and guidance on hosting options.</span></span>  
  
## <a name="hosting-options"></a><span data-ttu-id="0d608-112">宿主选项</span><span class="sxs-lookup"><span data-stu-id="0d608-112">Hosting Options</span></span>  
  
#### <a name="self-hosting-in-a-managed-application"></a><span data-ttu-id="0d608-113">托管应用程序中的自承载</span><span class="sxs-lookup"><span data-stu-id="0d608-113">Self-Hosting in a Managed Application</span></span>  
 <span data-ttu-id="0d608-114">可以在任何托管应用程序中承载 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-114">WCF services can be hosted in any managed application.</span></span> <span data-ttu-id="0d608-115">这是最灵活的选项，因为它需要部署最少的基础结构。</span><span class="sxs-lookup"><span data-stu-id="0d608-115">This is the most flexible option because it requires the least infrastructure to deploy.</span></span> <span data-ttu-id="0d608-116">在托管应用程序代码内嵌入服务代码，然后创建并打开 <xref:System.ServiceModel.ServiceHost> 的实例以使服务变为可用。</span><span class="sxs-lookup"><span data-stu-id="0d608-116">You embed the code for the service inside the managed application code and then create and open an instance of the <xref:System.ServiceModel.ServiceHost> to make the service available.</span></span> <span data-ttu-id="0d608-117">有关详细信息，请参阅[如何：承载于托管应用程序的 WCF 服务](../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md)。</span><span class="sxs-lookup"><span data-stu-id="0d608-117">For more information, see [How to: Host a WCF Service in a Managed Application](../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md).</span></span>  
  
 <span data-ttu-id="0d608-118">此选项可实现两个常见方案：在控制台应用程序和丰富的客户端应用程序，如基于 Windows Presentation Foundation (WPF) 或 Windows 窗体 (WinForms) 上运行的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-118">This option enables two common scenarios: WCF services running inside console applications and rich client applications such as those based on Windows Presentation Foundation (WPF) or Windows Forms (WinForms).</span></span> <span data-ttu-id="0d608-119">承载在控制台应用程序的 WCF 服务应用程序的开发阶段是通常很有用。</span><span class="sxs-lookup"><span data-stu-id="0d608-119">Hosting a WCF service inside a console application is typically useful during the application's development phase.</span></span> <span data-ttu-id="0d608-120">这使服务变得容易调试，从中跟踪信息以查明应用程序内发生的情况变得更加方便，以及通过将其复制到新的位置进行来回移动变得更加轻松。</span><span class="sxs-lookup"><span data-stu-id="0d608-120">This makes them easy to debug, easy to get trace information from to find out what is happening inside of the application, and easy to move around by copying them to new locations.</span></span> <span data-ttu-id="0d608-121">此宿主选项还使丰富客户端应用程序（如 [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] 和 WinForms 应用程序）与外部世界的通信变得很容易。</span><span class="sxs-lookup"><span data-stu-id="0d608-121">This hosting option also makes it easy for rich client applications, such as [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] and WinForms applications, to communicate with the outside world.</span></span> <span data-ttu-id="0d608-122">例如，使用的对等协作客户[!INCLUDE[avalon2](../../../includes/avalon2-md.md)]为其用户界面，并还承载 WCF 服务，允许其他客户端连接到它并共享信息。</span><span class="sxs-lookup"><span data-stu-id="0d608-122">For example, a peer-to-peer collaboration client that uses [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] for its user interface and also hosts a WCF service that allows other clients to connect to it and share information.</span></span>  
  
#### <a name="managed-windows-services"></a><span data-ttu-id="0d608-123">托管 Windows 服务</span><span class="sxs-lookup"><span data-stu-id="0d608-123">Managed Windows Services</span></span>  
 <span data-ttu-id="0d608-124">此宿主选项包括注册承载 WCF 服务作为托管 Windows 服务 （以前称为 NT 服务），以便该服务的进程生存期由服务控制管理器 (SCM) 控制的应用程序域 (AppDomain)Windows 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-124">This hosting option consists of registering the application domain (AppDomain) that hosts an WCF service as a managed Windows Service (formerly known as NT service) so that the process lifetime of the service is controlled by the service control manager (SCM) for Windows services.</span></span> <span data-ttu-id="0d608-125">与自承载选项一样，此类型的宿主环境要求作为应用程序的一部分编写某些宿主代码。</span><span class="sxs-lookup"><span data-stu-id="0d608-125">Like the self-hosting option, this type of hosting environment requires that some hosting code is written as part of the application.</span></span> <span data-ttu-id="0d608-126">该服务实现为这两个 Windows 服务和 WCF 服务，因为它继承自<xref:System.ServiceProcess.ServiceBase>类，以及从 WCF 服务协定接口。</span><span class="sxs-lookup"><span data-stu-id="0d608-126">The service is implemented as both a Windows Service and as an WCF service by causing it to inherit from the <xref:System.ServiceProcess.ServiceBase> class as well as from an WCF service contract interface.</span></span> <span data-ttu-id="0d608-127">然后创建 <xref:System.ServiceModel.ServiceHost> ，在被重写的 <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> 方法内打开它并在被重写的 <xref:System.ServiceProcess.ServiceBase.OnStop> 方法内关闭它。</span><span class="sxs-lookup"><span data-stu-id="0d608-127">The <xref:System.ServiceModel.ServiceHost> is then created and opened within an overridden <xref:System.ServiceProcess.ServiceBase.OnStart%28System.String%5B%5D%29> method and closed within an overridden <xref:System.ServiceProcess.ServiceBase.OnStop> method.</span></span> <span data-ttu-id="0d608-128">还必须实现从 <xref:System.Configuration.Install.Installer> 继承的安装程序类，以允许 Installutil.exe 工具将程序安装为 Windows 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-128">An installer class that inherits from <xref:System.Configuration.Install.Installer> must also be implemented to allow the program to be installed as a Windows Service by the Installutil.exe tool.</span></span> <span data-ttu-id="0d608-129">有关详细信息，请参阅[如何：承载 WCF 服务中托管的 Windows 服务](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)。</span><span class="sxs-lookup"><span data-stu-id="0d608-129">For more information, see [How to: Host a WCF Service in a Managed Windows Service](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md).</span></span> <span data-ttu-id="0d608-130">由托管 Windows 服务宿主选项启用的方案是在安全环境中没有消息激活 IIS 外部承载的长时间运行 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-130">The scenario enabled by the managed Windows Service hosting option is that of a long-running WCF service hosted outside of IIS in a secure environment that is not message-activated.</span></span> <span data-ttu-id="0d608-131">服务的生存期改由操作系统控制。</span><span class="sxs-lookup"><span data-stu-id="0d608-131">The lifetime of the service is controlled instead by the operating system.</span></span> <span data-ttu-id="0d608-132">此宿主选项在 Windows 的所有版本中都是可用的。</span><span class="sxs-lookup"><span data-stu-id="0d608-132">This hosting option is available in all versions of Windows.</span></span>  
  
#### <a name="internet-information-services-iis"></a><span data-ttu-id="0d608-133">Internet 信息服务 (IIS)</span><span class="sxs-lookup"><span data-stu-id="0d608-133">Internet Information Services (IIS)</span></span>  
 <span data-ttu-id="0d608-134">IIS 宿主选项与 [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] 集成在一起，并使用这些技术提供的功能，如进程回收、空闲关闭、进程状况监视和基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="0d608-134">The IIS hosting option is integrated with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] and uses the features these technologies offer, such as process recycling, idle shutdown, process health monitoring, and message-based activation.</span></span> <span data-ttu-id="0d608-135">在 [!INCLUDE[wxp](../../../includes/wxp-md.md)] 和 [!INCLUDE[ws2003](../../../includes/ws2003-md.md)] 操作系统上，这是作为必须高度可用且高度可伸缩的 Web 服务应用程序宿主的首选解决方案。</span><span class="sxs-lookup"><span data-stu-id="0d608-135">On the [!INCLUDE[wxp](../../../includes/wxp-md.md)] and [!INCLUDE[ws2003](../../../includes/ws2003-md.md)] operating systems, this is the preferred solution for hosting Web service applications that must be highly available and highly scalable.</span></span> <span data-ttu-id="0d608-136">IIS 还提供了客户期望企业级服务器产品具有的集成可管理性。</span><span class="sxs-lookup"><span data-stu-id="0d608-136">IIS also offers the integrated manageability that customers expect from an enterprise-class server product.</span></span> <span data-ttu-id="0d608-137">此宿主选项要求正确配置 IIS，但不需要编写任何承载代码作为应用程序的一部分。</span><span class="sxs-lookup"><span data-stu-id="0d608-137">This hosting option requires that IIS be properly configured, but it does not require that any hosting code be written as part of the application.</span></span> <span data-ttu-id="0d608-138">有关如何配置 IIS 承载的 WCF 服务，请参阅[如何：承载在 IIS 中的 WCF 服务](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)。</span><span class="sxs-lookup"><span data-stu-id="0d608-138">For more information about how to configure IIS hosting for a WCF service, see [How to: Host a WCF Service in IIS](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md).</span></span>  
  
 <span data-ttu-id="0d608-139">请注意，以 IIS 为宿主的服务只能使用 HTTP 传输。</span><span class="sxs-lookup"><span data-stu-id="0d608-139">Note that IIS-hosted services can only use the HTTP transport.</span></span> <span data-ttu-id="0d608-140">它在 IIS 5.1 中的实现在 [!INCLUDE[wxp](../../../includes/wxp-md.md)]中引入了一些限制。</span><span class="sxs-lookup"><span data-stu-id="0d608-140">Its implementation in IIS 5.1 has introduced some limitations in [!INCLUDE[wxp](../../../includes/wxp-md.md)].</span></span> <span data-ttu-id="0d608-141">提供的 WCF 服务由 IIS 5.1，在基于消息的激活[!INCLUDE[wxp](../../../includes/wxp-md.md)]阻止使用端口 80 进行通信的同一计算机上的任何其他自承载的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-141">The message-based activation provided for an WCF service by IIS 5.1 on [!INCLUDE[wxp](../../../includes/wxp-md.md)] blocks any other self-hosted WCF service on the same computer from using port 80 to communicate.</span></span> <span data-ttu-id="0d608-142">WCF 服务可以在与其他应用程序由托管时，相同的 AppDomain/应用程序池/工作进程中运行[!INCLUDE[iis601](../../../includes/iis601-md.md)]上[!INCLUDE[ws2003](../../../includes/ws2003-md.md)]。</span><span class="sxs-lookup"><span data-stu-id="0d608-142">WCF services can run in the same AppDomain/Application Pool/Worker Process as other applications when hosted by [!INCLUDE[iis601](../../../includes/iis601-md.md)] on [!INCLUDE[ws2003](../../../includes/ws2003-md.md)].</span></span> <span data-ttu-id="0d608-143">但是，由于 WCF 并[!INCLUDE[iis601](../../../includes/iis601-md.md)]两者都使用内核模式 HTTP 堆栈 (HTTP.sys)，[!INCLUDE[iis601](../../../includes/iis601-md.md)]可以与同一台计算机，与 IIS 5.1 上运行的其他自承载 WCF 服务共享端口 80。</span><span class="sxs-lookup"><span data-stu-id="0d608-143">But because WCF and [!INCLUDE[iis601](../../../includes/iis601-md.md)] both use the kernel-mode HTTP stack (HTTP.sys), [!INCLUDE[iis601](../../../includes/iis601-md.md)] can share port 80 with other self-hosted WCF services running on the same machine, unlike IIS 5.1.</span></span>  
  
#### <a name="windows-process-activation-service-was"></a><span data-ttu-id="0d608-144">Windows 进程激活服务 (WAS)</span><span class="sxs-lookup"><span data-stu-id="0d608-144">Windows Process Activation Service (WAS)</span></span>  
 <span data-ttu-id="0d608-145">Windows 进程激活服务 (WAS) 是在 [!INCLUDE[lserver](../../../includes/lserver-md.md)] 上也可用的 [!INCLUDE[wv](../../../includes/wv-md.md)]的新进程激活机制。</span><span class="sxs-lookup"><span data-stu-id="0d608-145">Windows Process Activation Service (WAS) is the new process activation mechanism for the [!INCLUDE[lserver](../../../includes/lserver-md.md)] that is also available on [!INCLUDE[wv](../../../includes/wv-md.md)].</span></span> <span data-ttu-id="0d608-146">它保留了熟悉的 [!INCLUDE[iis601](../../../includes/iis601-md.md)] 进程模型（应用程序池和基于消息的进程激活）和承载功能（如快速失败保护、运行状况监视和回收），但是它从激活体系结构中移除了对 HTTP 的依赖。</span><span class="sxs-lookup"><span data-stu-id="0d608-146">It retains the familiar [!INCLUDE[iis601](../../../includes/iis601-md.md)] process model (application pools and message-based process activation) and hosting features (such as rapid failure protection, health monitoring, and recycling), but it removes the dependency on HTTP from the activation architecture.</span></span> [!INCLUDE[iisver](../../../includes/iisver-md.md)] <span data-ttu-id="0d608-147">使用 WAS 通过 HTTP 完成基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="0d608-147">uses WAS to accomplish message-based activation over HTTP.</span></span> <span data-ttu-id="0d608-148">WCF 的其他组件也插入了 WAS 通过其他 WCF 支持的协议，例如 TCP、 MSMQ 和命名的管道提供基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="0d608-148">Additional WCF components also plug into WAS to provide message-based activation over the other protocols that WCF supports, such as TCP, MSMQ, and named pipes.</span></span> <span data-ttu-id="0d608-149">这样，使用通信协议的应用程序就可以使用 IIS 功能（如进程回收、快速失败保护）和仅对基于 HTTP 的应用程序可用的通用配置系统。</span><span class="sxs-lookup"><span data-stu-id="0d608-149">This allows applications that use communication protocols to use the IIS features such as process recycling, rapid fail protection, and the common configuration system that were only available to HTTP-based applications.</span></span>  
  
 <span data-ttu-id="0d608-150">此承载选项要求正确配置 WAS，但不需要编写任何承载代码作为应用程序的一部分。</span><span class="sxs-lookup"><span data-stu-id="0d608-150">This hosting option requires that WAS be properly configured, but it does not require you to write any hosting code as part of the application.</span></span> <span data-ttu-id="0d608-151">详细了解如何配置 WAS 托管，请参阅[如何：承载在 WAS 中的 WCF 服务](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md)。</span><span class="sxs-lookup"><span data-stu-id="0d608-151">For more information about how to configure WAS hosting, see [How to: Host a WCF Service in WAS](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md).</span></span>  
  
## <a name="choosing-a-hosting-environment"></a><span data-ttu-id="0d608-152">选择宿主环境</span><span class="sxs-lookup"><span data-stu-id="0d608-152">Choosing a Hosting Environment</span></span>  
 <span data-ttu-id="0d608-153">下表汇总了与每个宿主选项关联的一些主要优点和方案。</span><span class="sxs-lookup"><span data-stu-id="0d608-153">The following table summarizes some of the key benefits and scenarios associated with each of the hosting options.</span></span>  
  
|<span data-ttu-id="0d608-154">宿主环境</span><span class="sxs-lookup"><span data-stu-id="0d608-154">Hosting Environment</span></span>|<span data-ttu-id="0d608-155">常见方案</span><span class="sxs-lookup"><span data-stu-id="0d608-155">Common Scenarios</span></span>|<span data-ttu-id="0d608-156">主要优点和限制</span><span class="sxs-lookup"><span data-stu-id="0d608-156">Key Benefits and Limitations</span></span>|  
|-------------------------|----------------------|----------------------------------|  
|<span data-ttu-id="0d608-157">托管应用程序（“自承载”）</span><span class="sxs-lookup"><span data-stu-id="0d608-157">Managed Application ("Self-Hosted")</span></span>|<span data-ttu-id="0d608-158">在开发过程中使用的控制台应用程序。</span><span class="sxs-lookup"><span data-stu-id="0d608-158">-   Console applications used during development.</span></span><br /><span data-ttu-id="0d608-159">丰富 WinForm 和[!INCLUDE[avalon2](../../../includes/avalon2-md.md)]访问服务的客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="0d608-159">-   Rich WinForm and [!INCLUDE[avalon2](../../../includes/avalon2-md.md)] client applications accessing services.</span></span>|<span data-ttu-id="0d608-160">-灵活。</span><span class="sxs-lookup"><span data-stu-id="0d608-160">-   Flexible.</span></span><br /><span data-ttu-id="0d608-161">-易于部署。</span><span class="sxs-lookup"><span data-stu-id="0d608-161">-   Easy to deploy.</span></span><br /><span data-ttu-id="0d608-162">-未服务的企业解决方案。</span><span class="sxs-lookup"><span data-stu-id="0d608-162">-   Not an enterprise solution for services.</span></span>|  
|<span data-ttu-id="0d608-163">Windows 服务（以前称为 NT 服务）</span><span class="sxs-lookup"><span data-stu-id="0d608-163">Windows Services (formerly known as NT services)</span></span>|<span data-ttu-id="0d608-164">IIS 外部承载的长时间运行 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-164">-   A long-running WCF service hosted outside of IIS.</span></span>|<span data-ttu-id="0d608-165">服务进程生存期由操作系统，不是消息激活控制。</span><span class="sxs-lookup"><span data-stu-id="0d608-165">-   Service process lifetime controlled by the operating system, not message-activated.</span></span><br /><span data-ttu-id="0d608-166">-支持的所有版本的 Windows。</span><span class="sxs-lookup"><span data-stu-id="0d608-166">-   Supported by all versions of Windows.</span></span><br /><span data-ttu-id="0d608-167">安全环境。</span><span class="sxs-lookup"><span data-stu-id="0d608-167">-   Secure environment.</span></span>|  
|<span data-ttu-id="0d608-168">IIS 5.1、 [!INCLUDE[iis601](../../../includes/iis601-md.md)]</span><span class="sxs-lookup"><span data-stu-id="0d608-168">IIS 5.1, [!INCLUDE[iis601](../../../includes/iis601-md.md)]</span></span>|<span data-ttu-id="0d608-169">-运行 WCF 服务与并行[!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]使用 HTTP 协议在 Internet 上的内容。</span><span class="sxs-lookup"><span data-stu-id="0d608-169">-   Running a WCF service side-by-side with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] content on the Internet using the HTTP protocol.</span></span>|<span data-ttu-id="0d608-170">-进程回收。</span><span class="sxs-lookup"><span data-stu-id="0d608-170">-   Process recycling.</span></span><br /><span data-ttu-id="0d608-171">-空闲时关闭。</span><span class="sxs-lookup"><span data-stu-id="0d608-171">-   Idle shutdown.</span></span><br /><span data-ttu-id="0d608-172">-处理运行状况监视。</span><span class="sxs-lookup"><span data-stu-id="0d608-172">-   Process health monitoring.</span></span><br /><span data-ttu-id="0d608-173">-基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="0d608-173">-   Message-based activation.</span></span><br /><span data-ttu-id="0d608-174">-仅限 HTTP。</span><span class="sxs-lookup"><span data-stu-id="0d608-174">-   HTTP only.</span></span>|  
|<span data-ttu-id="0d608-175">Windows 进程激活服务 (WAS)</span><span class="sxs-lookup"><span data-stu-id="0d608-175">Windows Process Activation Service (WAS)</span></span>|<span data-ttu-id="0d608-176">-运行而无需使用各种传输协议在 Internet 上安装 IIS 的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-176">-   Running a WCF service without installing IIS on the Internet using various transport protocols.</span></span>|<span data-ttu-id="0d608-177">不需要 IIS。</span><span class="sxs-lookup"><span data-stu-id="0d608-177">-   IIS is not required.</span></span><br /><span data-ttu-id="0d608-178">-进程回收。</span><span class="sxs-lookup"><span data-stu-id="0d608-178">-   Process recycling.</span></span><br /><span data-ttu-id="0d608-179">-空闲时关闭。</span><span class="sxs-lookup"><span data-stu-id="0d608-179">-   Idle shutdown.</span></span><br /><span data-ttu-id="0d608-180">-处理运行状况监视。</span><span class="sxs-lookup"><span data-stu-id="0d608-180">-   Process health monitoring.</span></span><br /><span data-ttu-id="0d608-181">-基于消息的激活。</span><span class="sxs-lookup"><span data-stu-id="0d608-181">-   Message-based activation.</span></span><br /><span data-ttu-id="0d608-182">-适用于 HTTP、 TCP、 命名的管道和 MSMQ。</span><span class="sxs-lookup"><span data-stu-id="0d608-182">-   Works with HTTP, TCP, named pipes, and MSMQ.</span></span>|  
|<span data-ttu-id="0d608-183">IIS 7.0</span><span class="sxs-lookup"><span data-stu-id="0d608-183">IIS 7.0</span></span>|<span data-ttu-id="0d608-184">-运行 WCF 服务使用[!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]内容。</span><span class="sxs-lookup"><span data-stu-id="0d608-184">-   Running a WCF service with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] content.</span></span><br /><span data-ttu-id="0d608-185">-使用各种传输协议在 Internet 上运行的 WCF 服务。</span><span class="sxs-lookup"><span data-stu-id="0d608-185">-   Running a WCF service on the Internet using various transport protocols.</span></span>|<span data-ttu-id="0d608-186">-已优势。</span><span class="sxs-lookup"><span data-stu-id="0d608-186">-   WAS benefits.</span></span><br /><span data-ttu-id="0d608-187">-与集成[!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)]和 IIS 内容。</span><span class="sxs-lookup"><span data-stu-id="0d608-187">-   Integrated with [!INCLUDE[vstecasp](../../../includes/vstecasp-md.md)] and IIS content.</span></span>|  
  
 <span data-ttu-id="0d608-188">宿主环境的选择取决于部署它的 Windows 版本、它要求发送消息的传输以及它要求的进程和应用程序域回收的类型。</span><span class="sxs-lookup"><span data-stu-id="0d608-188">The choice of a hosting environment depends on the version of Windows on which it is deployed, the transports it requires to send messages and the type of process and application domain recycling it requires.</span></span> <span data-ttu-id="0d608-189">下表汇总了与这些要求相关的数据。</span><span class="sxs-lookup"><span data-stu-id="0d608-189">The following table summarizes the data related to these requirements.</span></span>  
  
|<span data-ttu-id="0d608-190">宿主环境</span><span class="sxs-lookup"><span data-stu-id="0d608-190">Hosting Environment</span></span>|<span data-ttu-id="0d608-191">平台可用性</span><span class="sxs-lookup"><span data-stu-id="0d608-191">Platform Availability</span></span>|<span data-ttu-id="0d608-192">支持的传输</span><span class="sxs-lookup"><span data-stu-id="0d608-192">Transports Supported</span></span>|<span data-ttu-id="0d608-193">进程和 AppDomain 回收</span><span class="sxs-lookup"><span data-stu-id="0d608-193">Process and AppDomain Recycling</span></span>|  
|-------------------------|---------------------------|--------------------------|-------------------------------------|  
|<span data-ttu-id="0d608-194">托管应用程序（“自承载”）</span><span class="sxs-lookup"><span data-stu-id="0d608-194">Managed Applications ("Self-Hosted")</span></span>|[!INCLUDE[wxp](../../../includes/wxp-md.md)]<span data-ttu-id="0d608-195">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span><span class="sxs-lookup"><span data-stu-id="0d608-195">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span></span><br /><br /> [!INCLUDE[lserver](../../../includes/lserver-md.md)]|<span data-ttu-id="0d608-196">HTTP；</span><span class="sxs-lookup"><span data-stu-id="0d608-196">HTTP,</span></span><br /><br /> <span data-ttu-id="0d608-197">net.tcp；</span><span class="sxs-lookup"><span data-stu-id="0d608-197">net.tcp,</span></span><br /><br /> <span data-ttu-id="0d608-198">net.pipe；</span><span class="sxs-lookup"><span data-stu-id="0d608-198">net.pipe,</span></span><br /><br /> <span data-ttu-id="0d608-199">net.msmq</span><span class="sxs-lookup"><span data-stu-id="0d608-199">net.msmq</span></span>|<span data-ttu-id="0d608-200">否</span><span class="sxs-lookup"><span data-stu-id="0d608-200">No</span></span>|  
|<span data-ttu-id="0d608-201">Windows 服务（以前称为 NT 服务）</span><span class="sxs-lookup"><span data-stu-id="0d608-201">Windows Services (formerly known as NT services)</span></span>|[!INCLUDE[wxp](../../../includes/wxp-md.md)]<span data-ttu-id="0d608-202">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span><span class="sxs-lookup"><span data-stu-id="0d608-202">, [!INCLUDE[ws2003](../../../includes/ws2003-md.md)], [!INCLUDE[wv](../../../includes/wv-md.md)],</span></span><br /><br /> [!INCLUDE[lserver](../../../includes/lserver-md.md)]|<span data-ttu-id="0d608-203">HTTP；</span><span class="sxs-lookup"><span data-stu-id="0d608-203">HTTP,</span></span><br /><br /> <span data-ttu-id="0d608-204">net.tcp；</span><span class="sxs-lookup"><span data-stu-id="0d608-204">net.tcp,</span></span><br /><br /> <span data-ttu-id="0d608-205">net.pipe；</span><span class="sxs-lookup"><span data-stu-id="0d608-205">net.pipe,</span></span><br /><br /> <span data-ttu-id="0d608-206">net.msmq</span><span class="sxs-lookup"><span data-stu-id="0d608-206">net.msmq</span></span>|<span data-ttu-id="0d608-207">否</span><span class="sxs-lookup"><span data-stu-id="0d608-207">No</span></span>|  
|<span data-ttu-id="0d608-208">IIS 5.1</span><span class="sxs-lookup"><span data-stu-id="0d608-208">IIS 5.1</span></span>|[!INCLUDE[wxp](../../../includes/wxp-md.md)]|<span data-ttu-id="0d608-209">HTTP</span><span class="sxs-lookup"><span data-stu-id="0d608-209">HTTP</span></span>|<span data-ttu-id="0d608-210">是</span><span class="sxs-lookup"><span data-stu-id="0d608-210">Yes</span></span>|  
|[!INCLUDE[iis601](../../../includes/iis601-md.md)]|[!INCLUDE[ws2003](../../../includes/ws2003-md.md)]|<span data-ttu-id="0d608-211">HTTP</span><span class="sxs-lookup"><span data-stu-id="0d608-211">HTTP</span></span>|<span data-ttu-id="0d608-212">是</span><span class="sxs-lookup"><span data-stu-id="0d608-212">Yes</span></span>|  
|<span data-ttu-id="0d608-213">Windows 进程激活服务 (WAS)</span><span class="sxs-lookup"><span data-stu-id="0d608-213">Windows Process Activation Service (WAS)</span></span>|[!INCLUDE[wv](../../../includes/wv-md.md)]<span data-ttu-id="0d608-214">, [!INCLUDE[lserver](../../../includes/lserver-md.md)]</span><span class="sxs-lookup"><span data-stu-id="0d608-214">, [!INCLUDE[lserver](../../../includes/lserver-md.md)]</span></span>|<span data-ttu-id="0d608-215">HTTP；</span><span class="sxs-lookup"><span data-stu-id="0d608-215">HTTP,</span></span><br /><br /> <span data-ttu-id="0d608-216">net.tcp；</span><span class="sxs-lookup"><span data-stu-id="0d608-216">net.tcp,</span></span><br /><br /> <span data-ttu-id="0d608-217">net.pipe；</span><span class="sxs-lookup"><span data-stu-id="0d608-217">net.pipe,</span></span><br /><br /> <span data-ttu-id="0d608-218">net.msmq</span><span class="sxs-lookup"><span data-stu-id="0d608-218">net.msmq</span></span>|<span data-ttu-id="0d608-219">是</span><span class="sxs-lookup"><span data-stu-id="0d608-219">Yes</span></span>|  
  
 <span data-ttu-id="0d608-220">值得注意的是，从不受信任的主机运行服务或任何扩展会危害安全。</span><span class="sxs-lookup"><span data-stu-id="0d608-220">It is important to note that running a service or any extension from an untrusted host compromises security.</span></span> <span data-ttu-id="0d608-221">另请注意，通过模拟打开 <xref:System.ServiceModel.ServiceHost> 时，应用程序必须确保未注销用户，例如通过缓存用户的 <xref:System.Security.Principal.WindowsIdentity> 。</span><span class="sxs-lookup"><span data-stu-id="0d608-221">Also, note that when opening a <xref:System.ServiceModel.ServiceHost> under impersonation, an application must ensure that the user is not logged off, for example by caching the <xref:System.Security.Principal.WindowsIdentity> of the user.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="0d608-222">请参阅</span><span class="sxs-lookup"><span data-stu-id="0d608-222">See also</span></span>
- [<span data-ttu-id="0d608-223">系统要求</span><span class="sxs-lookup"><span data-stu-id="0d608-223">System Requirements</span></span>](../../../docs/framework/wcf/wcf-system-requirements.md)
- [<span data-ttu-id="0d608-224">基本编程生命周期</span><span class="sxs-lookup"><span data-stu-id="0d608-224">Basic Programming Lifecycle</span></span>](../../../docs/framework/wcf/basic-programming-lifecycle.md)
- [<span data-ttu-id="0d608-225">实现服务协定</span><span class="sxs-lookup"><span data-stu-id="0d608-225">Implementing Service Contracts</span></span>](../../../docs/framework/wcf/implementing-service-contracts.md)
- [<span data-ttu-id="0d608-226">如何：承载在 IIS 中的 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="0d608-226">How to: Host a WCF Service in IIS</span></span>](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-iis.md)
- [<span data-ttu-id="0d608-227">如何：承载在 WAS 中的 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="0d608-227">How to: Host a WCF Service in WAS</span></span>](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-was.md)
- [<span data-ttu-id="0d608-228">如何：主机托管的 Windows 服务中的 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="0d608-228">How to: Host a WCF Service in a Managed Windows Service</span></span>](../../../docs/framework/wcf/feature-details/how-to-host-a-wcf-service-in-a-managed-windows-service.md)
- [<span data-ttu-id="0d608-229">如何：承载于托管应用程序的 WCF 服务</span><span class="sxs-lookup"><span data-stu-id="0d608-229">How to: Host a WCF Service in a Managed Application</span></span>](../../../docs/framework/wcf/how-to-host-a-wcf-service-in-a-managed-application.md)
