---
title: Sn.exe（强名称工具）
ms.date: 03/30/2017
helpviewer_keywords:
- public keys, signing files
- Strong Name tool
- Sn.exe
- assemblies [.NET Framework], signing
- signing files
- strong-named assemblies, signing files
- key pairs for signing files
ms.assetid: c1d2b532-1b8e-4c7a-8ac5-53b801135ec6
author: rpetrusha
ms.author: ronpet
ms.openlocfilehash: 262ee168dabafcdc0b284f1ae5528843975a7e9d
ms.sourcegitcommit: 289e06e904b72f34ac717dbcc5074239b977e707
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 09/17/2019
ms.locfileid: "71044154"
---
# <a name="snexe-strong-name-tool"></a><span data-ttu-id="c89ae-102">Sn.exe（强名称工具）</span><span class="sxs-lookup"><span data-stu-id="c89ae-102">Sn.exe (Strong Name Tool)</span></span>
<span data-ttu-id="c89ae-103">强名称工具 (Sn.exe) 有助于使用[强名称](../../standard/assembly/strong-named.md)对程序集进行签名。</span><span class="sxs-lookup"><span data-stu-id="c89ae-103">The Strong Name tool (Sn.exe) helps sign assemblies with [strong names](../../standard/assembly/strong-named.md).</span></span> <span data-ttu-id="c89ae-104">Sn.exe 提供了用于密钥管理、签名生成和签名验证的选项。</span><span class="sxs-lookup"><span data-stu-id="c89ae-104">Sn.exe provides options for key management, signature generation, and signature verification.</span></span>  
  
> [!WARNING]
> <span data-ttu-id="c89ae-105">不要依赖于通过强名称实现安全性。</span><span class="sxs-lookup"><span data-stu-id="c89ae-105">Do not rely on strong names for security.</span></span> <span data-ttu-id="c89ae-106">它们仅提供唯一的标识。</span><span class="sxs-lookup"><span data-stu-id="c89ae-106">They provide a unique identity only.</span></span>

 <span data-ttu-id="c89ae-107">有关强命名和强命名的程序集的详细信息，请参阅[具有强命名的程序集](../../standard/assembly/strong-named.md)和[如何：使用强名称为程序集签名](../../standard/assembly/sign-strong-name.md)。</span><span class="sxs-lookup"><span data-stu-id="c89ae-107">For more information on strong naming and strong-named assemblies, see [Strong-Named Assemblies](../../standard/assembly/strong-named.md) and [How to: Sign an Assembly with a Strong Name](../../standard/assembly/sign-strong-name.md).</span></span>  
  
 <span data-ttu-id="c89ae-108">强名称工具自动随 Visual Studio 一起安装。</span><span class="sxs-lookup"><span data-stu-id="c89ae-108">The Strong Name tool is automatically installed with Visual Studio.</span></span> <span data-ttu-id="c89ae-109">若要启动此工具，请使用“开发人员命令提示”（或 Windows 7 中的 Visual Studio 命令提示）。</span><span class="sxs-lookup"><span data-stu-id="c89ae-109">To start the tool, use the Developer Command Prompt (or the Visual Studio Command Prompt in Windows 7).</span></span> <span data-ttu-id="c89ae-110">有关详细信息，请参阅[命令提示](developer-command-prompt-for-vs.md)。</span><span class="sxs-lookup"><span data-stu-id="c89ae-110">For more information, see [Command Prompts](developer-command-prompt-for-vs.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="c89ae-111">在 64 位计算机上，可通过使用 Visual Studio 开发人员命令提示运行 32 位版本的 Sn.exe，也可使用 Visual Studio x64 Win64 命令提示运行 64 位版本的 Sn.exe。</span><span class="sxs-lookup"><span data-stu-id="c89ae-111">On 64-bit computers, run the 32-bit version of Sn.exe by using the Developer Command Prompt for Visual Studio and the 64-bit version by using the Visual Studio x64 Win64 Command Prompt.</span></span> 
  
 <span data-ttu-id="c89ae-112">在命令提示符处，键入以下内容：</span><span class="sxs-lookup"><span data-stu-id="c89ae-112">At the command prompt, type the following:</span></span>  
  
## <a name="syntax"></a><span data-ttu-id="c89ae-113">语法</span><span class="sxs-lookup"><span data-stu-id="c89ae-113">Syntax</span></span>  
  
```console  
sn [-quiet][option [parameter(s)]]  
```  
  
## <a name="parameters"></a><span data-ttu-id="c89ae-114">参数</span><span class="sxs-lookup"><span data-stu-id="c89ae-114">Parameters</span></span>  
  
|<span data-ttu-id="c89ae-115">选项</span><span class="sxs-lookup"><span data-stu-id="c89ae-115">Option</span></span>|<span data-ttu-id="c89ae-116">说明</span><span class="sxs-lookup"><span data-stu-id="c89ae-116">Description</span></span>|  
|------------|-----------------|  
|<span data-ttu-id="c89ae-117">-a identityKeyPairFile signaturePublicKeyFile   </span><span class="sxs-lookup"><span data-stu-id="c89ae-117">**-a** *identityKeyPairFile* *signaturePublicKeyFile*</span></span>|<span data-ttu-id="c89ae-118">生成 <xref:System.Reflection.AssemblySignatureKeyAttribute> 数据以将标识密钥从一个文件迁移到签名密钥。</span><span class="sxs-lookup"><span data-stu-id="c89ae-118">Generates <xref:System.Reflection.AssemblySignatureKeyAttribute> data to migrate the identity key to the signature key from a file.</span></span>|  
|<span data-ttu-id="c89ae-119">-ac identityPublicKeyFile identityKeyPairContainer signaturePublicKeyFile    </span><span class="sxs-lookup"><span data-stu-id="c89ae-119">**-ac** *identityPublicKeyFile* *identityKeyPairContainer* *signaturePublicKeyFile*</span></span>|<span data-ttu-id="c89ae-120">生成 <xref:System.Reflection.AssemblySignatureKeyAttribute> 数据以将标识密钥从一个密钥容器迁移到签名密钥。</span><span class="sxs-lookup"><span data-stu-id="c89ae-120">Generates <xref:System.Reflection.AssemblySignatureKeyAttribute> data to migrate the identity key to the signature key from a key container.</span></span>|  
|<span data-ttu-id="c89ae-121">-c [csp]  </span><span class="sxs-lookup"><span data-stu-id="c89ae-121">**-c** [*csp*]</span></span>|<span data-ttu-id="c89ae-122">将默认加密服务提供程序 (CSP) 设置为用于强名称签名。</span><span class="sxs-lookup"><span data-stu-id="c89ae-122">Sets the default cryptographic service provider (CSP) to use for strong name signing.</span></span> <span data-ttu-id="c89ae-123">此设置将应用于整台计算机。</span><span class="sxs-lookup"><span data-stu-id="c89ae-123">This setting applies to the entire computer.</span></span> <span data-ttu-id="c89ae-124">如果不指定 CSP 名称，则 Sn.exe 将清除当前设置。</span><span class="sxs-lookup"><span data-stu-id="c89ae-124">If you do not specify a CSP name, Sn.exe clears the current setting.</span></span>|  
|<span data-ttu-id="c89ae-125">-d container  </span><span class="sxs-lookup"><span data-stu-id="c89ae-125">**-d** *container*</span></span>|<span data-ttu-id="c89ae-126">从强名称 CSP 中删除指定的密钥容器。</span><span class="sxs-lookup"><span data-stu-id="c89ae-126">Deletes the specified key container from the strong name CSP.</span></span>|  
|<span data-ttu-id="c89ae-127">-D assembly1 assembly2  </span><span class="sxs-lookup"><span data-stu-id="c89ae-127">**-D**  *assembly1 assembly2*</span></span>|<span data-ttu-id="c89ae-128">验证两个程序集是否只是签名不同。</span><span class="sxs-lookup"><span data-stu-id="c89ae-128">Verifies that two assemblies differ only by signature.</span></span> <span data-ttu-id="c89ae-129">在使用不同的密钥对重新为程序集创建签名之后，经常使用这种方式来进行检查。</span><span class="sxs-lookup"><span data-stu-id="c89ae-129">This is often used as a check after an assembly has been re-signed with a different key pair.</span></span>|  
|<span data-ttu-id="c89ae-130">-e assembly outfile  </span><span class="sxs-lookup"><span data-stu-id="c89ae-130">**-e**  *assembly outfile*</span></span>|<span data-ttu-id="c89ae-131">从 assembly 中提取公钥并将其存储在 outfile 中   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-131">Extracts the public key from *assembly* and stores it in *outfile.*</span></span>|  
|<span data-ttu-id="c89ae-132">**-h**</span><span class="sxs-lookup"><span data-stu-id="c89ae-132">**-h**</span></span>|<span data-ttu-id="c89ae-133">显示该工具的命令语法和选项。</span><span class="sxs-lookup"><span data-stu-id="c89ae-133">Displays command syntax and options for the tool.</span></span>|  
|<span data-ttu-id="c89ae-134">-i infile container  </span><span class="sxs-lookup"><span data-stu-id="c89ae-134">**-i** *infile container*</span></span>|<span data-ttu-id="c89ae-135">从指定密钥容器中的 infile 安装密钥对  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-135">Installs the key pair from *infile* in the specified key container.</span></span> <span data-ttu-id="c89ae-136">密钥容器位于强名称 CSP 中。</span><span class="sxs-lookup"><span data-stu-id="c89ae-136">The key container resides in the strong name CSP.</span></span>|  
|<span data-ttu-id="c89ae-137">-k [keysize] outfile   </span><span class="sxs-lookup"><span data-stu-id="c89ae-137">**-k** [*keysize*] *outfile*</span></span>|<span data-ttu-id="c89ae-138">生成一个指定大小的新 <xref:System.Security.Cryptography.RSACryptoServiceProvider> 密钥并将其写入指定的文件。</span><span class="sxs-lookup"><span data-stu-id="c89ae-138">Generates a new <xref:System.Security.Cryptography.RSACryptoServiceProvider> key of the specified size and writes it to the specified file.</span></span>  <span data-ttu-id="c89ae-139">公钥和私钥都会写入该文件。</span><span class="sxs-lookup"><span data-stu-id="c89ae-139">Both a public and private key are written to the file.</span></span><br /><br /> <span data-ttu-id="c89ae-140">如果不指定密钥大小，并且已安装了 Microsoft 增强加密提供程序，则默认情况下生成 1,024 位的密钥；否则，生成 512 位的密钥。</span><span class="sxs-lookup"><span data-stu-id="c89ae-140">If you do not specify a key size, a 1,024-bit key is generated by default if you have the Microsoft enhanced cryptographic provider installed; otherwise, a 512-bit key is generated.</span></span><br /><br /> <span data-ttu-id="c89ae-141">如果安装了 Microsoft 增强加密提供程序，则 keysize 参数支持 384 位至 16,384 位（增量为 8 位）的密钥长度  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-141">The *keysize* parameter supports key lengths from 384 bits to 16,384 bits in increments of 8 bits if you have the Microsoft enhanced cryptographic provider installed.</span></span>  <span data-ttu-id="c89ae-142">如果安装了 Microsoft 基本加密提供程序，则它支持长度为 384 位至 512 位（增量为 8 位）的密钥。</span><span class="sxs-lookup"><span data-stu-id="c89ae-142">It supports key lengths from 384 bits to 512 bits in increments of 8 bits if you have the Microsoft base cryptographic provider installed.</span></span>|  
|<span data-ttu-id="c89ae-143">**-m** [**y** *&#124;* **n**]</span><span class="sxs-lookup"><span data-stu-id="c89ae-143">**-m** [**y** *&#124;* **n**]</span></span>|<span data-ttu-id="c89ae-144">指定密钥容器是特定于计算机的还是特定于用户的。</span><span class="sxs-lookup"><span data-stu-id="c89ae-144">Specifies whether key containers are computer-specific, or user-specific.</span></span> <span data-ttu-id="c89ae-145">如果指定 y，则密钥容器是特定于计算机的  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-145">If you specify *y*, key containers are computer-specific.</span></span> <span data-ttu-id="c89ae-146">如果指定 n，则密钥容器是特定于用户的  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-146">If you specify *n*, key containers are user-specific.</span></span><br /><br /> <span data-ttu-id="c89ae-147">如果既没有指定 y 也没有指定 n，则此选项显示当前设置。</span><span class="sxs-lookup"><span data-stu-id="c89ae-147">If neither y nor n is specified, this option displays the current setting.</span></span>|  
|<span data-ttu-id="c89ae-148">-o infile [outfile]   </span><span class="sxs-lookup"><span data-stu-id="c89ae-148">**-o**  *infile* [*outfile*]</span></span>|<span data-ttu-id="c89ae-149">从 infile 中提取公钥并将其存储在 .csv 文件中  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-149">Extracts the public key from the *infile* and stores it in a .csv file.</span></span> <span data-ttu-id="c89ae-150">公钥的每一字节都由逗号分隔。</span><span class="sxs-lookup"><span data-stu-id="c89ae-150">A comma separates each byte of the public key.</span></span> <span data-ttu-id="c89ae-151">这种格式可以用来在源代码中将对密钥的引用硬编码为已初始化的数组。</span><span class="sxs-lookup"><span data-stu-id="c89ae-151">This format is useful for hard-coding references to keys as initialized arrays in source code.</span></span> <span data-ttu-id="c89ae-152">如果不指定 outfile，则此选项将输出放到剪贴板上  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-152">If you do not specify an *outfile*, this option places the output on the Clipboard.</span></span> <span data-ttu-id="c89ae-153">**注意：** 此选项不验证输入是否只是公钥。</span><span class="sxs-lookup"><span data-stu-id="c89ae-153">**Note:**  This option does not verify that the input is only a public key.</span></span> <span data-ttu-id="c89ae-154">如果 `infile` 包含带有私钥的密钥对，则会同时提取私钥。</span><span class="sxs-lookup"><span data-stu-id="c89ae-154">If the `infile` contains a key pair with a private key, the private key is also extracted.</span></span>|  
|<span data-ttu-id="c89ae-155">-p infile outfile [hashalg]   </span><span class="sxs-lookup"><span data-stu-id="c89ae-155">**-p** *infile outfile* [*hashalg*]</span></span>|<span data-ttu-id="c89ae-156">从 infile 中的密钥对中提取公钥，并将其存储在 outfile 中，可选择使用 hashalg 指定的 RSA 算法    。</span><span class="sxs-lookup"><span data-stu-id="c89ae-156">Extracts the public key from the key pair in *infile* and stores it in *outfile*, optionally using the RSA algorithm specified by *hashalg*.</span></span> <span data-ttu-id="c89ae-157">此公钥可用于通过[程序集链接器 (Al.exe)](al-exe-assembly-linker.md) 的 /delaysign+ 和 /keyfile 选项，对程序集进行延迟签名   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-157">This public key can be used to delay-sign an assembly using the **/delaysign+** and **/keyfile** options of the [Assembly Linker (Al.exe)](al-exe-assembly-linker.md).</span></span> <span data-ttu-id="c89ae-158">如果对程序集进行延迟签名，则在编译时只设置公钥，并在文件中为要在以后添加的签名（当私钥已知时）保留空间。</span><span class="sxs-lookup"><span data-stu-id="c89ae-158">When an assembly is delay-signed, only the public key is set at compile time and space is reserved in the file for the signature to be added later, when the private key is known.</span></span>|  
|<span data-ttu-id="c89ae-159">-pc container outfile [hashalg]    </span><span class="sxs-lookup"><span data-stu-id="c89ae-159">**-pc**  *container* *outfile* [*hashalg*]</span></span>|<span data-ttu-id="c89ae-160">从 container 中的密钥对中提取公钥并将其存储在 outfile 中   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-160">Extracts the public key from the key pair in *container* and stores it in *outfile*.</span></span> <span data-ttu-id="c89ae-161">如果使用 hashalg 选项，则使用 RSA 算法提取公钥  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-161">If you use the *hashalg* option, the RSA algorithm is used to extract the public key.</span></span>|  
|<span data-ttu-id="c89ae-162">**-Pb** [**y** *&#124;* **n**]</span><span class="sxs-lookup"><span data-stu-id="c89ae-162">**-Pb** [**y** *&#124;* **n**]</span></span>|<span data-ttu-id="c89ae-163">指定是否强制执行强名称跳过策略。</span><span class="sxs-lookup"><span data-stu-id="c89ae-163">Specifies whether the strong-name bypass policy is enforced.</span></span> <span data-ttu-id="c89ae-164">如果指定 y，则在将完全信任程序集加载到完全信任 <xref:System.AppDomain> 时，不验证这些程序集的强名称  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-164">If you specify *y*, strong names for full-trust assemblies are not validated when loaded into a full-trust <xref:System.AppDomain>.</span></span> <span data-ttu-id="c89ae-165">如果指定 n，则会验证强名称是否正确，但不会验证是否具有特定强名称  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-165">If you specify *n*, strong names are validated for correctness, but not for a specific strong name.</span></span> <span data-ttu-id="c89ae-166"><xref:System.Security.Permissions.StrongNameIdentityPermission> 对完全信任程序集不起作用。</span><span class="sxs-lookup"><span data-stu-id="c89ae-166">The <xref:System.Security.Permissions.StrongNameIdentityPermission> has no effect on full-trust assemblies.</span></span> <span data-ttu-id="c89ae-167">你必须自己对强名称是否匹配进行检查。</span><span class="sxs-lookup"><span data-stu-id="c89ae-167">You must perform your own check for a strong name match.</span></span><br /><br /> <span data-ttu-id="c89ae-168">如果既没有指定 `y` 也没有指定 `n`，则此选项显示当前设置。</span><span class="sxs-lookup"><span data-stu-id="c89ae-168">If neither `y` nor `n` is specified, this option displays the current setting.</span></span> <span data-ttu-id="c89ae-169">默认值为 `y`。</span><span class="sxs-lookup"><span data-stu-id="c89ae-169">The default is `y`.</span></span> <span data-ttu-id="c89ae-170">**注意：** 在 64 位计算机上，必须同时在 Sn.exe 的 32 位和 64 位实例中设置此参数。</span><span class="sxs-lookup"><span data-stu-id="c89ae-170">**Note:**  On 64-bit computers, you must set this parameter in both the 32-bit and the 64-bit instances of Sn.exe.</span></span>|  
|<span data-ttu-id="c89ae-171">-q[uiet]  </span><span class="sxs-lookup"><span data-stu-id="c89ae-171">**-q**[**uiet**]</span></span>|<span data-ttu-id="c89ae-172">指定安静模式；取消显示成功消息。</span><span class="sxs-lookup"><span data-stu-id="c89ae-172">Specifies quiet mode; suppresses the display of success messages.</span></span>|  
|<span data-ttu-id="c89ae-173">-R[a] assembly infile    </span><span class="sxs-lookup"><span data-stu-id="c89ae-173">**-R**[**a**] *assembly* *infile*</span></span>|<span data-ttu-id="c89ae-174">使用 infile 中的密钥对，为先前已签名的程序集或延迟签名的程序集重新签名  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-174">Re-signs a previously signed or delay-signed assembly with the key pair in *infile*.</span></span><br /><br /> <span data-ttu-id="c89ae-175">如果使用了 -Ra，则重新计算程序集中所有文件的哈希值  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-175">If **-Ra** is used, hashes are recomputed for all files in the assembly.</span></span>|  
|<span data-ttu-id="c89ae-176">-Rc[a] assembly container   </span><span class="sxs-lookup"><span data-stu-id="c89ae-176">**-Rc**[**a**] *assembly container*</span></span>|<span data-ttu-id="c89ae-177">使用 container 中的密钥对，为之前已签名的程序集或延迟签名的程序集重新签名  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-177">Re-signs a previously signed or delay-signed assembly with the key pair in *container*.</span></span><br /><br /> <span data-ttu-id="c89ae-178">如果使用了 -Rca，则重新计算程序集中所有文件的哈希值  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-178">If **-Rca** is used, hashes are recomputed for all files in the assembly.</span></span>|  
|<span data-ttu-id="c89ae-179">-Rh assembly  </span><span class="sxs-lookup"><span data-stu-id="c89ae-179">**-Rh** *assembly*</span></span>|<span data-ttu-id="c89ae-180">重新计算程序集中所有文件的哈希值。</span><span class="sxs-lookup"><span data-stu-id="c89ae-180">Recomputes hashes for all files in the assembly.</span></span>|  
|<span data-ttu-id="c89ae-181">-t[p] infile   </span><span class="sxs-lookup"><span data-stu-id="c89ae-181">**-t**[**p**] *infile*</span></span>|<span data-ttu-id="c89ae-182">显示存储在 infile 中的公钥的标记  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-182">Displays the token for the public key stored in *infile*.</span></span> <span data-ttu-id="c89ae-183">infile 的内容必须是以前使用 -p 从密钥对文件生成的公钥   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-183">The contents of *infile* must be a public key previously generated from a key pair file using **-p**.</span></span>  <span data-ttu-id="c89ae-184">不要使用 -t[p] 选项直接从密钥对文件提取标记  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-184">Do not use the **-t[p]** option to extract the token directly from a key pair file.</span></span><br /><br /> <span data-ttu-id="c89ae-185">Sn.exe 将使用公钥的哈希函数计算标记。</span><span class="sxs-lookup"><span data-stu-id="c89ae-185">Sn.exe computes the token by using a hash function from the public key.</span></span> <span data-ttu-id="c89ae-186">为节省空间，公共语言运行时在记录对具有强名称的程序集的依赖性时，将公钥标记存储在清单中，作为对另一个程序集的引用的一部分。</span><span class="sxs-lookup"><span data-stu-id="c89ae-186">To save space, the common language runtime stores public key tokens in the manifest as part of a reference to another assembly when it records a dependency to an assembly that has a strong name.</span></span> <span data-ttu-id="c89ae-187">-tp 选项除显示标记外还显示公钥  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-187">The **-tp** option displays the public key in addition to the token.</span></span> <span data-ttu-id="c89ae-188">如果 <xref:System.Reflection.AssemblySignatureKeyAttribute> 特性已应用于程序集，则标记用于标识密钥，并显示哈希算法和标识密钥的名称。</span><span class="sxs-lookup"><span data-stu-id="c89ae-188">If the <xref:System.Reflection.AssemblySignatureKeyAttribute> attribute has been applied to the assembly, the token is for the identity key, and the name of the hash algorithm and the identity key is displayed.</span></span><br /><br /> <span data-ttu-id="c89ae-189">请注意，此选项不验证程序集签名，而且不应用于做出信任决策。</span><span class="sxs-lookup"><span data-stu-id="c89ae-189">Note that this option does not verify the assembly signature and should not be used to make trust decisions.</span></span>  <span data-ttu-id="c89ae-190">此选项仅显示原始公钥标记数据。</span><span class="sxs-lookup"><span data-stu-id="c89ae-190">This option only displays the raw public key token data.</span></span>|  
|<span data-ttu-id="c89ae-191">-T[p] assembly   </span><span class="sxs-lookup"><span data-stu-id="c89ae-191">**-T**[**p**] *assembly*</span></span>|<span data-ttu-id="c89ae-192">显示 assembly 的公钥标记  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-192">Displays the public key token for *assembly.*</span></span> <span data-ttu-id="c89ae-193">assembly 必须是包含程序集清单的文件的名称  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-193">The *assembly* must be the name of a file that contains an assembly manifest.</span></span><br /><br /> <span data-ttu-id="c89ae-194">Sn.exe 将使用公钥的哈希函数计算标记。</span><span class="sxs-lookup"><span data-stu-id="c89ae-194">Sn.exe computes the token by using a hash function from the public key.</span></span> <span data-ttu-id="c89ae-195">为节省空间，公共语言运行时在记录对具有强名称的程序集的依赖性时，将公钥标记存储在清单中，作为对另一个程序集的引用的一部分。</span><span class="sxs-lookup"><span data-stu-id="c89ae-195">To save space, the runtime stores public key tokens in the manifest as part of a reference to another assembly when it records a dependency to an assembly that has a strong name.</span></span> <span data-ttu-id="c89ae-196">-Tp 选项除显示标记外还显示公钥  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-196">The **-Tp** option displays the public key in addition to the token.</span></span> <span data-ttu-id="c89ae-197">如果 <xref:System.Reflection.AssemblySignatureKeyAttribute> 特性已应用于程序集，则标记用于标识密钥，并显示哈希算法和标识密钥的名称。</span><span class="sxs-lookup"><span data-stu-id="c89ae-197">If the <xref:System.Reflection.AssemblySignatureKeyAttribute> attribute has been applied to the assembly, the token is for the identity key, and the name of the hash algorithm and the identity key is displayed.</span></span><br /><br /> <span data-ttu-id="c89ae-198">请注意，此选项不验证程序集签名，而且不应用于做出信任决策。</span><span class="sxs-lookup"><span data-stu-id="c89ae-198">Note that this option does not verify the assembly signature and should not be used to make trust decisions.</span></span>  <span data-ttu-id="c89ae-199">此选项仅显示原始公钥标记数据。</span><span class="sxs-lookup"><span data-stu-id="c89ae-199">This option only displays the raw public key token data.</span></span>|  
|<span data-ttu-id="c89ae-200">`-TS` `assembly` `infile`</span><span class="sxs-lookup"><span data-stu-id="c89ae-200">`-TS` `assembly` `infile`</span></span>|<span data-ttu-id="c89ae-201">使用 `assembly` 中的密钥对，对已签名或部分签名的 `infile` 进行测试签名。</span><span class="sxs-lookup"><span data-stu-id="c89ae-201">Test-signs the signed or partially signed `assembly` with the key pair in `infile`.</span></span>|  
|<span data-ttu-id="c89ae-202">-`TSc` `assembly` `container`</span><span class="sxs-lookup"><span data-stu-id="c89ae-202">-`TSc` `assembly` `container`</span></span>|<span data-ttu-id="c89ae-203">使用密钥容器 `assembly` 中的密钥对，对已签名或部分签名的 `container` 进行测试签名。</span><span class="sxs-lookup"><span data-stu-id="c89ae-203">Test-signs the signed or partially signed `assembly` with the key pair in the key container `container`.</span></span>|  
|<span data-ttu-id="c89ae-204">-v assembly  </span><span class="sxs-lookup"><span data-stu-id="c89ae-204">**-v** *assembly*</span></span>|<span data-ttu-id="c89ae-205">验证 assembly 中的强名称，其中 assembly 是包含程序集清单的文件的名称   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-205">Verifies the strong name in *assembly*, where *assembly* is the name of a file that contains an assembly manifest.</span></span>|  
|<span data-ttu-id="c89ae-206">-vf assembly  </span><span class="sxs-lookup"><span data-stu-id="c89ae-206">**-vf**  *assembly*</span></span>|<span data-ttu-id="c89ae-207">验证 assembly 中的强名称  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-207">Verifies the strong name in *assembly.*</span></span> <span data-ttu-id="c89ae-208">与 -v 选项不同，-vf 会强制实施验证，即使已使用 -Vr 选项禁用了验证也是如此    。</span><span class="sxs-lookup"><span data-stu-id="c89ae-208">Unlike the **-v** option, **-vf** forces verification even if it is disabled using the **-Vr** option.</span></span>|  
|<span data-ttu-id="c89ae-209">-Vk regfile.reg assembly [userlist] [infile]     </span><span class="sxs-lookup"><span data-stu-id="c89ae-209">**-Vk**  *regfile.reg* *assembly* [*userlist*] [*infile*]</span></span>|<span data-ttu-id="c89ae-210">创建一个注册项 (.reg) 文件，你可以使用它注册要跳过验证的指定程序集。</span><span class="sxs-lookup"><span data-stu-id="c89ae-210">Creates a registration entries (.reg) file you can use to register the specified assembly for verification skipping.</span></span> <span data-ttu-id="c89ae-211">应用于 -Vr 选项的程序集命名规则也应用于 -Vk   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-211">The rules for assembly naming that apply to the **-Vr** option apply to **–Vk** as well.</span></span> <span data-ttu-id="c89ae-212">有关 userlist 和 infile 选项的信息，请参阅 -Vr 选项    。</span><span class="sxs-lookup"><span data-stu-id="c89ae-212">For information about the *userlist* and *infile* options, see the **–Vr** option.</span></span>|  
|<span data-ttu-id="c89ae-213">-Vl </span><span class="sxs-lookup"><span data-stu-id="c89ae-213">**-Vl**</span></span>|<span data-ttu-id="c89ae-214">列出此计算机上的强名称验证的当前设置。</span><span class="sxs-lookup"><span data-stu-id="c89ae-214">Lists current settings for strong-name verification on this computer.</span></span>|  
|<span data-ttu-id="c89ae-215">-Vr assembly [userlist] [infile]    </span><span class="sxs-lookup"><span data-stu-id="c89ae-215">**-Vr**  *assembly* [*userlist*] [*infile*]</span></span>|<span data-ttu-id="c89ae-216">注册要跳过验证的 assembly  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-216">Registers *assembly* for verification skipping.</span></span> <span data-ttu-id="c89ae-217">或者，还可以指定应跳过验证的用户名的逗号分隔的列表。</span><span class="sxs-lookup"><span data-stu-id="c89ae-217">Optionally, you can specify a comma-separated list of user names the skip verification should apply to.</span></span> <span data-ttu-id="c89ae-218">如果指定 infile，则验证仍会启用，但在验证操作中将使用 infile 中的公钥   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-218">If you specify *infile*, verification remains enabled, but the public key in *infile* is used in verification operations.</span></span> <span data-ttu-id="c89ae-219">可以以 \*, strongname 的形式指定 assembly，以注册所有具有指定强名称的程序集   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-219">You can specify *assembly* in the form *\*, strongname* to register all assemblies with the specified strong name.</span></span> <span data-ttu-id="c89ae-220">对于 strongname，指定表示标记形式的公钥的十六进制数字的字符串  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-220">For *strongname*, specify the string of hexadecimal digits representing the tokenized form of the public key.</span></span> <span data-ttu-id="c89ae-221">参见 -t 和 -T 选项以显示公钥标记   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-221">See the **-t** and **-T** options to display the public key token.</span></span> <span data-ttu-id="c89ae-222">注意：  仅在开发期间使用此选项。</span><span class="sxs-lookup"><span data-stu-id="c89ae-222">**Caution:**  Use this option only during development.</span></span> <span data-ttu-id="c89ae-223">将程序集添加到跳过验证列表会产生安全漏洞。</span><span class="sxs-lookup"><span data-stu-id="c89ae-223">Adding an assembly to the skip verification list creates a security vulnerability.</span></span> <span data-ttu-id="c89ae-224">如果将某程序集添加到跳过验证列表中，则恶意程序集可以使用该程序集的完全指定程序集名称来隐藏身份，完全指定程序集名称由程序集名称、版本、区域性和公钥标记组成。</span><span class="sxs-lookup"><span data-stu-id="c89ae-224">A malicious assembly could use the fully specified assembly name (assembly name, version, culture, and public key token) of the assembly added to the skip verification list to fake its identity.</span></span> <span data-ttu-id="c89ae-225">这使恶意程序集也可以跳过验证。</span><span class="sxs-lookup"><span data-stu-id="c89ae-225">This would allow the malicious assembly to also skip verification.</span></span>|  
|||  
|<span data-ttu-id="c89ae-226">-Vu assembly  </span><span class="sxs-lookup"><span data-stu-id="c89ae-226">**-Vu**  *assembly*</span></span>|<span data-ttu-id="c89ae-227">注销要跳过验证的 assembly  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-227">Unregisters *assembly* for verification skipping.</span></span> <span data-ttu-id="c89ae-228">应用于 -Vr 的相同程序集命名规则也应用于 -Vu   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-228">The same rules for assembly naming that apply to **-Vr** apply to **-Vu**.</span></span>|  
|<span data-ttu-id="c89ae-229">-Vx </span><span class="sxs-lookup"><span data-stu-id="c89ae-229">**-Vx**</span></span>|<span data-ttu-id="c89ae-230">移除所有验证跳过项。</span><span class="sxs-lookup"><span data-stu-id="c89ae-230">Removes all verification-skipping entries.</span></span>|  
|<span data-ttu-id="c89ae-231">**-?**</span><span class="sxs-lookup"><span data-stu-id="c89ae-231">**-?**</span></span>|<span data-ttu-id="c89ae-232">显示该工具的命令语法和选项。</span><span class="sxs-lookup"><span data-stu-id="c89ae-232">Displays command syntax and options for the tool.</span></span>|  
  
> [!NOTE]
> <span data-ttu-id="c89ae-233">所有 Sn.exe 选项都区分大小写，必须完全按所示的形式键入才能被该工具识别。</span><span class="sxs-lookup"><span data-stu-id="c89ae-233">All Sn.exe options are case-sensitive and must be typed exactly as shown to be recognized by the tool.</span></span>  
  
## <a name="remarks"></a><span data-ttu-id="c89ae-234">备注</span><span class="sxs-lookup"><span data-stu-id="c89ae-234">Remarks</span></span>  
 <span data-ttu-id="c89ae-235">-R 和 -Rc 选项对延迟签名的程序集很有用   。</span><span class="sxs-lookup"><span data-stu-id="c89ae-235">The **-R** and **–Rc** options are useful with assemblies that have been delay-signed.</span></span> <span data-ttu-id="c89ae-236">在这种情况下，编译时只设置公钥，并在以后执行签名（当私钥已知时）。</span><span class="sxs-lookup"><span data-stu-id="c89ae-236">In this scenario, only the public key has been set at compile time and signing is performed later, when the private key is known.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c89ae-237">对于写入到受保护资源（如注册表）的参数（例如，–Vr），请以管理员身份运行 SN.exe  。</span><span class="sxs-lookup"><span data-stu-id="c89ae-237">For parameters (for example, –**Vr)** that write to protected resources such as the registry, run SN.exe as an administrator.</span></span>  
  
<span data-ttu-id="c89ae-238">强名称工具假定使用 `AT_SIGNATURE` 算法标识符生成公钥/私钥对。</span><span class="sxs-lookup"><span data-stu-id="c89ae-238">The Strong Name tool assumes that public/private key pairs are generated with the `AT_SIGNATURE` algorithm identifier.</span></span> <span data-ttu-id="c89ae-239">使用 `AT_KEYEXCHANGE` 算法生成的公钥/私钥对会生成错误。</span><span class="sxs-lookup"><span data-stu-id="c89ae-239">Public/private key pairs generated with the `AT_KEYEXCHANGE` algorithm generate an error.</span></span> 

## <a name="examples"></a><span data-ttu-id="c89ae-240">示例</span><span class="sxs-lookup"><span data-stu-id="c89ae-240">Examples</span></span>  
 <span data-ttu-id="c89ae-241">下面的命令创建一个新的随机密钥对，并将其存储在 `keyPair.snk` 中。</span><span class="sxs-lookup"><span data-stu-id="c89ae-241">The following command creates a new, random key pair and stores it in `keyPair.snk`.</span></span>  
  
```console  
sn -k keyPair.snk  
```  
  
 <span data-ttu-id="c89ae-242">下面的命令将 `keyPair.snk` 中的密钥存储在强名称 CSP 中的容器 `MyContainer` 中。</span><span class="sxs-lookup"><span data-stu-id="c89ae-242">The following command stores the key in `keyPair.snk` in the container `MyContainer` in the strong name CSP.</span></span>  
  
```console  
sn -i keyPair.snk MyContainer  
```  
  
 <span data-ttu-id="c89ae-243">下面的命令从 `keyPair.snk` 中提取公钥并将其存储在 `publicKey.snk` 中。</span><span class="sxs-lookup"><span data-stu-id="c89ae-243">The following command extracts the public key from `keyPair.snk` and stores it in `publicKey.snk`.</span></span>  
  
```console  
sn -p keyPair.snk publicKey.snk  
```  
  
 <span data-ttu-id="c89ae-244">下面的命令显示公钥和 `publicKey.snk` 中包含的公钥的标记。</span><span class="sxs-lookup"><span data-stu-id="c89ae-244">The following command displays the public key and the token for the public key contained in `publicKey.snk`.</span></span>  
  
```console  
sn -tp publicKey.snk  
```  
  
 <span data-ttu-id="c89ae-245">下面的命令验证程序集 `MyAsm.dll`。</span><span class="sxs-lookup"><span data-stu-id="c89ae-245">The following command verifies the assembly `MyAsm.dll`.</span></span>  
  
```console  
sn -v MyAsm.dll  
```  
  
 <span data-ttu-id="c89ae-246">下面的命令从默认 CSP 中删除 `MyContainer`。</span><span class="sxs-lookup"><span data-stu-id="c89ae-246">The following command deletes `MyContainer` from the default CSP.</span></span>  
  
```console  
sn -d MyContainer  
```  
  
## <a name="see-also"></a><span data-ttu-id="c89ae-247">请参阅</span><span class="sxs-lookup"><span data-stu-id="c89ae-247">See also</span></span>

- [<span data-ttu-id="c89ae-248">工具</span><span class="sxs-lookup"><span data-stu-id="c89ae-248">Tools</span></span>](index.md)
- [<span data-ttu-id="c89ae-249">Al.exe（程序集链接器）</span><span class="sxs-lookup"><span data-stu-id="c89ae-249">Al.exe (Assembly Linker)</span></span>](al-exe-assembly-linker.md)
- [<span data-ttu-id="c89ae-250">具有强名称的程序集</span><span class="sxs-lookup"><span data-stu-id="c89ae-250">Strong-Named Assemblies</span></span>](../../standard/assembly/strong-named.md)
- [<span data-ttu-id="c89ae-251">命令提示</span><span class="sxs-lookup"><span data-stu-id="c89ae-251">Command Prompts</span></span>](developer-command-prompt-for-vs.md)
