---
title: 将容器作为 DevOps 协作的基础
description: 了解容器来简化开发运营的关键角色。
ms.date: 02/15/2019
ms.openlocfilehash: 37faf00f270414df363f36894317f31f81a2937e
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/15/2019
ms.locfileid: "65641285"
---
# <a name="containers-as-the-foundation-for-devops-collaboration"></a><span data-ttu-id="d2f82-103">将容器作为 DevOps 协作的基础</span><span class="sxs-lookup"><span data-stu-id="d2f82-103">Containers as the foundation for DevOps collaboration</span></span>

<span data-ttu-id="d2f82-104">由容器和 Docker 技术的性质，开发人员可以其软件和依赖项通过轻松地共享 IT 操作和生产环境同时消除典型的"适用于我的计算机"借口。</span><span class="sxs-lookup"><span data-stu-id="d2f82-104">By the very nature of the containers and Docker technology, developers can share their software and dependencies easily with IT operations and production environments while eliminating the typical "it works on my machine" excuse.</span></span> <span data-ttu-id="d2f82-105">容器解决不同的环境之间的应用程序冲突。</span><span class="sxs-lookup"><span data-stu-id="d2f82-105">Containers solve application conflicts between different environments.</span></span> <span data-ttu-id="d2f82-106">间接，容器和 Docker 将开发人员和 IT 运营更接近组合在一起，使它们更高效地协作更轻松。</span><span class="sxs-lookup"><span data-stu-id="d2f82-106">Indirectly, containers and Docker bring developers and IT operations closer together, making it easier for them to collaborate effectively.</span></span> <span data-ttu-id="d2f82-107">采用容器工作流将许多客户提供 DevOps 连续性它们已试图但以前版本更复杂的配置通过实现和构建管道。</span><span class="sxs-lookup"><span data-stu-id="d2f82-107">Adopting the container workflow provides many customers with the DevOps continuity they've sought but previously had to implement via more complex configuration for release and build pipelines.</span></span> <span data-ttu-id="d2f82-108">容器简化 DevOps 中的生成/测试/部署管道。</span><span class="sxs-lookup"><span data-stu-id="d2f82-108">Containers simplify the build/test/deploy pipelines in DevOps.</span></span>

![Docker 可帮助开发人员和架构师之间架起桥梁基于开发/设计工作负荷和运行/监视/管理工作负荷中的 IT 操作](./media/image1.png)

<span data-ttu-id="d2f82-110">**图 2-1.**</span><span class="sxs-lookup"><span data-stu-id="d2f82-110">**Figure 2-1.**</span></span> <span data-ttu-id="d2f82-111">每个容器化 Docker 应用程序生命周期中的"人员"的主工作负荷</span><span class="sxs-lookup"><span data-stu-id="d2f82-111">Main workloads per "personas" in the life cycle for containerized Docker applications</span></span>

<span data-ttu-id="d2f82-112">使用 Docker 容器，开发人员自己的容器 （应用程序和服务，并向框架和组件的依赖项） 和容器和服务的行为方式一起作为一个服务的集合构成应用程序中是什么。</span><span class="sxs-lookup"><span data-stu-id="d2f82-112">With Docker containers, developers own what's within the container (application and service, and dependencies to frameworks and components) and how the containers and services behave together as an application composed by a collection of services.</span></span> <span data-ttu-id="d2f82-113">在中定义多个容器的相互依赖项`docker-compose.yml`文件，或那些可称为*部署清单*。</span><span class="sxs-lookup"><span data-stu-id="d2f82-113">The interdependencies of the multiple containers are defined in a `docker-compose.yml` file, or what could be called a *deployment manifest*.</span></span> <span data-ttu-id="d2f82-114">同时，（IT 专业人员和管理） 的 IT 运营团队可以专注于生产环境; 的管理基础结构使用;可伸缩性;监视;和从根本上讲，确保该应用程序传送正确的最终用户，而无需了解各种容器的内容。</span><span class="sxs-lookup"><span data-stu-id="d2f82-114">Meanwhile, IT operations teams (IT professionals and management) can focus on the management of production environments; infrastructure; scalability; monitoring; and, ultimately, ensuring that the applications are delivering properly for the end users, without having to know the contents of the various containers.</span></span> <span data-ttu-id="d2f82-115">因此，名称"容器，"重新调用到实际的集装箱类比。</span><span class="sxs-lookup"><span data-stu-id="d2f82-115">Hence, the name "container," recalling the analogy to real-world shipping containers.</span></span> <span data-ttu-id="d2f82-116">因此的容器的内容所有者需要考虑自身与容器如何需要通过寄送和传送的公司传输从起点到其目标的容器而无需了解或关注的内容。</span><span class="sxs-lookup"><span data-stu-id="d2f82-116">Thus, the owners of a container's content need not concern themselves with how the container will be shipped, and the shipping company transports a container from its point of origin to its destination without knowing or caring about the contents.</span></span> <span data-ttu-id="d2f82-117">以类似方式，开发人员可以创建并拥有 Docker 容器，而无需自己考虑"传输"机制中的内容。</span><span class="sxs-lookup"><span data-stu-id="d2f82-117">In a similar manner, developers can create and own the contents within a Docker container without the need to concern themselves with the "transport" mechanisms.</span></span>

<span data-ttu-id="d2f82-118">在左侧和右侧图 2-1 的支柱，开发人员编写，并在 Docker 容器中本地运行代码，通过使用 Docker 的 Windows 或 mac。</span><span class="sxs-lookup"><span data-stu-id="d2f82-118">In the pillar on the left side of Figure 2-1, developers write and run code locally in Docker containers by using Docker for Windows or Mac.</span></span> <span data-ttu-id="d2f82-119">它们使用 Dockerfile，指定基本操作系统以及到 Docker 映像生成其代码的生成步骤运行定义操作环境的代码。</span><span class="sxs-lookup"><span data-stu-id="d2f82-119">They define the operating environment for the code by using a Dockerfile that specifies the base operating system to run as well as the build steps for building their code into a Docker image.</span></span> <span data-ttu-id="d2f82-120">开发人员定义如何一个或多个图像将进行互操作使用前面提到`docker-compose.yml`文件部署清单。</span><span class="sxs-lookup"><span data-stu-id="d2f82-120">The developers define how one or more images will interoperate using the aforementioned `docker-compose.yml` file deployment manifest.</span></span> <span data-ttu-id="d2f82-121">完成其本地开发，它们将推送其应用程序代码加上的 Docker 配置文件到其选择 （也就是说，Git 存储库） 的代码存储库。</span><span class="sxs-lookup"><span data-stu-id="d2f82-121">As they complete their local development, they push their application code plus the Docker configuration files to the code repository of their choice (that is, Git repository).</span></span>

<span data-ttu-id="d2f82-122">DevOps 支柱定义使用在代码存储库中提供的 Dockerfile 生成 – 持续集成 (CI) 管道。</span><span class="sxs-lookup"><span data-stu-id="d2f82-122">The DevOps pillar defines the build–Continuous Integration (CI) pipelines using the Dockerfile provided in the code repository.</span></span> <span data-ttu-id="d2f82-123">CI 系统从所选的 Docker 注册表中拉取内容的基容器映像，并生成应用程序的自定义 Docker 映像。</span><span class="sxs-lookup"><span data-stu-id="d2f82-123">The CI system pulls the base container images from the selected Docker registry and builds the custom Docker images for the application.</span></span> <span data-ttu-id="d2f82-124">映像然后进行验证，并推送到 Docker 注册表用于部署到多个环境。</span><span class="sxs-lookup"><span data-stu-id="d2f82-124">The images then are validated and pushed to the Docker registry used for the deployments to multiple environments.</span></span>

<span data-ttu-id="d2f82-125">在右侧的支柱，操作团队管理部署的应用程序和基础结构，以便它们可以提供反馈和有关如何才能在应用程序开发团队的见解，监视的环境和应用程序时的生产环境中改进了。</span><span class="sxs-lookup"><span data-stu-id="d2f82-125">In the pillar on the right, operations teams manage deployed applications and infrastructure in production while monitoring the environment and applications so that they can provide feedback and insights to the development team about how the application might be improved.</span></span> <span data-ttu-id="d2f82-126">容器应用程序通常使用容器业务流程协调程序的生产环境中运行。</span><span class="sxs-lookup"><span data-stu-id="d2f82-126">Container apps are typically run in production using container orchestrators.</span></span>

<span data-ttu-id="d2f82-127">通过提供关注点的分离为一个协定，从而大大提高应用程序生命周期中的两个团队的协作的基础平台 （Docker 容器），两个团队正在进行协作。</span><span class="sxs-lookup"><span data-stu-id="d2f82-127">The two teams are collaborating through a foundational platform (Docker containers) that provides a separation of concerns as a contract, while greatly improving the two teams' collaboration in the application life cycle.</span></span> <span data-ttu-id="d2f82-128">开发人员拥有容器内容、 其运行环境和容器相互依赖关系，而运营团队需要在清单以及构建的映像，并在其业务流程系统中运行它们。</span><span class="sxs-lookup"><span data-stu-id="d2f82-128">The developers own the container contents, its operating environment, and the container interdependencies, whereas the operations teams take the built images along with the manifest and runs them in their orchestration system.</span></span>

## <a name="challenges-in-application-life-cycle-when-using-docker"></a><span data-ttu-id="d2f82-129">使用 Docker 时，挑战中应用程序生命周期。</span><span class="sxs-lookup"><span data-stu-id="d2f82-129">Challenges in application life cycle when using Docker.</span></span>

<span data-ttu-id="d2f82-130">有很多原因，将在即将发布的年中，增加容器化应用程序的数目和由于以下原因之一是创建基于微服务的应用程序。</span><span class="sxs-lookup"><span data-stu-id="d2f82-130">There are many reasons that will increase the number of containerized applications in the upcoming years, and one of these reasons is the creation of applications based on microservices.</span></span>

<span data-ttu-id="d2f82-131">在过去 15 年，期间使用的 web 服务已数千个应用程序，基和可能，几年之后，我们会发现这种情况与基于微服务的应用程序在 Docker 容器中运行。</span><span class="sxs-lookup"><span data-stu-id="d2f82-131">During the last 15 years, the use of web services has been the base of thousands of applications, and probably, after a few years, we'll find the same situation with microservice-based applications running on Docker containers.</span></span>

<span data-ttu-id="d2f82-132">值得还说，还可以使用 Docker 容器的整体式应用程序，并且仍显示最常见的 Docker 的好处。</span><span class="sxs-lookup"><span data-stu-id="d2f82-132">It is also worth to mention that you can also use Docker containers for monolithic applications and you still get most of the benefits of Docker.</span></span> <span data-ttu-id="d2f82-133">容器并非针对仅微服务。</span><span class="sxs-lookup"><span data-stu-id="d2f82-133">Containers are not targeting only microservices.</span></span>

<span data-ttu-id="d2f82-134">使用 Docker 容器化和微服务会导致新的挑战的组织，因此，在开发过程中需要可靠的策略来维护多个容器和微服务在生产系统上运行。</span><span class="sxs-lookup"><span data-stu-id="d2f82-134">The use of Docker containerization and microservices causes new challenges in the development process of your organizations and therefore, you need a solid strategy to maintain many containers and microservices running on production systems.</span></span> <span data-ttu-id="d2f82-135">最终，企业应用程序将有数百或数千个容器/生产环境中运行的实例。</span><span class="sxs-lookup"><span data-stu-id="d2f82-135">Eventually, enterprise applications will have hundreds or thousands of containers/instances running in production.</span></span>

<span data-ttu-id="d2f82-136">使用 DevOps 工具，因此您必须在 DevOps 活动中，定义新的流程和查找此类型的问题时，这些挑战将创建新要求：</span><span class="sxs-lookup"><span data-stu-id="d2f82-136">These challenges create new demands when using DevOps tools, so you'll have to define new processes in your DevOps activities, and find answers for this type of questions:</span></span>

- <span data-ttu-id="d2f82-137">开发、 CI/CD、 管理和操作可以使用哪些工具？</span><span class="sxs-lookup"><span data-stu-id="d2f82-137">Which tools can I use for development, for CI/CD, management and operations?</span></span>

- <span data-ttu-id="d2f82-138">我如何的公司管理容器中的错误在生产环境中运行时？</span><span class="sxs-lookup"><span data-stu-id="d2f82-138">How can my company manage errors in containers when running in production?</span></span>

- <span data-ttu-id="d2f82-139">我们应如何更改的最小停机时间的生产环境中我们的软件？</span><span class="sxs-lookup"><span data-stu-id="d2f82-139">How can we change pieces of our software in production with minimum downtime?</span></span>

- <span data-ttu-id="d2f82-140">我们如何扩展和我们如何监视生产系统？</span><span class="sxs-lookup"><span data-stu-id="d2f82-140">How can we scale and how can we monitor our production system?</span></span>

- <span data-ttu-id="d2f82-141">我们如何可以包含容器的测试和部署在我们发布管道中？</span><span class="sxs-lookup"><span data-stu-id="d2f82-141">How can we include testing and deployment of containers in our release pipeline?</span></span>

- <span data-ttu-id="d2f82-142">我们如何使用开源工具/平台的 Microsoft Azure 中的容器？</span><span class="sxs-lookup"><span data-stu-id="d2f82-142">How can we use Open Source tools/platforms for containers in Microsoft Azure?</span></span>

<span data-ttu-id="d2f82-143">如果可以解答这些问题，就可以更好地准备好移动到 Docker 容器应用程序 （现有或新应用程序）。</span><span class="sxs-lookup"><span data-stu-id="d2f82-143">If you can answer all those questions, you'll be better prepared to move your applications (existing or new apps) to Docker containers.</span></span> 

## <a name="introduction-to-a-generic-end-to-end-docker-application-life-cycle-workflow"></a><span data-ttu-id="d2f82-144">泛型的端到端的 Docker 应用程序生命周期工作流简介</span><span class="sxs-lookup"><span data-stu-id="d2f82-144">Introduction to a generic end-to-end Docker application life cycle workflow</span></span>

<span data-ttu-id="d2f82-145">图 2-2 提供更详细的工作流的 Docker 应用程序生命周期，在这种情况致力于 DevOps 的特定活动和资产。</span><span class="sxs-lookup"><span data-stu-id="d2f82-145">Figure 2-2 presents a more detailed workflow for a Docker application life cycle, focusing in this instance on specific DevOps activities and assets.</span></span>

![下图显示了 DevOps 的"外部循环"。](./media/image2.png)

<span data-ttu-id="d2f82-149">**图 2-2。**</span><span class="sxs-lookup"><span data-stu-id="d2f82-149">**Figure 2-2.**</span></span> <span data-ttu-id="d2f82-150">Docker 容器化应用程序生命周期的高级工作流</span><span class="sxs-lookup"><span data-stu-id="d2f82-150">High-level workflow for the Docker containerized application life cycle</span></span>

<span data-ttu-id="d2f82-151">开发人员，启动内部循环工作流中编写代码的所有内容开始。</span><span class="sxs-lookup"><span data-stu-id="d2f82-151">Everything begins with the developer, who starts writing code in the inner-loop workflow.</span></span> <span data-ttu-id="d2f82-152">内部循环阶段是开发人员在其中定义发生之前将代码推送到代码存储库 （例如，Git 等源代码管理系统）。</span><span class="sxs-lookup"><span data-stu-id="d2f82-152">The inner-loop stage is where developers define everything that happens before pushing code into the code repository (for example, a source control system such as Git).</span></span> <span data-ttu-id="d2f82-153">在其后已提交，存储库触发器持续集成 (CI) 和工作流的其余部分。</span><span class="sxs-lookup"><span data-stu-id="d2f82-153">After it's committed, the repository triggers Continuous Integration (CI) and the rest of the workflow.</span></span>

<span data-ttu-id="d2f82-154">内部循环基本上包括"与代码一样，""运行"，"test"和"调试，"以及在本地运行应用程序前所需的其他步骤的典型步骤。</span><span class="sxs-lookup"><span data-stu-id="d2f82-154">The inner loop basically consists of typical steps like "code," "run," "test," and "debug," plus the additional steps needed right before running the app locally.</span></span> <span data-ttu-id="d2f82-155">这是开发人员的过程来运行和测试应用程序作为 Docker 容器。</span><span class="sxs-lookup"><span data-stu-id="d2f82-155">This is the developer's process to run and test the app as a Docker container.</span></span> <span data-ttu-id="d2f82-156">内部循环工作流将在后面的部分中所述。</span><span class="sxs-lookup"><span data-stu-id="d2f82-156">The inner-loop workflow will be explained in the sections that follow.</span></span>

<span data-ttu-id="d2f82-157">后退一步要查看端到端工作流，DevOps 工作流不只是一项技术或工具集： 它是一种心态需要区域性演变。</span><span class="sxs-lookup"><span data-stu-id="d2f82-157">Taking a step back to look at the end-to end workflow, the DevOps workflow is more than a technology or a tool set: it's a mindset that requires cultural evolution.</span></span> <span data-ttu-id="d2f82-158">它的人员、 流程和相应的工具，以使您的应用程序生命周期更快、 更可预测。</span><span class="sxs-lookup"><span data-stu-id="d2f82-158">It's people, processes, and the appropriate tools to make your application life cycle faster and more predictable.</span></span> <span data-ttu-id="d2f82-159">企业通常采用容器化工作流重构其组织来表示人员和流程相匹配的容器化工作流。</span><span class="sxs-lookup"><span data-stu-id="d2f82-159">Enterprises that adopt a containerized workflow typically restructure their organizations to represent people and processes that match the containerized workflow.</span></span>

<span data-ttu-id="d2f82-160">DevOps 在其中完成练习可帮助团队更快地响应一起竞争压力通过自动化，这会导致改进可跟踪性和可重复的工作流以代替容易出错的手动过程。</span><span class="sxs-lookup"><span data-stu-id="d2f82-160">Practicing DevOps can help teams respond faster together to competitive pressures by replacing error-prone manual processes with automation, which results in improved traceability and repeatable workflows.</span></span> <span data-ttu-id="d2f82-161">组织还可以更有效地管理环境并实现成本节约与在本地和云资源的组合以及紧密集成的工具。</span><span class="sxs-lookup"><span data-stu-id="d2f82-161">Organizations also can manage environments more efficiently and realize cost savings with a combination of on-premises and cloud resources as well as tightly integrated tooling.</span></span>

<span data-ttu-id="d2f82-162">在实现 Docker 应用程序 DevOps 工作流时，您将看到 Docker 技术是出现在工作流，几乎每个阶段中开发环境中生成测试 CI 阶段中，内部循环 （代码中，运行、 调试） 中工作时，最后，这些容器到过渡和生产环境的部署。</span><span class="sxs-lookup"><span data-stu-id="d2f82-162">When implementing your DevOps workflow for Docker applications, you'll see that Docker technologies are present in almost every stage of the workflow, from your development box while working in the inner loop (code, run, debug), the build-test-CI phase, and, finally, the deployment of those containers to the staging and production environments.</span></span>

<span data-ttu-id="d2f82-163">改进质量做法有助于识别在开发周期，降低了成本修复它们的早期的缺陷。</span><span class="sxs-lookup"><span data-stu-id="d2f82-163">Improvement of quality practices helps to identify defects early in the development cycle, which reduces the cost of fixing them.</span></span> <span data-ttu-id="d2f82-164">通过在映像中包括的环境和依赖项，并采用相同的映像部署到多个环境的理念，您将升级提取提高部署可靠性的特定于环境的配置这一规定。</span><span class="sxs-lookup"><span data-stu-id="d2f82-164">By including the environment and dependencies in the image and adopting a philosophy of deploying the same image across multiple environments, you promote a discipline of extracting the environment-specific configurations making deployments more reliable.</span></span>

<span data-ttu-id="d2f82-165">通过有效检测 （监视和诊断） 获得的丰富数据提供了深入了解性能问题和用户行为，以指导将来的优先级和投资。</span><span class="sxs-lookup"><span data-stu-id="d2f82-165">Rich data obtained through effective instrumentation (monitoring and diagnostics) provides insight into performance issues and user behavior to guide future priorities and investments.</span></span>

<span data-ttu-id="d2f82-166">应考虑 DevOps 之旅，而非目的。</span><span class="sxs-lookup"><span data-stu-id="d2f82-166">DevOps should be considered a journey, not a destination.</span></span> <span data-ttu-id="d2f82-167">它应以增量方式实现通过相应地指定了作用域项目从其演示成功、 学习和发展。</span><span class="sxs-lookup"><span data-stu-id="d2f82-167">It should be implemented incrementally through appropriately scoped projects from which you can demonstrate success, learn, and evolve.</span></span>

## <a name="benefits-of-devops-for-containerized-applications"></a><span data-ttu-id="d2f82-168">容器化应用程序的 DevOps 的优势</span><span class="sxs-lookup"><span data-stu-id="d2f82-168">Benefits of DevOps for containerized applications</span></span>

<span data-ttu-id="d2f82-169">下面是一些提供坚实的 DevOps 工作流的最重要好处：</span><span class="sxs-lookup"><span data-stu-id="d2f82-169">Here are some of the most important benefits provided by a solid DevOps workflow:</span></span>

- <span data-ttu-id="d2f82-170">更好地符合性以更快地交付更高质量软件。</span><span class="sxs-lookup"><span data-stu-id="d2f82-170">Deliver better-quality software, faster and with better compliance.</span></span>

- <span data-ttu-id="d2f82-171">前面更经济实惠地推动持续改进和调整。</span><span class="sxs-lookup"><span data-stu-id="d2f82-171">Drive continuous improvement and adjustments earlier and more economically.</span></span>

- <span data-ttu-id="d2f82-172">提高了透明度和交付和运行软件所涉及的利益干系人之间的协作。</span><span class="sxs-lookup"><span data-stu-id="d2f82-172">Increase transparency and collaboration among stakeholders involved in delivering and operating software.</span></span>

- <span data-ttu-id="d2f82-173">控制成本并更有效地利用预配的资源，同时最大程度的安全风险。</span><span class="sxs-lookup"><span data-stu-id="d2f82-173">Control costs and utilize provisioned resources more effectively while minimizing security risks.</span></span>

- <span data-ttu-id="d2f82-174">插于许多现有的 DevOps 投资，包括开放源代码中的投资。</span><span class="sxs-lookup"><span data-stu-id="d2f82-174">Plug and play well with many of your existing DevOps investments, including investments in open-source.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="d2f82-175">[上一页](index.md)
>[下一页](../Microsoft-platform-tools-containerized-apps/index.md)</span><span class="sxs-lookup"><span data-stu-id="d2f82-175">[Previous](index.md)
[Next](../Microsoft-platform-tools-containerized-apps/index.md)</span></span>
