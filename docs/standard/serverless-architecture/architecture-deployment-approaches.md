---
title: 体系结构部署方法-无服务器应用
description: 不同的方式企业体系结构的指南是已部署到云，IaaS、 PaaS、 容器之间的比较和无服务器。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 75fd35a906048a96dbd9f6205ead832dfd667455
ms.sourcegitcommit: 8699383914c24a0df033393f55db3369db728a7b
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/15/2019
ms.locfileid: "65643383"
---
# <a name="architecture-deployment-approaches"></a><span data-ttu-id="9b813-103">体系结构部署方法</span><span class="sxs-lookup"><span data-stu-id="9b813-103">Architecture deployment approaches</span></span>

<span data-ttu-id="9b813-104">而不考虑体系结构方法用于设计业务应用程序、 实现中或这些应用程序的部署可能会有所不同。</span><span class="sxs-lookup"><span data-stu-id="9b813-104">Regardless of the architecture approach used to design a business application, the implementation, or deployment of those applications may vary.</span></span> <span data-ttu-id="9b813-105">企业上承载应用程序从物理硬件的所有内容对无服务器函数。</span><span class="sxs-lookup"><span data-stu-id="9b813-105">Businesses host applications on everything from physical hardware to serverless functions.</span></span>

## <a name="n-tier-applications"></a><span data-ttu-id="9b813-106">N 层应用程序</span><span class="sxs-lookup"><span data-stu-id="9b813-106">N-Tier applications</span></span>

<span data-ttu-id="9b813-107">[N 层体系结构模式](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier)是成熟的体系结构，只需是指各逻辑层分为单独的物理层的应用程序。</span><span class="sxs-lookup"><span data-stu-id="9b813-107">The [N-Tier architecture pattern](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier) is a mature architecture and simply refers to applications that separate various logical layers into separate physical tiers.</span></span> <span data-ttu-id="9b813-108">N 层体系结构是 N 层体系结构的物理实现。</span><span class="sxs-lookup"><span data-stu-id="9b813-108">N-Tier architecture is a physical implementation of N-Layer architecture.</span></span> <span data-ttu-id="9b813-109">此体系结构的最常见的实现包括：</span><span class="sxs-lookup"><span data-stu-id="9b813-109">The most common implementation of this architecture includes:</span></span>

* <span data-ttu-id="9b813-110">表示层，例如 web 应用。</span><span class="sxs-lookup"><span data-stu-id="9b813-110">A presentation tier, for example a web app.</span></span>
* <span data-ttu-id="9b813-111">将 API 或数据访问层，如 REST API。</span><span class="sxs-lookup"><span data-stu-id="9b813-111">An API or data access tier, such as a REST API.</span></span>
* <span data-ttu-id="9b813-112">数据层，例如 SQL 数据库。</span><span class="sxs-lookup"><span data-stu-id="9b813-112">A data tier, such as a SQL database.</span></span>

![N 层体系结构](./media/n-tier-architecture.png)

<span data-ttu-id="9b813-114">N 层解决方案具有以下特征：</span><span class="sxs-lookup"><span data-stu-id="9b813-114">N-tier solutions have the following characteristics:</span></span>

* <span data-ttu-id="9b813-115">项目通常与层。</span><span class="sxs-lookup"><span data-stu-id="9b813-115">Projects are typically aligned with tiers.</span></span>
* <span data-ttu-id="9b813-116">测试可能会接近以不同的方式按层级。</span><span class="sxs-lookup"><span data-stu-id="9b813-116">Testing may be approached differently by tier.</span></span>
* <span data-ttu-id="9b813-117">层提供的抽象层，例如表示层通常忽略数据层的实现细节。</span><span class="sxs-lookup"><span data-stu-id="9b813-117">Tiers provide layers of abstraction, for example the presentation tier is typically ignorant of the implementation details of the data tier.</span></span>
* <span data-ttu-id="9b813-118">通常情况下，层只能与相邻的层交互。</span><span class="sxs-lookup"><span data-stu-id="9b813-118">Typically, layers only interact with adjacent layers.</span></span>
* <span data-ttu-id="9b813-119">版本通常托管在该项目，并因此层级别。</span><span class="sxs-lookup"><span data-stu-id="9b813-119">Releases are often managed at the project, and therefore tier, level.</span></span> <span data-ttu-id="9b813-120">简单的 API 更改可能要求整个的中间层的新版本。</span><span class="sxs-lookup"><span data-stu-id="9b813-120">A simple API change may require a new release of an entire middle tier.</span></span>

<span data-ttu-id="9b813-121">这种方法提供了几个好处，包括：</span><span class="sxs-lookup"><span data-stu-id="9b813-121">This approach provides several benefits, including:</span></span>

* <span data-ttu-id="9b813-122">隔离的数据库 （通常前端不能直接访问数据库后端）。</span><span class="sxs-lookup"><span data-stu-id="9b813-122">Isolation of the database (often the front end doesn't have direct access to the database back end).</span></span>
* <span data-ttu-id="9b813-123">重复使用的 API （例如，移动、 桌面和 web 应用客户端可以所有重复使用相同的 Api）。</span><span class="sxs-lookup"><span data-stu-id="9b813-123">Reuse of the API (for example, mobile, desktop, and web app clients can all reuse the same APIs).</span></span>
* <span data-ttu-id="9b813-124">若要横向扩展层相互独立的功能。</span><span class="sxs-lookup"><span data-stu-id="9b813-124">Ability to scale out tiers independent of each other.</span></span>
* <span data-ttu-id="9b813-125">重构隔离： 一层可能会重构而不会影响其他层。</span><span class="sxs-lookup"><span data-stu-id="9b813-125">Refactoring isolation: one tier may be refactored without impacting other tiers.</span></span>

## <a name="on-premises-and-infrastructure-as-a-service-iaas"></a><span data-ttu-id="9b813-126">在本地和基础结构即服务 (IaaS)</span><span class="sxs-lookup"><span data-stu-id="9b813-126">On-premises and Infrastructure as a Service (IaaS)</span></span>

<span data-ttu-id="9b813-127">托管应用程序的传统方法需要购买硬件和管理所有软件安装，包括操作系统。</span><span class="sxs-lookup"><span data-stu-id="9b813-127">The traditional approach to hosting applications requires buying hardware and managing all of the software installations, including the operating system.</span></span> <span data-ttu-id="9b813-128">最初，这涉及昂贵的数据中心和物理硬件。</span><span class="sxs-lookup"><span data-stu-id="9b813-128">Originally this involved expensive data centers and physical hardware.</span></span> <span data-ttu-id="9b813-129">附带了操作系统的物理硬件的挑战有很多，包括：</span><span class="sxs-lookup"><span data-stu-id="9b813-129">The challenges that come with operating physical hardware are many, including:</span></span>

* <span data-ttu-id="9b813-130">需要购买额外的"只是在用例"或峰值需求方案。</span><span class="sxs-lookup"><span data-stu-id="9b813-130">The need to buy excess for "just in case" or peak demand scenarios.</span></span>
* <span data-ttu-id="9b813-131">保护对硬件的物理访问。</span><span class="sxs-lookup"><span data-stu-id="9b813-131">Securing physical access to the hardware.</span></span>
* <span data-ttu-id="9b813-132">硬件故障 （例如磁盘故障） 的职责。</span><span class="sxs-lookup"><span data-stu-id="9b813-132">Responsibility for hardware failure (such as disk failure).</span></span>
* <span data-ttu-id="9b813-133">冷却。</span><span class="sxs-lookup"><span data-stu-id="9b813-133">Cooling.</span></span>
* <span data-ttu-id="9b813-134">配置路由器和负载均衡器。</span><span class="sxs-lookup"><span data-stu-id="9b813-134">Configuring routers and load balancers.</span></span>
* <span data-ttu-id="9b813-135">电源冗余。</span><span class="sxs-lookup"><span data-stu-id="9b813-135">Power redundancy.</span></span>
* <span data-ttu-id="9b813-136">保护软件的访问。</span><span class="sxs-lookup"><span data-stu-id="9b813-136">Securing software access.</span></span>

![IaaS 方法](./media/iaas-approach.png)

<span data-ttu-id="9b813-138">硬件，通过"虚拟机"的虚拟化使基础结构即服务 (IaaS)。</span><span class="sxs-lookup"><span data-stu-id="9b813-138">Virtualization of hardware, via "virtual machines" enables Infrastructure as a Service (IaaS).</span></span> <span data-ttu-id="9b813-139">主机计算机有效地进行分区以分配为其自己的内存、 CPU 和存储提供的资源添加到实例。</span><span class="sxs-lookup"><span data-stu-id="9b813-139">Host machines are effectively partitioned to provide resources to instances with allocations for their own memory, CPU, and storage.</span></span> <span data-ttu-id="9b813-140">团队设置必要的虚拟机以及如何配置关联的网络和存储的访问。</span><span class="sxs-lookup"><span data-stu-id="9b813-140">The team provisions the necessary VMs and configures the associated networks and access to storage.</span></span>

<span data-ttu-id="9b813-141">有关详细信息，请参阅[虚拟机 N 层参考体系结构](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier)。</span><span class="sxs-lookup"><span data-stu-id="9b813-141">For more information, see [virtual machine N-tier reference architecture](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier).</span></span>

<span data-ttu-id="9b813-142">尽管虚拟化和基础结构即服务 (IaaS) 解决许多问题，但仍在基础结构团队的手中由大的职责。</span><span class="sxs-lookup"><span data-stu-id="9b813-142">Although virtualization and Infrastructure as a Service (IaaS) address many concerns, it still leaves much responsibility in the hands of the infrastructure team.</span></span> <span data-ttu-id="9b813-143">团队维护的操作系统版本、 应用安全修补程序，并在目标计算机上安装第三方依赖项。</span><span class="sxs-lookup"><span data-stu-id="9b813-143">The team maintains operating system versions, applies security patches, and installs third-party dependencies on the target machines.</span></span> <span data-ttu-id="9b813-144">应用程序通常在与测试环境相比的生产计算机上以不同方式行为。</span><span class="sxs-lookup"><span data-stu-id="9b813-144">Apps often behave differently on production machines compared to the test environment.</span></span> <span data-ttu-id="9b813-145">由于不同的依赖项版本和/或 OS SKU 级别出现的问题。</span><span class="sxs-lookup"><span data-stu-id="9b813-145">Issues arise due to different dependency versions and/or OS SKU levels.</span></span> <span data-ttu-id="9b813-146">尽管许多组织部署到这些目标的 N 层应用程序，许多公司都受益于如部署到多个云本机模型[平台即服务](#platform-as-a-service-paas)。</span><span class="sxs-lookup"><span data-stu-id="9b813-146">Although many organizations deploy N-Tier applications to these targets, many companies benefit from deploying to a more cloud native model such as [Platform as a Service](#platform-as-a-service-paas).</span></span> <span data-ttu-id="9b813-147">使用微服务体系结构都更具挑战性，因为横向扩展实现弹性和恢复能力的要求。</span><span class="sxs-lookup"><span data-stu-id="9b813-147">Architectures with microservices are more challenging because of the requirements to scale out for elasticity and resiliency.</span></span>

<span data-ttu-id="9b813-148">有关详细信息，请参阅[虚拟机](https://docs.microsoft.com/azure/virtual-machines/)。</span><span class="sxs-lookup"><span data-stu-id="9b813-148">For more information, see [virtual machines](https://docs.microsoft.com/azure/virtual-machines/).</span></span>

## <a name="platform-as-a-service-paas"></a><span data-ttu-id="9b813-149">平台即服务 (PaaS)</span><span class="sxs-lookup"><span data-stu-id="9b813-149">Platform as a Service (PaaS)</span></span>

<span data-ttu-id="9b813-150">服务 (PaaS) 提供了平台配置开发人员可以直接插入到的解决方案。</span><span class="sxs-lookup"><span data-stu-id="9b813-150">Platform as a Service (PaaS) offers configured solutions that developers can plug into directly.</span></span> <span data-ttu-id="9b813-151">PaaS 托管的宿主是另一个术语。</span><span class="sxs-lookup"><span data-stu-id="9b813-151">PaaS is another term for managed hosting.</span></span> <span data-ttu-id="9b813-152">它无需管理基础操作系统，安全修补程序，并在许多情况下任何第三方依赖项。</span><span class="sxs-lookup"><span data-stu-id="9b813-152">It eliminates the need to manage the base operating system, security patches and in many cases any third-party dependencies.</span></span> <span data-ttu-id="9b813-153">平台的示例包括数据库的 web 应用程序和移动后端。</span><span class="sxs-lookup"><span data-stu-id="9b813-153">Examples of platforms include web applications, databases, and mobile back ends.</span></span>

<span data-ttu-id="9b813-154">PaaS 解决普遍适用于 IaaS 的挑战。</span><span class="sxs-lookup"><span data-stu-id="9b813-154">PaaS addresses the challenges common to IaaS.</span></span> <span data-ttu-id="9b813-155">PaaS 让开发人员将精力集中在代码或数据库架构而不是获取部署方式。</span><span class="sxs-lookup"><span data-stu-id="9b813-155">PaaS allows the developer to focus on the code or database schema rather than how it gets deployed.</span></span> <span data-ttu-id="9b813-156">PaaS 的优点包括：</span><span class="sxs-lookup"><span data-stu-id="9b813-156">Benefits of PaaS include:</span></span>

* <span data-ttu-id="9b813-157">需要支付使用模型，消除了投资在空闲状态机中的开销。</span><span class="sxs-lookup"><span data-stu-id="9b813-157">Pay for use models that eliminate the overhead of investing in idle machines.</span></span>
* <span data-ttu-id="9b813-158">直接部署并改进的 DevOps、 持续集成 (CI) 和持续交付 (CD) 管道。</span><span class="sxs-lookup"><span data-stu-id="9b813-158">Direct deployment and improved DevOps, continuous integration (CI), and continuous delivery (CD) pipelines.</span></span>
* <span data-ttu-id="9b813-159">自动升级、 更新和安全修补程序。</span><span class="sxs-lookup"><span data-stu-id="9b813-159">Automatic upgrades, updates, and security patches.</span></span>
* <span data-ttu-id="9b813-160">按钮式横向扩展和纵向扩展 （弹性缩放）。</span><span class="sxs-lookup"><span data-stu-id="9b813-160">Push-button scale out and scale up (elastic scale).</span></span>

<span data-ttu-id="9b813-161">PaaS 的主要缺点通常是供应商绑架。</span><span class="sxs-lookup"><span data-stu-id="9b813-161">The main disadvantage of PaaS traditionally has been vendor lock-in.</span></span> <span data-ttu-id="9b813-162">例如，某些 PaaS 提供程序仅支持 ASP.NET、 Node.js 或其他特定语言和平台。</span><span class="sxs-lookup"><span data-stu-id="9b813-162">For example, some PaaS providers only support ASP.NET, Node.js, or other specific languages and platforms.</span></span> <span data-ttu-id="9b813-163">产品，如 Azure 应用服务已演变成面向多个平台和支持各种语言和框架，用于托管 web 应用。</span><span class="sxs-lookup"><span data-stu-id="9b813-163">Products like Azure App Service have evolved to address multiple platforms and support a variety of languages and frameworks for hosting web apps.</span></span>

![平台即服务体系结构](./media/paas-architecture.png)

## <a name="software-as-a-service-saas"></a><span data-ttu-id="9b813-165">软件即服务 (SaaS)</span><span class="sxs-lookup"><span data-stu-id="9b813-165">Software as a Service (SaaS)</span></span>

<span data-ttu-id="9b813-166">软件即服务或 SaaS 是集中托管和可用而无需本地安装或预配。</span><span class="sxs-lookup"><span data-stu-id="9b813-166">Software as a Service or SaaS is centrally hosted and available without local installation or provisioning.</span></span> <span data-ttu-id="9b813-167">SaaS 通常是基于 PaaS 作为托管平台，部署软件。</span><span class="sxs-lookup"><span data-stu-id="9b813-167">SaaS often is hosted on top of PaaS as a platform for deploying software.</span></span> <span data-ttu-id="9b813-168">SaaS 提供服务运行并连接现有的软件。</span><span class="sxs-lookup"><span data-stu-id="9b813-168">SaaS provides services to run and connect with existing software.</span></span> <span data-ttu-id="9b813-169">SaaS 通常是垂直的特定于和行业。</span><span class="sxs-lookup"><span data-stu-id="9b813-169">SaaS is often industry and vertical specific.</span></span> <span data-ttu-id="9b813-170">SaaS 通常使用许可，通常会提供客户端/服务器模型。</span><span class="sxs-lookup"><span data-stu-id="9b813-170">SaaS is often licensed and typically provides a client/server model.</span></span> <span data-ttu-id="9b813-171">大多数现代的 SaaS 产品/服务为客户端使用基于 web 的应用。</span><span class="sxs-lookup"><span data-stu-id="9b813-171">Most modern SaaS offerings use web-based apps for the client.</span></span> <span data-ttu-id="9b813-172">公司通常用作许可证产品/服务的业务解决方案所认为的 SaaS。</span><span class="sxs-lookup"><span data-stu-id="9b813-172">Companies typically consider SaaS as a business solution to license offerings.</span></span> <span data-ttu-id="9b813-173">它通常不被实现作为可伸缩性和可维护性的应用程序的体系结构考虑事项。</span><span class="sxs-lookup"><span data-stu-id="9b813-173">It isn't often implemented as architecture consideration for scalability and maintainability of an application.</span></span> <span data-ttu-id="9b813-174">实际上，大多数 SaaS 解决方案基于 IaaS、 PaaS，和/或无服务器的后端。</span><span class="sxs-lookup"><span data-stu-id="9b813-174">Indeed, most SaaS solutions are built on IaaS, PaaS, and/or serverless back ends.</span></span>

<span data-ttu-id="9b813-175">了解有关通过 SaaS[示例应用程序](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app)。</span><span class="sxs-lookup"><span data-stu-id="9b813-175">Learn more about SaaS through a [sample application](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app).</span></span>

## <a name="containers-and-functions-as-a-service-faas"></a><span data-ttu-id="9b813-176">容器和服务 (FaaS) 的功能</span><span class="sxs-lookup"><span data-stu-id="9b813-176">Containers and Functions as a Service (FaaS)</span></span>

<span data-ttu-id="9b813-177">容器是有趣的解决方案，无需使用 IaaS 类似于 PaaS 的优势。</span><span class="sxs-lookup"><span data-stu-id="9b813-177">Containers are an interesting solution that enables PaaS-like benefits without the IaaS overhead.</span></span> <span data-ttu-id="9b813-178">容器是实质上是包含空白的基本运行的唯一应用程序所需的运行时。</span><span class="sxs-lookup"><span data-stu-id="9b813-178">A container is essentially a runtime that contains the bare essentials needed to run a unique application.</span></span> <span data-ttu-id="9b813-179">在主机之间共享的主机操作系统和存储等服务的内核或核心部分。</span><span class="sxs-lookup"><span data-stu-id="9b813-179">The kernel or core part of the host operating system and services such as storage are shared across a host.</span></span> <span data-ttu-id="9b813-180">共享的内核使容器轻型的软件 （有些仅仅兆字节为单位的大小，典型的虚拟机的数千兆字节大小）。</span><span class="sxs-lookup"><span data-stu-id="9b813-180">The shared kernel enables containers to be lightweight (some are mere megabytes in size, compared to the gigabyte size of typical virtual machines).</span></span> <span data-ttu-id="9b813-181">与已在运行时主机，容器可以启动速度快，促进高可用性。</span><span class="sxs-lookup"><span data-stu-id="9b813-181">With hosts already running, containers can be started quickly, facilitating high availability.</span></span> <span data-ttu-id="9b813-182">能够快速启动容器还提供了额外的复原能力的层。</span><span class="sxs-lookup"><span data-stu-id="9b813-182">The ability to spin up containers quickly also provides extra layers of resiliency.</span></span> <span data-ttu-id="9b813-183">Docker 是一个容器的更受欢迎的实现。</span><span class="sxs-lookup"><span data-stu-id="9b813-183">Docker is one of the more popular implementations of containers.</span></span>

<span data-ttu-id="9b813-184">容器的优点包括：</span><span class="sxs-lookup"><span data-stu-id="9b813-184">Benefits of containers include:</span></span>

* <span data-ttu-id="9b813-185">轻型且可移植的</span><span class="sxs-lookup"><span data-stu-id="9b813-185">Lightweight and portable</span></span>
* <span data-ttu-id="9b813-186">自包含因此无需安装依赖项</span><span class="sxs-lookup"><span data-stu-id="9b813-186">Self-contained so no need to install dependencies</span></span>
* <span data-ttu-id="9b813-187">提供一致的环境，而不考虑主机 （运行在便携式计算机上的云服务器完全相同）</span><span class="sxs-lookup"><span data-stu-id="9b813-187">Provide a consistent environment regardless of the host (runs exactly same on a laptop as on a cloud server)</span></span>
* <span data-ttu-id="9b813-188">可以快速预配用于横向扩展</span><span class="sxs-lookup"><span data-stu-id="9b813-188">Can be provisioned quickly for scale-out</span></span>
* <span data-ttu-id="9b813-189">可以快速重启从失败中恢复</span><span class="sxs-lookup"><span data-stu-id="9b813-189">Can be restarted quickly to recover from failure</span></span>

<span data-ttu-id="9b813-190">在容器主机 （这又可能运行裸机计算机或虚拟机上） 中运行容器。</span><span class="sxs-lookup"><span data-stu-id="9b813-190">A container runs on a container host (that in turn may run on a bare metal machine or a virtual machine).</span></span> <span data-ttu-id="9b813-191">多个容器或同一个容器的实例可能在一台主机上运行。</span><span class="sxs-lookup"><span data-stu-id="9b813-191">Multiple containers or instances of the same containers may run on a single host.</span></span> <span data-ttu-id="9b813-192">真正的故障转移并提高恢复能力，必须跨主机缩放容器。</span><span class="sxs-lookup"><span data-stu-id="9b813-192">For true failover and resiliency, containers must be scaled across hosts.</span></span>

<span data-ttu-id="9b813-193">有关 Docker 容器的详细信息，请参阅[什么是 Docker](../microservices-architecture/container-docker-introduction/docker-defined.md)？</span><span class="sxs-lookup"><span data-stu-id="9b813-193">For more information about Docker containers, see [What is Docker](../microservices-architecture/container-docker-introduction/docker-defined.md)?</span></span>

<span data-ttu-id="9b813-194">通常跨主机管理容器需要如 Kubernetes 业务流程工具。</span><span class="sxs-lookup"><span data-stu-id="9b813-194">Managing containers across hosts typically requires an orchestration tool such as Kubernetes.</span></span> <span data-ttu-id="9b813-195">配置和管理业务流程解决方案如果可能，则可向项目添加额外的开销和复杂性。</span><span class="sxs-lookup"><span data-stu-id="9b813-195">Configuring and managing orchestration solutions may add additional overhead and complexity to projects.</span></span> <span data-ttu-id="9b813-196">幸运的是，许多云提供商提供通过 PaaS 解决方案，简化管理容器业务流程服务。</span><span class="sxs-lookup"><span data-stu-id="9b813-196">Fortunately, many cloud providers provide orchestration services through PaaS solutions to simplify the management of containers.</span></span>

<span data-ttu-id="9b813-197">下图演示了示例的 Kubernetes 安装。</span><span class="sxs-lookup"><span data-stu-id="9b813-197">The following image illustrates an example Kubernetes installation.</span></span> <span data-ttu-id="9b813-198">在安装中的节点地址向外扩展和故障转移。</span><span class="sxs-lookup"><span data-stu-id="9b813-198">Nodes in the installation address scale out and failover.</span></span> <span data-ttu-id="9b813-199">它们运行 Docker 容器实例管理的主服务器。</span><span class="sxs-lookup"><span data-stu-id="9b813-199">They run Docker container instances that are managed by the master server.</span></span> <span data-ttu-id="9b813-200">*Kubelet*是中继到 Docker 命令在 Kubernetes 中的客户端。</span><span class="sxs-lookup"><span data-stu-id="9b813-200">The *kubelet* is the client that relays commands from Kubernetes to Docker.</span></span>

![Kubernetes](./media/kubernetes-example.png)

<span data-ttu-id="9b813-202">有关业务流程的详细信息，请参阅[Azure 上的 Kubernetes](https://docs.microsoft.com/azure/aks/intro-kubernetes)。</span><span class="sxs-lookup"><span data-stu-id="9b813-202">For more information about orchestration, see [Kubernetes on Azure](https://docs.microsoft.com/azure/aks/intro-kubernetes).</span></span>

<span data-ttu-id="9b813-203">函数即服务 (FaaS) 是一种类似于无服务器的专用的容器服务。</span><span class="sxs-lookup"><span data-stu-id="9b813-203">Functions as a Service (FaaS) is a specialized container service that is similar to serverless.</span></span> <span data-ttu-id="9b813-204">FaaS，名为的特定实现[OpenFaaS](https://github.com/openfaas/faas)，顶部容器来提供无服务器功能。</span><span class="sxs-lookup"><span data-stu-id="9b813-204">A specific implementation of FaaS, called [OpenFaaS](https://github.com/openfaas/faas), sits on top of containers to provide serverless capabilities.</span></span> <span data-ttu-id="9b813-205">OpenFaaS 提供了打包所有容器的依赖项运行一段代码所需的模板。</span><span class="sxs-lookup"><span data-stu-id="9b813-205">OpenFaaS provides templates that package all of the container dependencies necessary to run a piece of code.</span></span> <span data-ttu-id="9b813-206">使用模板可以简化部署为功能单元的代码的过程。</span><span class="sxs-lookup"><span data-stu-id="9b813-206">Using templates simplifies the process of deploying code as a functional unit.</span></span> <span data-ttu-id="9b813-207">OpenFaaS 面向已包含容器和业务流程协调程序，因为它可以使用现有基础结构的体系结构。</span><span class="sxs-lookup"><span data-stu-id="9b813-207">OpenFaaS targets architectures that already include containers and orchestrators because it can use the existing infrastructure.</span></span> <span data-ttu-id="9b813-208">尽管提供无服务器功能，它明确要求你使用 Docker 和业务流程协调程序。</span><span class="sxs-lookup"><span data-stu-id="9b813-208">Although it provides serverless functionality, it specifically requires you to use Docker and an orchestrator.</span></span>

## <a name="serverless"></a><span data-ttu-id="9b813-209">无服务器</span><span class="sxs-lookup"><span data-stu-id="9b813-209">Serverless</span></span>

<span data-ttu-id="9b813-210">无服务器体系结构提供了明显不同的代码和其宿主环境。</span><span class="sxs-lookup"><span data-stu-id="9b813-210">A serverless architecture provides a clear separation between the code and its hosting environment.</span></span> <span data-ttu-id="9b813-211">实现中的代码*函数*由调用*触发器*。</span><span class="sxs-lookup"><span data-stu-id="9b813-211">You implement code in a *function* that is invoked by a *trigger*.</span></span> <span data-ttu-id="9b813-212">该函数退出后，可能会释放所有所需的资源。</span><span class="sxs-lookup"><span data-stu-id="9b813-212">After that function exits, all its needed resources may be freed.</span></span> <span data-ttu-id="9b813-213">触发器可能手动、 定时的进程、 HTTP 请求或文件上传。</span><span class="sxs-lookup"><span data-stu-id="9b813-213">The trigger might be manual, a timed process, an HTTP request, or a file upload.</span></span> <span data-ttu-id="9b813-214">触发器的结果是执行代码。</span><span class="sxs-lookup"><span data-stu-id="9b813-214">The result of the trigger is the execution of code.</span></span> <span data-ttu-id="9b813-215">无服务器平台会有所不同，但最提供访问预定义的 Api 和绑定来简化任务，例如写入到数据库或将排入队列的结果。</span><span class="sxs-lookup"><span data-stu-id="9b813-215">Although serverless platforms vary, most provide access to pre-defined APIs and bindings to streamline tasks such as writing to a database or queueing results.</span></span>

<span data-ttu-id="9b813-216">无服务器是很大程度抽象化要专注于代码的主机环境依赖体系结构。</span><span class="sxs-lookup"><span data-stu-id="9b813-216">Serverless is an architecture that relies heavily on abstracting away the host environment to focus on code.</span></span> <span data-ttu-id="9b813-217">它可以被看作*较少服务器*。</span><span class="sxs-lookup"><span data-stu-id="9b813-217">It can be thought of as *less server*.</span></span>

<span data-ttu-id="9b813-218">容器解决方案提供现有的开发人员构建脚本以将代码发布到无服务器已准备映像。</span><span class="sxs-lookup"><span data-stu-id="9b813-218">Container solutions provide developers existing build scripts to publish code to serverless-ready images.</span></span> <span data-ttu-id="9b813-219">其他实现中使用现有的 PaaS 解决方案提供了可扩展体系结构。</span><span class="sxs-lookup"><span data-stu-id="9b813-219">Other implementations use existing PaaS solutions to provide a scalable architecture.</span></span>

<span data-ttu-id="9b813-220">抽象意味着 DevOps 团队无需预配或管理服务器，也不特定容器。</span><span class="sxs-lookup"><span data-stu-id="9b813-220">The abstraction means the DevOps team doesn't have to provision or manage servers, nor specific containers.</span></span> <span data-ttu-id="9b813-221">无服务器平台的主机代码，作为脚本或打包可执行文件使用相关的 SDK，构建并分配所需的资源的代码就能缩放。</span><span class="sxs-lookup"><span data-stu-id="9b813-221">The serverless platform hosts code, either as script or packaged executables built with a related SDK, and allocates the necessary resources for the code to scale.</span></span>

<span data-ttu-id="9b813-222">下图的关系图四个无服务器组件。</span><span class="sxs-lookup"><span data-stu-id="9b813-222">The following illustration diagrams four serverless components.</span></span> <span data-ttu-id="9b813-223">HTTP 请求会导致签出 API 代码运行。</span><span class="sxs-lookup"><span data-stu-id="9b813-223">An HTTP request causes the Checkout API code to run.</span></span> <span data-ttu-id="9b813-224">签出 API 将代码插入到数据库，并插入触发其他多项功能运行，以执行计算任务和履行订单等任务。</span><span class="sxs-lookup"><span data-stu-id="9b813-224">The Checkout API inserts code into a database, and the insert triggers several other functions to run to perform tasks like computing tasks and fulfilling the order.</span></span>

![无服务器实现](./media/serverless-implementation.png)

<span data-ttu-id="9b813-226">无服务器的优点包括：</span><span class="sxs-lookup"><span data-stu-id="9b813-226">The advantages of serverless include:</span></span>

* <span data-ttu-id="9b813-227">**高的密度。**</span><span class="sxs-lookup"><span data-stu-id="9b813-227">**High density.**</span></span> <span data-ttu-id="9b813-228">相同的无服务器代码的多个实例可以与容器或虚拟机相比在同一主机上运行。</span><span class="sxs-lookup"><span data-stu-id="9b813-228">Many instances of the same serverless code can run on the same host compared to containers or virtual machines.</span></span> <span data-ttu-id="9b813-229">跨多个主机向外扩展和复原能力实例小数位数。</span><span class="sxs-lookup"><span data-stu-id="9b813-229">The instances scale across multiple hosts scale out and resiliency.</span></span>
* <span data-ttu-id="9b813-230">**Micro 计费**。</span><span class="sxs-lookup"><span data-stu-id="9b813-230">**Micro-billing**.</span></span> <span data-ttu-id="9b813-231">基于无服务器执行，在某些情况下节约大量成本最无服务器的提供程序清单。</span><span class="sxs-lookup"><span data-stu-id="9b813-231">Most serverless providers bill based on serverless executions, enabling massive cost savings in certain scenarios.</span></span>
* <span data-ttu-id="9b813-232">**即时扩展**。</span><span class="sxs-lookup"><span data-stu-id="9b813-232">**Instant scale**.</span></span> <span data-ttu-id="9b813-233">无服务器可以缩减工作负荷自动和快速。</span><span class="sxs-lookup"><span data-stu-id="9b813-233">Serverless can scale to match workloads automatically and quickly.</span></span>
* <span data-ttu-id="9b813-234">**更快地投入**开发人员专注于代码并直接向无服务器平台部署。</span><span class="sxs-lookup"><span data-stu-id="9b813-234">**Faster time to market** Developers focus on code and deploy directly to the serverless platform.</span></span> <span data-ttu-id="9b813-235">组件可以互相独立地释放。</span><span class="sxs-lookup"><span data-stu-id="9b813-235">Components can be released independently of each other.</span></span>

<span data-ttu-id="9b813-236">无服务器计算上下文中最常讨论，但还可以将应用于数据。</span><span class="sxs-lookup"><span data-stu-id="9b813-236">Serverless is most often discussed in the context of compute, but can also apply to data.</span></span> <span data-ttu-id="9b813-237">例如， [Azure SQL](https://docs.microsoft.com/azure/sql-database)并[Cosmos DB](https://docs.microsoft.com/azure/cosmos-db)两者都不是需要你配置的主机或群集的云数据库。</span><span class="sxs-lookup"><span data-stu-id="9b813-237">For example, [Azure SQL](https://docs.microsoft.com/azure/sql-database) and [Cosmos DB](https://docs.microsoft.com/azure/cosmos-db) both provide cloud databases that don't require you to configure host machines or clusters.</span></span> <span data-ttu-id="9b813-238">本书重点介绍无服务器计算。</span><span class="sxs-lookup"><span data-stu-id="9b813-238">This book focuses on serverless compute.</span></span>

## <a name="summary"></a><span data-ttu-id="9b813-239">总结</span><span class="sxs-lookup"><span data-stu-id="9b813-239">Summary</span></span>

<span data-ttu-id="9b813-240">没有范围广泛的体系结构，包括混合方法的可用选项。</span><span class="sxs-lookup"><span data-stu-id="9b813-240">There's a broad spectrum of available choices for architecture, including a hybrid approach.</span></span> <span data-ttu-id="9b813-241">方法、 管理和成本的代价是控件和可移植性的应用程序功能，可简化无服务器。</span><span class="sxs-lookup"><span data-stu-id="9b813-241">Serverless simplifies the approach, management, and cost of application features at the expense of control and portability.</span></span> <span data-ttu-id="9b813-242">但是，许多的无服务器平台公开了配置，以帮助优化该解决方案。</span><span class="sxs-lookup"><span data-stu-id="9b813-242">However, many serverless platforms do expose configuration to help fine-tune the solution.</span></span> <span data-ttu-id="9b813-243">对可移植性代码和更少无服务器平台锁中，还可能会导致最佳编程实践。</span><span class="sxs-lookup"><span data-stu-id="9b813-243">Good programming practices can also lead to more portable code and less serverless platform lock-in.</span></span> <span data-ttu-id="9b813-244">下表说明了体系结构方法并排显示。</span><span class="sxs-lookup"><span data-stu-id="9b813-244">The following table illustrates the architecture approaches side by side.</span></span> <span data-ttu-id="9b813-245">选择无服务器根据规模需求、 你想要管理运行时，以及如何可以将工作负荷分为小组件。</span><span class="sxs-lookup"><span data-stu-id="9b813-245">Choose serverless based on your scale needs, whether or not you want to manage the runtime, and how well you can break your workloads into small components.</span></span> <span data-ttu-id="9b813-246">您将学习如何使用无服务器解决方案的潜在挑战和下一章中的其他决策点。</span><span class="sxs-lookup"><span data-stu-id="9b813-246">You'll learn about potential challenges with serverless and other decision points in the next chapter.</span></span>

|         |<span data-ttu-id="9b813-247">IaaS</span><span class="sxs-lookup"><span data-stu-id="9b813-247">IaaS</span></span>     |<span data-ttu-id="9b813-248">PaaS</span><span class="sxs-lookup"><span data-stu-id="9b813-248">PaaS</span></span>     |<span data-ttu-id="9b813-249">容器</span><span class="sxs-lookup"><span data-stu-id="9b813-249">Container</span></span>|<span data-ttu-id="9b813-250">无服务器</span><span class="sxs-lookup"><span data-stu-id="9b813-250">Serverless</span></span>|
|---------|---------|---------|---------|----------|
|<span data-ttu-id="9b813-251">缩放</span><span class="sxs-lookup"><span data-stu-id="9b813-251">**Scale**</span></span>|<span data-ttu-id="9b813-252">VM</span><span class="sxs-lookup"><span data-stu-id="9b813-252">VM</span></span>       |<span data-ttu-id="9b813-253">实例</span><span class="sxs-lookup"><span data-stu-id="9b813-253">Instance</span></span> |<span data-ttu-id="9b813-254">应用</span><span class="sxs-lookup"><span data-stu-id="9b813-254">App</span></span>      |<span data-ttu-id="9b813-255">函数</span><span class="sxs-lookup"><span data-stu-id="9b813-255">Function</span></span>  |
|<span data-ttu-id="9b813-256">**Abstracts**</span><span class="sxs-lookup"><span data-stu-id="9b813-256">**Abstracts**</span></span>|<span data-ttu-id="9b813-257">硬件</span><span class="sxs-lookup"><span data-stu-id="9b813-257">Hardware</span></span>|<span data-ttu-id="9b813-258">平台</span><span class="sxs-lookup"><span data-stu-id="9b813-258">Platform</span></span>|<span data-ttu-id="9b813-259">OS 主机</span><span class="sxs-lookup"><span data-stu-id="9b813-259">OS Host</span></span>|<span data-ttu-id="9b813-260">运行时</span><span class="sxs-lookup"><span data-stu-id="9b813-260">Runtime</span></span>   |
|<span data-ttu-id="9b813-261">**Unit**</span><span class="sxs-lookup"><span data-stu-id="9b813-261">**Unit**</span></span> |<span data-ttu-id="9b813-262">VM</span><span class="sxs-lookup"><span data-stu-id="9b813-262">VM</span></span>       |<span data-ttu-id="9b813-263">项目</span><span class="sxs-lookup"><span data-stu-id="9b813-263">Project</span></span>  |<span data-ttu-id="9b813-264">图像</span><span class="sxs-lookup"><span data-stu-id="9b813-264">Image</span></span>    |<span data-ttu-id="9b813-265">代码</span><span class="sxs-lookup"><span data-stu-id="9b813-265">Code</span></span>      |
|<span data-ttu-id="9b813-266">**生存期**</span><span class="sxs-lookup"><span data-stu-id="9b813-266">**Lifetime**</span></span>|<span data-ttu-id="9b813-267">几个月</span><span class="sxs-lookup"><span data-stu-id="9b813-267">Months</span></span>|<span data-ttu-id="9b813-268">天到几个月</span><span class="sxs-lookup"><span data-stu-id="9b813-268">Days to Months</span></span>|<span data-ttu-id="9b813-269">分钟到几天</span><span class="sxs-lookup"><span data-stu-id="9b813-269">Minutes to Days</span></span>|<span data-ttu-id="9b813-270">毫秒到数分钟</span><span class="sxs-lookup"><span data-stu-id="9b813-270">Milliseconds to Minutes</span></span>|
|<span data-ttu-id="9b813-271">**责任**</span><span class="sxs-lookup"><span data-stu-id="9b813-271">**Responsibility**</span></span>|<span data-ttu-id="9b813-272">应用程序、 依赖项、 运行时和操作系统</span><span class="sxs-lookup"><span data-stu-id="9b813-272">Applications, dependencies, runtime, and operating system</span></span>|<span data-ttu-id="9b813-273">应用程序和依赖项</span><span class="sxs-lookup"><span data-stu-id="9b813-273">Applications and dependencies</span></span>|<span data-ttu-id="9b813-274">应用程序、 依赖项和运行时</span><span class="sxs-lookup"><span data-stu-id="9b813-274">Applications, dependencies, and runtime</span></span>|<span data-ttu-id="9b813-275">函数</span><span class="sxs-lookup"><span data-stu-id="9b813-275">Function</span></span>

* <span data-ttu-id="9b813-276">**缩放**用于缩放应用程序的单元是指</span><span class="sxs-lookup"><span data-stu-id="9b813-276">**Scale** refers to the unit that is used to scale the application</span></span>
* <span data-ttu-id="9b813-277">**提取**指的由实现抽象的层</span><span class="sxs-lookup"><span data-stu-id="9b813-277">**Abstracts** refers to the layer that is abstracted by the implementation</span></span>
* <span data-ttu-id="9b813-278">**单元**指的是部署的内容的作用域</span><span class="sxs-lookup"><span data-stu-id="9b813-278">**Unit** refers to the scope of what is deployed</span></span>
* <span data-ttu-id="9b813-279">**生存期**指的是典型的运行时的特定实例</span><span class="sxs-lookup"><span data-stu-id="9b813-279">**Lifetime** refers to the typical runtime of a specific instance</span></span>
* <span data-ttu-id="9b813-280">**责任**指的是生成、 部署和维护应用程序的开销</span><span class="sxs-lookup"><span data-stu-id="9b813-280">**Responsibility** refers to the overhead to build, deploy, and maintain the application</span></span>

<span data-ttu-id="9b813-281">下一章将重点关注无服务器体系结构、 用例和设计模式。</span><span class="sxs-lookup"><span data-stu-id="9b813-281">The next chapter will focus on serverless architecture, use cases, and design patterns.</span></span>

## <a name="recommended-resources"></a><span data-ttu-id="9b813-282">推荐的资源</span><span class="sxs-lookup"><span data-stu-id="9b813-282">Recommended resources</span></span>

* [<span data-ttu-id="9b813-283">Azure 应用程序体系结构指南</span><span class="sxs-lookup"><span data-stu-id="9b813-283">Azure application architecture guide</span></span>](https://docs.microsoft.com/azure/architecture/guide/)
* [<span data-ttu-id="9b813-284">Azure Cosmos DB</span><span class="sxs-lookup"><span data-stu-id="9b813-284">Azure Cosmos DB</span></span>](https://docs.microsoft.com/azure/cosmos-db)
* [<span data-ttu-id="9b813-285">Azure SQL</span><span class="sxs-lookup"><span data-stu-id="9b813-285">Azure SQL</span></span>](https://docs.microsoft.com/azure/sql-database)
* [<span data-ttu-id="9b813-286">N 层体系结构模式</span><span class="sxs-lookup"><span data-stu-id="9b813-286">N-Tier architecture pattern</span></span>](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/n-tier)
* [<span data-ttu-id="9b813-287">在 Azure 上的 Kubernetes</span><span class="sxs-lookup"><span data-stu-id="9b813-287">Kubernetes on Azure</span></span>](https://docs.microsoft.com/azure/aks/intro-kubernetes)
* [<span data-ttu-id="9b813-288">Microservices</span><span class="sxs-lookup"><span data-stu-id="9b813-288">Microservices</span></span>](https://docs.microsoft.com/azure/architecture/guide/architecture-styles/microservices)
* [<span data-ttu-id="9b813-289">虚拟机 N 层参考体系结构</span><span class="sxs-lookup"><span data-stu-id="9b813-289">Virtual machine N-tier reference architecture</span></span>](https://docs.microsoft.com/azure/architecture/reference-architectures/virtual-machines-windows/n-tier)
* [<span data-ttu-id="9b813-290">虚拟机</span><span class="sxs-lookup"><span data-stu-id="9b813-290">Virtual machines</span></span>](https://docs.microsoft.com/azure/virtual-machines/)
* [<span data-ttu-id="9b813-291">什么是 Docker？</span><span class="sxs-lookup"><span data-stu-id="9b813-291">What is Docker?</span></span>](../microservices-architecture/container-docker-introduction/docker-defined.md)
* [<span data-ttu-id="9b813-292">Wingtip Tickets SaaS 应用程序</span><span class="sxs-lookup"><span data-stu-id="9b813-292">Wingtip Tickets SaaS application</span></span>](https://docs.microsoft.com/azure/sql-database/saas-tenancy-welcome-wingtip-tickets-app)

>[!div class="step-by-step"]
><span data-ttu-id="9b813-293">[上一页](architecture-approaches.md)
>[下一页](serverless-architecture.md)</span><span class="sxs-lookup"><span data-stu-id="9b813-293">[Previous](architecture-approaches.md)
[Next](serverless-architecture.md)</span></span>
