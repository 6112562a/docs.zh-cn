---
title: 无服务器体系结构-无服务器应用
description: 探索无服务器体系结构支持的各种体系结构和应用，包括 web 应用、移动和 IoT。
author: JEREMYLIKNESS
ms.author: jeliknes
ms.date: 06/26/2018
ms.openlocfilehash: 838dcd7b41df0d8297e1ae10f9c04a8d5b83b332
ms.sourcegitcommit: 4f4a32a5c16a75724920fa9627c59985c41e173c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 10/17/2019
ms.locfileid: "72522403"
---
# <a name="serverless-architecture"></a>无服务器体系结构

使用[无服务器](https://azure.com/serverless)体系结构的方法有很多。 本章探讨集成无服务器的常见体系结构的示例。 还介绍了在实现无服务器时可能会带来额外挑战或需要额外考虑的问题。 最后，提供了多个设计示例，这些示例演示了各种无服务器用例。

无服务器主机通常使用现有的基于容器的或 PaaS 层来管理无服务器的实例。 例如，Azure Functions 基于[Azure App Service](https://docs.microsoft.com/azure/app-service/)。 应用服务用于扩展实例，并管理执行 Azure Functions 代码的运行时。 对于基于 Windows 的函数，主机作为 PaaS 运行并横向扩展 .NET 运行时。 对于基于 Linux 的函数，主机利用容器。

![Azure Functions 体系结构](./media/azure-functions-architecture.png)

Web 作业核心提供函数的执行上下文。 语言运行时运行脚本，执行库并承载目标语言的框架。 例如，node.js 用于运行 JavaScript 函数，.NET Framework 用于运行C#函数。 本章稍后将详细介绍语言和平台选项。

某些项目可能会受益于采用无服务器的 "内置" 方法。 依赖于微服务的应用程序可以使用无服务器技术实现所有微服务。 大多数应用程序都是混合的，遵循 N 层设计，并使用无服务器来实现组件，因为这些组件是模块化且可单独缩放的。 为了帮助理解这些方案，本部分介绍使用无服务器的一些常见体系结构示例。

## <a name="full-serverless-back-end"></a>完全无服务器后端

完整的无服务器后端适用于多种类型的方案，尤其是在生成新的或 "绿色字段" 应用程序时。 具有大量 Api 的应用程序可能会受益于将每个 API 作为无服务器函数实现。 基于微服务体系结构的应用程序就是可以作为完整的无服务器后端实现的另一个示例。 微服务在各种协议之间进行通信。 具体方案包括：

- 基于 API 的 SaaS 产品（示例：财务支付处理器）。
- 消息驱动的应用程序（例如：设备监视解决方案）。
- 专注于服务之间集成的应用（示例：航空公司预订应用程序）。
- 定期运行的进程（例如：基于计时器的数据库清理）。
- 专注于数据转换的应用（例如：由文件上传触发的导入）。
- 提取转换和加载（ETL）进程。

本文档稍后会介绍其他更具体的用例。

## <a name="monoliths-and-starving-the-beast"></a>固化结构和 "从而使 the beast"

常见的难题是将现有的单一应用程序迁移到云。 风险最小的方法是完全在虚拟机上进行 "直接迁移"。 许多商店更倾向于使用迁移来实现其基本代码的现代化。 迁移的实用方法称为 "从而使 the beast"。 在这种情况下，单体架构将 "按原样" 迁移，以开始。 然后，所选服务为现代化。 在某些情况下，服务的签名与原始签名相同：它只是作为函数托管。 将更新客户端以使用新服务，而不是使用单体架构终结点。 在这种情况下，即使在单体架构仍处理事务时，数据库复制等步骤也能使微服务托管其自己的存储。 最终，所有客户端都将迁移到新服务。 单体架构是 "会耗尽" （不再调用其服务），直到所有功能都已替换。 无服务器和代理的组合有助于实现这种迁移。

![无服务器单体架构迁移](./media/serverless-monolith-migration.png)

若要了解有关此方法的详细信息，请观看视频：[通过无服务器 Azure Functions 将应用引入云](https://channel9.msdn.com/Events/Connect/2017/E102)。

## <a name="web-apps"></a>Web 应用

Web 应用非常适合无服务器应用程序。 目前有两种常见的 web 应用方法：服务器驱动的方法和客户端驱动的方法（例如单页面应用程序或 SPA）。 服务器驱动的 web 应用通常使用中间件层发出 API 调用以呈现 web UI。 SPA 应用程序直接从浏览器进行 REST API 调用。 在这两种情况下，无服务器可以通过提供必要的业务逻辑来容纳中间件或 REST API 请求。 常见的体系结构是建立轻型静态 web 服务器。 单页应用程序（SPA）提供 HTML、CSS、JavaScript 和其他浏览器资产。 然后，web 应用连接到微服务后端。

## <a name="mobile-back-ends"></a>移动后端

无服务器应用的事件驱动模式使其成为移动后端的理想选择。 移动设备会触发事件，并执行无服务器代码来满足请求。 利用无服务器模型，开发人员无需部署完整的应用程序更新即可增强业务逻辑。 无服务器方法还允许团队共享终结点和并行工作。

移动开发人员无需成为服务器端专家，就可以构建业务逻辑。 传统上，移动应用连接到本地服务。 构建需要了解服务器平台和编程范例的服务层。 开发人员可以通过操作来设置服务器并对它们进行相应的配置。 生成部署管道时，有时会花费数天甚至数周的时间。 所有这些难题均由无服务器解决。

无服务器抽象的服务器端依赖关系，使开发人员可以专注于业务逻辑。 例如，使用 JavaScript 框架构建应用的移动开发人员也可以使用 JavaScript 生成无服务器功能。 无服务器主机管理操作系统、node.js 实例以承载代码、包依赖项等。 开发人员提供了一组简单的输入和输出的标准模板。 然后，他们可以专注于生成和测试业务逻辑。 因此，他们可以使用现有技能来构建移动应用的后端逻辑，而无需了解新的平台或成为 "服务器端开发人员"。

![无服务器移动后端](./media/serverless-mobile-backend.png)

大多数云提供商提供基于移动的无服务器产品，可简化整个移动开发生命周期。 这些产品可能会自动设置数据库以保存数据、处理 DevOps 的问题、提供基于云的生成和测试框架，以及使用开发人员的首选语言编写业务流程脚本的能力。 以以移动为中心的无服务器方法，可以简化该过程。 无服务器消除了设置、配置和维护移动后端服务器的巨大开销。

## <a name="internet-of-things-iot"></a>物联网 (IoT)

IoT 是指相互联网的物理对象。 它们有时称为 "连接的设备" 或 "智能设备"。 来自汽车和自动售货机机的所有内容都可以连接，并将信息从库存发送到传感器数据，如温度和湿度。 在企业中，IoT 通过监视和自动化提供了业务流程改进。 IoT 数据可用于在大型仓库中控制气候，或通过供应链跟踪清单。 当检测到冒烟时，IoT 可能会检测到化学液体，并致电防火部。

设备和信息的巨大量通常指示事件驱动的体系结构路由和处理消息。 无服务器是一种理想的解决方案，原因如下：

- 随着设备和数据量的增加，启用缩放。
- 支持添加新的终结点以支持新设备和传感器。
- 有助于实现独立的版本控制，使开发人员无需部署整个系统即可更新特定设备的业务逻辑。
- 复原和停机时间更少。

IoT 的普适性相导致了几个无服务器产品，特别关注 IoT 问题，例如[Azure Iot 中心](https://docs.microsoft.com/azure/iot-hub)。 无服务器的自动执行任务，如设备注册、策略强制、跟踪，甚至在*边缘*将代码部署到设备。 边缘是指连接到 Internet 的传感器和传动装置，而不是 Internet 的活动部分。

>[!div class="step-by-step"]
>[上一页](architecture-approaches.md)
>[下一页](serverless-architecture-considerations.md)
