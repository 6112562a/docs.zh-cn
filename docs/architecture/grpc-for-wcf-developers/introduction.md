---
title: 介绍 - gRPC 面向 WCF 开发人员
description: 简介
ms.date: 09/02/2019
ms.openlocfilehash: 41f470eb02a77b1b6a26a7d4c2ca347ad07d828d
ms.sourcegitcommit: e3cbf26d67f7e9286c7108a2752804050762d02d
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/09/2020
ms.locfileid: "80988929"
---
# <a name="introduction"></a><span data-ttu-id="7f1c4-103">简介</span><span class="sxs-lookup"><span data-stu-id="7f1c4-103">Introduction</span></span>

<span data-ttu-id="7f1c4-104">帮助机器相互通信一直是数字时代的主要关注点之一。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-104">Helping machines communicate with each other has been one of the primary preoccupations of the digital age.</span></span> <span data-ttu-id="7f1c4-105">特别是，正在努力确定满足当前基础架构互操作性需求的最佳远程通信机制。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-105">In particular, there's an ongoing effort to determine the optimal remote communication mechanism that will suit the interoperability demands of the current infrastructure.</span></span> <span data-ttu-id="7f1c4-106">可以想象，随着需求或基础结构的发展，该机制会发生变化。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-106">As you can imagine, that mechanism changes as either the demands or the infrastructure evolves.</span></span>

<span data-ttu-id="7f1c4-107">.NET Core 3.0 的发布标志着 Microsoft 向希望跨一系列平台提供服务的开发人员提供远程通信解决方案的方式发生了转变。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-107">The release of .NET Core 3.0 marks a shift in the way that Microsoft delivers remote communication solutions to developers who want to deliver services across a range of platforms.</span></span> <span data-ttu-id="7f1c4-108">.NET Core 不提供现成的 Windows 通信基础 （WCF），但随着 ASP.NET酷睿 3.0 的发布，它确实提供了内置的 gRPC 功能。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-108">.NET Core doesn't offer Windows Communication Foundation (WCF) out of the box but, with the release of ASP.NET Core 3.0, it does provide built-in gRPC functionality.</span></span>

<span data-ttu-id="7f1c4-109">gRPC 是更广泛的软件社区中一个流行的框架。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-109">gRPC is a popular framework in the wider software community.</span></span> <span data-ttu-id="7f1c4-110">开发人员跨许多编程语言用于现代 RPC 方案。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-110">It's used by developers across many programming languages for modern RPC scenarios.</span></span> <span data-ttu-id="7f1c4-111">社区和生态系统充满活力和活跃。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-111">The community and the ecosystem are vibrant and active.</span></span> <span data-ttu-id="7f1c4-112">对 gRPC 协议的支持正在添加到基础结构组件中，如 Kubernetes、服务网、负载均衡器等。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-112">Support for the gRPC protocol is being added to infrastructure components like Kubernetes, service meshes, load balancers, and more.</span></span> <span data-ttu-id="7f1c4-113">这些因素及其性能、效率和跨平台兼容性使 gRPC 成为新应用和 WCF 应用迁移到 .NET Core 的自然选择。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-113">These factors, together with its performance, efficiency, and cross-platform compatibility, make gRPC a natural choice for new apps and WCF apps moving to .NET Core.</span></span>

## <a name="history"></a><span data-ttu-id="7f1c4-114">历史记录</span><span class="sxs-lookup"><span data-stu-id="7f1c4-114">History</span></span>

<span data-ttu-id="7f1c4-115">计算机网络的基本原理只不过是一组相互交换数据以实现一组相互关联的任务的计算机，自成立以来没有改变。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-115">The fundamental principle of a computer network as nothing more than a group of computers exchanging data with each other to achieve a set of interrelated tasks hasn't changed since its inception.</span></span> <span data-ttu-id="7f1c4-116">但复杂性、规模和预期呈指数级增长。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-116">But the complexity, scale, and expectations have grown exponentially.</span></span>  

<span data-ttu-id="7f1c4-117">在1990年代，主要强调改进使用同一语言和平台的内部网络。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-117">During the 1990s, the emphasis was mainly on improving internal networks that used the same language and platforms.</span></span> <span data-ttu-id="7f1c4-118">TCP/IP 成为此类通信的黄金标准。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-118">TCP/IP became the gold standard for this type of communication.</span></span>

<span data-ttu-id="7f1c4-119">重点很快转移到如何通过推广与语言无关的方法来优化跨多个平台的通信。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-119">The focus soon shifted to how best to optimize communication across multiple platforms by promoting a language-agnostic approach.</span></span> <span data-ttu-id="7f1c4-120">面向服务的体系结构 （SOA） 提供了一个结构，用于松散地耦合可提供给应用程序的广泛服务集合。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-120">Service-oriented architecture (SOA) provided a structure for loosely coupling a broad collection of services that could be provided to an application.</span></span>

<span data-ttu-id="7f1c4-121">*网络服务*的发展发生在所有主要平台都可以访问互联网时，但它们仍然无法相互交互。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-121">The development of *web services* occurred when all major platforms could access the internet, but they still couldn't interact with each other.</span></span> <span data-ttu-id="7f1c4-122">Web 服务具有开放的标准和协议，包括：</span><span class="sxs-lookup"><span data-stu-id="7f1c4-122">Web services have open standards and protocols, including:</span></span>

- <span data-ttu-id="7f1c4-123">用于标记和代码数据的 XML。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-123">XML to tag and code data.</span></span>
- <span data-ttu-id="7f1c4-124">用于传输数据的简单对象访问协议 （SOAP）。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-124">Simple Object Access Protocol (SOAP) to transfer data.</span></span>
- <span data-ttu-id="7f1c4-125">Web 服务定义语言 （WSDL） 用于描述 Web 服务并将其连接到客户端应用程序。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-125">Web Services Definition Language (WSDL) to describe and connect web services to client applications.</span></span>
- <span data-ttu-id="7f1c4-126">通用描述、发现和集成 （UDDI），使 Web 服务可以被其他服务发现。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-126">Universal Description, Discovery, and Integration (UDDI) to make web services discoverable by other services.</span></span>

<span data-ttu-id="7f1c4-127">SOAP 定义了应用程序分布式元素可以相互通信的规则，即使它们位于不同的平台上也是如此。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-127">SOAP defines the rules by which distributed elements of an application can communicate with each other, even if they're on different platforms.</span></span> <span data-ttu-id="7f1c4-128">SOAP 基于 XML，因此它是人类可读的。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-128">SOAP is based on XML, so it's human-readable.</span></span> <span data-ttu-id="7f1c4-129">使SOAP易于理解的牺牲是大小;SOAP 消息大于类似协议中的消息。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-129">The sacrifice for making SOAP easily understood is size; SOAP messages are larger than messages in comparable protocols.</span></span> <span data-ttu-id="7f1c4-130">SOAP 旨在在不丢失安全性或控制的情况下将单片应用程序分解为多组件形式。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-130">SOAP was designed to break monolithic applications into multicomponent form without losing security or control.</span></span> <span data-ttu-id="7f1c4-131">因此，WCF被设计为与这种系统一起工作，不像gRPC，它最初是一个分布式系统。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-131">So WCF was designed to work with that kind of system, unlike gRPC, which began as a distributed system.</span></span> <span data-ttu-id="7f1c4-132">WCF 通过开发和记录 SOAP 堆栈的专有扩展协议来解决其中一些限制，但代价是缺乏其他平台的支持。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-132">WCF addressed some of these limitations by developing and documenting proprietary extension protocols for the SOAP stack, but at the cost of a lack of support from other platforms.</span></span>

<span data-ttu-id="7f1c4-133">Windows 通信基础是构建服务的框架。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-133">Windows Communication Foundation is a framework for building services.</span></span> <span data-ttu-id="7f1c4-134">它设计于 21 世纪初，旨在帮助使用早期 SOA 的开发人员管理使用 SOAP 的复杂性。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-134">It was designed in the early 2000s to help developers using early SOA to manage the complexities of working with SOAP.</span></span> <span data-ttu-id="7f1c4-135">尽管它消除了开发人员编写自己的 SOAP 协议的要求，但 WCF 仍使用 SOAP 来实现与其他系统的互操作性。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-135">Although it removes the requirement for the developers to write their own SOAP protocols, WCF still uses SOAP to enable interoperability with other systems.</span></span> <span data-ttu-id="7f1c4-136">WCF 还设计用于跨多个协议（HTTP/1.1、Net.TCP 等）提供解决方案。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-136">WCF was also designed to deliver solutions across multiple protocols (HTTP/1.1, Net.TCP, and so on).</span></span>

## <a name="microservices"></a><span data-ttu-id="7f1c4-137">微服务</span><span class="sxs-lookup"><span data-stu-id="7f1c4-137">Microservices</span></span>

<span data-ttu-id="7f1c4-138">在微服务体系结构中，大型应用程序构建为小型模块化服务的集合。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-138">In microservice architectures, large applications are built as a collection of smaller modular services.</span></span> <span data-ttu-id="7f1c4-139">每个组件执行特定任务或过程，并且组件设计为可互操作，但可以根据需要隔离。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-139">Each component does a specific task or process, and components are designed to work interoperably but can be isolated as necessary.</span></span>

<span data-ttu-id="7f1c4-140">微服务的优势包括：</span><span class="sxs-lookup"><span data-stu-id="7f1c4-140">Advantages to microservices include:</span></span>

- <span data-ttu-id="7f1c4-141">更改和升级可以独立处理。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-141">Changes and upgrades can be handled independently.</span></span>
- <span data-ttu-id="7f1c4-142">错误处理变得更加高效，因为问题可以追溯到特定服务，然后独立于其他服务进行隔离、重建、测试和重新部署。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-142">Error handling becomes more efficient because problems can be traced to specific services that are then isolated, rebuilt, tested, and redeployed independently of the other services.</span></span>
- <span data-ttu-id="7f1c4-143">可伸缩性可以局限于特定的实例或服务，而不是整个应用程序。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-143">Scalability can be confined to specific instances or services rather than the whole application.</span></span>
- <span data-ttu-id="7f1c4-144">开发可以跨多个团队进行，与许多团队在单个代码库上工作时发生的摩擦更少。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-144">Development can happen across multiple teams, with less friction than occurs when many teams work on a single codebase.</span></span>

<span data-ttu-id="7f1c4-145">向虚拟化、云计算、容器和物联网迈进，推动了微服务的持续崛起。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-145">The move towards increasing virtualization, cloud computing, containers, and the Internet of Things has contributed to the ongoing rise of microservices.</span></span> <span data-ttu-id="7f1c4-146">但是，微服务并非没有挑战。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-146">But microservices aren't without their challenges.</span></span> <span data-ttu-id="7f1c4-147">分散/分散的基础架构更加强调在服务之间通信时对简单性和速度的需求。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-147">The fragmented/decentralized infrastructure put more emphasis on the need for simplicity and speed when communicating between services.</span></span> <span data-ttu-id="7f1c4-148">这反过来又引起了人们对SOAP有时费力和扭曲性的关注。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-148">This in turn drew attention to the sometimes laborious and contorted nature of SOAP.</span></span>

<span data-ttu-id="7f1c4-149">正是在这个环境中，gRPC在微软首次发布WCF10年后推出。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-149">It was into this environment that gRPC was launched, 10 years after Microsoft first released WCF.</span></span> <span data-ttu-id="7f1c4-150">gRPC 直接从 Google 的内部基础设施 RPC （Stubby） 演变而来，它从未基于许多早期 RPC 的参数的相同标准和协议。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-150">Evolved directly from Google's internal infrastructure RPC (Stubby), gRPC was never based on the same standards and protocols that had informed the parameters of many earlier RPCs.</span></span> <span data-ttu-id="7f1c4-151">gRPC 只基于 HTTP/2。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-151">And gRPC was only ever based on HTTP/2.</span></span> <span data-ttu-id="7f1c4-152">这就是为什么它可以利用高级传输协议提供的新功能。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-152">That's why it could draw on the new capabilities that advanced transport protocol provided.</span></span> <span data-ttu-id="7f1c4-153">特别是双向流、二进制消息和多路复用。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-153">In particular, bidirectional streaming, binary messaging, and multiplexing.</span></span>

## <a name="about-this-guide"></a><span data-ttu-id="7f1c4-154">关于本指南</span><span class="sxs-lookup"><span data-stu-id="7f1c4-154">About this guide</span></span>

<span data-ttu-id="7f1c4-155">本指南介绍了 gRPC 的主要功能。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-155">This guide covers the key features of gRPC.</span></span> <span data-ttu-id="7f1c4-156">早期章节对 WCF 的主要特征进行高级别观察，并将其与 gRPC 的主要特征进行比较。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-156">The early chapters take a high-level look at the main features of WCF and compare them to those of gRPC.</span></span> <span data-ttu-id="7f1c4-157">它标识了 WCF 和 gRPC 之间存在直接相关性的位置，以及 gRPC 提供优势的位置。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-157">It identifies where there are direct correlations between WCF and gRPC and also where gRPC offers an advantage.</span></span> <span data-ttu-id="7f1c4-158">当 WCF 和 gRPC 之间没有关联，或者 gRPC 无法提供 WCF 等效解决方案时，本指南将建议解决方法或何处了解更多信息。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-158">When there's no correlation between WCF and gRPC, or when gRPC isn't able to offer an equivalent solution to WCF, this guide will suggest workarounds or where to go for more information.</span></span>

<span data-ttu-id="7f1c4-159">使用一组示例 WCF 应用程序，第 5 章深入探讨将 WCF 服务的主要类型（简单的请求回复、单向和流式处理）转换为 gRPC 中的等效服务。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-159">Using a set of sample WCF applications, Chapter 5 is a deep-dive look at converting the main types of WCF service (simple request-reply, one-way, and streaming) to their equivalents in gRPC.</span></span>

<span data-ttu-id="7f1c4-160">本书的最后一部分将介绍如何在实践中从 gRPC 中获得最佳结果。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-160">The final section of the book looks at how to get the best from gRPC in practice.</span></span> <span data-ttu-id="7f1c4-161">本节包括有关使用附加工具（如 Docker 容器或 Kubernetes）以利用 gRPC 效率的信息。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-161">This section includes information on using additional tools, like Docker containers or Kubernetes, to take advantage of the efficiency of gRPC.</span></span> <span data-ttu-id="7f1c4-162">它还包括有关日志记录、指标和分布式跟踪的监视的详细信息。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-162">It also includes a detailed look at monitoring with logging, metrics, and distributed tracing.</span></span>

## <a name="who-this-guide-is-for"></a><span data-ttu-id="7f1c4-163">本指南适用对象</span><span class="sxs-lookup"><span data-stu-id="7f1c4-163">Who this guide is for</span></span>

<span data-ttu-id="7f1c4-164">本指南是为在 .NET 框架或 .NET Core 中工作的开发人员编写的，这些开发人员使用过 WCF，并且他们寻求将其应用程序迁移到用于 .NET Core 3.0 和更高版本的现代 RPC 环境。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-164">This guide was written for developers working in .NET Framework or .NET Core who have used WCF and who are seeking to migrate their applications to a modern RPC environment for .NET Core 3.0 and later versions.</span></span> <span data-ttu-id="7f1c4-165">本指南对于升级或考虑升级到 .NET Core 3.0 以及希望使用内置 gRPC 工具的开发人员可能更普遍有用。</span><span class="sxs-lookup"><span data-stu-id="7f1c4-165">The guide might also be useful more generally for developers upgrading or considering upgrading to .NET Core 3.0 and who want to use the built-in gRPC tools.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="7f1c4-166">[上一页](index.md)
>[下一页](grpc-overview.md)</span><span class="sxs-lookup"><span data-stu-id="7f1c4-166">[Previous](index.md)
[Next](grpc-overview.md)</span></span>
