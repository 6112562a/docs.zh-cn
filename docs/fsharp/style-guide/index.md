---
title: F# 样式指南
description: 了解良好 F# 代码的五个原则。
ms.date: 12/10/2018
ms.openlocfilehash: 9f47257626e04b09b546de2ae315d48d791678be
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/14/2020
ms.locfileid: "79401111"
---
# <a name="f-style-guide"></a><span data-ttu-id="e0a28-103">F# 样式指南</span><span class="sxs-lookup"><span data-stu-id="e0a28-103">F# style guide</span></span>

<span data-ttu-id="e0a28-104">以下文章介绍了 F# 代码的格式设置指南以及语言功能的专题指南以及如何使用它们。</span><span class="sxs-lookup"><span data-stu-id="e0a28-104">The following articles describe guidelines for formatting F# code and topical guidance for features of the language and how they should be used.</span></span>

<span data-ttu-id="e0a28-105">本指南是根据在具有不同程序员组的大型代码库中使用 F# 制定的。</span><span class="sxs-lookup"><span data-stu-id="e0a28-105">This guidance has been formulated based on the use of F# in large codebases with a diverse group of programmers.</span></span> <span data-ttu-id="e0a28-106">本指南通常会导致 F# 的成功使用，并最大限度地减少程序要求随时间变化时的挫折感。</span><span class="sxs-lookup"><span data-stu-id="e0a28-106">This guidance generally leads to successful use of F# and minimizes frustrations when requirements for programs change over time.</span></span>

## <a name="five-principles-of-good-f-code"></a><span data-ttu-id="e0a28-107">良好 F# 代码的五个原则</span><span class="sxs-lookup"><span data-stu-id="e0a28-107">Five principles of good F# code</span></span>

<span data-ttu-id="e0a28-108">在编写 F# 代码时，请记住以下原则，尤其是在随时间变化的系统中。</span><span class="sxs-lookup"><span data-stu-id="e0a28-108">Keep the following principles in mind any time you write F# code, especially in systems that will change over time.</span></span> <span data-ttu-id="e0a28-109">进一步文章中的每一条指导都源于这五点。</span><span class="sxs-lookup"><span data-stu-id="e0a28-109">Every piece of guidance in further articles stems from these five points.</span></span>

1. <span data-ttu-id="e0a28-110">**好的 F# 代码简洁、富有表现力且可组合**</span><span class="sxs-lookup"><span data-stu-id="e0a28-110">**Good F# code is succinct, expressive, and composable**</span></span>

    <span data-ttu-id="e0a28-111">F# 具有许多功能，允许您以更少的代码行表示操作并重用通用功能。</span><span class="sxs-lookup"><span data-stu-id="e0a28-111">F# has many features that allow you to express actions in fewer lines of code and reuse generic functionality.</span></span> <span data-ttu-id="e0a28-112">F# 核心库还包含许多有用的类型和函数，用于处理常见的数据集合。</span><span class="sxs-lookup"><span data-stu-id="e0a28-112">The F# core library also contains many useful types and functions for working with common collections of data.</span></span> <span data-ttu-id="e0a28-113">您自己的函数和 F# 核心库（或其他库）中的函数的组成是常规惯用 F# 编程的一部分。</span><span class="sxs-lookup"><span data-stu-id="e0a28-113">Composition of your own functions and those in the F# core library (or other libraries) is a part of routine idiomatic F# programming.</span></span> <span data-ttu-id="e0a28-114">通常，如果能够用更少的代码行来表达问题的解决方案，其他开发人员（或您未来的自我）将非常感激。</span><span class="sxs-lookup"><span data-stu-id="e0a28-114">As a general rule, if you can express a solution to a problem in fewer lines of code, other developers (or your future self) will be appreciative.</span></span> <span data-ttu-id="e0a28-115">强烈建议您使用 FSharp.Core、F# 运行[的庞大 .NET 库](../../../api/index.md)等库，或者当您需要执行一项不平凡的任务时，使用[NuGet](https://www.nuget.org/)上的第三方包。</span><span class="sxs-lookup"><span data-stu-id="e0a28-115">It's also highly recommended that you use a library such as FSharp.Core, the [vast .NET libraries](../../../api/index.md) that F# runs on, or a third-party package on [NuGet](https://www.nuget.org/) when you need to do a nontrivial task.</span></span>

2. <span data-ttu-id="e0a28-116">**好的 F# 代码是可互操作的**</span><span class="sxs-lookup"><span data-stu-id="e0a28-116">**Good F# code is interoperable**</span></span>

    <span data-ttu-id="e0a28-117">互操作可以采取多种形式，包括使用不同语言的代码。</span><span class="sxs-lookup"><span data-stu-id="e0a28-117">Interoperation can take multiple forms, including consuming code in different languages.</span></span> <span data-ttu-id="e0a28-118">其他调用方互操作的代码边界是正确获取的关键部分，即使调用方也位于 F#中也是如此。</span><span class="sxs-lookup"><span data-stu-id="e0a28-118">The boundaries of your code that other callers interoperate with are critical pieces to get right, even if the callers are also in F#.</span></span> <span data-ttu-id="e0a28-119">编写 F#时，应始终考虑如何将其他代码调用您编写的代码，包括它们是否从其他语言（如 C#）调用。</span><span class="sxs-lookup"><span data-stu-id="e0a28-119">When writing F#, you should always be thinking about how other code will call into the code you're writing, including if they do so from another language like C#.</span></span> <span data-ttu-id="e0a28-120">[F# 组件设计指南](component-design-guidelines.md)详细介绍了互操作性。</span><span class="sxs-lookup"><span data-stu-id="e0a28-120">The [F# Component Design Guidelines](component-design-guidelines.md) describe interoperability in detail.</span></span>

3. <span data-ttu-id="e0a28-121">**好的 F# 代码使用对象编程，而不是面向对象**</span><span class="sxs-lookup"><span data-stu-id="e0a28-121">**Good F# code makes use of object programming, not object orientation**</span></span>

    <span data-ttu-id="e0a28-122">F# 完全支持使用 .NET 中的对象进行编程，包括[类](../language-reference/classes.md)、[接口](../language-reference/interfaces.md)、[访问修改器](../language-reference/access-control.md)、[抽象类](../language-reference/abstract-classes.md)等。</span><span class="sxs-lookup"><span data-stu-id="e0a28-122">F# has full support for programming with objects in .NET, including [classes](../language-reference/classes.md), [interfaces](../language-reference/interfaces.md), [access modifiers](../language-reference/access-control.md), [abstract classes](../language-reference/abstract-classes.md), and so on.</span></span> <span data-ttu-id="e0a28-123">对于更复杂的功能代码（如必须具有上下文感知功能的函数），对象可以轻松地以函数无法的方式封装上下文信息。</span><span class="sxs-lookup"><span data-stu-id="e0a28-123">For more complicated functional code, such as functions that must be context-aware, objects can easily encapsulate contextual information in ways that functions cannot.</span></span> <span data-ttu-id="e0a28-124">[可选参数](../language-reference/members/methods.md#optional-arguments)和谨慎使用[重载](../language-reference/members/methods.md#overloaded-methods)等功能可以使调用方更轻松地使用此功能。</span><span class="sxs-lookup"><span data-stu-id="e0a28-124">Features such as [optional parameters](../language-reference/members/methods.md#optional-arguments) and careful use of [overloading](../language-reference/members/methods.md#overloaded-methods) can make consumption of this functionality easier for callers.</span></span>

4. <span data-ttu-id="e0a28-125">**良好的 F# 代码在未暴露突变的情况下表现良好**</span><span class="sxs-lookup"><span data-stu-id="e0a28-125">**Good F# code performs well without exposing mutation**</span></span>

    <span data-ttu-id="e0a28-126">编写高性能代码，必须使用突变，这已不为人有。</span><span class="sxs-lookup"><span data-stu-id="e0a28-126">It's no secret that to write high-performance code, you must use mutation.</span></span> <span data-ttu-id="e0a28-127">毕竟，这是计算机的工作原理。</span><span class="sxs-lookup"><span data-stu-id="e0a28-127">It's how computers work, after all.</span></span> <span data-ttu-id="e0a28-128">此类代码通常容易出错，难以正确。</span><span class="sxs-lookup"><span data-stu-id="e0a28-128">Such code is often error-prone and difficult to get right.</span></span> <span data-ttu-id="e0a28-129">避免向呼叫者公开突变。</span><span class="sxs-lookup"><span data-stu-id="e0a28-129">Avoid exposing mutation to callers.</span></span> <span data-ttu-id="e0a28-130">相反，[构建一个功能接口，在性能至关重要时隐藏基于突变的实现](conventions.md#performance)。</span><span class="sxs-lookup"><span data-stu-id="e0a28-130">Instead, [build a functional interface that hides a mutation-based implementation](conventions.md#performance) when performance is critical.</span></span>

5. <span data-ttu-id="e0a28-131">**好的 F# 代码是可工具的**</span><span class="sxs-lookup"><span data-stu-id="e0a28-131">**Good F# code is toolable**</span></span>

    <span data-ttu-id="e0a28-132">工具对于在大型代码库中工作非常宝贵，您可以编写 F# 代码，以便可以更有效地将其用于 F# 语言工具。</span><span class="sxs-lookup"><span data-stu-id="e0a28-132">Tools are invaluable for working in large codebases, and you can write F# code such that it can be used more effectively with F# language tooling.</span></span> <span data-ttu-id="e0a28-133">一个例子是确保您不会使用无点编程样式过度使用，以便可以使用调试器检查中间值。</span><span class="sxs-lookup"><span data-stu-id="e0a28-133">One example is making sure you don't overdo it with a point-free style of programming, so that intermediate values can be inspected with a debugger.</span></span> <span data-ttu-id="e0a28-134">另一个示例是使用[XML 文档注释](../language-reference/xml-documentation.md)来描述构造，以便编辑器中的工具提示可以在调用站点显示这些注释。</span><span class="sxs-lookup"><span data-stu-id="e0a28-134">Another example is using [XML documentation comments](../language-reference/xml-documentation.md) describing constructs such that tooltips in editors can display those comments at the call site.</span></span> <span data-ttu-id="e0a28-135">始终思考如何被其他程序员使用他们的工具读取、导航、调试和操作代码。</span><span class="sxs-lookup"><span data-stu-id="e0a28-135">Always think about how your code will be read, navigated, debugged, and manipulated by other programmers with their tools.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e0a28-136">后续步骤</span><span class="sxs-lookup"><span data-stu-id="e0a28-136">Next steps</span></span>

<span data-ttu-id="e0a28-137">[F# 代码格式设置指南](formatting.md)提供有关如何设置代码格式以便易于阅读的指导。</span><span class="sxs-lookup"><span data-stu-id="e0a28-137">The [F# code formatting guidelines](formatting.md) provide guidance on how to format code so that it is easy to read.</span></span>

<span data-ttu-id="e0a28-138">[F# 编码约定](conventions.md)为 F# 编程习惯用语提供指导，这将有助于对较大的 F# 代码库进行长期维护。</span><span class="sxs-lookup"><span data-stu-id="e0a28-138">The [F# coding conventions](conventions.md) provide guidance for F# programming idioms that will help the long-term maintenance of larger F# codebases.</span></span>

<span data-ttu-id="e0a28-139">[F# 组件设计指南](component-design-guidelines.md)为编写 F# 组件（如库）提供了指南。</span><span class="sxs-lookup"><span data-stu-id="e0a28-139">The [F# component design guidelines](component-design-guidelines.md) provide guidance for authoring F# components, such as libraries.</span></span>
