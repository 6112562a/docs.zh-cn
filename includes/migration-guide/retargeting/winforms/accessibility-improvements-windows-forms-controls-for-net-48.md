---
ms.openlocfilehash: 140a9044b553a008112af93efb8eeba2bf3b07cb
ms.sourcegitcommit: 1e7ac70be1b4d89708c0d9552897515f2cbf52c4
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/24/2019
ms.locfileid: "68440251"
---
### <a name="accessibility-improvements-in-windows-forms-controls-for-net-48"></a>适用于 .NET 4.8 的 Windows 窗体控件中的辅助功能改进

|   |   |
|---|---|
|详细信息|Windows 窗体框架持续改进其与辅助功能技术的协作方式，以更好地支持 Windows 窗体客户。 其中包括以下更改：<ul><li>改进高对比度模式的显示效果。</li><li>对讲述人交互的更改。</li><li>辅助功能层次结构中的更改（通过 UI 自动化树改进导航）。</li></ul>|
|建议|<strong>如何选择加入或选择退出这些更改</strong>为使应用程序从这些更改中获益，它必须在 .NET Framework 4.8 上运行。 应用程序可通过以下任一方式选择加入这些更改：<ul><li>重新编译为面向 .NET Framework 4.8。 对于面向 .NET Framework 4.8 的 Windows 窗体应用程序，这些辅助功能更改将默认启用。</li><li>它面向 .NET Framework 4.7.2 或更低版本，通过向应用配置文件的 <code>&lt;runtime&gt;</code> 部分添加以下 [AppContext 开关](https://docs.microsoft.com/dotnet/framework/configure-apps/file-schema/runtime/appcontextswitchoverrides-element)并将其设置为 <code>false</code>，可选择弃用旧版辅助功能行为，如下例所示。</li></ul><pre><code class="lang-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&#13;&#10;&lt;configuration&gt;&#13;&#10;&lt;startup&gt;&#13;&#10;&lt;supportedRuntime version=&quot;v4.0&quot; sku=&quot;.NETFramework,Version=v4.7&quot;/&gt;&#13;&#10;&lt;/startup&gt;&#13;&#10;&lt;runtime&gt;&#13;&#10;&lt;!-- AppContextSwitchOverrides value attribute is in the form of &#39;key1=true/false;key2=true/false  --&gt;&#13;&#10;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false;Switch.UseLegacyAccessibilityFeatures.2=false;Switch.UseLegacyAccessibilityFeatures.3=false&quot; /&gt;&#13;&#10;&lt;/runtime&gt;&#13;&#10;&lt;/configuration&gt;&#13;&#10;</code></pre>请注意，要选择加入 .NET Framework 4.8 中添加的辅助功能，还必须选择加入 .NET Framework 4.7.1 及 4.7.2 的辅助功能。 面向 .NET Framework 4.8 且希望保留旧版辅助功能行为的应用程序可以通过将此 AppContext 开关显式设置为 <code>true</code> 来选择加入使用旧版辅助功能。启用键盘 ToolTip 调用支持需要将 <code>Switch.System.Windows.Forms.UseLegacyToolTipDisplay=false</code> 行添加到 AppContextSwitchOverrides 值：<pre><code class="lang-xml">&#39;&lt;AppContextSwitchOverrides value=&quot;Switch.UseLegacyAccessibilityFeatures=false;Switch.UseLegacyAccessibilityFeatures.2=false;Switch.UseLegacyAccessibilityFeatures.3=false;Switch.System.Windows.Forms.UseLegacyToolTipDisplay=false&quot; /&gt;&#39;&#13;&#10;</code></pre>请注意，启用此功能需要选择加入上述 .NET Framework 4.7.1 到 4.8 的辅助功能。 此外，如果未选择加入任何辅助功能，但选择加入了工具提示显示功能，则首次访问这些功能时将引发运行时 <xref:System.NotSupportedException>。 异常消息表明键盘工具提示需要启用第 3 级辅助功能改进。<strong>在高对比度主题中使用 OS 定义的颜色</strong><ul><li>改进了高对比度主题。</li></ul><strong>改进了讲述人支持</strong><ul><li>在说出 <xref:System.Windows.Forms.DataGridViewCell> 的辅助功能名称时，讲述人现在会说出 <xref:System.Windows.Forms.DataGridViewColumn> 的排序方向。</li></ul><strong>改进了 CheckedListBox 辅助功能支持</strong><ul><li>改进了 <xref:System.Windows.Forms.CheckedListBox> 控件的讲述人支持。 使用键盘导航到 <xref:System.Windows.Forms.CheckedListBox> 控件时，讲述人会聚焦 <xref:System.Windows.Forms.CheckedListBox> 项并说出该项。</li><li>控件变得聚焦时，空的 CheckedListBox 控件现包含为第一个虚拟项绘制的焦点矩形。</li></ul><strong>改进了 ComboBox 辅助功能支持</strong><ul><li>为 <xref:System.Windows.Forms.ComboBox> 控件启用了 UI 自动化支持，并且可以使用 UI 自动化通知和其他 UI 自动化功能。</li></ul><strong>改进了 DataGridView 辅助功能支持</strong><ul><li>为 <xref:System.Windows.Forms.DataGridView> 控件启用了 UI 自动化支持，并且可以使用 UI 自动化通知和其他 UI 自动化功能。</li><li>对应于 <xref:System.Windows.Forms.DataGridViewComboBoxEditingControl> 或 <xref:System.Windows.Forms.DataGridViewTextBoxEditingControl> 的 UI 自动化元素现在是相应编辑单元的子元素。</li></ul><strong>改进了 LinkLabel 辅助功能支持</strong><ul><li>改进了 <xref:System.Windows.Forms.LinkLabel> 控件辅助功能：如果禁用了对应的 <xref:System.Windows.Forms.LinkLabel> 控件，讲述人会指示链接的禁用状态。</li></ul><strong>改进了 ProgressBar 辅助功能支持</strong><ul><li>为 <xref:System.Windows.Forms.ProgressBar> 控件启用了 UI 自动化支持，并且可以使用 UI 自动化通知和其他 UI 自动化功能。 开发人员现可使用 UI 自动化通知，讲述人可以通过这些通知来指示进度。</li></ul>有关 UI 自动化事件概述（包括 UI 自动化通知事件）的概述，请参阅 [UI 自动化事件概述](https://docs.microsoft.com/windows/desktop/WinAuto/uiauto-eventsoverview)。<strong>改进了 PropertyGrid 辅助功能支持</strong><ul><li>为 <xref:System.Windows.Forms.PropertyGrid> 控件启用了 UI 自动化支持，并且可以使用 UI 自动化通知和其他 UI 自动化功能。</li><li>与当前编辑的属性对应的 UI 自动化元素现在是对应属性项 UI 自动化元素的子元素。</li><li>如果父 <xref:System.Windows.Forms.PropertyGrid> 控件设置为类别视图，则 UI 自动化属性项元素现在是对应类别元素的子元素。</li></ul><strong>改进了 ToolStrip 支持</strong><ul><li>为 <xref:System.Windows.Forms.ToolStrip> 控件启用了 UI 自动化支持，并且可以使用 UI 自动化通知和其他 UI 自动化功能。</li><li>改进了对 <xref:System.Windows.Forms.ToolStrip> 项的导航。</li><li>在项模式下，讲述人焦点不会消失，也不会转到隐藏项。</li></ul><strong>改进了视觉提示</strong><ul><li>空的 <xref:System.Windows.Forms.CheckedListBox> 控件现在在接收焦点时显示焦点指示器。</li></ul>注意:在运行时为控件启用了 UI 自动化支持，但设计时未使用该支持。 有关 UI 自动化的概述，请参阅 [UI 自动化概述](https://docs.microsoft.com/dotnet/framework/ui-automation/ui-automation-overview)。</p><strong>通过键盘调用控件的工具提示</strong><ul><li>现可通过使用键盘聚焦控件来调用控件工具提示。 应用程序必须显式启用此功能（请参阅<strong>&quot;如何选择加入或退出这些更改&quot;</strong>部分）</li></ul>|
|范围|主要|
|Version|4.8|
|类型|重定目标|
